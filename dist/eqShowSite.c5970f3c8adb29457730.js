!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="{$Think.config.site_url_cdn_static}/dist",t(t.s=2)}({2:function(module,exports,__webpack_require__){!function(window,angular,undefined){function QR8bitByte(e){this.mode=QRMode.MODE_8BIT_BYTE,this.data=e}function QRCode(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function QRPolynomial(e,t){if(e.length==undefined)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function QRRSBlock(e,t){this.totalCount=e,this.dataCount=t}function QRBitBuffer(){this.buffer=new Array,this.length=0}function randomRange(e,t){return Math.random()*(t-e)+e}function checkBrower(){return navigator.userAgent.indexOf("Safari")>0&&navigator.userAgent.indexOf("Chrome")<=0||void 0}function mobilecheck(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),document.body&&document.body.clientWidth&&document.body.clientHeight&&document.body.clientWidth<350&&document.body.clientHeight<500&&(e=!0),e}function iphoneCheck(){return/iPhone/i.test(navigator.userAgent)&&!0,!0}function isWeixin(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function isAndroid(){var e=navigator.userAgent;return navigator.appVersion,e.indexOf("Android")>-1||e.indexOf("Linux")>-1}function tabletCheck(){return/ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())}function countCharacters(e){var t=0;if(!e)return 0;for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);i>=1&&126>=i||i>=65376&&65439>=i?t++:t+=2}return t}function renderPage(e,t,n,i){e.templateParser("jsonParser").parse({def:n[t-1],appendTo:"#page"+t,mode:"view",disEvent:i}),listPages=n;var a,s,o=1,r=$(".z-current").width(),l=$(".z-current").height();imageWidth=$(".m-img").width(),imageHeight=$(".m-img").height(),r/l>=320/486?(o=l/486,a=(r/o-320)/2):(o=r/320,s=(l/o-486)/2),window!=window.top&&$(".phoneBox .nr").css({width:"100%",height:"100%",overflow:"hidden","transform-origin":"top left",transform:"scale("+o+")"}),window!==window.top&&mobilecheck()||$(".edit_area").css({marginTop:s||0}),a&&$(".edit_area").css({marginLeft:a}),tplCount==n.length&&$("#eqMobileViewport").attr("content","width=320, initial-scale="+o+", maximum-scale="+o+", user-scalable=no"),n[t-1].properties&&n[t-1].properties.longPage&&function(e,t){var n=t.properties.longPage,i=1;if(t.elements)for(var a=0;a<t.elements.length;a++)if(3==t.elements[a].type){2==t.elements[a].properties.croptype&&(i=2);break}var s,o,r,l,p,u=window.scene?scene.pageMode:0,g=0,m={touchPos:0,pLen:-486*(n-1),contain:$("#page"+e),cH:mobilecheck()?$(document).height():486,stopInertiaMove:!1},h=1==i?".edit_area":".edit_wrapper";0==u||1==u||2==u||6==u||7==u||8==u||11==u||12==u||13==u?u="NS":(u="WE",$('<section class="u-arrow-bottom"><div class="pre-wrap"><div class="pre-box1"><div class="pre1"></div></div><div class="pre-box2"><div class="pre2"></div></div></div></section>').appendTo("#page"+e));var f=0,v=0;m.contain.on("mousedown touchstart",function(e){return"button"==e.target.tagName.toLowerCase()||e.target.getAttribute("data")||e.target.getAttribute("href")||"8"==e.target.getAttribute("ctype")||"z"==e.target.getAttribute("ctype")?void e.stopPropagation():(e.stopPropagation(),e.preventDefault(),void(m.touchPos<m.pLen||m.touchPos>0||(s=!0,r=0,m.stopInertiaMove=!0,o=e.originalEvent.touches?e.originalEvent.changedTouches[0].clientY:e.clientY,"WE"==u&&(l=e.originalEvent.touches?e.originalEvent.changedTouches[0].clientX:e.clientX),v=m.touchPos,f=Date.now())))}),m.contain.on("mousemove touchmove",function(e){if(e.stopPropagation(),s){if(r=m.touchPos+(e.originalEvent.touches?e.originalEvent.changedTouches[0].clientY:e.clientY)-o,"WE"==u&&(p=(e.originalEvent.touches?e.originalEvent.touches[0].clientX:e.clientX)-l,Math.abs(p)>Math.abs(r-m.touchPos)&&!scene.property.forbidHandFlip)){if(p>0){if(5>p)return;eqxiu.prePage()}else eqxiu.nextPage();return void(s=!1)}if(r<m.pLen||r>5)return s=!1,r>0&&"NS"==u&&(scene.property.forbidHandFlip?m.touchPos=0:eqxiu.prePage()),void(0>r&&"NS"==u&&(scene.property.forbidHandFlip?m.touchPos=m.pLen:eqxiu.nextPage()));if(r>0)return;m.stopInertiaMove=!0,$(this).find(h).css("transform","translate3d(0,"+(r-g)+"px,0)"),$(this).find(h).css("-webkit-transform","translate3d(0,"+(r-g)+"px,0)");var t=$(this).find(".alock");if(t.length>0)for(var n=0;n<t.length;n++)d(t[n],t[n].style.transform,g-r);var i=Date.now();$(document).trigger("pageScrollPos",[r-m.cH]),i-f>300&&(f=i,v=r),m.stopInertiaMove=!1}}),m.contain.on("mouseup touchend mouseleave",function(e){if(e.stopPropagation(),s){if(s=!1,0===r||r-v==0)return void $(e.target).trigger("click","longPage");if(!(0>r&&r>m.pLen))return r>=0?void(m.touchPos=0):void(m.touchPos=m.pLen);m.touchPos=r,"WE"==u&&m.contain.find(".u-arrow-bottom").hide();var t=Date.now(),n=(r-v)/(t-f);!function(e,t,n,i){function a(){if(!i.stopInertiaMove){var r=Date.now(),l=r-t,c=e+l*o;if(!(0>s*c)){var p=(e+c)/2*l,u=n+p;if(!(u>0||u<i.pLen)){i.timmer=null,i.contain.find(h).css("transform","translate3d(0,"+(u-g)+"px,0)"),i.contain.find(h).css("-webkit-transform","translate3d(0,"+(u-g)+"px,0)");var m=i.contain.find(".alock");if(m.length>0)for(var f=0;f<m.length;f++)d(m[f],m[f].style.transform,g-u);i.touchPos=u,$(document).trigger("pageScrollPos",[u-i.cH]),setTimeout(a,10)}}}}var s=0>e?-1:1,o=-6e-4*s;a()}(n,t,r,m)}}),$(document).on("clearTouchPos",function(){m.touchPos=0,m.contain.find(h).css("transform","translateY(0px)"),m.contain.find(h).css("-webkit-transform","translateY(0px)");var e,t=m.contain.find(".alock");if(t.length>0)for(var n=0;n<t.length;n++)e=t[n].style.transform.replace(c,""),t[n].style.transform="translate3d(0,0,0) "+e})}(t,n[t-1]);var c=/translate3d\(.*?\)/g,d=function(e,t,n){(t=t.replace(c,""))&&(e.style.transform="translate3d(0,"+n+"px,0) "+t)}}function preview(e,t){function n(n,i,a){i.on("$destroy",function(){i.unbind("click")}),i.click(function(){e.getPrintBase(a.viewId).then(function(e){if(e){var n=e.properties;if(n&&n.shareType){var i=$("#preview_wrap"),s=$("#pc_preview");s.attr("src",PREFIX_HOST+"/print/share.html?code="+a.viewCode),i.show(),i.find("span").click(function(){i.hide(),s.attr("src",""),$(this).unbind("click")})}else t.openConfirmDialog({msg:"您还没有分享此作品，请分享后再预览",confirmName:"分享"},function(){window.open("print/shareSet/"+a.viewId,"_blank")})}})})}return{restrict:"A",scope:{},link:n}}!function(e){function t(t){return t.classList?t.classList:e(t).attr("class").match(/\S+/gi)}e.fn.ShareLink=function(n){function i(e){var t=o[e];return t=t.replace("{url}",encodeURIComponent(n.url)),t=t.replace("{title}",encodeURIComponent(n.title)),t=t.replace("{text}",encodeURIComponent(n.text)),t=t.replace("{image}",encodeURIComponent(n.image))}var a={title:"",text:"",image:"",url:window.location.href,class_prefix:"s_"},n=e.extend({},a,n),s=n.class_prefix.length,o={twitter:"https://twitter.com/intent/tweet?url={url}&text={text}",pinterest:"https://www.pinterest.com/pin/create/button/?media={image}&url={url}&description={text}",facebook:"https://www.facebook.com/sharer.php?u={url}",vk:"https://vkontakte.ru/share.php?url={url}&title={title}&description={text}&image={image}&noparse=true",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={text}&source={url}",myworld:"https://connect.mail.ru/share?url={url}&title={title}&description={text}&imageurl={image}",odnoklassniki:"http://odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl={url}&st.comments={text}",tumblr:"https://tumblr.com/share?s=&v=3&t={title}&u={url}",blogger:"https://blogger.com/blog-this.g?t={text}&n={title}&u={url}",delicious:"https://delicious.com/save?url={url}&title={title}",plus:"https://plus.google.com/share?url={url}",digg:"https://digg.com/submit?url={url}&title={title}",reddit:"http://reddit.com/submit?url={url}&title={title}",stumbleupon:"https://www.stumbleupon.com/submit?url={url}&title={title}",pocket:"https://getpocket.com/edit?url={url}&title={title}",chiq:"http://www.chiq.com/create/bookmarklet?u={url}&i={image}&d={title}&c={url}",qrifier:"http://qrifier.com/q?inc=qr&type=url&size=350&string={url}",qrsrc:"http://www.qrsrc.com/default.aspx?shareurl={url}",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}",tulinq:"http://www.tulinq.com/enviar?url={url}&title={title}",misterwong:"http://www.mister-wong.com/index.php?action=addurl&bm_url={url}&bm_description={title}&bm_notice=",sto_zakladok:"http://www.100zakladok.ru/save/?bmurl={url}&bmtitle={title}",two_linkme:"http://www.2linkme.com/?collegamento={url}&id=2lbar",adifni:"http://www.adifni.com/account/bookmark/?bookmark_url={url}",amazonwishlist:"http://www.amazon.com/gp/wishlist/static-add?u={url}&t={title}",amenme:"http://www.amenme.com/AmenMe/Amens/AmenToThis.aspx?url={url}&title={title}",aim:"http://lifestream.aol.com/share/?url={url}&title={title}&description={text} ",aolmail:"http://webmail.aol.com/25045/aol/en-us/Mail/compose-message.aspx?to=&subject={title}&body={{content}}",arto:"http://www.arto.com/section/linkshare/?lu={url}&ln={title}",baidu:"http://cang.baidu.com/do/add?it={title}&iu={url}&fr=ien&dc={text}",bitly:"https://bitly.com/a/bitmarklet?u={url}",bizsugar:"http://www.bizsugar.com/bizsugarthis.php?url={url}",blinklist:"http://www.blinklist.com/blink?u={url}&t={title}&d={text}",blip:"http://blip.pl/dashboard?body={title}%3A%20{url}",blogmarks:"http://blogmarks.net/my/new.php?mini=1&simple=1&url={url}&title={title}&content={text}",blurpalicious:"http://www.blurpalicious.com/submit/?url={url}&title={title}&desc={text}",bobrdobr:"http://bobrdobr.ru/addext.html?url={url}&title={title}&desc={text}",bonzobox:"http://bonzobox.com/toolbar/add?u={url}&t={title}&desc={text}",bookmerkende:"http://www.bookmerken.de/?url={url}&title={title}",box:"https://www.box.net/api/1.0/import?import_as=link&url={url}&name={title}&description={text}",bryderi:"http://bryderi.se/add.html?u={url}",buddymarks:"http://buddymarks.com/add_bookmark.php?bookmark_title={title}&bookmark_url={url}&bookmark_desc={text}",camyoo:"http://www.camyoo.com/note.html?url={url}",care2:"http://www.care2.com/news/compose?sharehint=news&share[share_type]news&bookmarklet=Y&share[title]={title}&share[link_url]={url}&share[content]={text}",citeulike:"http://www.citeulike.org/posturl?url={url}&title={title}",classicalplace:"http://www.classicalplace.com/?u={url}&t={title}&c={text}",cosmiq:"http://www.cosmiq.de/lili/my/add?url={url}",diggita:"http://www.diggita.it/submit.php?url={url}&title={title}",diigo:"http://www.diigo.com/post?url={url}&title={title}&desc={text}",domelhor:"http://domelhor.net/submit.php?url={url}&title={title}",dotnetshoutout:"http://dotnetshoutout.com/Submit?url={url}&title={title}",douban:"http://www.douban.com/recommend/?url={url}&title={title}",dropjack:"http://www.dropjack.com/submit.php?url={url}",edelight:"http://www.edelight.de/geschenk/neu?purl={url}",ekudos:"http://www.ekudos.nl/artikel/nieuw?url={url}&title={title}&desc={text}",elefantapl:"http://elefanta.pl/member/bookmarkNewPage.action?url={url}&title={title}&bookmarkVO.notes=",embarkons:"http://www.embarkons.com/sharer.php?u={url}&t={title}",evernote:"http://www.evernote.com/clip.action?url={url}&title={title}",extraplay:"http://www.extraplay.com/members/share.php?url={url}&title={title}&desc={text}",ezyspot:"http://www.ezyspot.com/submit?url={url}&title={title}",fabulously40:"http://fabulously40.com/writeblog?subject={title}&body={url}",informazione:"http://fai.informazione.it/submit.aspx?url={url}&title={title}&desc={text}",fark:"http://www.fark.com/cgi/farkit.pl?u={url}&h={title}",farkinda:"http://www.farkinda.com/submit?url={url}",favable:"http://www.favable.com/oexchange?url={url}&title={title}&desc={text}",favlogde:"http://www.favlog.de/submit.php?url={url}",flaker:"http://flaker.pl/add2flaker.php?title={title}&url={url}",folkd:"http://www.folkd.com/submit/{url}",fresqui:"http://fresqui.com/enviar?url={url}",friendfeed:"http://friendfeed.com/share?url={url}&title={title}",funp:"http://funp.com/push/submit/?url={url}",fwisp:"http://fwisp.com/submit.php?url={url}",givealink:"http://givealink.org/bookmark/add?url={url}&title={title}",gmail:"http://mail.google.com/mail/?view=cm&fs=1&to=&su={title}&body={text}&ui=1",goodnoows:"http://goodnoows.com/add/?url={url}",google:"http://www.google.com/bookmarks/mark?op=add&bkmk={url}&title={title}&annotation={text}",googletranslate:"http://translate.google.com/translate?hl=en&u={url}&tl=en&sl=auto",greaterdebater:"http://greaterdebater.com/submit/?url={url}&title={title}",hackernews:"http://news.ycombinator.com/submitlink?u={url}&t={title}",hatena:"http://b.hatena.ne.jp/bookmarklet?url={url}&btitle={title}",hedgehogs:"http://www.hedgehogs.net/mod/bookmarks/add.php?address={url}&title={title}",hotmail:"http://www.hotmail.msn.com/secure/start?action=compose&to=&subject={title}&body={{content}}",w3validator:"http://validator.w3.org/check?uri={url}&charset=%28detect+automatically%29&doctype=Inline&group=0",ihavegot:"http://www.ihavegot.com/share/?url={url}&title={title}&desc={text}",instapaper:"http://www.instapaper.com/edit?url={url}&title={title}&summary={text}",isociety:"http://isociety.be/share/?url={url}&title={title}&desc={text}",iwiw:"http://iwiw.hu/pages/share/share.jsp?v=1&u={url}&t={title}",jamespot:"http://www.jamespot.com/?action=spotit&u={url}&t={title}",jumptags:"http://www.jumptags.com/add/?url={url}&title={title}",kaboodle:"http://www.kaboodle.com/grab/addItemWithUrl?url={url}&pidOrRid=pid=&redirectToKPage=true",kaevur:"http://kaevur.com/submit.php?url={url}",kledy:"http://www.kledy.de/submit.php?url={url}&title={title}",librerio:"http://www.librerio.com/inbox?u={url}&t={title}",linkuj:"http://linkuj.cz?id=linkuj&url={url}&title={title}&description={text}&imgsrc=",livejournal:"http://www.livejournal.com/update.bml?subject={title}&event={url}",logger24:"http://logger24.com/?url={url}",mashbord:"http://mashbord.com/plugin-add-bookmark?url={url}",meinvz:"http://www.meinvz.net/Suggest/Selection/?u={url}&desc={title}&prov=addthis.com",mekusharim:"http://mekusharim.walla.co.il/share/share.aspx?url={url}&title={title}",memori:"http://memori.ru/link/?sm=1&u_data[url]={url}",meneame:"http://www.meneame.net/submit.php?url={url}",mixi:"http://mixi.jp/share.pl?u={url}",moemesto:"http://moemesto.ru/post.php?url={url}&title={title}",myspace:"http://www.myspace.com/Modules/PostTo/Pages/?u={url}&t={title}&c=",n4g:"http://www.n4g.com/tips.aspx?url={url}&title={title}",netlog:"http://www.netlog.com/go/manage/links/?view=save&origin=external&url={url}&title={title}&description={text}",netvouz:"http://netvouz.com/action/submitBookmark?url={url}&title={title}&popup=no&description={text}",newstrust:"http://newstrust.net/submit?url={url}&title={title}&ref=addthis",newsvine:"http://www.newsvine.com/_tools/seed&save?u={url}&h={title}&s={text}",nujij:"http://nujij.nl/jij.lynkx?u={url}&t={title}&b={text}",oknotizie:"http://oknotizie.virgilio.it/post?title={title}&url={url}",oyyla:"http://www.oyyla.com/gonder?phase=2&url={url}",pdfonline:"http://savepageaspdf.pdfonline.com/pdfonline/pdfonline.asp?cURL={url}",pdfmyurl:"http://pdfmyurl.com?url={url}",phonefavs:"http://phonefavs.com/bookmarks?action=add&address={url}&title={title}",plaxo:"http://www.plaxo.com/events?share_link={url}&desc={text}",plurk:"http://www.plurk.com/m?content={url}+({title})&qualifier=shares ",posteezy:"http://posteezy.com/node/add/story?title={title}&body={url}",pusha:"http://www.pusha.se/posta?url={url}&title={title}&description={text}",rediff:"http://share.rediff.com/bookmark/addbookmark?title={title}&bookmarkurl={url}",redkum:"http://www.redkum.com/add?url={url}&step=1&title={title}",scoopat:"http://scoop.at/submit?url={url}&title={title}&body={text}",sekoman:"http://sekoman.lv/home?status={title}&url={url}",shaveh:"http://shaveh.co.il/submit.php?url={url}&title={title}",shetoldme:"http://shetoldme.com/publish?url={url}&title={title}&body={text}",sinaweibo:"http://v.t.sina.com.cn/share/share.php?url={url}&title={title}",sodahead:"http://www.sodahead.com/news/submit/?url={url}&title={title}",sonico:"http://www.sonico.com/share.php?url={url}&title={title}",springpad:"http://springpadit.com/s?type=lifemanagr.Bookmark&url={url}&name={title}",startaid:"http://www.startaid.com/index.php?st=AddBrowserLink&type=Detail&v=3&urlname={url}&urltitle={title}&urldesc={text}",startlap:"http://www.startlap.hu/sajat_linkek/addlink.php?url={url}&title={title}",studivz:"http://www.studivz.net/Suggest/Selection/?u={url}&desc={title}&prov=addthis.com",stuffpit:"http://www.stuffpit.com/add.php?produrl={url}",stumpedia:"http://www.stumpedia.com/submit?url={url}",svejo:"http://svejo.net/story/submit_by_url?url={url}&title={title}&summary={text}",symbaloo:"http://www.symbaloo.com/en/add/?url={url}&title={title}",thewebblend:"http://thewebblend.com/submit?url={url}&title={title}",thinkfinity:"http://www.thinkfinity.org/favorite-bookmarklet.jspa?url={url}&subject={title}",thisnext:"http://www.thisnext.com/pick/new/submit/url/?description={text}&name={title}&url={url}",tuenti:"http://www.tuenti.com/share?url={url}",typepad:"http://www.typepad.com/services/quickpost/post?v=2&qp_show=ac&qp_title={title}&qp_href={url}&qp_text={text}",viadeo:"http://www.viadeo.com/shareit/share/?url={url}&title={title}&urlaffiliate=32005&encoding=UTF-8",virb:"http://virb.com/share?external&v=2&url={url}&title={title}",visitezmonsite:"http://www.visitezmonsite.com/publier?url={url}&title={title}&body={text}",vybralisme:"http://vybrali.sme.sk/sub.php?url={url}",webnews:"http://www.webnews.de/einstellen?url={url}&title={title}",wirefan:"http://www.wirefan.com/grpost.php?d=&u={url}&h={title}&d={text}",wordpress:"http://wordpress.com/wp-admin/press-this.php?u={url}&t={title}&s={text}&v=2",wowbored:"http://www.wowbored.com/submit.php?url={url}",wykop:"http://www.wykop.pl/dodaj?url={url}&title={title}&desc={text}",yahoobkm:"http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&u={url}&t={title}&d={text}",yahoomail:"http://compose.mail.yahoo.com/?To=&Subject={title}&body={{content}}",yammer:"https://www.yammer.com/home/bookmarklet?bookmarklet_pop=1&u={url}&t={title}",yardbarker:"http://www.yardbarker.com/author/new/?pUrl={url}&pHead={title}",yigg:"http://www.yigg.de/neu?exturl={url}&exttitle={title}&extdesc={text}",yoolink:"http://go.yoolink.to/addorshare?url_value={url}&title={title}",yorumcuyum:"http://www.yorumcuyum.com/?baslik={title}&link={url}",youmob:"http://youmob.com/mobit.aspx?title={title}&mob={url}",zakladoknet:"http://zakladok.net/link/?u={url}&t={title}",ziczac:"http://ziczac.it/a/segnala/?gurl={url}&gtit={title}"};this.each(function(a,r){for(var l=t(r),a=0;a<l.length;a++){var c=l[a];if(c.substr(0,s)==n.class_prefix&&o[c.substr(s)]){var d=i(c.substr(s));e(r).attr("href",d).click(function(){var t=screen.width,i=screen.height,a=n.width?n.width:t-.2*t,s=n.height?n.height:i-.2*i,o=t/2-a/2,r=i/2-s/2,l="toolbar=0,status=0,width="+a+",height="+s+",top="+r+",left="+o;return window.open(e(this).attr("href"),"",l)&&!1})}}})}}(jQuery),function(e,t){e.completeEffect=function(e){return!e.find(".lock").get(0)}}(window,jQuery),function(){var e="ontouchstart"in window,t=e?"touchstart":"mousedown",n=e?"touchmove":"mousemove",i=e?"touchend":"mouseup";window.money={doEffect:function(a,s,o,r){function l(){k=9,E=0,P=0,L.onload=function(){D=L.width,N=L.height,A.drawImage(L,q.width/2-D/2,250)},L.width||(D=200,N=408),R.onload=function(){if(A.drawImage(R,0,0,q.width,q.height),!I){r(eqShow,s,o);for(var e=0;e<o[s-1].elements.length;e++){var t=eqShow.selectElement(o[s-1].elements[e].id);eqxCommon.bindTrigger(t,o[s-1].elements[e])}}h("开始"),f(0),p(),d(),c(o[s-1].properties.effect.tip)}}function c(e){A.font="20px Arial",A.textAlign="center",A.fillStyle="#FDE528",A.fillText(e,q.width/2,50)}function d(){A.fillStyle="rgba(0, 0, 0, 0.8)",A.fillRect(q.width/2-D/2+5,q.height-85,D-10,80),A.stroke(),A.font="16px Arial",A.textAlign="center",A.fillStyle="#FDE528",A.fillText("点击屏幕，开始数钱",q.width/2,q.height-35)}function p(){q.addEventListener(t,function(t){P++,(1===P||"1"===P)&&u(),w&&(clearInterval(w),_.y-F<-320&&(F=0)),z=!0;var n=e?t.targetTouches[0].pageX:t.pageX,i=e?t.targetTouches[0].pageY:t.pageY;_=g(q,n,i),x=_.x,S=_.y}),q.addEventListener(n,function(t){var n=e?t.targetTouches[0].pageX:t.pageX,i=e?t.targetTouches[0].pageY:t.pageY;_=g(q,n,i),T=_.x-x,C=_.y-S,z&&(A.drawImage(M,q.width/2-D/2,_.y),-20>C?(w=setInterval(m,40),E+=100,z=!1):(A.clearRect(0,0,q.width,q.height),A.drawImage(R,0,0,q.width,q.height),A.drawImage(L,q.width/2-D/2,250),M.onload=function(){A.drawImage(M,q.width/2-D/2,_.y),h(k),f(E)}))}),q.addEventListener(i,function(e){x=0,S=0,z&&(z=!1,w&&(clearInterval(w),F=0),C>=-20&&(A.clearRect(0,0,q.width,q.height),A.drawImage(R,0,0,q.width,q.height),A.drawImage(L,q.width/2-D/2,250),h(k),f(E)))})}function u(){var e=setInterval(function(){k--,h(k),0>=k&&(clearInterval(e),$(q).unbind(t),y())},1e3)}function g(e,t,n){var i=e.getBoundingClientRect();return{x:t-i.left,y:n-i.top}}function m(){A.clearRect(0,0,q.width,q.height),A.drawImage(R,0,0,q.width,q.height),A.drawImage(L,q.width/2-D/2,250),A.drawImage(M,q.width/2-D/2,_.y-F),h(k),f(E),F+=150}function h(e){var t=A.createLinearGradient(q.width/2-90,50,q.width/2-90,120);t.addColorStop(0,"#F3AE28"),t.addColorStop(.5,"#FDE528"),t.addColorStop(1,"#F3AE28"),A.fillStyle=t,A.fillRect(q.width/2-80,90,160,40),A.stroke(),A.font="30px Arial",A.textAlign="center",A.fillStyle="#ff0000",isNaN(e)?A.fillText(e,q.width/2,120):A.fillText(e+"秒",q.width/2,120)}function f(e){A.fillStyle="#FFF",A.roundRect(q.width/2-120,160,240,60,10).stroke(),A.font="30px Arial",A.textAlign="center",A.fillStyle="#FDE528",A.fillText("?? "+e,q.width/2,205)}function v(){$("#mask_"+s).remove(),$("#alert_"+s).remove(),I=!0,l()}function b(){$("#mask_"+s).remove(),$("#alert_"+s).remove(),$("#money_"+s).removeClass("lock").addClass("unlock").css("display","none"),$("#page"+s).empty(),r(eqShow,s,o),$("#audio_btn").css("opacity",1),(1===s||"1"===s)&&eqShow.playVideo(a);for(var e=0;e<o[s-1].elements.length;e++){var t=eqShow.selectElement(o[s-1].elements[e].id);eqxCommon.bindTrigger(t,o[s-1].elements[e])}}function y(){$('<div class="money_mask"></div>').appendTo($("#page"+s)).attr("id","mask_"+s),$('<div class="money_modal"></div>').appendTo($("#page"+s)).attr("id","alert_"+s),$('<div class="money_img"></div>').appendTo($("#alert_"+s)).attr("id","img_"+s),$('<div class="money_text">恭喜你！<br>2016年每天赚'+E+"元！</div>").appendTo($("#alert_"+s)).attr("id","text_"+s),$('<a class="button tryOnce">再来一次</a>').appendTo($("#alert_"+s)).attr("id","try_"+s),$('<a class="button enterScene">进入场景</a>').appendTo($("#alert_"+s)).attr("id","enter_"+s);var e="标准屌丝";E>=5500&&12e3>=E?e="初级土豪":E>12e3&&(e="高级土豪"),$('<div class="level_text">'+e+"</div>").appendTo("#alert_"+s),$('<div class="tip-text">仅供娱乐</div>').appendTo("#alert_"+s),$("#try_"+s).on("click",function(){v()}),$("#enter_"+s).on("click",function(){b()})}$('<canvas class="money page_effect lock"></canvas>').prependTo($("#page"+s)).attr("id","money_"+s);var w,x,S,T,C,k,E,P,I,_,L,R,M,q=document.getElementById("money_"+s),A=q.getContext("2d"),z=!1,D=0,F=0,N=0;return q.width=$(".z-current").width(),q.height=$(".z-current").height(),L=new Image,L.src=CLIENT_CDN+"assets/images/money/moremoney.png",R=new Image,R.src=CLIENT_CDN+"assets/images/money/moneybg.png",M=new Image,M.src=CLIENT_CDN+"assets/images/money/flymoney.png",l(),window.money}},CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,i,a){return 2*a>n&&(a=n/2),2*a>i&&(a=i/2),this.beginPath(),this.moveTo(e+a,t),this.strokeStyle="#FDE528",this.arcTo(e+n,t,e+n,t+i,a),this.arcTo(e+n,t+i,e,t+i,a),this.arcTo(e,t+i,e,t,a),this.arcTo(e,t,e+n,t,a),this.closePath(),this.fillStyle="#FDE528",this}}();var eqxPSDDecompose=function(){function e(n){if(n.childless())"layer"===n.type&&0!==n.width&&0!==n.height&&t.push(n);else for(var i=n.children().length-1;i>-1;i--)!0===n.children()[i].visible()&&e(n.children()[i])}var t=[];return{decompose:function(n){var i=$.Deferred(),a=__webpack_require__(!function(){var e=new Error('Cannot find module "psd"');throw e.code="MODULE_NOT_FOUND",e}());return t=[],a.fromDroppedFile(n).then(function(n){e(n.tree()),$.each(t,function(e,t){t.layer.adjustWidth=t.layer.width,t.layer.adjustHeight=t.layer.height}),i.resolve(t)}),i.promise()},decomposeBySize:function(n,i,a){var s=$.Deferred(),o=__webpack_require__(!function(){var e=new Error('Cannot find module "psd"');throw e.code="MODULE_NOT_FOUND",e}());return t=[],o.fromDroppedFile(n).then(function(n){var o=i/n.image.width(),r=a/n.image.height(),l=null;l=r>o?o:r,e(n.tree()),$.each(t,function(e,t){t.layer.top=t.layer.top*l,t.layer.left=t.layer.left*l,t.layer.adjustWidth=t.layer.width*l,t.layer.adjustHeight=t.layer.height*l}),s.resolve(t)}),s.promise()}}}();!function(e,t){function n(e){function t(e,t,n){return e[t]||(e[t]=n())}return t(t(e,"eqShow",Object),"templateParser",function(){var e={};return function(n,i){if("hasOwnProperty"===n)throw new Error("hasOwnProperty is not a valid name");return i&&e.hasOwnProperty(n)&&(e[n]=null),t(e,n,i)}})}e.eqShow||(e.eqShow={});!function(t){templateParser=n(e)}()}(window,document),function(){window.fallingObject=function(e,t){function n(){r.pause?clearInterval(r.interVal):(i(h),a())}function i(e){e.clearRect(0,0,u,g);for(var t=0;t<f.length;t++)e.save(),e.translate(f[t].x,f[t].y),e.scale(f[t].scale,f[t].scale),e.rotate(f[t].rotate),e.fillRect(0,0,v,v),e.restore()}function a(){Math.random()<.02*c.density&&o(),s()}function s(){for(var e=0;e<f.length;e++)f[e].x+=f[e].vx,f[e].y+=f[e].vy,f[e].vy+=f[e].g;for(var t=0,e=0;e<f.length;e++)f[e].y<g-v&&f[e].x>-v&&f[e].x<u&&(f[t++]=f[e]);for(;f.length>t;)f.pop();f.length>b&&(f.length=b)}function o(){var e=.5*Math.random()+.3,t={x:Math.ceil(Math.random()*u),y:-v,g:.02*e*c.src.vy,vx:.05*Math.pow(-1,Math.ceil(1e3*Math.random())),vy:.01*e*c.src.vy,color:"yellow",scale:e,rotate:Math.pow(-1,Math.ceil(1e3*Math.random()))*Math.random()*(c.src.rotate||0)*Math.PI/180};f.push(t)}var r={pause:!1,startPlay:function(){this.pause=!1,r.interVal=setInterval(n,20)}},l=e[t-1];if(l.properties){var c=l.properties.fallingObject||{};renderPage(eqShow,t,e);for(var d=0;d<e[t-1].elements.length;d++){var p=eqShow.selectElement(e[t-1].elements[d].id);eqxCommon.bindTrigger(p,e[t-1].elements[d])}var u=$(".m-img").width(),g=$(".m-img").height(),m=document.createElement("canvas");m.width=u,m.height=g,$(m).prependTo("#page"+t+" .edit_wrapper").attr("class","cas page_effect").attr("id","can"+t).attr("style","z-index: 0!important");var h=m.getContext("2d"),f=[],v=60,b=20,y=new Image;return y.src=c.src.path,y.onload=function(){h.beginPath();var e=h.createPattern(y,"repeat");h.fillStyle=e,h.closePath(),1===t&&(r.interVal=setInterval(n,20))},r}}}(),function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,5e3)}}(),window.fireWorks={doEffect:function(e,t,n,i){function a(){if(!C.pause){requestAnimFrame(a),b=s(0,1e3),p.globalCompositeOperation="destination-out",p.fillStyle="rgba(0, 0, 0, 0.5)",p.fillRect(0,0,m,h),p.globalCompositeOperation="lighter";for(var e=f.length;e--;)f[e].draw(),f[e].update(e);for(e=v.length;e--;)v[e].draw(),v[e].update(e);S>=x?T||(f.push(new r(m/2,h,s(0,m),s(0,h/2))),S=0):S++,w>=y?T&&(f.push(new r(m/2,h,u,g)),w=0):w++}}function s(e,t){return Math.random()*(t-e)+e}function o(e,t,n,i){var a=e-n,s=t-i;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}function r(e,t,n,i){for(this.x=e,this.y=t,this.sx=e,this.sy=t,this.tx=n,this.ty=i,this.distanceToTarget=o(e,t,n,i),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(i-t,n-e),this.speed=10,this.acceleration=1.05,this.brightness=s(50,120)}function l(e,t){for(this.x=e,this.y=t,this.coordinates=[],this.coordinateCount=5;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=s(0,2*Math.PI),this.speed=s(1,10),this.friction=.95,this.gravity=1,this.hue=s(b-100,b+100),this.brightness=s(20,80),this.alpha=1,this.decay=s(.01,.015)}function c(e,t){for(var n=100;n--;)v.push(new l(e,t))}var d,p,u,g,m=window.innerWidth,h=window.innerHeight,f=[],v=[],b=200,y=7,w=0,x=20,S=0,T=!1,C={pause:!1,startPlay:function(){this.pause=!1,a()}};i(eqShow,t,n);for(var k=0;k<n[t-1].elements.length;k++){var E=eqShow.selectElement(n[t-1].elements[k].id);eqxCommon.bindTrigger(E,n[t-1].elements[k])}return 1===t&&eqShow.playVideo(e),$('<canvas id="fireworks'+t+'"></canvas>').prependTo("#page"+t).css({position:"absolute",zIndex:0}),d=document.getElementById("fireworks"+t),p=d.getContext("2d"),d.width=m,d.height=h,1===t&&a(),r.prototype.update=function(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;var t=Math.cos(this.angle)*this.speed,n=Math.sin(this.angle)*this.speed;this.distanceTraveled=o(this.sx,this.sy,this.x+t,this.y+n),this.distanceTraveled>=this.distanceToTarget?(c(this.tx,this.ty),f.splice(e,1)):(this.x+=t,this.y+=n)},r.prototype.draw=function(){p.beginPath(),p.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),p.lineTo(this.x,this.y),p.strokeStyle="hsl("+b+", 100%, "+this.brightness+"%)",p.stroke(),p.beginPath(),p.arc(this.tx,this.ty,0,0,2*Math.PI),p.stroke()},l.prototype.update=function(e){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&v.splice(e,1)},l.prototype.draw=function(){p.beginPath(),p.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),p.lineTo(this.x,this.y),p.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",p.stroke()},C}}}(),window.flux={version:"1.4.4"},function(e){flux.slider=function(t,n){flux.browser.init(),flux.browser.supportsTransitions||window.console&&window.console.error&&console.error("Flux Slider requires a browser that supports CSS3 transitions");var i=this;this.element=e(t),this.transitions=[];for(var a in flux.transitions)this.transitions.push(a);this.options=e.extend({autoplay:!0,transitions:this.transitions,delay:4e3,pagination:!0,controls:!1,captions:!1,width:null,height:null,onTransitionEnd:null,onStartEnd:null,bgColor:""},n),this.height=this.options.height?this.options.height:null,this.width=this.options.width?this.options.width:null;var s=[];e(this.options.transitions).each(function(e,t){var n=new flux.transitions[t](this),i=!0;n.options.requires3d&&!flux.browser.supports3d&&(i=!1),n.options.compatibilityCheck&&(i=n.options.compatibilityCheck()),i&&s.push(t)}),this.options.transitions=s,this.images=new Array,this.imageLoadedCount=0,this.currentImageIndex=0,this.nextImageIndex=1,this.playing=!1,this.container=e('<div class="fluxslider"></div>').appendTo(this.element),this.surface=e('<div class="surface" style="position: relative"></div>').appendTo(this.container),this.container.bind("click",function(t){e(t.target).hasClass("hasLink")&&(window.location=e(t.target).data("href"))}),this.imageContainer=e('<div class="images loading1"></div>').css({position:"relative",overflow:"hidden"}).appendTo(this.surface),this.width&&this.height&&this.imageContainer.css({width:this.width+"px",height:this.height+"px"}),this.image1=e('<div class="image1" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),this.image2=e('<div class="image2" style="height: 100%; width: 100%"></div>').appendTo(this.imageContainer),e(this.image1).add(this.image2).css({position:"absolute",top:"0px",left:"0px"}),this.element.find("img, a img").each(function(t,n){var a=n.cloneNode(!1),s=e(n).parent();s.is("a")&&e(a).data("href",s.attr("href")),i.images.push(a),e(n).remove()});for(var o=0;o<this.images.length;o++){var r=new Image;r.onload=function(){i.imageLoadedCount++,i.width=i.width?i.width:this.width,i.height=i.height?i.height:this.height,i.imageLoadedCount>=i.images.length&&(i.finishedLoading(),i.setupImages())},r.src=this.images[o].src}this.element.bind("fluxTransitionEnd",function(e,t){i.options.onTransitionEnd&&(e.preventDefault(),i.options.onTransitionEnd(t))}),this.options.autoplay&&this.start();var l={},c={};this.element.bind("mousedown touchstart",function(e){"touchstart"==e.type?l.left=e.originalEvent.touches[0].pageX:"mousedown"==e.type&&(l.left=e.pageX)}).bind("mouseup touchend",function(e){"touchend"==e.type?c.left=e.originalEvent.changedTouches[0].pageX:"mouseup"==e.type&&(c.left=e.pageX),c.left-l.left>20?i.prev(null,{direction:"right"}):l.left-c.left>20&&i.next(null,{direction:"left"}),i.options.autoplay&&(i.stop(),i.start())}),setTimeout(function(){e(window).focus(function(){i.isPlaying()&&i.next()})},100)},flux.slider.prototype={constructor:flux.slider,playing:!1,start:function(){var e=this;this.playing=!0,this.interval=setInterval(function(){e.transition()},this.options.delay),"function"==typeof this.options.onStartEnd&&this.options.onStartEnd(this.interval)},stop:function(){this.playing=!1,clearInterval(this.interval),this.interval=null},isPlaying:function(){return this.playing},next:function(e,t){t=t||{},t.direction="left",this.showImage(this.currentImageIndex+1,e,t)},prev:function(e,t){t=t||{},t.direction="right",this.showImage(this.currentImageIndex-1,e,t)},showImage:function(e,t,n){this.setNextIndex(e),this.setupImages(),this.transition(t,n)},finishedLoading:function(){var t=this;if(this.container.css({width:this.width+"px",height:this.height+"px"}),this.imageContainer.removeClass("loading1"),this.options.pagination&&(this.pagination=e('<ul class="pagination"></ul>').css({margin:"0px",padding:"0px","text-align":"center"}),this.pagination.bind("click",function(n){n.preventDefault(),t.showImage(e(n.target).data("index"))}),e(this.images).each(function(n,i){var a=e('<li data-index="'+n+'">'+(n+1)+"</li>").css({display:"inline-block","margin-left":"0.5em",cursor:"pointer"}).appendTo(t.pagination);0==n&&a.css("margin-left",0).addClass("current")}),this.container.append(this.pagination)),e(this.imageContainer).css({width:this.width+"px",height:this.height+"px"}),e(this.image1).css({width:this.width+"px",height:this.height+"px"}),e(this.image2).css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+(this.options.pagination?this.pagination.height():0)+"px"}),this.options.controls){var n={padding:"4px 10px 10px","font-size":"60px","font-family":"arial, sans-serif","line-height":"1em","font-weight":"bold",color:"#FFF","text-decoration":"none",background:"rgba(0,0,0,0.5)",position:"absolute","z-index":2e3};this.nextButton=e('<a href="#">??</a>').css(n).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.next()}),this.prevButton=e('<a href="#">??</a>').css(n).css3({"border-radius":"4px"}).appendTo(this.surface).bind("click",function(e){e.preventDefault(),t.prev()});var i=(this.height-this.nextButton.height())/2;this.nextButton.css({top:i+"px",right:"10px"}),this.prevButton.css({top:i+"px",left:"10px"})}this.options.captions&&(this.captionBar=e('<div class="caption"></div>').css({background:"rgba(0,0,0,0.6)",color:"#FFF","font-size":"16px","font-family":"helvetica, arial, sans-serif","text-decoration":"none","font-weight":"bold",padding:"1.5em 1em",opacity:0,position:"absolute","z-index":110,width:"100%",bottom:0}).css3({"transition-property":"opacity","transition-duration":"800ms","box-sizing":"border-box"}).prependTo(this.surface)),this.updateCaption()},setupImages:function(){var t=this.getImage(this.currentImageIndex),n={background:'url("'+t.src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:101,cursor:"auto"};e(t).data("href")?(n.cursor="pointer",this.image1.addClass("hasLink"),this.image1.data("href",e(t).data("href"))):(this.image1.removeClass("hasLink"),this.image1.data("href",null)),this.image1.css(n).children().remove(),this.image2.css({background:'url("'+this.getImage(this.nextImageIndex).src+'") 50% 50% / contain no-repeat '+this.options.bgColor,zIndex:100,display:"none"}),this.options.pagination&&this.pagination&&(this.pagination.find("li.current").removeClass("current"),e(this.pagination.find("li")[this.currentImageIndex]).addClass("current"))},transition:function(t,n){if(t==undefined||!flux.transitions[t]){var i=Math.floor(Math.random()*this.options.transitions.length);t=this.options.transitions[i]}var a=null;try{a=new flux.transitions[t](this,e.extend(this.options[t]?this.options[t]:{},n))}catch(e){a=new flux.transition(this,{fallback:!0})}a.run(),this.currentImageIndex=this.nextImageIndex,this.setNextIndex(this.currentImageIndex+1),this.updateCaption()},updateCaption:function(){var t=e(this.getImage(this.currentImageIndex)).attr("title");this.options.captions&&this.captionBar&&(""!==t&&this.captionBar.html(t),this.captionBar.css("opacity",""===t?0:1))},getImage:function(e){return e%=this.images.length,this.images[e]},setNextIndex:function(e){e==undefined&&(e=this.currentImageIndex+1),this.nextImageIndex=e,this.nextImageIndex>this.images.length-1&&(this.nextImageIndex=0),this.nextImageIndex<0&&(this.nextImageIndex=this.images.length-1)},increment:function(){++this.currentImageIndex>this.images.length-1&&(this.currentImageIndex=0)}}}(window.jQuery||window.Zepto),function(e){flux.browser={init:function(){if(flux.browser.supportsTransitions===undefined){var t=(document.createElement("div"),["-webkit","-moz","-o","-ms"]);if(window.Modernizr&&Modernizr.csstransitions!==undefined?flux.browser.supportsTransitions=Modernizr.csstransitions:flux.browser.supportsTransitions=this.supportsCSSProperty("Transition"),window.Modernizr&&Modernizr.csstransforms3d!==undefined)flux.browser.supports3d=Modernizr.csstransforms3d;else if(flux.browser.supports3d=this.supportsCSSProperty("Perspective"),flux.browser.supports3d&&"webkitPerspective"in e("body").get(0).style){var n=e('<div id="csstransform3d"></div>'),i=e('<style media="(transform-3d), ('+t.join("-transform-3d),(")+'-transform-3d)">div#csstransform3d { position: absolute; left: 9px }</style>');e("body").append(n),e("head").append(i),flux.browser.supports3d=9==n.get(0).offsetLeft,n.remove(),i.remove()}}},supportsCSSProperty:function(e){for(var t=document.createElement("div"),n=["Webkit","Moz","O","Ms"],i=!1,a=0;a<n.length;a++)n[a]+e in t.style&&(i=i||!0);return i},translate:function(e,t,n){return e=e!=undefined?e:0,t=t!=undefined?t:0,n=n!=undefined?n:0,"translate"+(flux.browser.supports3d?"3d(":"(")+e+"px,"+t+(flux.browser.supports3d?"px,"+n+"px)":"px)")},rotateX:function(e){return flux.browser.rotate("x",e)},rotateY:function(e){return flux.browser.rotate("y",e)},rotateZ:function(e){return flux.browser.rotate("z",e)},rotate:function(e,t){return!e in{x:"",y:"",z:""}&&(e="z"),t=t!=undefined?t:0,flux.browser.supports3d?"rotate3d("+("x"==e?"1":"0")+", "+("y"==e?"1":"0")+", "+("z"==e?"1":"0")+", "+t+"deg)":"z"==e?"rotate("+t+"deg)":""}},e(function(){flux.browser.init()})}(window.jQuery||window.Zepto),function(e){e.fn.css3=function(e){var t={},n=["webkit","moz","ms","o"];for(var i in e){for(var a=0;a<n.length;a++)t["-"+n[a]+"-"+i]=e[i];t[i]=e[i]}return this.css(t),this},e.fn.transitionEnd=function(t){for(var n=["webkitTransitionEnd","transitionend","oTransitionEnd"],i=0;i<n.length;i++)this.bind(n[i],function(i){for(var a=0;a<n.length;a++)e(this).unbind(n[a]);t&&t.call(this,i)});return this},flux.transition=function(t,n){if(this.options=e.extend({requires3d:!1,after:function(){}},n),this.slider=t,this.options.requires3d&&!flux.browser.supports3d||!flux.browser.supportsTransitions||!0===this.options.fallback){var i=this;this.options.after=undefined,this.options.setup=function(){i.fallbackSetup()},this.options.execute=function(){i.fallbackExecute()}}},flux.transition.prototype={constructor:flux.transition,hasFinished:!1,run:function(){var e=this;this.options.setup!==undefined&&this.options.setup.call(this),this.slider.image1.css({"background-image":"none"}),this.slider.imageContainer.css("overflow",this.options.requires3d?"visible":"hidden"),setTimeout(function(){e.options.execute!==undefined&&e.slider.image1.css("background-color",""),e.options.execute.call(e)},5)},finished:function(){this.hasFinished||(this.hasFinished=!0,this.options.after&&this.options.after.call(this),this.slider.imageContainer.css("overflow","hidden"),this.slider.setupImages(),this.slider.element.trigger("fluxTransitionEnd",{currentImage:this.slider.getImage(this.slider.currentImageIndex)}))},fallbackSetup:function(){},fallbackExecute:function(){this.finished()}},flux.transitions={},flux.transition_grid=function(t,n){return new flux.transition(t,e.extend({columns:6,rows:6,forceSquare:!1,setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height(),i=Math.floor(t/this.options.columns),a=Math.floor(n/this.options.rows);this.options.forceSquare&&(a=i,this.options.rows=Math.floor(n/a));for(var s=t-this.options.columns*i,o=Math.ceil(s/this.options.columns),r=n-this.options.rows*a,l=Math.ceil(r/this.options.rows),c=(this.slider.image1.height(),0),d=0,p=document.createDocumentFragment(),u=0;u<this.options.columns;u++){var g=i,d=0;if(s>0){var m=s>=o?o:s;g+=m,s-=m}for(var h=0;h<this.options.rows;h++){var f=a,v=r;if(v>0){var m=v>=l?l:v;f+=m,v-=m}var b=e('<div class="tile tile-'+u+"-"+h+'"></div>').css({width:g+"px",height:f+"px",position:"absolute",top:d+"px",left:c+"px"});this.options.renderTile.call(this,b,u,h,g,f,c,d),p.appendChild(b.get(0)),d+=f}c+=g}this.slider.image1.get(0).appendChild(p)},execute:function(){var e=this,t=this.slider.image1.height(),n=this.slider.image1.find("div.barcontainer");this.slider.image2.hide(),n.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),n.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},renderTile:function(e,t,n,i,a,s,o){}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars=function(t,n){return new flux.transition_grid(t,e.extend({columns:10,rows:1,delayBetweenBars:40,renderTile:function(t,n,i,a,s,o,r){e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px 0px"}).css3({"transition-duration":"400ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":n*this.options.delayBetweenBars+"ms"})},execute:function(){var t=this,n=this.slider.image1.height(),i=this.slider.image1.find("div.tile");e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.css({opacity:"0.5"}).css3({transform:flux.browser.translate(0,n)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.bars3d=function(t,n){return new flux.transition_grid(t,e.extend({requires3d:!0,columns:7,rows:1,delayBetweenBars:150,perspective:1e3,renderTile:function(t,n,i,a,s,o,r){var l=e('<div class="bar-'+n+'"></div>').css({width:a+"px",height:"100%",position:"absolute",top:"0px",left:"0px","z-index":200,background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px 0px","background-repeat":"no-repeat"}).css3({"backface-visibility":"hidden"}),c=e(l.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-s/2,s/2)}),d=e('<div class="side bar-'+n+'"></div>').css({width:s+"px",height:s+"px",position:"absolute",top:"0px",left:"0px",background:"#222","z-index":190}).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(s/2,0,-s/2)+" "+flux.browser.rotateY(180),"backface-visibility":"hidden"}),p=e(d.get(0).cloneNode(!1)).css3({transform:flux.browser.rotateY(90)+" "+flux.browser.translate(s/2,0,a-s/2)});e(t).css({width:a+"px",height:"100%",position:"absolute",top:"0px",left:o+"px","z-index":n>this.options.columns/2?1e3-n:1e3}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transition-delay":n*this.options.delayBetweenBars+"ms","transform-style":"preserve-3d"}).append(l).append(c).append(d).append(p)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var e=this,t=this.slider.image1.height(),n=this.slider.image1.find("div.tile");this.slider.image2.hide(),n.last().transitionEnd(function(t){e.slider.image1.css3({"transform-style":"flat"}),e.slider.image2.show(),e.finished()}),setTimeout(function(){n.css3({transform:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,t/2,t/2)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blinds=function(t,n){return new flux.transitions.bars(t,e.extend({execute:function(){var t=this,n=(this.slider.image1.height(),this.slider.image1.find("div.tile"));e(n[n.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){n.css({opacity:"0.5"}).css3({transform:"scalex(0.0001)"})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.zip=function(t,n){return new flux.transitions.bars(t,e.extend({execute:function(){var t=this,n=this.slider.image1.height(),i=this.slider.image1.find("div.tile");e(i[i.length-1]).transitionEnd(function(){t.finished()}),setTimeout(function(){i.each(function(t,i){e(i).css({opacity:"0.3"}).css3({transform:flux.browser.translate(0,t%2?"-"+2*n:n)})})},20)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks=function(t,n){return new flux.transition_grid(t,e.extend({forceSquare:!0,delayBetweenBars:100,renderTile:function(t,n,i,a,s,o,r){var l=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px"}).css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":l+"ms"}),this.maxDelay===undefined&&(this.maxDelay=0),l>this.maxDelay&&(this.maxDelay=l,this.maxDelayTile=t)},execute:function(){var t=this,n=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.blocks2=function(t,n){return new flux.transition_grid(t,e.extend({cols:12,forceSquare:!0,delayBetweenDiagnols:150,renderTile:function(t,n,i,a,s,o,r){Math.floor(10*Math.random()*this.options.delayBetweenBars),e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px"}).css3({"transition-duration":"350ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":(n+i)*this.options.delayBetweenDiagnols+"ms","backface-visibility":"hidden"})},execute:function(){var t=this,n=this.slider.image1.find("div.tile");n.last().transitionEnd(function(){t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:"scale(0.8)"})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.cube=function(t,n){return new flux.transition(t,e.extend({requires3d:!0,barWidth:100,direction:"left",perspective:1e3,setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height();this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}),this.cubeContainer=e('<div class="cube"></div>').css({width:t+"px",height:n+"px",position:"relative"}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"all","transform-style":"preserve-3d"});var i={height:"100%",width:"100%",position:"absolute",top:"0px",left:"0px"},a=e('<div class="face current"></div>').css(e.extend(i,{background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px"})).css3({"backface-visibility":"hidden"});this.cubeContainer.append(a);var s=e('<div class="face next"></div>').css(e.extend(i,{background:this.slider.image2.css("background-image")})).css3({transform:this.options.transitionStrings.call(this,this.options.direction,"nextFace"),"backface-visibility":"hidden"});this.cubeContainer.append(s),this.slider.image1.append(this.cubeContainer)},execute:function(){var e=this;this.slider.image1.width(),this.slider.image1.height(),this.slider.image2.hide(),this.cubeContainer.transitionEnd(function(){e.slider.image2.show(),e.finished()}),setTimeout(function(){e.cubeContainer.css3({transform:e.options.transitionStrings.call(e,e.options.direction,"container")})},50)},transitionStrings:function(e,t){var n=this.slider.image1.width(),i=this.slider.image1.height(),a={up:{nextFace:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,i/2,i/2),container:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-i/2,i/2)},down:{nextFace:flux.browser.rotateX(90)+" "+flux.browser.translate(0,-i/2,i/2),container:flux.browser.rotateX(-90)+" "+flux.browser.translate(0,i/2,i/2)},left:{nextFace:flux.browser.rotateY(90)+" "+flux.browser.translate(n/2,0,n/2),container:flux.browser.rotateY(-90)+" "+flux.browser.translate(-n/2,0,n/2)},right:{nextFace:flux.browser.rotateY(-90)+" "+flux.browser.translate(-n/2,0,n/2),container:flux.browser.rotateY(90)+" "+flux.browser.translate(n/2,0,n/2)}};return!(!a[e]||!a[e][t])&&a[e][t]}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.tiles3d=function(t,n){return new flux.transition_grid(t,e.extend({requires3d:!0,forceSquare:!0,columns:5,perspective:600,delayBetweenBarsX:200,delayBetweenBarsY:150,renderTile:function(t,n,i,a,s,o,r){var l=e("<div></div>").css({width:a+"px",height:s+"px",position:"absolute",top:"0px",left:"0px",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px","background-repeat":"no-repeat","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),c=e(l.get(0).cloneNode(!1)).css({"background-image":this.slider.image2.css("background-image")}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"});e(t).css({"z-index":(n>this.options.columns/2?500-n:500)+(i>this.options.rows/2?500-i:500)}).css3({"transition-duration":"800ms","transition-timing-function":"ease-out","transition-property":"all","transition-delay":n*this.options.delayBetweenBarsX+i*this.options.delayBetweenBarsY+"ms","transform-style":"preserve-3d"}).append(l).append(c)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"});var e=this,t=this.slider.image1.find("div.tile");this.slider.image2.hide(),t.last().transitionEnd(function(t){e.slider.image2.show(),e.finished()}),setTimeout(function(){t.css3({transform:flux.browser.rotateY(180)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.turn=function(t,n){return new flux.transition(t,e.extend({requires3d:!0,perspective:1300,direction:"left",setup:function(){var t=e('<div class="tab"></div>').css({width:"50%",height:"100%",position:"absolute",top:"0px",left:"left"==this.options.direction?"50%":"0%","z-index":101}).css3({"transform-style":"preserve-3d","transition-duration":"1000ms","transition-timing-function":"ease-out","transition-property":"all","transform-origin":"left"==this.options.direction?"left center":"right center"}),n=(e("<div></div>").appendTo(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?"-"+this.slider.image1.width()/2:0)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0","-moz-transform":"translateZ(1px)"}).css3({"backface-visibility":"hidden"}),e("<div></div>").appendTo(t).css({background:this.slider.image2.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}).css3({transform:flux.browser.rotateY(180),"backface-visibility":"hidden"}),e("<div></div>").css({position:"absolute",top:"0",left:"left"==this.options.direction?"0":"50%",width:"50%",height:"100%",background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":("left"==this.options.direction?0:"-"+this.slider.image1.width()/2)+"px 0","z-index":100})),i=e('<div class="overlay"></div>').css({position:"absolute",top:"0",left:"left"==this.options.direction?"50%":"0",width:"50%",height:"100%",background:"#000",opacity:1}).css3({"transition-duration":"800ms","transition-timing-function":"linear","transition-property":"opacity"}),a=e("<div></div>").css3({width:"100%",height:"100%"}).css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).append(t).append(n).append(i);this.slider.image1.append(a)},execute:function(){var e=this;this.slider.image1.find("div.tab").first().transitionEnd(function(){e.finished()}),setTimeout(function(){e.slider.image1.find("div.tab").css3({transform:flux.browser.rotateY("left"==e.options.direction?-179:179)}),e.slider.image1.find("div.overlay").css({opacity:0})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.slide=function(t,n){return new flux.transition(t,e.extend({direction:"left",setup:function(){var t=this.slider.image1.width(),n=this.slider.image1.height(),i=e('<div class="current"></div>').css({height:n+"px",width:t+"px",position:"absolute",top:"0px",left:"0px",background:this.slider["left"==this.options.direction?"image1":"image2"].css("background")}).css3({"backface-visibility":"hidden"}),a=e('<div class="next"></div>').css({height:n+"px",width:t+"px",position:"absolute",top:"0px",left:t+"px",background:this.slider["left"==this.options.direction?"image2":"image1"].css("background")}).css3({"backface-visibility":"hidden"});this.slideContainer=e('<div class="slide"></div>').css({width:2*t+"px",height:n+"px",position:"relative",left:"left"==this.options.direction?"0px":-t+"px","z-index":101}).css3({"transition-duration":"600ms","transition-timing-function":"ease-in","transition-property":"all"}),this.slideContainer.append(i).append(a),this.slider.image1.append(this.slideContainer)},execute:function(){var e=this,t=this.slider.image1.width();"left"==this.options.direction&&(t=-t),this.slideContainer.transitionEnd(function(){e.finished()}),setTimeout(function(){e.slideContainer.css3({transform:flux.browser.translate(t)})},50)}},n))}}(window.jQuery||window.Zepto),function(e){flux.transitions.explode=function(t,n){return new flux.transition_grid(t,e.extend({columns:6,forceSquare:!0,delayBetweenBars:30,perspective:800,requires3d:!0,renderTile:function(t,n,i,a,s,o,r){var l=Math.floor(10*Math.random()*this.options.delayBetweenBars);e(t).css({background:this.slider.image1.css("background"),"background-size":this.slider.width+"px "+this.slider.height+"px","background-position":"-"+o+"px -"+r+"px"}).css3({"transition-duration":"500ms","transition-timing-function":"ease-in","transition-property":"all","transition-delay":l+"ms"}),this.maxDelay===undefined&&(this.maxDelay=0),l>this.maxDelay&&(this.maxDelay=l,this.maxDelayTile=t)},execute:function(){this.slider.image1.css3({perspective:this.options.perspective,"perspective-origin":"50% 50%"}).css({"-moz-transform":"perspective("+this.options.perspective+"px)","-moz-perspective":"none","-moz-transform-style":"preserve-3d"});var t=this,n=this.slider.image1.find("div.tile");this.maxDelayTile.transitionEnd(function(){t.slider.image1.css3({"transform-style":"flat"}),t.finished()}),setTimeout(function(){n.each(function(t,n){e(n).css({opacity:"0"}).css3({transform:flux.browser.translate(0,0,700)+" rotate3d("+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", "+(Math.round(2*Math.random())-1)+", 90deg) "})})},50)}},n))}}(window.jQuery||window.Zepto),function(e){e.fn.qrcode=function(t){"string"==typeof t&&(t={text:t}),t=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},t);var n=function(){var e=new QRCode(t.typeNumber,t.correctLevel);e.addData(t.text),e.make();var n=document.createElement("canvas");n.width=t.width,n.height=t.height;for(var i=n.getContext("2d"),a=t.width/e.getModuleCount(),s=t.height/e.getModuleCount(),o=0;o<e.getModuleCount();o++)for(var r=0;r<e.getModuleCount();r++){i.fillStyle=e.isDark(o,r)?t.foreground:t.background;var l=Math.ceil((r+1)*a)-Math.floor(r*a),c=Math.ceil((o+1)*a)-Math.floor(o*a);i.fillRect(Math.round(r*a),Math.round(o*s),l,c)}return n},i=function(){var n=new QRCode(t.typeNumber,t.correctLevel);n.addData(t.text),n.make();for(var i=e("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),a=t.width/n.getModuleCount(),s=t.height/n.getModuleCount(),o=0;o<n.getModuleCount();o++)for(var r=e("<tr></tr>").css("height",s+"px").appendTo(i),l=0;l<n.getModuleCount();l++)e("<td></td>").css("width",a+"px").css("background-color",n.isDark(o,l)?t.foreground:t.background).appendTo(r);return i};return this.each(function(){var a="canvas"==t.render?n():i();e(a).appendTo(this)})}}(jQuery),function(){function e(e){$("#finger_div"+e).on(a,function(){$("#page"+e).find(".u-arrow-bottom").attr("style","display: none;"),$("#page"+e).find(".edit_wrapper").attr("style","display: none;"),$("#finger_line"+e).show(),$("#finger_info"+e).html("扫描中..."),$("#finger_line"+e).stop(!0,!1).animate({top:"50%",marginTop:"-87px"},1e3,function(){$("#finger_div"+e).unbind(),$("#finger_info"+e).hide().html("扫描成功").fadeIn(300,function(){$("#finger_line"+e).fadeOut(),$("#finger_zw"+e).fadeOut(),$("#finger_div"+e).fadeOut(),$("#finger_info"+e).fadeOut(200,function(){setTimeout(function(){$("#finger_background"+e).removeClass("lock").addClass("unlock")},500),$("#finger_background"+e).addClass("noFinger").fadeOut(500,function(){$("#page"+e).empty(),renderPage(eqShow,e,t);for(var n=0;n<t[e-1].elements.length;n++){var i=eqShow.selectElement(t[e-1].elements[n].id);eqxCommon.bindTrigger(i,t[e-1].elements[n])}}),$("#audio_btn").css("opacity",1),1===e&&eqShow.playVideo(n)})})})})}var t,n;window.lockEffect=function(i,a,s,o,r){n=i,t=a;for(var l=0;l<s.length;l++){var c=s[l].num;$(".finger_background","#page"+c).length&&$(".finger_background","#page"+c).remove(),$('<div class = "finger_background page_effect lock"></div>').prependTo($("#page"+c)).attr("id","finger_background"+c).attr("style","background-image: url("+s[l].finger.bgImage.path+");width:100%; height: 100%;"),$('<div class = "finger_div"></div>').prependTo($("#finger_background"+c)).attr("id","finger_div"+c),$('<img class = "finger_zw"/>').appendTo($("#finger_background"+c)).attr("id","finger_zw"+c).attr("src",s[l].finger.zwImage.path),$('<img class = "finger_line" src = "'+CLIENT_CDN+'view/images/finger_line.png">').appendTo($("#finger_background"+s[l].num)).attr("id","finger_line"+s[l].num),$('<p class = "finger_info"></p>').appendTo($("#finger_background"+c)).attr("id","finger_info"+c),renderPage(eqShow,c,a),e(c)}};var i="ontouchstart"in window,a=i?"touchstart":"mousedown"}();var eqxiu=function(){function e(e,i){for(var a,s=0,o=g._pageData.length;o>s;s++)e==g._pageData[s].id&&(a=g._pageData[s].num);if(a||(a=e),i){if(1==a)return;$(g.$currentPage).removeClass("z-current"),g.$currentPage=$(g.$currentPage).siblings(".main-page").find("#page"+a).parent().addClass("z-current")}else if("10"!=g._scrollMode){I=!0;var r=$(g.$currentPage).find(".m-img").attr("id").substring(4),l=$(g.$currentPage).siblings(".main-page").find("#page"+a);if(!l)return;g.$activePage=$(l).parent(".main-page").get(0),r>a?t():a>r&&n()}else flipBookScroll(e)}function t(e){if(!(S&&2==e||T&&1==e))if("10"!=g._scrollMode){var t=0;m();var n=setInterval(function(){t+=2,"0"==g._scrollMode||"1"==g._scrollMode||"2"==g._scrollMode||"6"==g._scrollMode||"7"==g._scrollMode||"8"==g._scrollMode||"11"==g._scrollMode||"12"==g._scrollMode||"13"==g._scrollMode||"14"==g._scrollMode||"15"==g._scrollMode?A=t:("3"==g._scrollMode||"4"==g._scrollMode||"5"==g._scrollMode||"9"==g._scrollMode)&&(q=t),h(),t>=21&&(clearInterval(n),f())},1)}else $(document).trigger("bookFlipPre")}function n(e){if(!(S&&2==e||T&&1==e))if("10"!=g._scrollMode){w=!1;var t=0;"block"==$("body .boards-panel").css("display")&&($("body .boards-panel").hide(),$("body .z-current").show()),m();var n=setInterval(function(){t-=2,"0"==g._scrollMode||"1"==g._scrollMode||"2"==g._scrollMode||"6"==g._scrollMode||"7"==g._scrollMode||"8"==g._scrollMode||"11"==g._scrollMode||"12"==g._scrollMode||"13"==g._scrollMode||"14"==g._scrollMode||"15"==g._scrollMode?A=t:("3"==g._scrollMode||"4"==g._scrollMode||"5"==g._scrollMode||"9"==g._scrollMode)&&(q=t),h(),-21>=t&&(clearInterval(n),f(),P||g.$activePage||clearInterval(k))},1)}else $(document).trigger("bookFlipNext")}function i(){k=setInterval(function(){10===g._scrollMode||z||n()},x)}function a(){clearInterval(k)}function s(){g.$activePage=g._$pages.last().get(0),g._$pages.parent().find(".z-current").removeClass("z-current"),g._$pages.last().addClass("z-current")}function o(e){e?g._$pages.last().prev().remove():g._$pages.last().remove()}function r(e){g._scrollMode=e,v=e,_scrollMode=e}function l(e){g._isforbidHandFlip=e}function c(e){x=1e3*e,a(),i()}function d(){g._$pages=g._$app.find(".main-page")}function s(e){g._$pages.parent().find(".z-current").removeClass("z-current"),e?(g.$activePage=g._$pages.last().prev().get(0),g._$pages.last().prev().addClass("z-current")):(g.$activePage=g._$pages.last().get(0),g._$pages.last().addClass("z-current"))}function p(e){g._pageData=e}function u(e){P=e}var g,m,h,f,v,b,y,w,x,S,T,C,k,E=$(window),P=!1,I=!1,_=mobilecheck(),L=tabletCheck(),R=0,M=0,q=0,A=0,z=!1,D=!1,F=!0,N=500,H=.4,O=function(e,t,n,a){function s(e,t,n){for(var i=["","webkit","moz"],a=0,s=i.length;s>a;a++){0!=a||mobilecheck()||(t=t.substring(0,1).toLowerCase()+t.substring(1,t.length));var o=n instanceof Array?n[a]:n;e[i[a]+t]=o}}function o(e,t,n){for(var i=["","-webkit-","-moz-"],a=0;a<i.length;a++)e.css(i[a]+t,n)}function r(e){return $("#inside_"+e,".phone-view").length?$("#inside_"+e,".phone-view"):$("#inside_"+e)}function l(){g._isDisableFlipPage=!0;var e;"0"==t||"1"==t||"2"==t||"6"==t||"9"==t||"11"==t||"12"==t?(e=A>0?-y:y,o($(g.$activePage),"transform","translateY("+e+"px)"),o($(g.$currentPage),"transform","translateY(0) scale(1)")):("3"==t||"5"==t)&&(e=q>0?-b:b,o($(g.$activePage),"transform","translateX("+e+"px)"),o($(g.$currentPage),"transform","translateX(0) scale(1)")),setTimeout(function(){$(g.$currentPage).attr("style",""),$(g.$activePage).attr("style",""),$(g.$activePage).removeClass("z-active z-move"),g._isDisableFlipPage=!1},500)}function c(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage)))if(A>0){if(g._isDisableFlipPrevPage)return;D||F?(D=!1,F=!1,ee(!0),te(!0,"bottom center","translateY",y)):ne(!0,"translateY",y,A,g._scrollMode)}else if(0>A){if(g._isDisableFlipNextPage)return;!D||F?(D=!0,F=!1,ee(!1),te(!1,"top center","translateY",y)):ne(!1,"translateY",y,A,g._scrollMode)}}function d(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?(ie("translateY",A,y,g._scrollMode),$(document).trigger("flipend")):(g._isDisableFlipPage=!1,l())}function p(){if(Math.abs(q)>Math.abs(A)&&completeEffect($(g.$currentPage)))if(q>0){if(g._isDisableFlipPrevPage)return;D||F?(D=!1,F=!1,ee(!0),te(!0,"center right","translateX",b)):ne(!0,"translateX",b,q,g._scrollMode)}else if(0>q){if(g._isDisableFlipNextPage)return;!D||F?(D=!0,F=!1,ee(!1),te(!1,"center left","translateX",b)):ne(!1,"translateX",b,q,g._scrollMode)}}function u(){Math.abs(q)>Math.abs(A)&&Math.abs(q)>20?(ie("translateX",q,b,g._scrollMode),$(document).trigger("flipend")):(g._isDisableFlipPage=!1,l())}function v(){if(Math.abs(q)>Math.abs(A)&&completeEffect($(g.$currentPage)))if(q>0){if(g._isDisableFlipPrevPage)return;D||F?(D=!1,F=!1,ee(!0),b=_?window.innerWidth:$(".nr").width(),te(!0,"","translateX",b)):ne(!0,"translateX",b,q,g._scrollMode)}else if(0>q){if(g._isDisableFlipNextPage)return;!D||F?(D=!0,F=!1,ee(!1),b=_?window.innerWidth:$(".nr").width(),te(!1,"","translateX",b)):ne(!1,"translateX",b,q,g._scrollMode)}}function w(){Math.abs(q)>Math.abs(A)&&Math.abs(q)>20?(ie("translateX",q,b,g._scrollMode),$(document).trigger("flipend")):(g._isDisableFlipPage=!1,l())}function k(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage)))if(A>0){if(g._isDisableFlipPrevPage)return;D||F?(D=!1,F=!1,ee(!0),y=_?window.innerHeight:$(".nr").height(),te(!0,"","translateY",y)):ne(!0,"translateY",y,A,g._scrollMode)}else if(0>A){if(g._isDisableFlipNextPage)return;!D||F?(D=!0,F=!1,ee(!1),y=_?window.innerHeight:$(".nr").height(),te(!1,"","translateY",y)):ne(!1,"translateY",y,A,g._scrollMode)}}function O(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?(ie("translateY",A,y,g._scrollMode),$(document).trigger("flipend")):(g._isDisableFlipPage=!1,l())}function U(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage)))if(A>0){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&$(g.$activePage).removeClass("z-move z-active"),ee(!0),s(g.$activePage.style,"Transform","rotateX(90deg) translateY(-"+y/2+"px) translateZ("+y/2+"px)"),s(ae.get(0).style,"Perspective","700px"),s(ae.get(0).style,"TransformStyle","preserve-3d")),g.$activePage&&g.$activePage.classList.contains("main-page")&&($(g.$activePage).addClass("z-active z-move").trigger("active").css("zIndex",1),s(g.$currentPage.style,"Transform","rotateX(-"+A/y*90+"deg) translateY("+A/2+"px) translateZ("+A/2+"px)"),s(g.$activePage.style,"Transform","rotateX("+(90-A/y*90)+"deg) translateY("+(-y/2+A/2)+"px) translateZ("+(y/2-A/2)+"px)"))}else if(0>A){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&$(g.$activePage).removeClass("z-move z-active"),ee(!1),s(g.$activePage.style,"Transform","rotateX(-90deg) translateY(-"+y/2+"px) translateZ(-"+y/2+"px)"),s(ae.get(0).style,"Perspective","700px"),s(ae.get(0).style,"TransformStyle","preserve-3d")),g.$activePage&&g.$activePage.classList.contains("main-page")?($(g.$activePage).addClass("z-active z-move").trigger("active").css("zIndex",0),s(g.$currentPage.style,"Transform","rotateX("+-A/y*90+"deg) translateY("+A/2+"px) translateZ("+-A/2+"px)"),s(g.$activePage.style,"Transform","rotateX("+(-90-A/y*90)+"deg) translateY("+(y/2+A/2)+"px) translateZ("+(y/2+A/2)+"px)")):(s(g.$currentPage.style,"Transform","translateX(0px) scale(1)"),g.$activePage=null)}}function j(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?(A>0?s(g.$currentPage.style,"Transform","rotateX(-90deg) translateY("+y/2+"px) translateZ("+y/2+"px)"):s(g.$currentPage.style,"Transform","rotateX(90deg) translateY(-"+y/2+"px) translateZ("+y/2+"px)"),s(g.$currentPage.style,"zIndex","0"),s(g.$activePage.style,"Transform","rotateX(0deg) translateY(0px) translateZ(0px)"),s(g.$activePage.style,"zIndex","2"),$(document).trigger("flipend")):(s(g.$currentPage.style,"Transition","none"),s(g.$activePage.style,"Transition","none"),g._isDisableFlipPage=!1,l())}function B(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage)))if(A>0){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&$(g.$activePage).removeClass("z-move z-active"),ee(!0),o(ae,"perspective","700px"),o(ae,"transform-style","preserve-3d"),s(g.$activePage.style,"TransformOrigin","top"),s(g.$activePage.style,"Transform","rotateX(90deg)")),g.$activePage&&g.$activePage.classList.contains("main-page")&&($(g.$activePage).addClass("z-active z-move").trigger("active"),s(g.$activePage.style,"Transform","rotateX("+(90-A/y*90)+"deg) "))}else if(0>A){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&$(g.$activePage).removeClass("z-move z-active"),ee(!1),s(g.$activePage.style,"TransformOrigin","bottom"),s(g.$activePage.style,"Transform","rotateX(-90deg)"),o(ae,"perspective","700px"),o(ae,"transform-style","preserve-3d")),g.$activePage&&g.$activePage.classList.contains("main-page")?($(g.$activePage).addClass("z-active z-move").trigger("active"),s(g.$activePage.style,"Transform","rotateX("+(-90-A/y*90)+"deg) ")):(s(g.$currentPage.style,"Transform","translateX(0px) scale(1)"),g.$activePage=null)}}function X(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?(s(g.$activePage.style,"Transform","rotateX(0deg)"),$(document).trigger("flipend")):(s(g.$currentPage.style,"Transition","none"),s(g.$activePage.style,"Transition","none"),g._isDisableFlipPage=!1,l())}function V(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage))){if(A>0){if(g._isDisableFlipPrevPage)return;(D||F)&&(D=!1,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),ee(!0),g.$activePage.style.zIndex=2,g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-move")),g.$activePage.style.opacity=0)}else if(0>A){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),ee(!1),g.$activePage.style.zIndex=2,g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-move")),g.$activePage.style.opacity=0)}var e=Math.abs(A)/y*1.3;g.$activePage.style.opacity=e.toFixed(1),e.toFixed(3)<=1&&o($(g.$activePage),"transform","scale("+e.toFixed(3)+")")}}function G(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?(o($(g.$activePage),"transform","scale(1)"),g.$activePage.style.opacity=1,$(document).trigger("flipend")):(s(g.$currentPage.style,"Transition","none"),s(g.$activePage.style,"Transition","none"),g._isDisableFlipPage=!1,l())}function W(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage)))if(A>0){if(g._isDisableFlipPrevPage)return;(D||F)&&(D=!1,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-fade-in"),g.$activePage.classList.remove("z-move")),ee(!0),g.$currentPage.style.zIndex=1,g.$activePage.style.zIndex=2,g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-fade-in"),g.$activePage.classList.add("z-move")))}else if(0>A){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-fade-in"),g.$activePage.classList.remove("z-move")),ee(!1),g.$currentPage.style.zIndex=1,g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.style.zIndex=2,g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-fade-in"),g.$activePage.classList.add("z-move")))}}function Q(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?setTimeout(function(){$(document).trigger("flipend")},1600):(g._isDisableFlipPage=!1,l())}function Y(){if(Math.abs(q)>Math.abs(A)&&completeEffect($(g.$currentPage)))if(q>0){if(g._isDisableFlipPrevPage)return;D||F?(D=!1,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),ee(!0),g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-move"),o($(g.$activePage),"Transform","scale(0.3) translateX(0) translateZ(-"+y+"px) rotateY(45deg)"),g.$activePage.style.zIndex="0"),o(ae,"perspective","1000px"),g.$currentPage.style.zIndex="100"):g.$activePage&&(b/4>=q?o($(g.$currentPage),"Transform","translateX("+q+"px)"):o($(g.$currentPage),"Transform","translateX("+1.5*q+"px) scale("+((5*b/4-q)/b).toFixed(3)+") rotateY("+q/b*45+"deg) translateZ(-"+(q-b/4)+"px)"))}else if(0>q){if(g._isDisableFlipNextPage)return;!D||F?(D=!0,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),ee(!1),g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-move"),o($(g.$activePage),"Transform","scale(0.3) translateX("+(b+300)+"px) translateZ(-"+y+"px) rotateY(-45deg)"),g.$activePage.style.zIndex="0"),o(ae,"perspective","1000px"),g.$currentPage.style.zIndex="100"):g.$activePage&&(q>=-b/4?o($(g.$currentPage),"Transform","translateX("+q+"px)"):o($(g.$currentPage),"Transform","translateX("+1.5*q+"px) scale("+((5*b/4+q)/b).toFixed(3)+") rotateY("+q/b*45+"deg) translateZ("+(q+b/4)+"px)"),o($(g.$activePage),"Transform","scale("+(.3-(q+b/4)/b).toFixed(3)+") translateX("+(-q-b/4+200)+"px) translateZ("+(-q-3*b/4)+"px) rotateY(-"+(45+(q+b/4)/b*45)+"deg)"))}}function Z(){Math.abs(q)>Math.abs(A)&&Math.abs(q)>20?(q>0?(g.$currentPage.style.webkitTransformOrigin="left",g.$currentPage.style.webkitTransform="translateX(0) translateZ(-"+y+"px) rotateY(0) scale(0.2)",g.$activePage.style.webkitTransform="translateX(0) translateZ(0) rotateY(0) scale(1)",g.$currentPage.style.zIndex="0",g.$activePage.style.zIndex="1"):(g.$currentPage.style.webkitTransformOrigin="right",g.$currentPage.style.webkitTransform="translateX("+b+"px) translateZ(-"+y+"px) rotateY(0) scale(0.2)",g.$activePage.style.webkitTransform="translateX(0) translateZ(0) rotateY(0) scale(1)",g.$activePage.style.zIndex="1",g.$currentPage.style.zIndex="0"),$(document).trigger("flipend")):(s(g.$currentPage.style,"Transition","none"),s(g.$activePage.style,"Transition","none"),g._isDisableFlipPage=!1,l())}function J(){if(Math.abs(A)>Math.abs(q)&&completeEffect($(g.$currentPage))){if(A>0){if(g._isDisableFlipPrevPage)return;(D||F)&&(D=!1,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),ee(!0),g.$activePage&&g.$activePage.classList.contains("main-page")&&($(g.$activePage).addClass("z-active z-move"),$(g.$activePage).css({zIndex:0,opacity:1})),$(g.$currentPage).css({opacity:1}),$(g.$activePage).css({zIndex:0,opacity:1}),o($(g.$activePage),"transform","translateY(0)"),o($(g.$currentPage),"transform-origin","0% 0% 0px"))}else if(0>A){if(g._isDisableFlipNextPage)return;(!D||F)&&(D=!0,F=!1,g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),ee(!1),g.$activePage&&g.$activePage.classList.contains("main-page")&&(g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-move"),$(g.$activePage).css({zIndex:0,opacity:1})),$(g.$currentPage).css({opacity:1}),$(g.$activePage).css({zIndex:0,opacity:1}),o($(g.$activePage),"transform","translateY(0)"),o($(g.$currentPage),"transform-origin","0% 0% 0px"))}g.$activePage&&(o($(g.$currentPage),"transform-origin","0% 0% 0px"),o($(g.$currentPage),"transform","rotate("+Math.abs(A)/y*90+"deg)"),g.$currentPage.style.opacity=((y-Math.abs(A))/y).toFixed(1))}}function K(){Math.abs(A)>Math.abs(q)&&Math.abs(A)>20?(o($(g.$currentPage),"transform","translateY("+y+"px) rotate("+Math.abs(A)/y*90+"deg)"),$(g.$currentPage).css({opacity:.5}),$(document).trigger("flipend")):(s(g.$currentPage.style,"Transition","none"),s(g.$activePage.style,"Transition","none"),g._isDisableFlipPage=!1,l())}function ee(e){I||(e?g.$currentPage.previousElementSibling&&g.$currentPage.previousElementSibling.classList.contains("main-page")?g.$activePage=g.$currentPage.previousElementSibling:g.$activePage=!!P&&g._$pages.last().get(0):g.$currentPage.nextElementSibling&&g.$currentPage.nextElementSibling.classList.contains("main-page")?g.$activePage=g.$currentPage.nextElementSibling:g.$activePage=!!P&&g._$pages.first().get(0))}function te(e,t,n,i){if(g.$activePage&&(g.$activePage.classList.remove("z-active"),g.$activePage.classList.remove("z-move")),g.$activePage&&g.$activePage.classList.contains("main-page")){g.$activePage.classList.add("z-active"),g.$activePage.classList.add("z-move");var a=e?"-":"";g.$activePage.style.webkitTransition="none",g.$activePage.style.webkitTransform=n+"("+a+i+"px)",g.$activePage.style.mozTransition="none",g.$activePage.style.mozTransform=n+"("+a+i+"px)",g.$activePage.style.transition="none",g.$activePage.style.transform=n+"("+a+i+"px)",$(g.$activePage).trigger("active"),t&&o($(g.$currentPage),"transform-origin",t)}else s(g.$currentPage.style,"Transform",n+"(0px) scale(1)")}function ne(e,t,n,i,a){if(g.$activePage){var s=e?"-":"";o($(g.$activePage),"transform",t+"("+s+(n-Math.abs(i))+"px)"),"1"==a||"3"==a?o($(g.$currentPage),"transform","scale("+((n-Math.abs(i))/y).toFixed(3)+")"):("5"==a||"11"==a)&&o($(g.$currentPage),"transform",t+"("+i+"px)")}}function ie(e,t,n,i){if("1"==i||"3"==i)o($(g.$currentPage),"transform","scale(0.2)");else if("5"==i||"11"==i){var a=t>0?"":"-";o($(g.$currentPage),"transform",e+"("+a+n+"px)")}else o($(g.$currentPage),"transform","scale(1)");o($(g.$activePage),"transform",e+"(0px)")}this._$app=e,this._$pages=this._$app.find(".main-page"),this.$currentPage=this._$pages.eq(0),this.$activePage=null,this._isInitComplete=!1,this._isDisableFlipPage=!1,this._isDisableFlipPrevPage=!1,this._isDisableFlipNextPage=!1,this._scrollMode=t,this._pageData=n,this.pageData=a,t=t,this._isforbidHandFlip=a.obj.property.forbidHandFlip,g=this,b=_||L?window.innerWidth:e.width(),y=_||L?window.innerHeight:e.height();var ae=$("#con"),se=!1;("8"==t||"9"==t)&&(H=.7,N=800),0==t||1==t||2==t||6==t||7==t||8==t||11==t||12==t?T=!0:(3==t||4==t||5==t||10==t)&&(S=!0),T?(C=$(".ctrl_panel_dir .ctrl-down"),$nextCtrl=$(".ctrl_panel_dir .ctrl-up")):S&&(C=$(".ctrl_panel_dir .ctrl-right"),$nextCtrl=$(".ctrl_panel_dir .ctrl-left")),a.obj.property.hasOwnProperty("triggerLoop")||(a.obj.property.triggerLoop=!0),P=a.obj.property.triggerLoop,a.obj.property.autoFlip&&(x=1e3*a.obj.property.autoFlipTime,i());var oe;if(n[0].elements&&n[0].elements.length)for(var re=0;re<n[0].elements.length;re++){oe||(eqShow.shakeTrigger(n,g.$currentPage),oe=!0);var le=r(n[0].elements[re].id);eqxCommon.bindTrigger(le,n[0].elements[re])}if(function(){E.on("scroll.elasticity",function(e){e.preventDefault()}).on("touchmove.elasticity",function(e){e.preventDefault()}),E.delegate("img","mousemove",function(e){e.preventDefault()})}(),"10"!=t){var ce=!1;g._$app.on("mousedown touchstart",function(e){g._isforbidHandFlip||(m(e),ce=!0)}).on("mousemove touchmove",function(e){g._isforbidHandFlip||ce&&h(e)}).on("mouseup touchend mouseleave",function(e){g._isforbidHandFlip||(f(e),ce=!1)})}else turnBook(a);m=function(e){se=!1,_&&e&&(e=event),g._isDisableFlipPage||(g.$currentPage=g._$pages.filter(".z-current").get(0),I||(g.$activePage=null),g.$currentPage&&completeEffect($(g.$currentPage))&&(z=!0,D=!1,F=!0,q=0,A=0,e&&"mousedown"==e.type?(R=e.pageX,M=e.pageY):e&&"touchstart"==e.type&&(R=e.touches?e.touches[0].pageX:e.originalEvent.touches[0].pageX,M=e.touches?e.touches[0].pageY:e.originalEvent.touches[0].pageY),g.$currentPage.classList.add("z-move"),s(g.$currentPage.style,"Transition","none"),"12"==g._scrollMode&&(g.$currentPage.style.zIndex=3)))},h=function(e){_&&e&&(e=event),z&&g._$pages.length>1&&(e&&"mousemove"==e.type?(q=e.pageX-R,A=e.pageY-M):e&&"touchmove"==e.type&&(q=(e.touches?e.touches[0].pageX:e.originalEvent.touches[0].pageX)-R,A=(e.touches?e.touches[0].pageY:e.originalEvent.touches[0].pageY)-M),!se&&(Math.abs(q)>20||Math.abs(A)>20)&&(se=!0),"0"==g._scrollMode||"2"==g._scrollMode||"1"==g._scrollMode||"15"==g._scrollMode?c():"4"==g._scrollMode||"3"==g._scrollMode?p():"5"==g._scrollMode?v():"6"==g._scrollMode?U():"7"==g._scrollMode?B():"8"==g._scrollMode?V():"9"==g._scrollMode?Y():"11"==g._scrollMode?k():"12"==g._scrollMode?J():"13"==g._scrollMode?W():"14"==g._scrollMode&&W())},f=function(e){if(z&&completeEffect($(g.$currentPage)))if(z=!1,g.$activePage){g._isDisableFlipPage=!0;var t;t="6"==g._scrollMode||"7"==g._scrollMode?"cubic-bezier(0,0,0.99,1)":"12"==g._scrollMode?"cubic-bezier(.17,.67,.87,.13)":"linear",g.$currentPage.style.webkitTransition="-webkit-transform "+H+"s "+t,g.$activePage.style.webkitTransition="-webkit-transform "+H+"s "+t,g.$currentPage.style.mozTransition="-moz-transform "+H+"s "+t,g.$activePage.style.mozTransition="-moz-transform "+H+"s "+t,g.$currentPage.style.transition="transform "+H+"s "+t,g.$activePage.style.transition="transform "+H+"s "+t,"0"==g._scrollMode||"2"==g._scrollMode||"1"==g._scrollMode||"15"==g._scrollMode?d():"4"==g._scrollMode||"3"==g._scrollMode?u():"5"==g._scrollMode?w():"6"==g._scrollMode?j():"7"==g._scrollMode?X():"8"==g._scrollMode?G():"9"==g._scrollMode?Z():"11"==g._scrollMode?O():"12"==g._scrollMode?K():"13"==g._scrollMode?Q():"14"==g._scrollMode&&Q();var n=$(g.$activePage).find(".m-img").attr("id").replace("page","")-1;g._pageData[n].properties&&g._pageData[n].properties.longPage&&$(document).trigger("clearTouchPos"),$(g.$activePage).find("li.comp-resize").each(function(e){for(var t=0;t<g._pageData[n].elements.length;t++)if(g._pageData[n].elements[t].id==parseInt($(this).attr("id").substring(7),10)){eqxCommon.animation($(this),g._pageData[n].elements[t],"view",g._pageData[n].properties);var i=r(g._pageData[n].elements[t].id);eqxCommon.bindTrigger(i,g._pageData[n].elements[t])}});for(var i=0;i<g._pageData.length;i++)g._pageData[i].effObj&&(g._pageData[i].effObj.pause=!0);g._pageData[n].effObj&&g._pageData[n].effObj.startPlay(),eqShow.setPageHis(g._pageData[n].id)}else g.$currentPage.classList.remove("z-move");I=!1},$(document).on("flipend",function(e){completeEffect($(g.$activePage))||$("#audio_btn").css("opacity",0);var i=$("#report0"),o=$(g.$activePage).find(".m-img").attr("id").substring(4),r=[];n=g._pageData,n[o-1].elements&&n[o-1].elements.length&&(r=n[o-1].elements,$.each(r,function(e,t){"d"==t.type&&eqShow.getShowCount(a.obj.id).then(function(e){var n=eqShow.fixedNum(e);$("#"+t.id).find(".counter-number").text(n)})})),eqShow.clearTyperText(n[o-1]),setTimeout(function(){s(g.$currentPage.style,"Transition","none"),$(g.$activePage).removeClass("z-active z-move").addClass("z-current"),$(g.$currentPage).removeClass("z-current z-move"),g._isDisableFlipPage=!1,g.$currentPage=$(g.$activePage).trigger("current"),$(g.$currentPage).trigger("hide"),utilSound.pause(),i.length&&i.remove(),("8"==t||"9"==t||"12"==t)&&($(g.$currentPage).css("z-index","1"),$(".main-page").attr("style","")),eqShow.shakeTrigger(n,g.$currentPage),P||(1==o?C.removeClass("enabled"):o==g._pageData.length?$nextCtrl.removeClass("enabled"):(C.addClass("enabled"),$nextCtrl.addClass("enabled"))),window.wechatUtils&&wechatUtils.stopWechatSound()},N)}),$(document).on("startAutoFlip",function(e){a.obj.property.autoFlip&&i()}),eqShow.showProgressBar(a,g._$pages,e)};return{pageScroll:e,nextPage:n,prePage:t,lastPage:s,app:O,pauseAutoFlip:a,removeLastPage:o,changeScrollMode:r,startAutoFlip:c,changeAppPage:d,setTriggerLoop:u,forbidHandFlip:l,setPageData:p}}();!function(e,t){function n(e,n){completeEffect(t(".z-current"))&&(_="started",I.length||(I=g.find(".main-page")),n||($?(e=event,f={x:e.touches[0].pageX-g.offset().left,y:e.touches[0].pageY-g.offset().top}):f={x:e.pageX-g.offset().left,y:e.pageY-g.offset().top}))}function i(e,n){if(_="turning",W&&W.obj.property.autoFlip&&W.obj.property.autoFlipTime&&u(),n||($?(e=event,v={x:e.touches[0].pageX-g.offset().left,y:e.touches[0].pageY-g.offset().top}):v={x:e.pageX-g.offset().left,y:e.pageY-g.offset().top}),0>(b=v.x-f.x)){if(T){T=!1,$&&h?x=!0:f.y>=g.height()/2?y=!0:f.y<g.height()/2&&(w=!0),C=t(".z-current").get(0);var i=t(C).find(".m-img").attr("id").substring(4);m=t("#flip"+i),Z||(k=t(C).parent(".flip-mask").get(0).nextElementSibling&&t(t(C).parent(".flip-mask").get(0).nextElementSibling).find(".main-page").get(0)?t(t(C).parent(".flip-mask").get(0).nextElementSibling).find(".main-page").get(0):!!E&&I.first().get(0)),k&&(t(k).find(".m-img").attr("id").substring(4),t(C).parent(".flip-mask").css({zIndex:100,display:"block"}),t(k).addClass("z-active").parent(".flip-mask").css({zIndex:99,display:"block"}),l(k),completeEffect(t(k))||t("#audio_btn").css("opacity",0),y?(t(".z-current").css({top:m.height()-g.height()+"px",left:"0"}),m.css({top:"-"+(m.height()-g.height())+"px"}),t(".turning").css({transformOrigin:"0% 100% 0px",left:g.width()+"px",top:g.height()+"px"})):w?t(".turning").css({top:"0",left:g.width()+"px",transformOrigin:"0% 0% 0px"}):x&&(t(".z-current").css({top:0,left:t(this).width()-g.width()+"px"}),m.css({top:0,left:-(m.width()-g.width())+"px"}),t(".turning").css({transformOrigin:"0% 100% 0px",left:g.width()+"px",top:0})))}}else if(b>0&&T){T=!1,S=!0,C=t(".z-current").get(0);var i=t(C).find(".m-img").attr("id").substr(4);m=t("#flip"+i),Z||(k=t(C).parent(".flip-mask").get(0).previousElementSibling&&t(t(C).parent(".flip-mask").get(0).previousElementSibling).find(".main-page").get(0)?t(t(C).parent(".flip-mask").get(0).previousElementSibling).find(".main-page").get(0):!!E&&I.last().get(0)),k&&(l(k),completeEffect(t(k))||t("#audio_btn").css("opacity",0),t(C).parent(".flip-mask").css({display:"block"}),t(k).addClass("z-active").parent(".flip-mask").css({zIndex:99,display:"block"}),t(".turning").css({top:"0",left:"0",transformOrigin:"0% 0% 0px"}))}k&&s(v)}function a(e,t){if(!k)return _="feeling",y=!1,w=!1,x=!1,S=!1,void(T=!0);_="leaving";var n,i,a,o;t?(n=e.x,i=e.y):$?(n=v.x-g.offset().left,i=v.y-g.offset().top):(n=e.pageX-g.offset().left,i=e.pageY-g.offset().top),y?(L=16,a=-g.width(),o=g.height(),P=setInterval(function(){n=L>=n-a?n:n-L,i=L>=o-i?i:i+L,s({x:n,y:i}),L>=n-a&&L>=o-i&&(clearInterval(P),r())},10)):w?(L=16,a=-g.width(),o=0,P=setInterval(function(){n=L>=n-a?n:n-L,i=L>=i-o?i:i-L,s({x:n,y:i}),L>=n-a&&L>=i-o&&(clearInterval(P),r())},1)):x?(L=5,a=-g.width(),P=setInterval(function(){n=L>=n-a?n:n-L,s({x:n,y:i}),L>=n-a&&(clearInterval(P),r())},1)):S&&(L=3,a=g.width(),o=0,P=setInterval(function(){n=L>=a-n?n:n+L,s({x:n,y:i}),L>=a-n&&(clearInterval(P),r())},1))}function s(e){y||w?(M=g.width()-e.x,y?q=Math.abs(g.height()-e.y):w&&(q=e.y),A=q/M,z=q/Math.sqrt(M*M+q*q),D=Math.sqrt(1-z*z),F=Math.sqrt(M*M+q*q)/2,N=F*A,H=Math.sqrt(N*N+F*F),O=H/A,R=180*Math.atan(A)/Math.PI>0?180*Math.atan(A)/Math.PI:0,U=(g.width()-H)*D,j=(g.width()-H)*z*D,B=(g.width()-H)*(1-z*z),U>=1&&(y?(R>1?t(".turning").css({width:H+"px",height:O+"px",backgroundColor:"#ff0000",background:"-webkit-linear-gradient("+(180-R)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translateX(-"+(H-3)+"px) translateY(-"+(O-3)+"px) rotate("+2*R+"deg) scaleX(-1)"}):o(e),X="0% 100% 0px",V="rotate(-"+(90-R)+"deg) translateY("+U+"px)",G="rotate("+(90-R)+"deg) translateY(-"+j+"px) translateX(-"+B+"px)"):w&&(R>1?t(".turning").css({width:H+"px",height:O+"px",backgroundColor:"#000",background:"-webkit-linear-gradient(-"+(180-R)+"deg, #fff 10%, #d1cfc7 40%, #f2eee2 50%, transparent 50%, transparent 100%)",transform:"translateX(-"+(H-2)+"px) rotate(-"+2*R+"deg) scaleX(-1)"}):o(e),X="0% 0% 0px",V="rotate("+(90-R)+"deg) translateY(-"+U+"px)",G="rotate(-"+(90-R)+"deg) translateY("+j+"px) translateX(-"+B+"px)"),m.css({zIndex:100,transformOrigin:X,transform:V}),t(k).parent(".flip-mask").css({zIndex:99,display:"block"}),t(k).css({zIndex:1e3}),t(C).css({transformOrigin:X,transform:G}))):x?(t(".turning").css({width:(g.width()-e.x)/2+"px",height:g.height()+"px",left:e.x+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}),m.css({transformOrigin:"0% 50% 0px",left:0,transform:"translateX(-"+(m.width()-e.x)+"px)"}),t(C).css({transformOrigin:"0% 50% 0px",transform:"translateX("+(m.width()-e.x)+"px)"})):S&&(m.css({zIndex:100,transformOrigin:"0% 50% 0px",transform:"translateX("+e.x+"px)"}),t(C).css({transformOrigin:"0% 50% 0px",transform:"translateX(-"+e.x+"px)"}),t(".turning").css({width:g.width()-e.x+"px",height:g.height()+"px",left:-(g.width()-2*e.x)+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 15%, #f2eee2 85%, #fff 100%)"}))}function o(e){t(".turning").css({width:(g.width()-e.x+6)/2+"px",height:g.height()+"px",top:0,left:e.x+2+"px",background:"-webkit-linear-gradient(left, #fff 0% , #d1cfc7 10%, #f2eee2 90%, #fff 100%)",transform:"",border:0})}function r(){var e=W.list;W.obj.property.autoFlip&&W.obj.property.autoFlipTime&&p(),utilSound.pause();var n=t("#report0");n.length&&n.remove(),_="feeling",y=!1,w=!1,x=!1,S=!1,T=!0,b=0,t(".flip-mask").css({transform:"",top:0,left:0,zIndex:0}),t(C).removeClass("z-current").css({transform:"",top:0,left:0}),t(k).removeClass("z-active").addClass("z-current").css({transform:""}),t(".turning").css({width:0,height:0,top:0,left:0,transform:"",background:"none"}),C=k;var i=t(k).find(".m-img").attr("id").substring(4);t("#flip"+i).css({zIndex:100}),t("#audio_btn").css("opacity",1),k=null;var a=t(C).find(".m-img").attr("id").substring(4);e[a-1].elements&&e[a-1].elements.length&&t.each(e[a-1].elements,function(e,n){"d"==n.type&&eqShow.getShowCount(W.obj.id).then(function(e){var i=eqShow.fixedNum(e);t("#"+n.id).find(".counter-number").text(i)})}),J||eqShow.showProgressBar(W,t("#nr").find(".main-page")),J=!0}function l(e){if(e){var n=t(e).find(".m-img").attr("id").substring(4);t(e).find("li").each(function(e){for(var i=0;i<W.list[n-1].elements.length;i++)W.list[n-1].elements[i].id==parseInt(t(this).attr("id").substring(7),10)&&eqxCommon.animation(t(this),W.list[n-1].elements[i],"view")})}}function c(){"turning"!=_&&"leaving"!=_&&(f={x:0,y:g.height()},n(f,"mock"),_="turning",t(".main-page").css({width:g.width()+"px",height:g.height()+"px"}),v={x:0,y:g.height()},S=!0,P=setInterval(function(){v.x++,i(v,"mock"),v.x<=250&&(clearInterval(P),a(v,"mock"))},1))}function d(){"turning"!=_&&"leaving"!=_&&(f={x:g.width(),y:g.height()},n(f,"mock"),_="turning",t(".main-page").css({width:g.width()+"px",height:g.height()+"px"}),v={x:g.width(),y:g.height()},$&&h?x=!0:y=!0,Y=setInterval(function(){v.x-=5,v.y-=5,i(v,"mock"),v.x<=200&&(clearInterval(Y),a(v,"mock"),E||k||u())},1))}function p(){K=setInterval(function(){return completeEffect(t(".z-current"))?void d():void u()},1e3*Q)}function u(){clearInterval(K)}var g=t(".nr"),m=null,h=isAndroid(),f={},v={},b=0,y=!1,w=!1,x=!1,S=!1,T=!0,C=null,k=null,E=!1,$=mobilecheck(),P=null,I=[],_="feeling",L=0,R=0,M=0,q=0,A=0,z=0,D=0,F=0,N=0,H=0,O=0,U=0,j=0,B=0,X=0,V=0,G=0,W=null,Q=0,Y="",Z=!1;e.turnBook=function(e){W=e,W.obj.property.autoFlip&&W.obj.property.autoFlipTime&&(Q=W.obj.property.autoFlipTime,p()),E=W.obj.property.triggerLoop,t('<div class="turning"></div>').appendTo(".nr"),t(".main-page").css({width:t(".nr").width()+"px",height:t(".nr").height()+"px"}),g.on($?"touchstart":"mousedown",function(e){W.obj.property.forbidHandFlip||"feeling"==_&&(n(e),t(".main-page").css({width:g.width()+"px",height:g.height()+"px"}))}).on($?"touchmove":"mousemove",function(e){W.obj.property.forbidHandFlip||("started"==_||"turning"==_)&&i(e)}).on($?"touchend":"mouseup mouseleave",function(e){return!W.obj.property.forbidHandFlip&&(Z=!1,t(".z-current").get(0))?0==b?(T=!0,void(_="feeling")):void("turning"==_&&a(e)):void 0})};var J=!1;e.flipBookScroll=function(e){Z=!0;for(var n,i=0,a=W.list.length;a>i;i++)e==W.list[i].id&&(n=W.list[i].num);n||(n=e),C=t(".z-current").get(0);var s=t(C).find(".m-img").attr("id").substring(4),o=t(C).parent(".flip-mask").siblings(".flip-mask").find(".main-page").find("#page"+n);o&&(k=t(o).parent(".main-page").get(0),s>n?c():n>s&&d())},t(document).on("bookFlipPre",function(e){c()}),t(document).on("bookFlipNext",function(e){d()});var K}(window,jQuery),QR8bitByte.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},QRCode.prototype={addData:function(e){var t=new QR8bitByte(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;40>e;e++){for(var t=QRRSBlock.getRSBlocks(e,this.errorCorrectLevel),n=new QRBitBuffer,i=0,a=0;a<t.length;a++)i+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var s=this.dataList[a];n.put(s.mode,4),n.put(s.getLength(),QRUtil.getLengthInBits(s.mode,e)),s.write(n)}if(n.getLengthInBits()<=8*i)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;7>=n;n++)if(!(-1>=e+n||this.moduleCount<=e+n))for(var i=-1;7>=i;i++)-1>=t+i||this.moduleCount<=t+i||(this.modules[e+n][t+i]=n>=0&&6>=n&&(0==i||6==i)||i>=0&&6>=i&&(0==n||6==n)||n>=2&&4>=n&&i>=2&&4>=i)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;8>n;n++){this.makeImpl(!0,n);var i=QRUtil.getLostPoint(this);(0==n||e>i)&&(e=i,t=n)}return t},createMovieClip:function(e,t,n){var i=e.createEmptyMovieClip(t,n);this.make();for(var a=0;a<this.modules.length;a++)for(var s=1*a,o=0;o<this.modules[a].length;o++){var r=1*o,l=this.modules[a][o];l&&(i.beginFill(0,100),i.moveTo(r,s),i.lineTo(r+1,s),i.lineTo(r+1,s+1),i.lineTo(r,s+1),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=QRUtil.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],a=e[n];if(null==this.modules[i][a])for(var s=-2;2>=s;s++)for(var o=-2;2>=o;o++)this.modules[i+s][a+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o}},setupTypeNumber:function(e){for(var t=QRUtil.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(var n=0;18>n;n++){var i=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=QRUtil.getBCHTypeInfo(n),a=0;15>a;a++){var s=!e&&1==(i>>a&1);6>a?this.modules[a][8]=s:8>a?this.modules[a+1][8]=s:this.modules[this.moduleCount-15+a][8]=s}for(var a=0;15>a;a++){var s=!e&&1==(i>>a&1);8>a?this.modules[8][this.moduleCount-a-1]=s:9>a?this.modules[8][15-a-1+1]=s:this.modules[8][15-a-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,i=this.moduleCount-1,a=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(6==o&&o--;;){for(var r=0;2>r;r++)if(null==this.modules[i][o-r]){var l=!1;s<e.length&&(l=1==(e[s]>>>a&1));var c=QRUtil.getMask(t,i,o-r);c&&(l=!l),this.modules[i][o-r]=l,-1==--a&&(s++,a=7)}if(0>(i+=n)||this.moduleCount<=i){i-=n,n=-n;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(e,t,n){for(var i=QRRSBlock.getRSBlocks(e,t),a=new QRBitBuffer,s=0;s<n.length;s++){var o=n[s];a.put(o.mode,4),a.put(o.getLength(),QRUtil.getLengthInBits(o.mode,e)),o.write(a)}for(var r=0,s=0;s<i.length;s++)r+=i[s].dataCount;if(a.getLengthInBits()>8*r)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*r+")");for(a.getLengthInBits()+4<=8*r&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*r)&&(a.put(QRCode.PAD0,8),!(a.getLengthInBits()>=8*r));)a.put(QRCode.PAD1,8);return QRCode.createBytes(a,i)},QRCode.createBytes=function(e,t){for(var n=0,i=0,a=0,s=new Array(t.length),o=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l;i=Math.max(i,l),a=Math.max(a,c),s[r]=new Array(l);for(var d=0;d<s[r].length;d++)s[r][d]=255&e.buffer[d+n];n+=l;var p=QRUtil.getErrorCorrectPolynomial(c),u=new QRPolynomial(s[r],p.getLength()-1),g=u.mod(p);o[r]=new Array(p.getLength()-1);for(var d=0;d<o[r].length;d++){var m=d+g.getLength()-o[r].length;o[r][d]=m>=0?g.get(m):0}}for(var h=0,d=0;d<t.length;d++)h+=t[d].totalCount;for(var f=new Array(h),v=0,d=0;i>d;d++)for(var r=0;r<t.length;r++)d<s[r].length&&(f[v++]=s[r][d]);for(var d=0;a>d;d++)for(var r=0;r<t.length;r++)d<o[r].length&&(f[v++]=o[r][d]);return f};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)t^=QRUtil.G15<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15);return(e<<10|t)^QRUtil.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)t^=QRUtil.G18<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return QRUtil.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case QRMaskPattern.PATTERN000:return(t+n)%2==0;case QRMaskPattern.PATTERN001:return t%2==0;case QRMaskPattern.PATTERN010:return n%3==0;case QRMaskPattern.PATTERN011:return(t+n)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case QRMaskPattern.PATTERN101:return t*n%2+t*n%3==0;case QRMaskPattern.PATTERN110:return(t*n%2+t*n%3)%2==0;case QRMaskPattern.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new QRPolynomial([1],0),n=0;e>n;n++)t=t.multiply(new QRPolynomial([1,QRMath.gexp(n)],0));return t},getLengthInBits:function(e,t){if(t>=1&&10>t)switch(e){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(27>t)switch(e){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(41>t))throw new Error("type:"+t);switch(e){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;t>i;i++)for(var a=0;t>a;a++){for(var s=0,o=e.isDark(i,a),r=-1;1>=r;r++)if(!(0>i+r||i+r>=t))for(var l=-1;1>=l;l++)0>a+l||a+l>=t||(0!=r||0!=l)&&o==e.isDark(i+r,a+l)&&s++;s>5&&(n+=3+s-5)}for(var i=0;t-1>i;i++)for(var a=0;t-1>a;a++){var c=0;e.isDark(i,a)&&c++,e.isDark(i+1,a)&&c++,e.isDark(i,a+1)&&c++,e.isDark(i+1,a+1)&&c++,(0==c||4==c)&&(n+=3)}for(var i=0;t>i;i++)for(var a=0;t-6>a;a++)e.isDark(i,a)&&!e.isDark(i,a+1)&&e.isDark(i,a+2)&&e.isDark(i,a+3)&&e.isDark(i,a+4)&&!e.isDark(i,a+5)&&e.isDark(i,a+6)&&(n+=40);for(var a=0;t>a;a++)for(var i=0;t-6>i;i++)e.isDark(i,a)&&!e.isDark(i+1,a)&&e.isDark(i+2,a)&&e.isDark(i+3,a)&&e.isDark(i+4,a)&&!e.isDark(i+5,a)&&e.isDark(i+6,a)&&(n+=40);for(var d=0,a=0;t>a;a++)for(var i=0;t>i;i++)e.isDark(i,a)&&d++;return n+=Math.abs(100*d/t/t-50)/5*10}},QRMath={glog:function(e){if(1>e)throw new Error("glog("+e+")");return QRMath.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;e>=256;)e-=255;return QRMath.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<e.getLength();i++)t[n+i]^=QRMath.gexp(QRMath.glog(this.get(n))+QRMath.glog(e.get(i)));return new QRPolynomial(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(var i=0;i<e.getLength();i++)n[i]^=QRMath.gexp(QRMath.glog(e.get(i))+t);return new QRPolynomial(n,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(e,t){var n=QRRSBlock.getRsBlockTable(e,t);if(n==undefined)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,a=new Array,s=0;i>s;s++)for(var o=n[3*s+0],r=n[3*s+1],l=n[3*s+2],c=0;o>c;c++)a.push(new QRRSBlock(r,l));return a},QRRSBlock.getRsBlockTable=function(e,t){switch(t){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+3];default:return undefined}},QRBitBuffer.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;t>n;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},function(){function e(e,t,s,o,r){function l(){timeout=setTimeout(function(){nums>=300*s&&($(t).fadeOut(500,function(){setTimeout(function(){$(t).removeClass("lock").addClass("unlock")},500),$("#audio_btn").css("opacity",1),1===o&&eqShow.playVideo(n)}),nums=0)},i)}var c="ontouchstart"in window,d=c?"touchstart":"mousedown",p=c?"touchmove":"mousemove",u=c?"touchend":"mouseup";e.lineCap="round",e.lineJoin="round",e.lineWidth=2*a,e.globalCompositeOperation="destination-out",new RegExp("assets"),t.addEventListener(d,function(n){function i(t){t.stopPropagation(),l(),nums++,t.preventDefault(),x2=c?t.targetTouches[0].pageX:t.pageX-$("#can"+o).offset().left,y2=c?t.targetTouches[0].pageY:t.pageY-$("#can"+o).offset().top,e.moveTo(x1,y1),e.lineTo(x2,y2),e.stroke(),x1=x2,y1=y2}n.stopPropagation(),$("#tip"+o).remove(),n.preventDefault(),x1=c?n.targetTouches[0].pageX:n.pageX-$("#can"+o).offset().left,y1=c?n.targetTouches[0].pageY:n.pageY-$("#can"+o).offset().top,startX=x1,startY=y1,t.addEventListener(p,i),t.addEventListener(u,function(e){e.stopPropagation(),t.removeEventListener(p,i)})})}var t,n,i=200;window.addScratchEffect=function(i,s,o){t=s,n=i,a=20,nums=0;var r,l=$(".m-img").width(),c=$(".m-img").height(),d=document.createElement("canvas");$(d).prependTo("#page"+o).attr("class","cas scratch-cas page_effect lock").attr("id","can"+o).attr("style","z-index: 1000");var p=d.getContext("2d");d.width=l,d.height=c;var u=new Image;if(s[o-1].properties.image){if(num=o,s[o-1].properties.tip){var g=document.createElement("div");$(g).attr("id","tip"+o).attr("class","tip").prependTo("#page"+o),$(g).html(s[o-1].properties.tip)}u.src=s[o-1].properties.image.path,r=s[o-1].properties.percentage.value}else if(s[o-1].properties.scratch){if(num=o,s[o-1].properties.scratch.tip){var g=document.createElement("div");$(g).attr("id","tip"+o).attr("class","tip").prependTo("#page"+o),$(g).html(s[o-1].properties.scratch.tip)}u.src=s[o-1].properties.scratch.image.path,r=s[o-1].properties.scratch.percentage.value||s[o-1].properties.scratch.percentage}!function(n,i,a,o,r){n.onload=function(){s[o-1].properties.image||!s[o-1].properties.scratch.hasOwnProperty("opacity")?i.globalAlpha=.8:i.globalAlpha=1-parseFloat(s[o-1].properties.scratch.opacity).toFixed(2),i.drawImage(this,0,0,a.width,a.height),renderPage(eqShow,o,t);for(var l=0;l<t[o-1].elements.length;l++){var c=eqShow.selectElement(t[o-1].elements[l].id);eqxCommon.bindTrigger(c,t[o-1].elements[l])}e(i,a,r,o,n)}}(u,p,d,o,r)}}(),function(e){e.fn.slides=function(t){return t=e.extend({},e.fn.slides.option,t),this.each(function(){function n(){clearInterval(c.data("interval"))}function i(){t.pause?(clearTimeout(c.data("pause")),clearInterval(c.data("interval")),pauseTimeout=setTimeout(function(){clearTimeout(c.data("pause")),playInterval=setInterval(function(){a("next",h)},t.play),c.data("interval",playInterval)},t.pause),c.data("pause",pauseTimeout)):n()}function a(n,i,a){if(!o&&s){switch(o=!0,n){case"next":b=w,v=w+1,v=p===v?0:v,l=2*u,n=2*-u,w=v;break;case"prev":b=w,v=w-1,v=-1===v?p-1:v,l=0,n=0,w=v;break;case"pagination":v=parseInt(a,10),b=e("."+t.paginationClass+" li.current a",c).attr("rel"),v>b?(l=2*u,n=2*-u):(l=0,n=0),w=v}"fade"===i?(t.animationStart(),t.crossfade?d.children(":eq("+v+")",c).css({zIndex:10}).fadeIn(t.fadeSpeed,function(){d.children(":eq("+b+")",c).css({display:"none",zIndex:0}),e(this).css({zIndex:0}),t.animationComplete(v+1),o=!1}):(t.animationStart(),d.children(":eq("+b+")",c).fadeOut(t.fadeSpeed,function(){t.autoHeight?d.animate({height:d.children(":eq("+v+")",c).outerHeight()},t.autoHeightSpeed,function(){d.children(":eq("+v+")",c).fadeIn(t.fadeSpeed)}):d.children(":eq("+v+")",c).fadeIn(t.fadeSpeed,function(){e.browser.msie&&e(this).get(0).style.removeAttribute("filter")}),t.animationComplete(v+1),o=!1}))):(d.children(":eq("+v+")").css({left:l,display:"block"}),t.autoHeight?(t.animationStart(),d.animate({left:n,height:d.children(":eq("+v+")").outerHeight()},t.slideSpeed,function(){d.css({left:-u}),d.children(":eq("+v+")").css({left:u,zIndex:5}),d.children(":eq("+b+")").css({left:u,display:"none",zIndex:0}),t.animationComplete(v+1),o=!1})):(t.animationStart(),d.animate({left:n},t.slideSpeed,function(){d.css({left:-u}),d.children(":eq("+v+")").css({left:u,zIndex:5}),d.children(":eq("+b+")").css({left:u,display:"none",zIndex:0}),t.animationComplete(v+1),o=!1}))),t.pagination&&(e("."+t.paginationClass+" li.current",c).removeClass("current"),e("."+t.paginationClass+" li a:eq("+v+")",c).parent().addClass("current"))}}e("."+t.container,e(this)).children().wrapAll('<div class="slides_control"/>');var s,o,r,l,c=e(this),d=e(".slides_control",c),p=d.children().size(),u=d.children().outerWidth(),g=d.children().outerHeight(),m=t.start-1,h=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],f=t.effect.indexOf(",")<0?h:t.effect.replace(" ","").split(",")[1],v=0,b=0,y=0,w=0;if(!(2>p)){if(0>m&&(m=0),m>p&&(m=p-1),t.start&&(w=m),t.randomize&&d.randomize(),e("."+t.container,c).css({overflow:"hidden",position:"relative"}),d.css({position:"relative",width:3*u,height:g,left:-u}),d.children().css({position:"absolute",top:0,left:u,zIndex:0,display:"none"}),t.autoHeight&&d.animate({height:d.children(":eq("+m+")").outerHeight()},t.autoHeightSpeed),t.preload&&"IMG"==d.children()[0].tagName){c.css({background:"url("+t.preloadImage+") no-repeat 50% 50%"});var x=e("img:eq("+m+")",c).attr("src")+"?"+(new Date).getTime();e("img:eq("+m+")",c).attr("src",x).load(function(){e(this).fadeIn(t.fadeSpeed,function(){e(this).css({zIndex:5}),c.css({background:""}),s=!0})})}else d.children(":eq("+m+")").fadeIn(t.fadeSpeed,function(){s=!0});t.bigTarget&&(d.children().css({cursor:"pointer"}),d.children().click(function(){return a("next",h),!1})),t.hoverPause&&t.play&&(d.children().bind("mouseover",function(){n()}),d.children().bind("mouseleave",function(){i()})),t.generateNextPrev&&(e("."+t.container,c).after('<a href="#" class="'+t.prev+'">Prev</a>'),e("."+t.prev,c).after('<a href="#" class="'+t.next+'">Next</a>')),e("."+t.next,c).click(function(e){e.preventDefault(),t.play&&i(),a("next",h)}),e("."+t.prev,c).click(function(e){e.preventDefault(),t.play&&i(),a("prev",h)}),t.generatePagination?(c.append("<ul class="+t.paginationClass+"></ul>"),d.children().each(function(){e("."+t.paginationClass,c).append("<li><a rel="+y+' href="#">'+(y+1)+"</a></li>"),y++})):e("."+t.paginationClass+" li a",c).each(function(){e(this).attr("rel",y),y++}),e("."+t.paginationClass+" li a:eq("+m+")",c).parent().addClass("current"),e("."+t.paginationClass+" li a",c).click(function(){return t.play&&i(),r=e(this).attr("rel"),w!=r&&a("pagination",f,r),!1}),t.play&&(playInterval=setInterval(function(){a("next",h)},t.play),c.data("interval",playInterval))}})},e.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,paginationClass:"pagination",fadeSpeed:350,slideSpeed:350,start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){}},e.fn.randomize=function(t){function n(){return Math.round(Math.random())-.5}return e(this).each(function(){var a=e(this),s=a.children(),o=s.length;if(o>1){s.hide();var r=[];for(i=0;o>i;i++)r[r.length]=i;r=r.sort(n),e.each(r,function(e,n){var i=s.eq(n),o=i.clone(!0);o.show().appendTo(a),t!==undefined&&t(i,o),i.remove()})}})}}(jQuery),function($){window.snowFly={doEffect:function(audioObj,pageNum,pages,callback){function startInterVal(){if(effObj.pause)return void clearInterval(effObj.interVal);for(var i=0;i<particles.length;i++){var particle=particles[i];with(particle.updatePhysics(),particle.position)y<-1e3&&(y+=2e3),x>1e3?x-=2e3:x<-1e3&&(x+=2e3),z>1e3?z-=2e3:z<-1e3&&(z+=2e3)}camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y),camera.lookAt(scene.position),renderer.render(scene,camera)}callback(eqShow,pageNum,pages);for(var i=0;i<pages[pageNum-1].elements.length;i++){var $elem=eqShow.selectElement(pages[pageNum-1].elements[i].id);eqxCommon.bindTrigger($elem,pages[pageNum-1].elements[i])}1==pageNum&&eqShow.playVideo(audioObj);var container,particle,camera,scene,renderer,SCREEN_WIDTH=window.innerWidth,SCREEN_HEIGHT=window.innerHeight,mouseX=0,mouseY=0,effObj=(window.innerWidth,window.innerHeight,{pause:!1,startPlay:function(){this.pause=!1,effObj.interVal=setInterval(startInterVal,20)}}),particles=[],particleImage=new Image;particleImage.src=CLIENT_CDN+"view/images/ParticleSmoke.png";var $parent=$("#page"+pageNum).parent(".main-page");container=$parent.get(0),camera=new THREE.PerspectiveCamera(75,SCREEN_WIDTH/SCREEN_HEIGHT,1,1e4),camera.position.z=1e3,scene=new THREE.Scene,scene.add(camera),renderer=new THREE.CanvasRenderer,renderer.setSize(SCREEN_WIDTH,SCREEN_HEIGHT),renderer.num=pageNum;for(var material=new THREE.ParticleBasicMaterial({map:new THREE.Texture(particleImage)}),i=0;500>i;i++)particle=new Particle3D(material),particle.position.x=2e3*Math.random()-1e3,particle.position.y=2e3*Math.random()-1e3,particle.position.z=2e3*Math.random()-1e3,particle.scale.x=particle.scale.y=1,scene.add(particle),particles.push(particle);var canvas=renderer.domElement;return $(canvas).attr("id","snowcas"+pageNum).appendTo($parent),$("#snowcas"+pageNum).css({position:"absolute",pointerEvents:"none",top:0,width:"100%",height:"100%"}),1==pageNum&&(effObj.interVal=setInterval(startInterVal,1e3/60)),effObj}}}(jQuery),function(){window.eqxiuSvg={NAMESPACE:"http://www.w3.org/2000/svg",SYMBOLS:{},boundingBox:function(e){var t,n=e.parentNode,i=document.createElementNS(eqxiuSvg.NAMESPACE,"svg");return i.setAttribute("width","0"),i.setAttribute("height","0"),i.setAttribute("style","visibility: hidden; position: absolute; left: 0; top: 0;"),i.appendChild(e),document.body.appendChild(i),t=e.getBBox(),n?n.appendChild(e):i.removeChild(e),document.body.removeChild(i),t},pointsToPolygon:function(e){for(var t=[];e.length>=2;)t.push(e.shift()+","+e.shift());return t.join(" ")},symbol:function(e,t,n){return'<g fill="'+(n||"#555")+'" id="path_'+t+'">'+eqxiuSvg.SYMBOLS[e]+"</g>"},ShapeFromType:function(e,t,n,i,a){return t||(t=64),n||(n=64),/symbols\-/.test(e)?eqxiuSvg.symbol(e.replace(/^symbols\-/,""),i,a):"rect"==e?eqxiuSvg.rect(t,n):"circle"==e?eqxiuSvg.ellipse(t,n):"diamond"==e?eqxiuSvg.polygon(t,n,4):"octagon"==e?eqxiuSvg.polygon(t,n,8):"triangle-up"==e?eqxiuSvg.triangleUp(t,n):"triangle-down"==e?eqxiuSvg.triangleDown(t,n):"triangle-left"==e?eqxiuSvg.triangleLeft(t,n):"triangle-right"==e?eqxiuSvg.triangleRight(t,n):"arrow-up"==e?eqxiuSvg.arrowUp(t,n):"arrow-down"==e?eqxiuSvg.arrowDown(t,n):"arrow-left"==e?eqxiuSvg.arrowLeft(t,n):"arrow-right"==e?eqxiuSvg.arrowRight(t,n):void 0},rect:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"rect");return n.setAttribute("width",e),n.setAttribute("height",t),n},ellipse:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"ellipse");return n.setAttribute("rx",e/2),n.setAttribute("ry",t/2),n.setAttribute("cx",e/2),n.setAttribute("cy",t/2),n},triangleUp:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([e/2,0,e,t,0,t])),n},triangleDown:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([0,0,e,0,e/2,t])),n},triangleLeft:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([0,t/2,e,0,e,t])),n},triangleRight:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([e,t/2,0,t,0,0])),n},arrowUp:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([.5*e,0,e,.5*t,.7*e,.5*t,.7*e,t,.3*e,t,.3*e,.5*t,0,.5*t,.5*e,0])),n},arrowDown:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([.5*e,t,e,.5*t,.7*e,.5*t,.7*e,0,.3*e,0,.3*e,.5*t,0,.5*t,.5*e,t])),n},arrowLeft:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([e,.3*t,.5*e,.3*t,.5*e,0,0,.5*t,.5*e,t,.5*e,.7*t,e,.7*t,e,.3*t])),n},arrowRight:function(e,t){var n=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon");return n.setAttribute("points",eqxiuSvg.pointsToPolygon([0,.3*t,.5*e,.3*t,.5*e,0,e,.5*t,.5*e,t,.5*e,.7*t,0,.7*t])),n},polygon:function(e,t,n){var i=document.createElementNS(eqxiuSvg.NAMESPACE,"polygon"),a=[];if(3===n)a=[e/2,0,e,t,0,t];else if(n>3)for(var s=e/2,o=t/2,r=0;n>r;r++){var l=s+s*Math.cos(2*Math.PI*r/n),c=o+o*Math.sin(2*Math.PI*r/n);l=Math.round(10*l)/10,c=Math.round(10*c)/10,a.push(l),a.push(c)}return i.setAttribute("points",eqxiuSvg.pointsToPolygon(a)),i}}}(),function(){window.eqxiuSvg.SYMBOLS={bolt:'<path d="M32 0l-24 16 6 4-14 12 24-12-6-4z"></path>',camera:'<path d="M16 20c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4-2.209 0-4-1.791-4-4zM28 8l-3.289-6.643c-0.27-0.789-1.016-1.357-1.899-1.357h-5.492c-0.893 0-1.646 0.582-1.904 1.385l-3.412 6.615h-8.004c-2.209 0-4 1.791-4 4v20h32v-20c0-2.209-1.789-4-4-4zM6 16c-1.105 0-2-0.895-2-2s0.895-2 2-2 2 0.895 2 2-0.895 2-2 2zM20 28c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z"></path>',"checkmark-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM13.52 23.383l-7.362-7.363 2.828-2.828 4.533 4.535 9.617-9.617 2.828 2.828-12.444 12.445z"></path>',clock:'<path d="M16 4c6.617 0 12 5.383 12 12s-5.383 12-12 12-12-5.383-12-12 5.383-12 12-12zM16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16v0zM21.422 18.578l-3.422-3.426v-7.152h-4.023v7.992c0 0.602 0.277 1.121 0.695 1.492l3.922 3.922 2.828-2.828z"></path>',cloud:'<path d="M24 10c-0.379 0-0.738 0.061-1.102 0.111-1.394-2.465-3.972-4.111-6.898-4.111-2.988 0-5.566 1.666-6.941 4.1-0.352-0.047-0.704-0.1-1.059-0.1-4.41 0-8 3.588-8 8 0 4.414 3.59 8 8 8h16c4.41 0 8-3.586 8-8 0-4.412-3.59-8-8-8zM24 22h-16c-2.207 0-4-1.797-4-4 0-2.193 1.941-3.885 4.004-3.945 0.008 0.943 0.172 1.869 0.5 2.744l3.746-1.402c-0.168-0.444-0.25-0.915-0.25-1.397 0-2.205 1.793-4 4-4 1.293 0 2.465 0.641 3.199 1.639-1.929 1.461-3.199 3.756-3.199 6.361h4c0-2.205 1.793-4 4-4s4 1.795 4 4c0 2.203-1.793 4-4 4z"></path>',cog:'<path d="M32 17.969v-4l-4.781-1.992c-0.133-0.375-0.273-0.738-0.445-1.094l1.93-4.805-2.829-2.828-4.762 1.961c-0.363-0.176-0.734-0.324-1.117-0.461l-2.027-4.75h-4l-1.977 4.734c-0.398 0.141-0.781 0.289-1.16 0.469l-4.754-1.91-2.828 2.828 1.938 4.711c-0.188 0.387-0.34 0.781-0.485 1.188l-4.703 2.011v4l4.707 1.961c0.145 0.406 0.301 0.801 0.488 1.188l-1.902 4.742 2.828 2.828 4.723-1.945c0.379 0.18 0.766 0.324 1.164 0.461l2.023 4.734h4l1.98-4.758c0.379-0.141 0.754-0.289 1.113-0.461l4.797 1.922 2.828-2.828-1.969-4.773c0.168-0.359 0.305-0.723 0.438-1.094l4.782-2.039zM15.969 22c-3.312 0-6-2.688-6-6s2.688-6 6-6 6 2.688 6 6-2.688 6-6 6z"></path>',denied:'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM16 4c2.59 0 4.973 0.844 6.934 2.242l-16.696 16.688c-1.398-1.961-2.238-4.344-2.238-6.93 0-6.617 5.383-12 12-12zM16 28c-2.59 0-4.973-0.844-6.934-2.242l16.696-16.688c1.398 1.961 2.238 4.344 2.238 6.93 0 6.617-5.383 12-12 12z"></path>',earth:'<path d="M27.314 4.686c3.022 3.022 4.686 7.040 4.686 11.314s-1.664 8.292-4.686 11.314c-3.022 3.022-7.040 4.686-11.314 4.686s-8.292-1.664-11.314-4.686c-3.022-3.022-4.686-7.040-4.686-11.314s1.664-8.292 4.686-11.314c3.022-3.022 7.040-4.686 11.314-4.686s8.292 1.664 11.314 4.686zM25.899 25.9c1.971-1.971 3.281-4.425 3.821-7.096-0.421 0.62-0.824 0.85-1.073-0.538-0.257-2.262-2.335-0.817-3.641-1.621-1.375 0.927-4.466-1.802-3.941 1.276 0.81 1.388 4.375-1.858 2.598 1.079-1.134 2.050-4.145 6.592-3.753 8.946 0.049 3.43-3.504 0.715-4.729-0.422-0.824-2.279-0.281-6.262-2.434-7.378-2.338-0.102-4.344-0.314-5.25-2.927-0.545-1.87 0.58-4.653 2.584-5.083 2.933-1.843 3.98 2.158 6.731 2.232 0.854-0.894 3.182-1.178 3.375-2.18-1.805-0.318 2.29-1.517-0.173-2.199-1.358 0.16-2.234 1.409-1.512 2.467-2.632 0.614-2.717-3.809-5.247-2.414-0.064 2.206-4.132 0.715-1.407 0.268 0.936-0.409-1.527-1.594-0.196-1.379 0.654-0.036 2.854-0.807 2.259-1.325 1.225-0.761 2.255 1.822 3.454-0.059 0.866-1.446-0.363-1.713-1.448-0.98-0.612-0.685 1.080-2.165 2.573-2.804 0.497-0.213 0.973-0.329 1.336-0.296 0.752 0.868 2.142 1.019 2.215-0.104-1.862-0.892-3.915-1.363-6.040-1.363-3.051 0-5.952 0.969-8.353 2.762 0.645 0.296 1.012 0.664 0.39 1.134-0.483 1.439-2.443 3.371-4.163 3.098-0.893 1.54-1.482 3.238-1.733 5.017 1.441 0.477 1.773 1.42 1.464 1.736-0.734 0.64-1.185 1.548-1.418 2.541 0.469 2.87 1.818 5.515 3.915 7.612 2.644 2.644 6.16 4.1 9.899 4.1s7.255-1.456 9.899-4.1z"></path>',eye:'<path d="M16 4c-8.836 0-16 11.844-16 11.844s7.164 12.156 16 12.156 16-12.156 16-12.156-7.164-11.844-16-11.844zM16 24c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8zM12 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4-2.209 0-4-1.791-4-4z"></path>',facebook:'<path d="M17.996 32h-5.996v-16h-4v-5.514l4-0.002-0.007-3.248c0-4.498 1.22-7.236 6.519-7.236h4.412v5.515h-2.757c-2.064 0-2.163 0.771-2.163 2.209l-0.008 2.76h4.959l-0.584 5.514-4.37 0.002-0.004 16z"></path>',fork:'<path d="M20 0v3.875c0 1.602-0.625 3.109-1.754 4.238l-11.316 11.254c-1.789 1.785-2.774 4.129-2.883 6.633h-4.047l6 6 6-6h-3.957c0.105-1.438 0.684-2.773 1.711-3.805l11.316-11.25c1.891-1.89 2.93-4.398 2.93-7.070v-3.875h-4zM23.953 26c-0.109-2.504-1.098-4.848-2.887-6.641l-2.23-2.215-2.836 2.821 2.242 2.23c1.031 1.027 1.609 2.367 1.715 3.805h-3.957l6 6 6-6h-4.047z"></path>',globe:'<path d="M15 2c-8.284 0-15 6.716-15 15s6.716 15 15 15c8.284 0 15-6.716 15-15s-6.716-15-15-15zM23.487 22c0.268-1.264 0.437-2.606 0.492-4h3.983c-0.104 1.381-0.426 2.722-0.959 4h-3.516zM6.513 12c-0.268 1.264-0.437 2.606-0.492 4h-3.983c0.104-1.381 0.426-2.722 0.959-4h3.516zM21.439 12c0.3 1.28 0.481 2.62 0.54 4h-5.979v-4h5.439zM16 10v-5.854c0.456 0.133 0.908 0.355 1.351 0.668 0.831 0.586 1.625 1.488 2.298 2.609 0.465 0.775 0.867 1.638 1.203 2.578h-4.852zM10.351 7.422c0.673-1.121 1.467-2.023 2.298-2.609 0.443-0.313 0.895-0.535 1.351-0.668v5.854h-4.852c0.336-0.94 0.738-1.803 1.203-2.578zM14 12v4h-5.979c0.059-1.38 0.24-2.72 0.54-4h5.439zM2.997 22c-0.533-1.278-0.854-2.619-0.959-4h3.983c0.055 1.394 0.224 2.736 0.492 4h-3.516zM8.021 18h5.979v4h-5.439c-0.3-1.28-0.481-2.62-0.54-4zM14 24v5.854c-0.456-0.133-0.908-0.355-1.351-0.668-0.831-0.586-1.625-1.488-2.298-2.609-0.465-0.775-0.867-1.638-1.203-2.578h4.852zM19.649 26.578c-0.673 1.121-1.467 2.023-2.298 2.609-0.443 0.312-0.895 0.535-1.351 0.668v-5.854h4.852c-0.336 0.94-0.738 1.802-1.203 2.578zM16 22v-4h5.979c-0.059 1.38-0.24 2.72-0.54 4h-5.439zM23.98 16c-0.055-1.394-0.224-2.736-0.492-4h3.516c0.533 1.278 0.855 2.619 0.959 4h-3.983zM25.958 10h-2.997c-0.582-1.836-1.387-3.447-2.354-4.732 1.329 0.636 2.533 1.488 3.585 2.54 0.671 0.671 1.261 1.404 1.766 2.192zM5.808 7.808c1.052-1.052 2.256-1.904 3.585-2.54-0.967 1.285-1.771 2.896-2.354 4.732h-2.997c0.504-0.788 1.094-1.521 1.766-2.192zM4.042 24h2.997c0.583 1.836 1.387 3.447 2.354 4.732-1.329-0.636-2.533-1.488-3.585-2.54-0.671-0.671-1.261-1.404-1.766-2.192zM24.192 26.192c-1.052 1.052-2.256 1.904-3.585 2.54 0.967-1.285 1.771-2.896 2.354-4.732h2.997c-0.504 0.788-1.094 1.521-1.766 2.192z"></path>',happy:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM16 18.711c3.623 0 7.070-0.963 10-2.654-0.455 5.576-4.785 9.942-10 9.942-5.215 0-9.544-4.371-10-9.947 2.93 1.691 6.377 2.658 10 2.658zM8 11c0-1.657 0.895-3 2-3s2 1.343 2 3c0 1.657-0.895 3-2 3-1.105 0-2-1.343-2-3zM20 11c0-1.657 0.895-3 2-3s2 1.343 2 3c0 1.657-0.895 3-2 3-1.105 0-2-1.343-2-3z"></path>',"heart-fill":'<path d="M16 5.844c-1.613-2.266-4.129-3.844-7.113-3.844-4.903 0-8.887 3.992-8.887 8.891v0.734l16.008 18.375 15.992-18.375v-0.734c0-4.899-3.984-8.891-8.887-8.891-2.984 0-5.5 1.578-7.113 3.844z"></path>',"heart-stroke":'<path d="M23.113 6c2.457 0 4.492 1.82 4.836 4.188l-11.945 13.718-11.953-13.718c0.344-2.368 2.379-4.188 4.836-4.188 2.016 0 3.855 2.164 3.855 2.164l3.258 3.461 3.258-3.461c0 0 1.84-2.164 3.855-2.164zM23.113 2c-2.984 0-5.5 1.578-7.113 3.844-1.613-2.266-4.129-3.844-7.113-3.844-4.903 0-8.887 3.992-8.887 8.891v0.734l16.008 18.375 15.992-18.375v-0.734c0-4.899-3.984-8.891-8.887-8.891v0z"></path>',home:'<path d="M16 0l-16 16h4v16h24v-16h4l-16-16zM24 28h-6v-6h-4v6h-6v-14.344l8-5.656 8 5.656v14.344z"></path>',iphone:'<path d="M16 0h-8c-4.418 0-8 3.582-8 8v16c0 4.418 3.582 8 8 8h8c4.418 0 8-3.582 8-8v-16c0-4.418-3.582-8-8-8zM12 30.062c-1.139 0-2.062-0.922-2.062-2.062s0.924-2.062 2.062-2.062 2.062 0.922 2.062 2.062-0.923 2.062-2.062 2.062zM20 24h-16v-16c0-2.203 1.795-4 4-4h8c2.203 0 4 1.797 4 4v16z"></path>',lock:'<path d="M14 0c-5.508 0-9.996 4.484-9.996 10v2h-4.004v14c0 3.309 2.691 6 6 6h12c3.309 0 6-2.691 6-6v-16c0-5.516-4.488-10-10-10zM11.996 24c-1.101 0-1.996-0.895-1.996-2s0.895-2 1.996-2c1.105 0 2 0.895 2 2s-0.894 2-2 2zM20 12h-11.996v-2c0-3.309 2.691-6 5.996-6 3.309 0 6 2.691 6 6v2z"></path>',mail:'<path d="M15.996 15.457l16.004-7.539v-3.918h-32v3.906zM16.004 19.879l-16.004-7.559v15.68h32v-15.656z"></path>',"minus-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM24 18h-16v-4h16v4z"></path>',moon:'<path d="M24.633 22.184c-8.188 0-14.82-6.637-14.82-14.82 0-2.695 0.773-5.188 2.031-7.363-6.824 1.968-11.844 8.187-11.844 15.644 0 9.031 7.32 16.355 16.352 16.355 7.457 0 13.68-5.023 15.648-11.844-2.18 1.254-4.672 2.028-7.367 2.028z"></path>',paperclip:'<path d="M17.293 15.292l-2.829-2.829-4 4c-1.953 1.953-1.953 5.119 0 7.071 1.953 1.953 5.118 1.953 7.071 0l10.122-9.879c3.123-3.124 3.123-8.188 0-11.313-3.125-3.124-8.19-3.124-11.313 0l-11.121 10.88c-4.296 4.295-4.296 11.26 0 15.557 4.296 4.296 11.261 4.296 15.556 0l6-6-2.829-2.829-5.999 6c-2.733 2.732-7.166 2.732-9.9 0-2.733-2.732-2.733-7.166 0-9.899l11.121-10.881c1.562-1.562 4.095-1.562 5.656 0 1.563 1.563 1.563 4.097 0 5.657l-10.121 9.879c-0.391 0.391-1.023 0.391-1.414 0s-0.391-1.023 0-1.414l4-4z"></path>',pin:'<path d="M17.070 2.93c-3.906-3.906-10.234-3.906-14.141 0-3.906 3.904-3.906 10.238 0 14.14 0.001 0 7.071 6.93 7.071 14.93 0-8 7.070-14.93 7.070-14.93 3.907-3.902 3.907-10.236 0-14.14zM10 14c-2.211 0-4-1.789-4-4s1.789-4 4-4 4 1.789 4 4-1.789 4-4 4z"></path>',"plus-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM24 18h-6v6h-4v-6h-6v-4h6v-6h4v6h6v4z"></path>',rain:'<path d="M23.998 6c-0.375 0-0.733 0.061-1.103 0.111-1.389-2.465-3.969-4.111-6.895-4.111-2.987 0-5.565 1.666-6.94 4.1-0.353-0.047-0.705-0.1-1.060-0.1-4.41 0-8 3.588-8 8s3.59 8 8 8h15.998c4.414 0 8-3.588 8-8s-3.586-8-8-8zM23.998 18h-15.998c-2.207 0-4-1.795-4-4 0-2.193 1.941-3.885 4.004-3.945 0.009 0.943 0.172 1.869 0.5 2.744l3.746-1.402c-0.168-0.444-0.25-0.915-0.25-1.397 0-2.205 1.793-4 4-4 1.293 0 2.465 0.641 3.199 1.639-1.928 1.461-3.199 3.756-3.199 6.361h4c0-2.205 1.795-4 3.998-4 2.211 0 4 1.795 4 4s-1.789 4-4 4zM3.281 29.438c-0.75 0.75-1.969 0.75-2.719 0s-0.75-1.969 0-2.719 5.438-2.719 5.438-2.719-1.969 4.688-2.719 5.438zM11.285 29.438c-0.75 0.75-1.965 0.75-2.719 0-0.75-0.75-0.75-1.969 0-2.719 0.754-0.75 5.438-2.719 5.438-2.719s-1.965 4.688-2.719 5.438zM19.28 29.438c-0.75 0.75-1.969 0.75-2.719 0s-0.75-1.969 0-2.719 5.437-2.719 5.437-2.719-1.968 4.688-2.718 5.438z"></path>',ribbon:'<path d="M8 20c-1.41 0-2.742-0.289-4-0.736v12.736l4-4 4 4v-12.736c-1.258 0.447-2.59 0.736-4 0.736zM0 8c0-4.418 3.582-8 8-8s8 3.582 8 8c0 4.418-3.582 8-8 8-4.418 0-8-3.582-8-8z"></path>',sad:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM9.997 24.398l-2.573-1.544c1.749-2.908 4.935-4.855 8.576-4.855 3.641 0 6.827 1.946 8.576 4.855l-2.573 1.544c-1.224-2.036-3.454-3.398-6.003-3.398-2.549 0-4.779 1.362-6.003 3.398z"></path>',smiley:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM22.003 19.602l2.573 1.544c-1.749 2.908-4.935 4.855-8.576 4.855s-6.827-1.946-8.576-4.855l2.573-1.544c1.224 2.036 3.454 3.398 6.003 3.398s4.779-1.362 6.003-3.398z"></path>',star:'<path d="M22.137 19.625l9.863-7.625h-12l-4-12-4 12h-12l9.875 7.594-3.875 12.406 10.016-7.68 9.992 7.68z"></path>',sun:'<path d="M16.001 8c-4.418 0-8 3.582-8 8s3.582 8 8 8c4.418 0 7.999-3.582 7.999-8s-3.581-8-7.999-8v0zM14 2c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM4 6c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM2 14c1.105 0 2 0.895 2 2 0 1.107-0.895 2-2 2s-2-0.893-2-2c0-1.105 0.895-2 2-2zM4 26c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM14 30c0-1.109 0.895-2 2-2 1.108 0 2 0.891 2 2 0 1.102-0.892 2-2 2-1.105 0-2-0.898-2-2zM24 26c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM30 18c-1.104 0-2-0.896-2-2 0-1.107 0.896-2 2-2s2 0.893 2 2c0 1.104-0.896 2-2 2zM24 6c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2z"></path>',"thin-arrow-down":'<path d="M4.586 19.414l10 10c0.781 0.781 2.047 0.781 2.828 0l10-10c0.781-0.781 0.781-2.047 0-2.828s-2.047-0.781-2.828 0l-6.586 6.586v-19.172c0-1.105-0.895-2-2-2s-2 0.895-2 2v19.172l-6.586-6.586c-0.391-0.39-0.902-0.586-1.414-0.586s-1.024 0.195-1.414 0.586c-0.781 0.781-0.781 2.047 0 2.828z"></path>',"thin-arrow-down-left":'<path d="M18 28c1.105 0 2-0.895 2-2s-0.895-2-2-2h-7.172l16.586-16.586c0.781-0.781 0.781-2.047 0-2.828-0.391-0.391-0.902-0.586-1.414-0.586s-1.024 0.195-1.414 0.586l-16.586 16.586v-7.172c0-1.105-0.895-2-2-2s-2 0.895-2 2v14h14z"></path>',"thin-arrow-down-right":'<path d="M28 14c0-1.105-0.895-2-2-2s-2 0.895-2 2v7.172l-16.586-16.586c-0.781-0.781-2.047-0.781-2.828 0-0.391 0.391-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414l16.586 16.586h-7.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h14v-14z"></path>',"thin-arrow-left":'<path d="M12.586 4.586l-10 10c-0.781 0.781-0.781 2.047 0 2.828l10 10c0.781 0.781 2.047 0.781 2.828 0s0.781-2.047 0-2.828l-6.586-6.586h19.172c1.105 0 2-0.895 2-2s-0.895-2-2-2h-19.172l6.586-6.586c0.39-0.391 0.586-0.902 0.586-1.414s-0.195-1.024-0.586-1.414c-0.781-0.781-2.047-0.781-2.828 0z"></path>',"thin-arrow-right":'<path d="M19.414 27.414l10-10c0.781-0.781 0.781-2.047 0-2.828l-10-10c-0.781-0.781-2.047-0.781-2.828 0s-0.781 2.047 0 2.828l6.586 6.586h-19.172c-1.105 0-2 0.895-2 2s0.895 2 2 2h19.172l-6.586 6.586c-0.39 0.39-0.586 0.902-0.586 1.414s0.195 1.024 0.586 1.414c0.781 0.781 2.047 0.781 2.828 0z"></path>',"thin-arrow-up":'<path d="M27.414 12.586l-10-10c-0.781-0.781-2.047-0.781-2.828 0l-10 10c-0.781 0.781-0.781 2.047 0 2.828s2.047 0.781 2.828 0l6.586-6.586v19.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-19.172l6.586 6.586c0.39 0.39 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586c0.781-0.781 0.781-2.047 0-2.828z"></path>',"thin-arrow-up-left":'<path d="M4 18c0 1.105 0.895 2 2 2s2-0.895 2-2v-7.172l16.586 16.586c0.781 0.781 2.047 0.781 2.828 0 0.391-0.391 0.586-0.902 0.586-1.414s-0.195-1.024-0.586-1.414l-16.586-16.586h7.172c1.105 0 2-0.895 2-2s-0.895-2-2-2h-14v14z"></path>',"thin-arrow-up-right":'<path d="M26.001 4c-0 0-0.001 0-0.001 0h-11.999c-1.105 0-2 0.895-2 2s0.895 2 2 2h7.172l-16.586 16.586c-0.781 0.781-0.781 2.047 0 2.828 0.391 0.391 0.902 0.586 1.414 0.586s1.024-0.195 1.414-0.586l16.586-16.586v7.172c0 1.105 0.895 2 2 2s2-0.895 2-2v-14h-1.999z"></path>',twitter:'<path d="M32 6.076c-1.177 0.522-2.443 0.875-3.771 1.034 1.355-0.813 2.396-2.099 2.887-3.632-1.269 0.752-2.674 1.299-4.169 1.593-1.198-1.276-2.904-2.073-4.792-2.073-3.626 0-6.565 2.939-6.565 6.565 0 0.515 0.058 1.016 0.17 1.496-5.456-0.274-10.294-2.888-13.532-6.86-0.565 0.97-0.889 2.097-0.889 3.301 0 2.278 1.159 4.287 2.921 5.465-1.076-0.034-2.088-0.329-2.974-0.821-0.001 0.027-0.001 0.055-0.001 0.083 0 3.181 2.263 5.834 5.266 6.437-0.551 0.15-1.131 0.23-1.73 0.23-0.423 0-0.834-0.041-1.235-0.118 0.835 2.608 3.26 4.506 6.133 4.559-2.247 1.761-5.078 2.81-8.154 2.81-0.53 0-1.052-0.031-1.566-0.092 2.905 1.863 6.356 2.95 10.064 2.95 12.076 0 18.679-10.004 18.679-18.68 0-0.285-0.006-0.568-0.019-0.849 1.283-0.926 2.396-2.082 3.276-3.398z"></path>',umbrella:'<path d="M16 0c-8.82 0-16 7.178-16 16h4c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5h4c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5v10c0 1.102-0.895 2-2 2-1.102 0-2-0.898-2-2h-4c0 3.309 2.695 6 6 6 3.312 0 6-2.691 6-6v-10c0-0.826 0.676-1.5 1.5-1.5 0.828 0 1.498 0.674 1.498 1.5h4c0-0.826 0.68-1.5 1.5-1.5 0.828 0 1.5 0.674 1.5 1.5h4c0-8.822-7.172-16-15.998-16z"></path>',unlock:'<path d="M14.004 0c-5.516 0-9.996 4.484-9.996 10h3.996c0-3.309 2.688-6 6-6 3.305 0 5.996 2.691 5.996 6v2h-20v14c0 3.309 2.695 6 6 6h12c3.305 0 6-2.691 6-6v-16c0-5.516-4.488-10-9.996-10zM12 24c-1.102 0-2-0.895-2-2s0.898-2 2-2c1.109 0 2 0.895 2 2s-0.891 2-2 2z"></path>',user:'<path d="M12 16c-6.625 0-12 5.375-12 12 0 2.211 1.789 4 4 4h16c2.211 0 4-1.789 4-4 0-6.625-5.375-12-12-12zM6 6c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6-3.314 0-6-2.686-6-6z"></path>',wondering:'<path d="M16 32c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16zM16 3c7.18 0 13 5.82 13 13s-5.82 13-13 13-13-5.82-13-13 5.82-13 13-13zM23.304 18.801l0.703 2.399-13.656 4-0.703-2.399zM8 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2zM20 10c0-1.105 0.895-2 2-2s2 0.895 2 2c0 1.105-0.895 2-2 2-1.105 0-2-0.895-2-2z"></path>',"x-circle":'<path d="M16 0c-8.836 0-16 7.164-16 16s7.164 16 16 16 16-7.164 16-16-7.164-16-16-16zM23.914 21.086l-2.828 2.828-5.086-5.086-5.086 5.086-2.828-2.828 5.086-5.086-5.086-5.086 2.828-2.828 5.086 5.086 5.086-5.086 2.828 2.828-5.086 5.086 5.086 5.086z"></path>',android:'<path d="M50.143,45.057h-0.241c-2.13,0-3.857-1.735-3.857-3.875V24.713 c0-2.14,1.727-3.875,3.857-3.875h0.241c2.13,0,3.857,1.735,3.857,3.875v16.469C54,43.323,52.273,45.057,50.143,45.057z M39.777,51.112h-2.169v8.961c0,2.14-1.727,3.875-3.857,3.875h-0.241c-2.13,0-3.857-1.735-3.857-3.875v-8.961h-5.304v8.961 c0,2.14-1.727,3.875-3.857,3.875H20.25c-2.13,0-3.857-1.735-3.857-3.875v-8.961h-2.17c-2.663,0-4.821-2.169-4.821-4.844V21.565 h35.196v24.704C44.598,48.944,42.44,51.112,39.777,51.112z M18.451,5.498l-2.777-4.832c-0.1-0.174-0.041-0.396,0.132-0.496 l0.209-0.121c0.173-0.1,0.394-0.041,0.494,0.133l2.802,4.877c2.297-1.091,4.863-1.705,7.573-1.705c2.856,0,5.552,0.681,7.941,1.885 l2.906-5.056c0.1-0.174,0.321-0.233,0.494-0.133l0.209,0.121c0.173,0.1,0.232,0.322,0.132,0.496l-2.889,5.028 c4.989,2.866,8.459,8.094,8.901,14.169H9.191C9.643,13.645,13.271,8.316,18.451,5.498z M35.076,13.572 c0.865,0,1.567-0.705,1.567-1.574c0-0.87-0.702-1.574-1.567-1.574c-0.865,0-1.567,0.705-1.567,1.574 C33.509,12.867,34.21,13.572,35.076,13.572z M18.924,13.572c0.865,0,1.567-0.705,1.567-1.574c0-0.87-0.702-1.574-1.567-1.574 c-0.865,0-1.567,0.705-1.567,1.574C17.357,12.867,18.059,13.572,18.924,13.572z M4.098,45.057H3.857C1.727,45.057,0,43.323,0,41.182 V24.713c0-2.14,1.727-3.875,3.857-3.875h0.241c2.13,0,3.857,1.735,3.857,3.875v16.469C7.955,43.323,6.228,45.057,4.098,45.057z"/>',apple:'<path d="M43.061,34.522c0,8.67,8.393,12.374,8.393,12.374 c-2.057,8.63-9.252,15.172-9.252,15.172c-1.613,1.607-4.567,1.852-4.567,1.852c-2.377,0-5.309-1.34-5.309-1.34 c-2.259-1.299-5.426-1.301-5.426-1.301c-2.792,0-5.309,1.261-5.309,1.261C19.334,63.835,16.399,64,16.399,64 c-2.568,0-3.982-1.498-3.982-1.498C-0.546,50.658,0.003,35.271,0.003,35.271c0-19.645,15.576-19.586,15.576-19.586 c3.626,0,4.919,0.827,4.919,0.827c3.866,1.882,5.777,1.892,5.777,1.892c1.5,0,5.816-1.931,5.816-1.931 c2.223-1.052,5.778-1.064,5.778-1.064c8.325,0,11.984,6.424,11.984,6.424C42.702,26.182,43.061,34.522,43.061,34.522z M25.729,14.818C25.729,1.075,38.377,0,38.377,0C38.377,14.797,25.729,14.818,25.729,14.818z"/>',baidu:'<path d="M57.549,28.923c-0.219,7.717-6.714,8.677-6.714,8.677 c-8.176-0.648-7.673-8.677-7.673-8.677c-0.795-8.379,5.755-9.641,5.755-9.641C58,19.412,57.549,28.923,57.549,28.923z M37.407,20.246c-5.931,0-5.755-8.677-5.755-8.677c1.708-7.93,7.673-9.641,7.673-9.641c5.472,0.78,6.714,8.677,6.714,8.677 C44.174,21.255,37.407,20.246,37.407,20.246z M37.407,32.779c2.75,3.707,7.673,8.677,7.673,8.677 c7.267,4.21,7.673,10.605,7.673,10.605c0,13.939-14.387,10.605-14.387,10.605c-1.873-0.813-7.673-1.928-7.673-1.928h-4.796 c-2.325,0.456-10.551,1.928-10.551,1.928c-10.734,0-11.51-10.605-11.51-10.605c0-6.349,4.796-9.641,4.796-9.641 c6.151-4.696,9.592-9.641,9.592-9.641c5.137-7.284,9.591-6.749,9.591-6.749C33.569,25.744,37.407,32.779,37.407,32.779z M25.897,35.672H23.02v5.785h-6.714c-5.859,0.902-5.755,8.677-5.755,8.677c-0.551,5.375,5.755,7.713,5.755,7.713h9.591V35.672z M32.611,53.025V41.456h-4.796v12.533c-0.017,2.653,3.837,3.856,3.837,3.856h10.551v-16.39h-4.796v12.533h-2.877 C33.473,53.886,32.611,53.025,32.611,53.025z M17.265,46.277h5.755v7.713h-4.796c0,0-2.647-0.459-2.877-3.856 C15.346,50.133,15.452,46.899,17.265,46.277z M21.101,20.246c-6.799,0-6.714-10.605-6.714-10.605c0-9.31,6.714-9.641,6.714-9.641 c5.997,0,6.714,9.641,6.714,9.641C27.815,19.489,21.101,20.246,21.101,20.246z M6.714,33.743C0.544,33.743,0,24.102,0,24.102 c0-8.281,6.714-9.641,6.714-9.641c6.751,0,7.673,9.641,7.673,9.641C14.387,32.77,6.714,33.743,6.714,33.743z"/>',douban:'<path d="M0,64v-5.818h20.945c0,0-4.899-9.901-8.145-11.636l8.145-3.491 c0,0,5.56,12.555,5.818,15.127h13.964c0,0,5.825-11.048,5.818-15.127l6.982,3.491c0,0-3.36,10.254-5.295,11.512 c-0.447,0.029-0.656,0.069-0.523,0.124c0.157,0.065,0.336-0.002,0.523-0.124C51.09,57.875,64,58.182,64,58.182V64H0z M5.818,40.727 v-25.6h52.364v25.6H5.818z M48.873,20.945H15.127v13.964h33.745V20.945z M3.491,0H64v5.818H3.491V0z"/>',googleplay:'<path d="M55.532,34.556c-0.828,0.473-5.547,3.122-11.786,6.618 l-8.591-8.715l9.908-9.829c5.385,3.012,9.44,5.281,10.469,5.858C58,29.871,57.958,33.17,55.532,34.556z M3.177,0.02 c0.741-0.078,1.548,0.064,2.355,0.511c1.54,0.853,23.514,13.139,37.89,21.18l-9.536,9.46L3.177,0.02z M1.36,0.75l31.244,31.694 L2.074,62.731C0.89,62.224,0,61.115,0,59.574C0,56.662,0,5.559,0,3.55C0,2.412,0.532,1.401,1.36,0.75z M42.112,42.089 C27.972,50.01,7.556,61.427,5.419,62.575c-0.32,0.172-0.655,0.291-0.993,0.367l29.446-29.212L42.112,42.089z"/>',kaixinwang:'<path d="M60.549,30.164c0,0-3.494,8.614-16.984,12.25c0,0-0.502,11.237,0,15.076c0,0,1.59,4.938-4.718,3.769c0,0-6.539-0.588-13.21-9.423c0,0-2.071-1.431-2.831,0c0,0-5.588,5.249-9.436,7.538c0,0-7.049,0.734-7.549-3.769c0,0-2.985-13.205,0.944-21.672c0,0-0.269-2.116-0.944-2.827c0,0-8.864-10.313-4.718-22.615c0,0,1.108-1.884,5.661-0.942c0,0,7.295,4.273,8.492,4.711c0,0,3.262,0.609,3.774-0.942c0,0,7.578-9.802,14.153-11.307c0,0,7.228-0.583,7.549,6.596c0,0,2.168,10.163,1.887,13.192c0,0,1.659,4.159,4.718,3.769c0,0,9.924-0.088,12.266,1.885C59.605,25.453,61.958,26.999,60.549,30.164z M13.371,27.337c0.013-2.519-1.887-2.827-1.887-2.827c-3.341,0-2.831,1.884-2.831,1.884c-0.146,2.405,2.831,2.827,2.831,2.827C13.764,28.831,13.371,27.337,13.371,27.337zM14.314,32.991c-1.477,8.602,6.605,11.307,6.605,11.307c6.04,0.515,11.323-4.711,11.323-4.711c-7.647,2.452-11.323,0.942-11.323,0.942C14.869,38.902,14.314,32.991,14.314,32.991z M36.016,18.857c0,0-3.136-1.152-5.661,0.942c0,0-0.944,0.585-0.944-0.942c0,0-3.121-5.667-7.549-1.885c0,0-6.72,5.505-2.831,13.192c0,0,1.414,3.005,6.605,0.942c0,0,0.403,2.079,1.887,3.769c0,0,4.505,3.149,7.549-3.769C35.073,31.107,38.588,24.505,36.016,18.857z M41.678,33.933c0,0-3.622-0.382-3.774,2.827c0,0-0.038,2.695,2.831,2.827c0,0,2.968-0.587,2.831-2.827C43.565,36.76,43.968,33.933,41.678,33.933zM33.186,28.28c-2.024-0.756-1.887-3.769-1.887-3.769c0.251-1.965,2.831-2.827,2.831-2.827c2.763,0.114,0.944,3.769,0.944,3.769C34.54,29.362,33.186,28.28,33.186,28.28z M23.75,25.453c-2.17-0.976,0-4.711,0-4.711c1.118-2.725,2.831-1.885,2.831-1.885c2.222,0.41,0.944,3.769,0.944,3.769C27.212,24.78,23.75,25.453,23.75,25.453z"/>',laiwang:'<path d="M58.659,31.066V36.4h-5.618v-3.138h2.809v-4.707c3.787-6.594,2.185-13.179,2.185-13.179c-4.56-14.795-19.35-10.669-19.35-10.669c-0.413-0.661-4.057-2.51-4.057-2.51C38.404,0.023,43.679,0,43.679,0C59.986,1.348,61.78,14.748,61.78,14.748C64,25.266,58.659,31.066,58.659,31.066z M52.56,29.556c0,6.135-2.082,11.777-5.565,16.263v6.759h-7.79C35.388,54.753,30.98,56,26.28,56C11.766,56,0,44.16,0,29.556C0,14.951,11.766,3.111,26.28,3.111C40.794,3.111,52.56,14.951,52.56,29.556z M26.28,8.4c-11.611,0-21.024,9.472-21.024,21.156c0,11.684,9.413,21.156,21.024,21.156c3.336,0,6.489-0.786,9.291-2.178h7.405v-6.135c2.711-3.562,4.328-8.01,4.328-12.843C47.304,17.872,37.891,8.4,26.28,8.4z M37.411,32.667c-1.708,0-3.092-1.393-3.092-3.111c0-1.718,1.384-3.111,3.092-3.111c1.708,0,3.092,1.393,3.092,3.111C40.502,31.274,39.118,32.667,37.411,32.667z M26.28,32.667c-1.708,0-3.092-1.393-3.092-3.111c0-1.718,1.384-3.111,3.092-3.111c1.708,0,3.092,1.393,3.092,3.111C29.372,31.274,27.988,32.667,26.28,32.667z M15.15,32.667c-1.708,0-3.092-1.393-3.092-3.111c0-1.718,1.384-3.111,3.092-3.111c1.707,0,3.092,1.393,3.092,3.111C18.242,31.274,16.857,32.667,15.15,32.667z"/>',logo:'<path d="M148.981,8.452H153v2.684h-5.639c0,0-1.096-0.041-1.558-1.203l-1.246-2.468h-0.592V12h8.754l-1.277,3.455h1.464v5.059c0,0-0.127,1.542-2.305,1.542h-10.686v-2.468h9.191c0,0,0.222-0.072,0.218-0.216v-1.326h-2.617l0.779-3.085h-9.346l-1.215,5.152c0,0-0.526,2.224-2.742,1.944h-2.929v-2.684h1.589c0,0,0.487-0.065,0.592-0.494l0.935-3.918h-3.116V12h8.848V7.465h-0.498l-1.246,2.468c0,0-0.75,1.304-2.835,1.265h-4.175V8.452h3.801c0,0,0.486-0.029,0.685-0.432l0.187-0.555h-4.767v-2.56h8.848V3.918h-8.941V1.141h17.945c0,0,0.244-0.049,0.311-0.37V0.278h3.489v1.635c0,0-0.22,2.005-2.96,2.005h-5.982v0.956H153v2.591h-4.86l0.28,0.679C148.42,8.144,148.619,8.452,148.981,8.452zM132.313,29.738h-2.492c-0.235-1.372-1.34-1.234-1.34-1.234c-1.608,0-1.589,2.19-1.589,2.19c0,2.719,1.62,2.468,1.62,2.468c1.174,0,1.309-1.388,1.309-1.388h2.555c-0.293,3.657-3.832,3.517-3.832,3.517c-4.466,0-4.206-4.566-4.206-4.566c0-4.45,4.112-4.35,4.112-4.35C132.348,26.375,132.313,29.738,132.313,29.738z M124.525,4.997l-1.776-2.221h-10.811l-1.807,2.53c0,0-0.314,0.339-0.748,0.339h-3.147V2.869h1.34c0,0,0.099-0.001,0.187-0.154L109.633,0h15.266l1.9,2.622c0,0,0.13,0.167,0.374,0.154h1.09v2.776h-2.96C125.304,5.553,124.86,5.553,124.525,4.997z M103.807,30.54l3.084,4.535h-3.178l-1.495-2.529l-1.495,2.529H97.67l3.115-4.473l-2.804-4.01h3.084l1.277,2.344l1.277-2.344h2.96L103.807,30.54z M101.47,22.057h-4.735v-2.56h2.679c0.391,0,0.405-0.37,0.405-0.37v-4.35H86.111l-0.81,1.018c-0.476,0.574-1.277,0.494-1.277,0.494h-2.555v-2.931h0.716c0.4,0,0.53-0.247,0.53-0.247l1.277-2.098h-1.651V0.185h20.873v8.823c-0.05,2.132-2.118,2.098-2.118,2.098H88.074l-0.592,0.987h15.92v8.113C103.264,22.144,101.47,22.057,101.47,22.057z M99.258,2.961H85.924v1.45h13.334V2.961z M99.134,8.545c0,0,0.214-0.097,0.218-0.278V7.003H85.924v1.542H99.134z M84.18,18.91l2.337-3.177h4.268l-4.33,5.614c0,0-0.724,0.62-1.62,0.524h-3.458v-2.56h2.305C83.681,19.311,83.961,19.247,84.18,18.91z M87.388,28.751h-4.33v1.049h3.925v2.036h-3.925v1.08h4.455v2.159h-7.01v-8.483h6.885V28.751z M70.627,35.815l-1.776-3.085l1.807-3.054h3.552l1.807,3.085l-1.776,3.054H70.627z M17.197,17.954l1.807-3.054h3.552l1.807,3.085l-1.807,3.054h-3.583L17.197,17.954z M44.8,35.815l-5.016-8.637l3.614-6.108l5.016,8.576h13.677l6.761-11.661L62.06,6.324H48.414l-17.229,29.46l-20.78,0.062L0,17.923L10.375,0.154l20.811-0.031l5.016,8.637L32.619,14.9l-5.047-8.607H13.957L7.103,17.985l6.854,11.661h13.646l17.26-29.491h20.78l10.374,17.83l-10.406,17.83H44.8z M92.28,21.964h-3.521v-2.56h1.433c0.436,0.002,0.654-0.339,0.654-0.339l2.555-3.116h4.362l-4.299,5.553C93.035,21.922,92.28,21.964,92.28,21.964zM92.872,26.375c4.353,0,4.268,4.411,4.268,4.411c0,1.971-0.966,3.023-0.966,3.023l0.997,1.018L95.987,36l-1.122-1.172c-0.421,0.386-1.776,0.463-1.776,0.463c-4.572,0.019-4.393-4.473-4.393-4.473C88.83,26.208,92.872,26.375,92.872,26.375zM92.934,33.162c0,0,0.237-0.016,0.312-0.062l-0.717-0.71l1.184-1.141l0.685,0.709c0,0,0.187-0.29,0.187-1.08c0,0,0.181-2.375-1.682-2.375c0,0-1.651-0.176-1.651,2.406C91.252,30.91,91.207,33.162,92.934,33.162z M110.007,35.074h-2.555v-8.483h2.555V35.074z M111.222,26.591h2.555v5.306c0,1.379,1.34,1.265,1.34,1.265c1.259,0,1.309-1.296,1.309-1.296v-5.275h2.555v5.491c0,3.456-3.77,3.208-3.77,3.208c-4.308,0-3.988-3.27-3.988-3.27V26.591z M128.17,19.28v2.776h-21.746v-2.746h2.15V7.095h3.209V19.28h3.676V4.689h3.583V8.73h8.941v2.961h-8.941v7.589H128.17z M123.06,35.074h-2.43V32.73h2.43V35.074z M137.672,26.375c4.254,0,4.237,4.38,4.237,4.38c0,4.688-4.175,4.535-4.175,4.535c-4.524,0-4.268-4.658-4.268-4.658C133.699,26.191,137.672,26.375,137.672,26.375z M136.021,30.848c0,2.339,1.651,2.314,1.651,2.314c1.762,0,1.682-2.345,1.682-2.345c0.002-2.392-1.651-2.344-1.651-2.344C135.947,28.473,136.021,30.848,136.021,30.848z M148.109,31.589l1.215-4.997h3.645v8.483h-2.43v-5.553l-1.464,5.553h-1.932l-1.464-5.46v5.46h-2.43v-8.483h3.645L148.109,31.589z"/>',logo2:'<path d="M23.103,24l2.397-4.216h4.795l2.397,4.108l-2.397,4.216H25.5L23.103,24z M60.154,48l-6.756-11.568l4.795-8.216l6.756,11.46h18.308L92.41,24L83.256,8.324H64.949L41.846,48H13.949L0,24L13.949,0h27.897l6.756,11.568l-4.795,8.216l-6.756-11.46H18.744L9.59,24l9.154,15.676h18.308L60.154,0h27.897L102,24L88.051,48H60.154zM99.494,39.676L102,43.784L99.603,48h-4.904l-2.397-4.216l2.397-4.108H99.494z"/>',code:'<path d="M64,64h-7V50h7V64z M50,50v-7h7v7H50z M43,50h-7V36h14v7h-7V50zM64,36v7h-7v-7H64z M36,0h28v28H36V0z M40,24h20V4H40V24z M43,7h14v14H43V7z M0,36h28v28H0V36z M4,40v20h20V40H4z M7,43h14v14H7V43z M0,0h28v28H0V0z M4,24h20V4H4V24z M7,7h14v14H7V7z M50,57v7H36v-7H50z"/>',computer:'<path d="M61,44H38.676l6.199,8.769c0,0,1.125,1.64,0,3.231h-9.289h-6.697h-9.733c-1.156-1.591,0-3.231,0-3.231L25.527,44H3c-1.657,0-3-1.343-3-3V3c0-1.657,1.343-3,3-3h58c1.657,0,3,1.343,3,3v38C64,42.657,62.657,44,61,44z M32,42c1.105,0,2-0.895,2-2s-0.895-2-2-2c-1.105,0-2,0.895-2,2S30.895,42,32,42z M60,5H4v31h56V5z"/>',dengpao:'<path d="M40,44.969V52c0,3.314-2.686,6-6,6h-1v3.5c0,1.381-1.119,2.5-2.5,2.5h-11c-1.381,0-2.5-1.119-2.5-2.5V58h-1c-3.314,0-6-2.686-6-6v-7.041C3.936,40.403,0,33.171,0,25C0,11.193,11.193,0,25,0s25,11.193,25,25C50,33.173,46.068,40.413,40,44.969z M25,7C15.059,7,7,15.059,7,25c0,0.585,0.033,1.162,0.088,1.733c0.02,0.206,0.056,0.407,0.082,0.611c0.047,0.357,0.095,0.714,0.162,1.064c0.048,0.251,0.11,0.496,0.168,0.743c0.069,0.29,0.139,0.58,0.222,0.864c0.079,0.273,0.168,0.542,0.26,0.809c0.083,0.242,0.17,0.482,0.263,0.719c0.113,0.29,0.232,0.575,0.359,0.858c0.089,0.195,0.183,0.386,0.278,0.577c0.152,0.307,0.307,0.611,0.475,0.907c0.078,0.137,0.163,0.268,0.244,0.402c0.202,0.334,0.406,0.667,0.629,0.987c0.006,0.009,0.014,0.018,0.02,0.027c1.674,2.393,3.914,4.354,6.527,5.699C16.3,41.532,16,42.228,16,43v6c0,1.657,1.343,3,3,3h12c1.657,0,3-1.343,3-3v-6c0-0.772-0.3-1.468-0.778-2c2.998-1.544,5.497-3.904,7.222-6.788c0.062-0.103,0.127-0.203,0.186-0.306c0.177-0.31,0.34-0.629,0.499-0.951c0.09-0.181,0.179-0.361,0.262-0.545c0.13-0.286,0.251-0.577,0.366-0.871c0.093-0.236,0.179-0.474,0.261-0.715c0.091-0.267,0.18-0.535,0.259-0.808c0.084-0.287,0.154-0.578,0.224-0.871c0.058-0.245,0.119-0.487,0.167-0.736c0.068-0.353,0.117-0.712,0.164-1.072c0.026-0.202,0.062-0.401,0.081-0.605C42.967,26.163,43,25.586,43,25C43,15.059,34.941,7,25,7z M28.5,48h-7c-1.381,0-2.5-1.119-2.5-2.5v-1c0-1.381,1.119-2.5,2.5-2.5h7c1.381,0,2.5,1.119,2.5,2.5v1C31,46.881,29.881,48,28.5,48z"/>',normaluser:'<path d="M31.5,64C59.433,56.326,63,32.541,63,24.694C63,16.846,60.61,8.58,54.309,0C49.566,1.885,39.207,2.721,31.5,0C23.794,2.721,13.434,1.885,8.692,0C2.39,8.58,0,16.846,0,24.694C0,32.541,3.568,56.326,31.5,64z"/>',pad:'<path d="M49,64H3c-1.657,0-3-1.343-3-3V3c0-1.657,1.343-3,3-3h46c1.657,0,3,1.343,3,3v58C52,62.657,50.657,64,49,64z M26,62c1.657,0,3-1.343,3-3s-1.343-3-3-3s-3,1.343-3,3S24.343,62,26,62z M45,6H7v48h38V6z"/>',pengyou:'<path d="M52.671,41.29c0,0,3.271,9.101-5.532,11.011c0,0-7.661,1.98-11.065-11.011c0,0-3.688-10.606-3.688-12.846c0,0,11.041-2.228,18.442-1.835c0,0,11.116,0.842,11.065,9.175C61.892,35.785,62.397,43.503,52.671,41.29z M52.671,22.939c-5.253,0.729-21.208,3.67-21.208,3.67V7.34C31.264,1.286,39.762,0,39.762,0c7.386,0.19,6.455,7.34,6.455,7.34c10.325-4.012,11.065,7.34,11.065,7.34C57.501,18.724,52.671,22.939,52.671,22.939z M7.488,28.444c0,0-8.17-0.479-7.377-8.258c0,0-1.714-6.644,8.299-6.423c0,0-3.114-11.531,11.065-11.011c0,0,6.523-0.627,8.299,7.34c0,0,3.449,12.205,2.766,16.516C30.541,26.609,18.663,27.596,7.488,28.444z M31.463,28.444c-0.872,4.484,1.844,12.846,1.844,12.846c3.235,6.336,0.922,11.011,0.922,11.011c-2.931,8.699-11.987,7.34-11.987,7.34c-6.323-1.717-6.455-8.258-6.455-8.258c-5.134-0.13-7.377-1.835-7.377-1.835c-5.279-1.891-2.766-11.011-2.766-11.011C14.528,26.962,31.463,28.444,31.463,28.444z"/>',qq:'<path d="M173.94,152.517c0,0-7.239,0.531-15.89-15.949c0,0-7.897,20.246-13.904,24.921c0,0,15.89,5.883,15.89,17.943c0,0-2.979,19.937-36.746,19.937c0,0-22.406,0.632-30.787-13.956h-2.979v-0.309l-2.979,0.309C78.162,200,55.756,199.368,55.756,199.368c-33.767,0-36.746-19.937-36.746-19.937c0-12.06,15.89-17.943,15.89-17.943c-6.007-4.675-13.904-24.921-13.904-24.921c-8.651,16.48-15.89,15.949-15.89,15.949c-17.583-29.635,15.89-60.807,15.89-60.807c-5.712-18.322,5.959-26.915,5.959-26.915C29.54,0.66,89.523,0,89.523,0s59.983,0.66,62.568,64.795c0,0,11.671,8.593,5.959,26.915C158.05,91.709,191.523,122.882,173.94,152.517z"/>',qqliulanqi:'<path d="M64,55.332c0,4.57-3.122,8.311-7.081,8.642V64H31.793c-0.02,0-0.039-0.007-0.059-0.007C14.184,63.849,0,49.584,0,32C0,14.327,14.327,0,32,0s32,14.327,32,32c0,5.69-1.492,11.029-4.096,15.66C62.338,49.11,64,51.999,64,55.332z M32,14.222c-9.818,0-17.778,7.959-17.778,17.778c0,7.131,4.208,13.262,10.268,16.092c1.219-2.013,3.562-3.394,6.287-3.394c0.893,0,1.743,0.156,2.533,0.424c1.731-5.002,6.017-8.551,11.047-8.551c1.599,0,3.12,0.368,4.512,1.017c0.583-1.759,0.91-3.634,0.91-5.588C49.778,22.182,41.818,14.222,32,14.222z"/>',qqweibo:'<path d="M60.847,26.088c-8.08-2.418-13.422-13.494-13.422-13.494c-2.424,0-2.684-2.699-2.684-2.699c0-3.708,2.684-3.598,2.684-3.598c3.337,0,3.579,3.598,3.579,3.598c0.013,1.683-1.79,2.699-1.79,2.699c2.627,8.909,12.527,11.695,12.527,11.695C64,25.295,60.847,26.088,60.847,26.088z M54.583,16.192c0,0-1.339,0.621-0.895-0.9c0,0,1.906-1.828,1.79-5.398c0,0-0.266-8.096-8.053-8.096c0,0-7.158,0.059-7.158,8.096c0,0,0.001,8.096,7.158,8.096c0,0,1.785,1.974,0,1.799c0,0-8.948-0.952-8.948-9.895c0,0,0.135-9.895,9.843-9.895c0,0,8.948,1.557,8.948,9.895C57.267,9.895,56.836,14.713,54.583,16.192z M17.001,38.682h-3.579c0,0-2.586-0.992-0.895-2.699c0,0,17.896,2.971,17.896-14.393c0,0-0.252-13.494-13.422-13.494c0,0-14.317,1.116-14.317,14.393c0,0,0.037,4.655,1.79,6.297c0,0,0.568,3.071-1.79,0.9c0,0-2.521-3.105-2.684-7.197c0,0,1.061-17.092,17.001-17.092c0,0,16.107,0.699,16.107,16.193C33.108,21.59,32.527,38.682,17.001,38.682z M12.527,24.289c0,0-1.74-4.156,1.79-7.197c0,0,5.442-2.025,8.053,2.699c0,0,1.083,4.133-1.79,6.297c0,0-3.242,1.586-6.264,0c0,0-9.393,9.066-8.948,17.992c0.029,0.574,0,10.795,0,10.795S4.337,58,1.79,55.774V44.08C1.79,44.08,4.022,30.876,12.527,24.289z"/>',qqzone:'<path d="M49.096,31.429L51.726,55L32.438,43.651L13.151,55l1.753-22.698L0,19.206h21.918L32.438,0l11.397,19.206H64L49.096,31.429z M47.342,21.825H21.041l15.781,2.619L17.534,41.032h29.808L29.808,37.54L47.342,21.825z"/>',renren:'<path d="M26.667,0h12c0,0-5.9,40.406,25.333,51.726L58,63c0,0-20.229-14.581-24-29.179c0,0-12.018,22.795-27.333,28.516L0,54.379C0,54.379,31.489,46.61,26.667,0z"/>',sendcompany:'<path d="M56,37L32,13L8,37H0v-6L31,0h2l31,31v6H56z M53,38v26H39V43H25v21H11V38l21-21L53,38z"/>',scenegift:'<path d="M34.133,63.954V25.581H64v38.372H34.133z M0,12.791h14.821C8.033,11.603,8,4.996,8,4.996C8.056,0.071,13,0,13,0c9.28-0.03,15.986,11.202,16.888,12.791h4.237C35.125,11.201,42.504-0.046,51,0c0,0,5.046,0.083,5,4.996c0,0,0.061,6.606-6.823,7.794H64v8.527H0V12.791z M53,5.996c0.062-1.888-2-1.999-2-1.999c-8.038-0.049-13,8.993-13,8.993C50.389,13.03,53,5.996,53,5.996z M13,3.997c0,0-1.983,0.024-2,1.999s2.81,6.995,15,6.995C26,12.991,20.979,3.981,13,3.997z M29.867,63.954H0V25.581h29.867V63.954z"/>',scenesend:'<path d="M0,24.889L64,0L46.222,64L24.889,46.222l24.889-32l-32,24.889L0,24.889z M10.667,39.111l14.222,10.667L14.222,60.444L10.667,39.111z"/>',taobao:'<path d="M48.988,48.946c-4.903,0-7.901-1.579-7.901-1.579l0.79-3.947l7.111,0.789c6.122,0,6.321-5.526,6.321-5.526V14.21c0-7.378-7.901-7.895-7.901-7.895c-6.463,0-15.012,3.158-15.012,3.158l3.16,1.579c0.142,1.015-3.16,4.737-3.16,4.737h20.543v3.947H41.086v3.947h11.852v3.947H41.086v9.473l4.741-2.368l-0.79-3.947l4.741-1.579l3.951,10.263l-5.531,2.368l-1.58-3.947c-5.47,3.996-14.222,4.737-14.222,4.737h-7.111c-4.661,0-5.531-5.526-5.531-5.526v-7.105h7.111v3.158c-0.14,5.157,7.111,4.737,7.111,4.737V27.631H21.333v-3.947h12.642v-3.947h-5.531c-0.316,2.196-3.951,3.158-3.951,3.158s-2.819-0.519-3.16-1.579c2.749-1.888,6.321-9.473,6.321-9.473c-4.473,0.22-8.691,6.316-8.691,6.316l-4.741-3.947C19.296,12.449,22.914,0,22.914,0l7.111,1.579c0.106,1.229-1.58,4.737-1.58,4.737c11.708-3.875,23.704-3.158,23.704-3.158C63.475,4.407,64,15,64,15v21.315C64,49,48.988,48.946,48.988,48.946z M11.062,10.263c-5.479,0-5.531-4.737-5.531-4.737c0-5.404,5.531-4.737,5.531-4.737c5.138,0,5.531,4.737,5.531,4.737C16.593,10.074,11.062,10.263,11.062,10.263z M2.37,18.157l3.951-5.526c11.83,10.053,11.062,12.631,11.062,12.631c-0.264,5.059-9.482,22.105-9.482,22.105L0,41.841L11.852,29.21c1.392-1.303,0-3.947,0-3.947C11.562,22.982,2.37,18.157,2.37,18.157z"/>',tieba:'<path d="M64,28.804v33.072H36.267c0,0-0.933,0.052-1.067-2.134V32.005c0,0-1.165-3.201,5.333-3.201V1.067h6.4v4.267H64v6.401H46.933v17.069H64z M42.667,36.272v19.203h13.867V36.272H42.667z M14.933,55.475c0,0-4.911,5.24-12.8,6.401l-1.067-4.267c0,0,8.079-3.243,9.6-7.468V13.869c0,0,0.682-2.067,4.267-2.134c0,0,3.289,0.126,3.2,2.134V46.94c0,0,0.469,6.066,11.733,10.668L28.8,62.943C28.8,62.943,22.857,64,14.933,55.475z M23.467,9.601c0,0,0.113-3.437-8.533-3.201c0,0-8.533,0.099-8.533,3.201V46.94H0V0h29.867v46.94h-6.4V9.601z"/>',time:'<path d="M57.094,17.342L39.191,4.248c3.421-4.74,10.201-5.651,15.145-2.035C59.28,5.829,60.514,12.602,57.094,17.342z M56.896,34.986c0.016,15.224-12.23,27.578-27.352,27.594C14.421,62.597,2.149,50.268,2.133,35.044C2.117,19.821,14.363,7.466,29.485,7.45C44.608,7.434,56.88,19.762,56.896,34.986z M29.492,14.27c-10.206,0.011-18.663,7.491-20.294,17.297H8.966v6.895h0.231c1.633,9.824,10.118,17.308,20.339,17.297C39.742,55.75,48.2,48.269,49.83,38.463h0.232v-6.895h-0.23C48.199,21.743,39.713,14.26,29.492,14.27z M14.103,38.463v-6.895H26.09V16.915h6.849v14.653v6.895H26.09H14.103z M4.692,2.213c4.944-3.616,11.724-2.705,15.145,2.035L1.935,17.342C-1.486,12.602-0.251,5.829,4.692,2.213z"/>',uc:'<path d="M53.093,32.265c-7.527-5.77-19.034-7.054-19.034-7.054c5.833-1.908,12.021-7.054,12.021-7.054c-0.333-6.053,2.003-8.061,2.003-8.061c1.492,1.376,3.005,6.046,3.005,6.046C64,21.39,61.107,32.265,61.107,32.265H53.093z M26.046,26.219c0,0-16.028,6.346-16.028,20.153c0,0,0.893,11.278,8.172,13.661C12.446,58.893,0,55.07,0,43.35c0-15.233,13.134-18.434,14.025-27.207c0,0-1.021-8.061-7.012-8.061c0,0-4.643,0.683-6.01,2.015c0,0,5.962-10.617,18.032-10.077c0,0,12.937,0.063,14.025,11.084C33.058,11.104,34.791,19.555,26.046,26.219z M18.189,60.034c1.721,0.342,2.848,0.446,2.848,0.446C19.991,60.48,19.048,60.315,18.189,60.034z M16.028,48.388c0,0,0.948-8.061,8.014-8.061c0,0,9.016,0.132,9.016,8.061c0,0-0.119,9.069-8.014,9.069C25.044,57.457,16.028,58.129,16.028,48.388z M20.035,48.388c0,4.649,4.007,5.038,4.007,5.038c4.47,0,5.009-4.031,5.009-4.031c0-4.625-5.009-5.038-5.009-5.038C19.821,44.233,20.035,48.388,20.035,48.388z M37.065,48.388c0,0-0.189-12.092-11.019-12.092c0,0-4.6-1.381-11.019,3.023c0,0,3.518-7.19,12.021-7.054c0,0,15.761,0.647,16.028,17.13c0,0-0.817,6.053-3.005,7.054c0,0,7.737-1.618,10.018,4.031H28.049C28.049,60.48,36.582,59.201,37.065,48.388z M46.081,41.334c0,0-4.805-11.215-21.037-12.092c0,0,8.813-2.856,17.03,1.008l8.014,5.038c0,0,1.677,0.997,5.009,1.008c0,0,6.234,0.472,7.012,4.031c0,0-5.923-1.36-8.014,0C54.095,40.327,50.536,44.644,46.081,41.334z"/>',voice:'<path d="M38.246,32.653c0,9.68-7.396,17.645-16.902,18.686v8.482h8.451V64H8.667v-4.18h8.451v-8.482C7.612,50.298,0.216,42.333,0.216,32.653c0-1.815-0.485-2.548,0-4.209h4.111c-0.629,1.624,0.114,2.365,0.114,4.209c0,8.079,6.621,14.629,14.79,14.629S34.02,40.732,34.02,32.653c0-1.843,0.743-2.584,0.114-4.209h4.111C38.731,30.105,38.246,30.838,38.246,32.653z M19.231,42.667h-1.028c-5.393,0-9.764-4.321-9.764-9.651V9.651C8.438,4.321,12.81,0,18.203,0h1.028c5.393,0,9.764,4.321,9.764,9.651v23.365C28.995,38.346,24.623,42.667,19.231,42.667z"/>',wechat:'<path d="M171.484,138.214l6.938,21.872l-26.761-14.913c-72.415-0.249-66.407-49.709-66.407-49.709c0-28.146,34.69-40.761,34.69-40.761c75.009-16.33,78.301,42.749,78.301,42.749C198.245,125.746,171.484,138.214,171.484,138.214z M122.245,78.086c-4.418,0-8,3.582-8,8c0,4.418,3.582,8,8,8c4.418,0,8-3.582,8-8C130.245,81.667,126.663,78.086,122.245,78.086z M165.245,78.086c-4.418,0-8,3.582-8,8c0,4.418,3.582,8,8,8c4.418,0,8-3.582,8-8C173.245,81.667,169.663,78.086,165.245,78.086z M90.209,69.616c-17.464,24.322-4.956,47.72-4.956,47.72c-2.767,2.24-7.929,1.988-7.929,1.988H61.466l-36.673,16.901l8.92-25.849C-1.755,92.678,0.015,60.668,0.015,60.668v-2.982C6.983-1.914,70.386,0.024,70.386,0.024c30.227-0.665,46.584,12.924,46.584,12.924c19.951,11.217,24.779,32.808,24.779,32.808C107.066,46.955,90.209,69.616,90.209,69.616z M41.245,30.086c-6.075,0-11,4.925-11,11s4.925,11,11,11s11-4.925,11-11S47.32,30.086,41.245,30.086z M108.245,41.086c0-6.075-4.925-11-11-11c-6.075,0-11,4.925-11,11s4.925,11,11,11C103.32,52.086,108.245,47.161,108.245,41.086z"/>',weibo:'<path d="M199.389,65.394c0,0-0.493,9.988-10.011,9.988c0,0-10.252-1.807-7.007-11.985c0,0,11.965-41.924-36.038-47.942c0,0-17.018,5.194-17.018-6.991c0,0,1.506-7.99,8.008-7.99C137.322,0.473,204.096-9.8,199.389,65.394z M143.329,40.425c0,0-8.008,1.063-8.008-6.992c0,0,2.411-5.993,7.007-5.993c0,0,34.003-5.033,30.032,32.96c0,0-1.923,5.993-6.006,5.993c0,0-8.008,0.682-8.008-7.99C158.345,58.403,162.869,40.425,143.329,40.425z M133.318,45.419c0,0,17.018,0.911,17.018,16.979c0,0,0.245,9.102-4.004,12.984c0,0,29.031,6.811,29.031,28.965c0,0-0.251,56.931-91.097,56.931c0,0-84.09,0.922-84.09-52.936c0,0-4.081-25.111,27.029-54.933c31.109-29.822,48.801-30.962,57.061-30.962c0,0,16.017-0.976,16.017,15.98c0,0-0.412,11.219-3.003,14.982C97.28,53.409,116.344,45.419,133.318,45.419z M78.259,71.387c0,0-49.884,3.469-58.062,42.948c0,0-0.603,30.22,52.055,34.958c0,0,54.006,2.183,66.07-36.955C138.324,112.337,151.405,74.021,78.259,71.387z M73.12,142.2c-26.866-0.565-28.931-22.871-28.931-22.871c-1.094-30.22,32.921-32.815,32.921-32.815c31.985-0.314,30.926,25.854,30.926,25.854C106.16,142.199,73.12,142.2,73.12,142.2z M67.135,110.379c0,0-11.971,1.423-11.971,9.944c0,0-1.051,8.95,9.976,8.95c0,0,10.974-1.898,10.974-9.944C76.113,119.328,77.207,110.379,67.135,110.379z M83.097,106.401c0,0-3.99-0.664-3.99,2.983c0,0-0.929,2.983,2.993,2.983c0,0,3.99-0.785,3.99-3.978C86.089,108.39,85.751,106.401,83.097,106.401z"/>',windows:'<path d="M28.984,59.594V33.416H63V64L28.984,59.594z M28.984,4.406L63,0v30.584H28.984V4.406z M0,33.416h26.149v25.487L0,55.231V33.416z M0,8.769l26.149-3.672v25.487H0V8.769z"/>',yixin:'<path d="M45.364,58.38c4.124,2.52,10.259,2.797,10.259,2.797C44.551,65,36.341,63.943,30.867,61.901C13.807,61.829,0,48.002,0,30.952C0,13.858,13.879,0,31,0s31,13.858,31,30.952C62,42.869,55.251,53.207,45.364,58.38z M31,14.977c-8.837,0-16,7.153-16,15.975c0,5.364,2.656,10.098,6.718,12.996c-3.185,4.404-11.86,5.579-11.86,5.579c19.676,4.767,29.433-4.088,31.788-6.672C44.924,39.93,47,35.688,47,30.952C47,22.129,39.837,14.977,31,14.977z"/>',zhifubao:'<path d="M63.021,50L36.949,36.957c-10.737,11.987-22.813,10.87-22.813,10.87c-15.115,0-14.122-11.957-14.122-11.957C-0.088,22.841,15.222,25,15.222,25c8.559,0.109,18.468,3.261,18.468,3.261c3.55-4.164,4.345-9.783,4.345-9.783H10.877v-2.174h13.036V10.87H7.618V8.696h16.295V0h8.691v8.696h16.295v2.174H32.604v5.435h14.122c0.153,3.882-5.432,15.217-5.432,15.217l21.727,6.522V50z M14.136,28.261c0,0-11.95-2.295-11.95,7.609c0,0-1.54,7.609,10.863,7.609c0,0,11.464,0.271,17.381-9.783C30.431,33.696,23.002,28.261,14.136,28.261z"/>'}}(),function(e){"use strict";e.fn.swipeSlide=function(t,n){function i(e,t){e.css({"-webkit-transition":"all "+t+"s "+P.transitionType,transition:"all "+t+"s "+P.transitionType})}function a(e,t){P.axisX?e.css({"-webkit-transform":"translate3d("+t+"px,0,0)",transform:"translate3d("+t+"px,0,0)"}):e.css({"-webkit-transform":"translate3d(0,"+t+"px,0)",transform:"translate3d(0,"+t+"px,0)"})}function s(e){if(P.lazyLoad){var t=P.ul.find("[data-src]");if(t.length>0){var n=t.eq(e);n.data("src")&&(n.is("img")?n.attr("src",n.data("src")).data("src",""):n.css({"background-image":"url("+n.data("src")+")"}).data("src",""))}}}function o(e){e.touches||(e.touches=e.originalEvent.touches)}function r(e){v=e.touches[0].pageX,b=e.touches[0].pageY}function l(e){if(e.preventDefault(),P.autoSwipe&&h&&clearInterval(h),S=e.touches[0].pageX,T=e.touches[0].pageY,y=S-v,w=T-b,i(P.ul,0),P.axisX){if(!P.continuousScroll){if(0==f&&y>0)return y=0,m();if(f+1>=L&&0>y)return y=0,m()}a(P.ul,-(I*parseInt(f)-y))}else{if(!P.continuousScroll){if(0==f&&w>0)return w=0,m();if(f+1>=L&&0>w)return w=0,m()}a(P.ul,-(_*parseInt(f)-w))}}function c(){x=P.axisX?y:w,Math.abs(x)<=C?d(.3):x>C?g():-C>x&&u(),m(),y=0,w=0}function d(e){i(P.ul,e),P.axisX?a(P.ul,-f*I):a(P.ul,-f*_)}function p(){P.continuousScroll?f>=L?(d(.3),f=0,setTimeout(function(){d(0)},300)):0>f?(d(.3),f=L-1,setTimeout(function(){d(0)},300)):d(.3):(f>=L?f=0:0>f&&(f=L-1),d(.3)),n(f)}function u(){f++,p(),P.lazyLoad&&s(P.continuousScroll?f+2:f+1)}function g(){if(f--,p(),E&&P.lazyLoad){var e=L-1;for(e;L+1>=e;e++)s(e);return void(E=!1)}!E&&P.lazyLoad&&s(f)}function m(){P.autoSwipe&&(h=setInterval(function(){u()},P.speed))}var h,f=0,v=0,b=0,y=0,w=0,x=0,S=0,T=0,C=50,k=0,E=!0,$=e(this),P=e.extend({},{ul:$.children("ul"),li:$.children().children("li"),continuousScroll:!1,autoSwipe:!0,speed:4e3,axisX:!0,transitionType:"ease",lazyLoad:!1,clone:!0,width:0,length:0},t||{}),I=P.width||P.li.width(),_=P.li.height(),L=P.length||P.li.length;n=n||function(){},function(){if(P.continuousScroll&&(P.clone&&P.ul.prepend(P.li.last().clone()).append(P.li.first().clone()),P.axisX?(a(P.ul.children().first(),-1*I),a(P.ul.children().last(),I*L)):(a(P.ul.children().first(),-1*_),a(P.ul.children().last(),_*L))),P.lazyLoad){var t=0;for(k=P.continuousScroll?3:2,t;k>t;t++)s(t)}P.axisX?P.li.each(function(t){a(e(this),I*t)}):P.li.each(function(t){a(e(this),_*t)}),m(),n(f,h),$.on("touchstart",function(e){e.stopPropagation(),o(e),r(e)}),$.on("touchmove",function(e){e.stopPropagation(),o(e),l(e)}),$.on("touchend",function(e){e.stopPropagation(),c()})}()}}(window.Zepto||window.jQuery),function(){eqShow.getImagesResourceHost=function(e,t){return-1!==location.host.indexOf(window.DOMAIN)&&(-1!==["2","21"].indexOf(e)&&-1!==["1","2","3","4","6","7","8","9"].indexOf(t)?PREFIX_FILE_HOST=VIP_FILE_HOST:PREFIX_FILE_HOST=COMMON_FILE_HOST),PREFIX_FILE_HOST}}();var THREE=THREE||{};self.Int32Array||(self.Int32Array=Array,self.Float32Array=Array),THREE.Color=function(e){return void 0!==e&&this.setHex(e),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSV:function(e,t,n){var i,a,s;if(0===n)this.r=this.g=this.b=0;else switch(i=Math.floor(6*e),a=6*e-i,e=n*(1-t),s=n*(1-t*a),t=n*(1-t*(1-a)),i){case 1:this.r=s,this.g=n,this.b=e;break;case 2:this.r=e,this.g=n,this.b=t;break;case 3:this.r=e,this.g=s,this.b=n;break;case 4:this.r=t,this.g=e,this.b=n;break;case 5:this.r=n,this.g=e,this.b=s;break;case 6:case 0:this.r=n,this.g=t,this.b=e}return this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},getHex:function(){return~~(255*this.r)<<16^~~(255*this.g)<<8^~~(255*this.b)},getContextStyle:function(){return"rgb("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+")"},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new THREE.Vector2(this.x,this.y)},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,e=this.y-e.y;return t*t+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return e.x===this.x&&e.y===this.y}},THREE.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},multiply:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},multiplySelf:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideSelf:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e,this.z/=e):this.z=this.y=this.x=0,this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return this.x+this.y+this.z},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},cross:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},crossSelf:function(e){var t=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-t*e.z,this.z=t*e.y-n*e.x,this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){return(new THREE.Vector3).sub(this,e).lengthSq()},setPositionFromMatrix:function(e){this.x=e.n14,this.y=e.n24,this.z=e.n34},setRotationFromMatrix:function(e){var t=Math.cos(this.y);this.y=Math.asin(e.n13),Math.abs(t)>1e-5?(this.x=Math.atan2(-e.n23/t,e.n33/t),this.z=Math.atan2(-e.n12/t,e.n11/t)):(this.x=0,this.z=Math.atan2(e.n21,e.n22))},isZero:function(){return this.lengthSq()<1e-4}},THREE.Vector4=function(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},copy:function(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)},add:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},sub:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},divideScalar:function(e){return e?(this.x/=e,this.y/=e,this.z/=e,this.w/=e):(this.z=this.y=this.x=0,this.w=1),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.normalize().multiplyScalar(e)},lerpSelf:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},THREE.Ray=function(e,t){function n(e,t,n){return S.sub(n,e),p=S.dot(t),0>=p?null:(u=T.add(e,C.copy(t).multiplyScalar(p)),g=n.distanceTo(u))}function i(e,t,n,i){return S.sub(i,t),T.sub(n,t),C.sub(e,t),m=S.dot(S),h=S.dot(T),f=S.dot(C),v=T.dot(T),b=T.dot(C),y=1/(m*v-h*h),w=(v*f-h*b)*y,x=(m*b-h*f)*y,w>=0&&x>=0&&1>w+x}this.origin=e||new THREE.Vector3,this.direction=t||new THREE.Vector3,this.intersectScene=function(e){return this.intersectObjects(e.children)},this.intersectObjects=function(e){var t,n,i=[];for(t=0,n=e.length;n>t;t++)Array.prototype.push.apply(i,this.intersectObject(e[t]));return i.sort(function(e,t){return e.distance-t.distance}),i};var a=new THREE.Vector3,s=new THREE.Vector3,o=new THREE.Vector3,r=new THREE.Vector3,e=new THREE.Vector3,t=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;this.intersectObject=function(p){for(var u,g=[],m=0,h=p.children.length;h>m;m++)Array.prototype.push.apply(g,this.intersectObject(p.children[m]));if(p instanceof THREE.Particle){if(null===(m=n(this.origin,this.direction,p.matrixWorld.getPosition()))||m>p.scale.x)return[];u={distance:m,point:p.position,face:null,object:p},g.push(u)}else if(p instanceof THREE.Mesh){if(null===(m=n(this.origin,this.direction,p.matrixWorld.getPosition()))||m>p.geometry.boundingSphere.radius*Math.max(p.scale.x,Math.max(p.scale.y,p.scale.z)))return g;var f,v,b=p.geometry,y=b.vertices;for(p.matrixRotationWorld.extractRotation(p.matrixWorld),m=0,h=b.faces.length;h>m;m++)u=b.faces[m],e.copy(this.origin),t.copy(this.direction),v=p.matrixWorld,l=v.multiplyVector3(l.copy(u.centroid)).subSelf(e),0>=(f=l.dot(t))||(a=v.multiplyVector3(a.copy(y[u.a].position)),s=v.multiplyVector3(s.copy(y[u.b].position)),o=v.multiplyVector3(o.copy(y[u.c].position)),u instanceof THREE.Face4&&(r=v.multiplyVector3(r.copy(y[u.d].position))),c=p.matrixRotationWorld.multiplyVector3(c.copy(u.normal)),f=t.dot(c),!p.doubleSided&&!(p.flipSided?f>0:0>f))||(f=c.dot(l.sub(a,e))/f,d.add(e,t.multiplyScalar(f)),u instanceof THREE.Face3?i(d,a,s,o)&&(u={distance:e.distanceTo(d),point:d.clone(),face:u,object:p},g.push(u)):u instanceof THREE.Face4&&(i(d,a,s,r)||i(d,s,o,r))&&(u={distance:e.distanceTo(d),point:d.clone(),face:u,object:p},g.push(u)))}return g};var p,u,g,m,h,f,v,b,y,w,x,S=new THREE.Vector3,T=new THREE.Vector3,C=new THREE.Vector3},THREE.Rectangle=function(){function e(){s=i-t,o=a-n}var t,n,i,a,s,o,r=!0;this.getX=function(){return t},this.getY=function(){return n},this.getWidth=function(){return s},this.getHeight=function(){return o},this.getLeft=function(){return t},this.getTop=function(){return n},this.getRight=function(){return i},this.getBottom=function(){return a},this.set=function(s,o,l,c){r=!1,t=s,n=o,i=l,a=c,e()},this.addPoint=function(s,o){r?(r=!1,t=s,n=o,i=s,a=o):(t=s>t?t:s,n=o>n?n:o,i=i>s?i:s,a=a>o?a:o),e()},this.add3Points=function(s,o,l,c,d,p){r?(r=!1,t=l>s?d>s?s:d:d>l?l:d,n=c>o?p>o?o:p:p>c?c:p,i=s>l?s>d?s:d:l>d?l:d,a=o>c?o>p?o:p:c>p?c:p):(t=l>s?d>s?t>s?s:t:t>d?d:t:d>l?t>l?l:t:t>d?d:t,n=c>o?p>o?n>o?o:n:n>p?p:n:p>c?n>c?c:n:n>p?p:n,i=s>l?s>d?s>i?s:i:d>i?d:i:l>d?l>i?l:i:d>i?d:i,a=o>c?o>p?o>a?o:a:p>a?p:a:c>p?c>a?c:a:p>a?p:a),e()},this.addRectangle=function(s){r?(r=!1,t=s.getLeft(),n=s.getTop(),i=s.getRight(),a=s.getBottom()):(t=t<s.getLeft()?t:s.getLeft(),n=n<s.getTop()?n:s.getTop(),i=i>s.getRight()?i:s.getRight(),a=a>s.getBottom()?a:s.getBottom()),e()},this.inflate=function(s){t-=s,n-=s,i+=s,a+=s,e()},this.minSelf=function(s){t=t>s.getLeft()?t:s.getLeft(),n=n>s.getTop()?n:s.getTop(),i=i<s.getRight()?i:s.getRight(),a=a<s.getBottom()?a:s.getBottom(),e()},this.intersects=function(e){return Math.min(i,e.getRight())-Math.max(t,e.getLeft())>=0&&Math.min(a,e.getBottom())-Math.max(n,e.getTop())>=0},this.empty=function(){r=!0,a=i=n=t=0,e()},this.isEmpty=function(){return r}},THREE.Math={clamp:function(e,t,n){return t>e?t:e>n?n:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,n,i,a){return i+(e-t)*(a-i)/(n-t)},random16:function(){return(65280*Math.random()+255*Math.random())/65535}},THREE.Matrix3=function(){this.m=[]},THREE.Matrix3.prototype={constructor:THREE.Matrix3,transpose:function(){var e,t=this.m;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},transposeIntoArray:function(e){var t=this.m;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},THREE.Matrix4=function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m,h){this.set(void 0!==e?e:1,t||0,n||0,i||0,a||0,void 0!==s?s:1,o||0,r||0,l||0,c||0,void 0!==d?d:1,p||0,u||0,g||0,m||0,void 0!==h?h:1),this.flat=Array(16),this.m33=new THREE.Matrix3},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m,h){return this.n11=e,this.n12=t,this.n13=n,this.n14=i,this.n21=a,this.n22=s,this.n23=o,this.n24=r,this.n31=l,this.n32=c,this.n33=d,this.n34=p,this.n41=u,this.n42=g,this.n43=m,this.n44=h,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.set(e.n11,e.n12,e.n13,e.n14,e.n21,e.n22,e.n23,e.n24,e.n31,e.n32,e.n33,e.n34,e.n41,e.n42,e.n43,e.n44),this},lookAt:function(e,t,n){var i=THREE.Matrix4.__v1,a=THREE.Matrix4.__v2,s=THREE.Matrix4.__v3;return s.sub(e,t).normalize(),0===s.length()&&(s.z=1),i.cross(n,s).normalize(),0===i.length()&&(s.x+=1e-4,i.cross(n,s).normalize()),a.cross(s,i).normalize(),this.n11=i.x,this.n12=a.x,this.n13=s.x,this.n21=i.y,this.n22=a.y,this.n23=s.y,this.n31=i.z,this.n32=a.z,this.n33=s.z,this},multiply:function(e,t){var n=e.n11,i=e.n12,a=e.n13,s=e.n14,o=e.n21,r=e.n22,l=e.n23,c=e.n24,d=e.n31,p=e.n32,u=e.n33,g=e.n34,m=e.n41,h=e.n42,f=e.n43,v=e.n44,b=t.n11,y=t.n12,w=t.n13,x=t.n14,S=t.n21,T=t.n22,C=t.n23,k=t.n24,E=t.n31,$=t.n32,P=t.n33,I=t.n34,_=t.n41,L=t.n42,R=t.n43,M=t.n44;return this.n11=n*b+i*S+a*E+s*_,this.n12=n*y+i*T+a*$+s*L,this.n13=n*w+i*C+a*P+s*R,this.n14=n*x+i*k+a*I+s*M,this.n21=o*b+r*S+l*E+c*_,this.n22=o*y+r*T+l*$+c*L,this.n23=o*w+r*C+l*P+c*R,this.n24=o*x+r*k+l*I+c*M,this.n31=d*b+p*S+u*E+g*_,this.n32=d*y+p*T+u*$+g*L,this.n33=d*w+p*C+u*P+g*R,this.n34=d*x+p*k+u*I+g*M,this.n41=m*b+h*S+f*E+v*_,this.n42=m*y+h*T+f*$+v*L,this.n43=m*w+h*C+f*P+v*R,this.n44=m*x+h*k+f*I+v*M,this},multiplySelf:function(e){return this.multiply(this,e)},multiplyToArray:function(e,t,n){return this.multiply(e,t),n[0]=this.n11,n[1]=this.n21,n[2]=this.n31,n[3]=this.n41,n[4]=this.n12,n[5]=this.n22,n[6]=this.n32,n[7]=this.n42,n[8]=this.n13,n[9]=this.n23,n[10]=this.n33,n[11]=this.n43,n[12]=this.n14,n[13]=this.n24,n[14]=this.n34,n[15]=this.n44,this},multiplyScalar:function(e){return this.n11*=e,this.n12*=e,this.n13*=e,this.n14*=e,this.n21*=e,this.n22*=e,this.n23*=e,this.n24*=e,this.n31*=e,this.n32*=e,this.n33*=e,this.n34*=e,this.n41*=e,this.n42*=e,this.n43*=e,this.n44*=e,this},multiplyVector3:function(e){var t=e.x,n=e.y,i=e.z,a=1/(this.n41*t+this.n42*n+this.n43*i+this.n44);return e.x=(this.n11*t+this.n12*n+this.n13*i+this.n14)*a,e.y=(this.n21*t+this.n22*n+this.n23*i+this.n24)*a,e.z=(this.n31*t+this.n32*n+this.n33*i+this.n34)*a,e},multiplyVector4:function(e){var t=e.x,n=e.y,i=e.z,a=e.w;return e.x=this.n11*t+this.n12*n+this.n13*i+this.n14*a,e.y=this.n21*t+this.n22*n+this.n23*i+this.n24*a,e.z=this.n31*t+this.n32*n+this.n33*i+this.n34*a,e.w=this.n41*t+this.n42*n+this.n43*i+this.n44*a,e},rotateAxis:function(e){var t=e.x,n=e.y,i=e.z;return e.x=t*this.n11+n*this.n12+i*this.n13,e.y=t*this.n21+n*this.n22+i*this.n23,e.z=t*this.n31+n*this.n32+i*this.n33,e.normalize(),e},crossVector:function(e){var t=new THREE.Vector4;return t.x=this.n11*e.x+this.n12*e.y+this.n13*e.z+this.n14*e.w,t.y=this.n21*e.x+this.n22*e.y+this.n23*e.z+this.n24*e.w,t.z=this.n31*e.x+this.n32*e.y+this.n33*e.z+this.n34*e.w,t.w=e.w?this.n41*e.x+this.n42*e.y+this.n43*e.z+this.n44*e.w:1,t},determinant:function(){var e=this.n11,t=this.n12,n=this.n13,i=this.n14,a=this.n21,s=this.n22,o=this.n23,r=this.n24,l=this.n31,c=this.n32,d=this.n33,p=this.n34,u=this.n41,g=this.n42,m=this.n43,h=this.n44;return i*o*c*u-n*r*c*u-i*s*d*u+t*r*d*u+n*s*p*u-t*o*p*u-i*o*l*g+n*r*l*g+i*a*d*g-e*r*d*g-n*a*p*g+e*o*p*g+i*s*l*m-t*r*l*m-i*a*c*m+e*r*c*m+t*a*p*m-e*s*p*m-n*s*l*h+t*o*l*h+n*a*c*h-e*o*c*h-t*a*d*h+e*s*d*h},transpose:function(){var e;return e=this.n21,this.n21=this.n12,this.n12=e,e=this.n31,this.n31=this.n13,this.n13=e,e=this.n32,this.n32=this.n23,this.n23=e,e=this.n41,this.n41=this.n14,this.n14=e,e=this.n42,this.n42=this.n24,this.n24=e,e=this.n43,this.n43=this.n34,this.n43=e,this},clone:function(){var e=new THREE.Matrix4;return e.n11=this.n11,e.n12=this.n12,e.n13=this.n13,e.n14=this.n14,e.n21=this.n21,e.n22=this.n22,e.n23=this.n23,e.n24=this.n24,e.n31=this.n31,e.n32=this.n32,e.n33=this.n33,e.n34=this.n34,e.n41=this.n41,e.n42=this.n42,e.n43=this.n43,e.n44=this.n44,e},flatten:function(){return this.flat[0]=this.n11,this.flat[1]=this.n21,this.flat[2]=this.n31,this.flat[3]=this.n41,this.flat[4]=this.n12,this.flat[5]=this.n22,this.flat[6]=this.n32,this.flat[7]=this.n42,this.flat[8]=this.n13,this.flat[9]=this.n23,this.flat[10]=this.n33,this.flat[11]=this.n43,this.flat[12]=this.n14,this.flat[13]=this.n24,this.flat[14]=this.n34,this.flat[15]=this.n44,this.flat},flattenToArray:function(e){return e[0]=this.n11,e[1]=this.n21,e[2]=this.n31,e[3]=this.n41,e[4]=this.n12,e[5]=this.n22,e[6]=this.n32,e[7]=this.n42,e[8]=this.n13,e[9]=this.n23,e[10]=this.n33,e[11]=this.n43,e[12]=this.n14,e[13]=this.n24,e[14]=this.n34,e[15]=this.n44,e},flattenToArrayOffset:function(e,t){return e[t]=this.n11,e[t+1]=this.n21,e[t+2]=this.n31,e[t+3]=this.n41,e[t+4]=this.n12,e[t+5]=this.n22,e[t+6]=this.n32,e[t+7]=this.n42,e[t+8]=this.n13,e[t+9]=this.n23,e[t+10]=this.n33,e[t+11]=this.n43,e[t+12]=this.n14,e[t+13]=this.n24,e[t+14]=this.n34,e[t+15]=this.n44,e},setTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},setScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},setRotationX:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},setRotationY:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},setRotationZ:function(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},setRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),a=1-n,s=e.x,o=e.y,r=e.z,l=a*s,c=a*o;return this.set(l*s+n,l*o-i*r,l*r+i*o,0,l*o+i*r,c*o+n,c*r-i*s,0,l*r-i*o,c*r+i*s,a*r*r+n,0,0,0,0,1),this},setPosition:function(e){return this.n14=e.x,this.n24=e.y,this.n34=e.z,this},getPosition:function(){return THREE.Matrix4.__v1.set(this.n14,this.n24,this.n34)},getColumnX:function(){return THREE.Matrix4.__v1.set(this.n11,this.n21,this.n31)},getColumnY:function(){return THREE.Matrix4.__v1.set(this.n12,this.n22,this.n32)},getColumnZ:function(){return THREE.Matrix4.__v1.set(this.n13,this.n23,this.n33)},getInverse:function(e){var t=e.n11,n=e.n12,i=e.n13,a=e.n14,s=e.n21,o=e.n22,r=e.n23,l=e.n24,c=e.n31,d=e.n32,p=e.n33,u=e.n34,g=e.n41,m=e.n42,h=e.n43,f=e.n44;return this.n11=r*u*m-l*p*m+l*d*h-o*u*h-r*d*f+o*p*f,this.n12=a*p*m-i*u*m-a*d*h+n*u*h+i*d*f-n*p*f,this.n13=i*l*m-a*r*m+a*o*h-n*l*h-i*o*f+n*r*f,this.n14=a*r*d-i*l*d-a*o*p+n*l*p+i*o*u-n*r*u,this.n21=l*p*g-r*u*g-l*c*h+s*u*h+r*c*f-s*p*f,this.n22=i*u*g-a*p*g+a*c*h-t*u*h-i*c*f+t*p*f,this.n23=a*r*g-i*l*g-a*s*h+t*l*h+i*s*f-t*r*f,this.n24=i*l*c-a*r*c+a*s*p-t*l*p-i*s*u+t*r*u,this.n31=o*u*g-l*d*g+l*c*m-s*u*m-o*c*f+s*d*f,this.n32=a*d*g-n*u*g-a*c*m+t*u*m+n*c*f-t*d*f,this.n33=i*l*g-a*o*g+a*s*m-t*l*m-n*s*f+t*o*f,this.n34=a*o*c-n*l*c-a*s*d+t*l*d+n*s*u-t*o*u,this.n41=r*d*g-o*p*g-r*c*m+s*p*m+o*c*h-s*d*h,this.n42=n*p*g-i*d*g+i*c*m-t*p*m-n*c*h+t*d*h,this.n43=i*o*g-n*r*g-i*s*m+t*r*m+n*s*h-t*o*h,this.n44=n*r*c-i*o*c+i*s*d-t*r*d-n*s*p+t*o*p,this.multiplyScalar(1/e.determinant()),this},setRotationFromEuler:function(e,t){var n=e.x,i=e.y,a=e.z,s=Math.cos(n),n=Math.sin(n),o=Math.cos(i),i=Math.sin(i),r=Math.cos(a),a=Math.sin(a);switch(t){case"YXZ":var l=o*r,c=o*a,d=i*r,p=i*a;this.n11=l+p*n,this.n12=d*n-c,this.n13=s*i,this.n21=s*a,this.n22=s*r,this.n23=-n,this.n31=c*n-d,this.n32=p+l*n,this.n33=s*o;break;case"ZXY":l=o*r,c=o*a,d=i*r,p=i*a,this.n11=l-p*n,this.n12=-s*a,this.n13=d+c*n,this.n21=c+d*n,this.n22=s*r,this.n23=p-l*n,this.n31=-s*i,this.n32=n,this.n33=s*o;break;case"ZYX":l=s*r,c=s*a,d=n*r,p=n*a,this.n11=o*r,this.n12=d*i-c,this.n13=l*i+p,this.n21=o*a,this.n22=p*i+l,this.n23=c*i-d,this.n31=-i,this.n32=n*o,this.n33=s*o;break;case"YZX":l=s*o,c=s*i,d=n*o,p=n*i,this.n11=o*r,this.n12=p-l*a,this.n13=d*a+c,this.n21=a,this.n22=s*r,this.n23=-n*r,this.n31=-i*r,this.n32=c*a+d,this.n33=l-p*a;break;case"XZY":l=s*o,c=s*i,d=n*o,p=n*i,this.n11=o*r,this.n12=-a,this.n13=i*r,this.n21=l*a+p,this.n22=s*r,this.n23=c*a-d,this.n31=d*a-c,this.n32=n*r,this.n33=p*a+l;break;default:l=s*r,c=s*a,d=n*r,p=n*a,this.n11=o*r,this.n12=-o*a,this.n13=i,this.n21=c+d*i,this.n22=l-p*i,this.n23=-n*o,this.n31=p-l*i,this.n32=d+c*i,this.n33=s*o}return this},setRotationFromQuaternion:function(e){var t=e.x,n=e.y,i=e.z,a=e.w,s=t+t,o=n+n,r=i+i,e=t*s,l=t*o;t*=r;var c=n*o;return n*=r,i*=r,s*=a,o*=a,a*=r,this.n11=1-(c+i),this.n12=l-a,this.n13=t+o,this.n21=l+a,this.n22=1-(e+i),this.n23=n-s,this.n31=t-o,this.n32=n+s,this.n33=1-(e+c),this},scale:function(e){var t=e.x,n=e.y,e=e.z;return this.n11*=t,this.n12*=n,this.n13*=e,this.n21*=t,this.n22*=n,this.n23*=e,this.n31*=t,this.n32*=n,this.n33*=e,this.n41*=t,this.n42*=n,this.n43*=e,this},compose:function(e,t,n){var i=THREE.Matrix4.__m1,a=THREE.Matrix4.__m2;return i.identity(),i.setRotationFromQuaternion(t),a.setScale(n.x,n.y,n.z),this.multiply(i,a),this.n14=e.x,this.n24=e.y,this.n34=e.z,this},decompose:function(e,t,n){var i=THREE.Matrix4.__v1,a=THREE.Matrix4.__v2,s=THREE.Matrix4.__v3;return i.set(this.n11,this.n21,this.n31),a.set(this.n12,this.n22,this.n32),s.set(this.n13,this.n23,this.n33),e=e instanceof THREE.Vector3?e:new THREE.Vector3,t=t instanceof THREE.Quaternion?t:new THREE.Quaternion,n=n instanceof THREE.Vector3?n:new THREE.Vector3,n.x=i.length(),n.y=a.length(),n.z=s.length(),e.x=this.n14,e.y=this.n24,e.z=this.n34,i=THREE.Matrix4.__m1,i.copy(this),i.n11/=n.x,i.n21/=n.x,i.n31/=n.x,i.n12/=n.y,i.n22/=n.y,i.n32/=n.y,i.n13/=n.z,i.n23/=n.z,i.n33/=n.z,t.setFromRotationMatrix(i),[e,t,n]},extractPosition:function(e){return this.n14=e.n14,this.n24=e.n24,this.n34=e.n34,this},extractRotation:function(e){var t=THREE.Matrix4.__v1,n=1/t.set(e.n11,e.n21,e.n31).length(),i=1/t.set(e.n12,e.n22,e.n32).length(),t=1/t.set(e.n13,e.n23,e.n33).length();return this.n11=e.n11*n,this.n21=e.n21*n,this.n31=e.n31*n,this.n12=e.n12*i,this.n22=e.n22*i,this.n32=e.n32*i,this.n13=e.n13*t,this.n23=e.n23*t,this.n33=e.n33*t,this}},THREE.Matrix4.makeInvert3x3=function(e){var t=e.m33,n=t.m,i=e.n33*e.n22-e.n32*e.n23,a=-e.n33*e.n21+e.n31*e.n23,s=e.n32*e.n21-e.n31*e.n22,o=-e.n33*e.n12+e.n32*e.n13,r=e.n33*e.n11-e.n31*e.n13,l=-e.n32*e.n11+e.n31*e.n12,c=e.n23*e.n12-e.n22*e.n13,d=-e.n23*e.n11+e.n21*e.n13,p=e.n22*e.n11-e.n21*e.n12,e=e.n11*i+e.n21*o+e.n31*c;return 0===e&&console.error("THREE.Matrix4.makeInvert3x3: Matrix not invertible."),e=1/e,n[0]=e*i,n[1]=e*a,n[2]=e*s,n[3]=e*o,n[4]=e*r,n[5]=e*l,n[6]=e*c,n[7]=e*d,n[8]=e*p,t},THREE.Matrix4.makeFrustum=function(e,t,n,i,a,s){var o;return o=new THREE.Matrix4,o.n11=2*a/(t-e),o.n12=0,o.n13=(t+e)/(t-e),o.n14=0,o.n21=0,o.n22=2*a/(i-n),o.n23=(i+n)/(i-n),o.n24=0,o.n31=0,o.n32=0,o.n33=-(s+a)/(s-a),o.n34=-2*s*a/(s-a),o.n41=0,o.n42=0,o.n43=-1,o.n44=0,o},THREE.Matrix4.makePerspective=function(e,t,n,i){var a,e=n*Math.tan(e*Math.PI/360);return a=-e,THREE.Matrix4.makeFrustum(a*t,e*t,a,e,n,i)},THREE.Matrix4.makeOrtho=function(e,t,n,i,a,s){var o,r,l,c;return o=new THREE.Matrix4,r=t-e,l=n-i,c=s-a,o.n11=2/r,o.n12=0,o.n13=0,o.n14=-(t+e)/r,o.n21=0,o.n22=2/l,o.n23=0,o.n24=-(n+i)/l,o.n31=0,o.n32=0,o.n33=-2/c,o.n34=-(s+a)/c,o.n41=0,o.n42=0,o.n43=0,o.n44=1,o},THREE.Matrix4.__v1=new THREE.Vector3,THREE.Matrix4.__v2=new THREE.Vector3,THREE.Matrix4.__v3=new THREE.Vector3,THREE.Matrix4.__m1=new THREE.Matrix4,THREE.Matrix4.__m2=new THREE.Matrix4,THREE.Object3D=function(){this.name="",this.id=THREE.Object3DCount++,this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this.rotation=new THREE.Vector3,this.eulerOrder="XYZ",this.scale=new THREE.Vector3(1,1,1),this.flipSided=this.doubleSided=this.dynamic=!1,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixRotationWorld=new THREE.Matrix4,this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.quaternion=new THREE.Quaternion,this.useQuaternion=!1,this.boundRadius=0,this.boundRadiusScale=1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this._vector=new THREE.Vector3},THREE.Object3D.prototype={constructor:THREE.Object3D,translate:function(e,t){this.matrix.rotateAxis(t),this.position.addSelf(t.multiplyScalar(e))},translateX:function(e){this.translate(e,this._vector.set(1,0,0))},translateY:function(e){this.translate(e,this._vector.set(0,1,0))},translateZ:function(e){this.translate(e,this._vector.set(0,0,1))},lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)},add:function(e){if(-1===this.children.indexOf(e)){void 0!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){for(e.parent=void 0,this.children.splice(t,1),t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.removeObject(e)}},getChildByName:function(e,t){var n,i,a;for(n=0,i=this.children.length;i>n;n++){if(a=this.children[n],a.name===e)return a;if(t&&void 0!==(a=a.getChildByName(e,t)))return a}},updateMatrix:function(){this.matrix.setPosition(this.position),this.useQuaternion?this.matrix.setRotationFromQuaternion(this.quaternion):this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder),(1!==this.scale.x||1!==this.scale.y||1!==this.scale.z)&&(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z))),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?this.matrixWorld.multiply(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,n=this.children.length;n>t;t++)this.children[t].updateMatrixWorld(e)}},THREE.Object3DCount=0,THREE.Projector=function(){function e(){var e=h[s]=h[s]||new THREE.RenderableObject;return s++,e}function t(){var e=f[r]=f[r]||new THREE.RenderableVertex;return r++,e}function n(e,t){return t.z-e.z}function i(e,t){var n=0,i=1,a=e.z+e.w,s=t.z+t.w,o=-e.z+e.w,r=-t.z+t.w;return a>=0&&s>=0&&o>=0&&r>=0||!(0>a&&0>s||0>o&&0>r)&&(0>a?n=Math.max(n,a/(a-s)):0>s&&(i=Math.min(i,a/(a-s))),0>o?n=Math.max(n,o/(o-r)):0>r&&(i=Math.min(i,o/(o-r))),!(n>i)&&(e.lerpSelf(t,n),t.lerpSelf(e,1-i),!0))}var a,s,o,r,l,c,d,p,u,g,m,h=[],f=[],v=[],b=[],y=[],w=[],x={objects:[],sprites:[],lights:[],elements:[]},S=new THREE.Vector3,T=new THREE.Vector4,C=new THREE.Matrix4,k=new THREE.Matrix4,E=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4],$=new THREE.Vector4,P=new THREE.Vector4;this.computeFrustum=function(e){for(E[0].set(e.n41-e.n11,e.n42-e.n12,e.n43-e.n13,e.n44-e.n14),E[1].set(e.n41+e.n11,e.n42+e.n12,e.n43+e.n13,e.n44+e.n14),E[2].set(e.n41+e.n21,e.n42+e.n22,e.n43+e.n23,e.n44+e.n24),E[3].set(e.n41-e.n21,e.n42-e.n22,e.n43-e.n23,e.n44-e.n24),E[4].set(e.n41-e.n31,e.n42-e.n32,e.n43-e.n33,e.n44-e.n34),E[5].set(e.n41+e.n31,e.n42+e.n32,e.n43+e.n33,e.n44+e.n34),e=0;6>e;e++){var t=E[e];t.divideScalar(Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z))}},this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),C.multiply(t.projectionMatrix,t.matrixWorldInverse),C.multiplyVector3(e),e},this.unprojectVector=function(e,t){return t.projectionMatrixInverse.getInverse(t.projectionMatrix),C.multiply(t.matrixWorld,t.projectionMatrixInverse),C.multiplyVector3(e),e},this.pickingRay=function(e,t){var n;return e.z=-1,n=new THREE.Vector3(e.x,e.y,1),this.unprojectVector(e,t),this.unprojectVector(n,t),n.subSelf(e).normalize(),new THREE.Ray(e,n)},this.projectGraph=function(t,i){s=0,x.objects.length=0,x.sprites.length=0,x.lights.length=0;var o=function(t){if(!1!==t.visible){var n;if((n=t instanceof THREE.Mesh||t instanceof THREE.Line)&&!(n=!1===t.frustumCulled))e:{for(var i=t.matrixWorld,s=-t.geometry.boundingSphere.radius*Math.max(t.scale.x,Math.max(t.scale.y,t.scale.z)),r=0;6>r;r++)if(n=E[r].x*i.n14+E[r].y*i.n24+E[r].z*i.n34+E[r].w,s>=n){n=!1;break e}n=!0}for(n?(C.multiplyVector3(S.copy(t.position)),a=e(),a.object=t,a.z=S.z,x.objects.push(a)):t instanceof THREE.Sprite||t instanceof THREE.Particle?(C.multiplyVector3(S.copy(t.position)),a=e(),a.object=t,a.z=S.z,x.sprites.push(a)):t instanceof THREE.Light&&x.lights.push(t),n=0,i=t.children.length;i>n;n++)o(t.children[n])}};return o(t),i&&x.objects.sort(n),x},this.projectScene=function(e,a,s){var h,S,E,I,_,L,R,M,q,A,z,D,F,N,H,O,U=a.near,j=a.far;for(m=u=d=c=0,x.elements.length=0,void 0===a.parent&&(console.warn("DEPRECATED: Camera hasn't been added to a Scene. Adding it..."),e.add(a)),e.updateMatrixWorld(),a.matrixWorldInverse.getInverse(a.matrixWorld),C.multiply(a.projectionMatrix,a.matrixWorldInverse),this.computeFrustum(C),x=this.projectGraph(e,!1),e=0,h=x.objects.length;h>e;e++)if(q=x.objects[e].object,A=q.matrixWorld,D=q.material,r=0,q instanceof THREE.Mesh){for(z=q.geometry,F=q.geometry.materials,I=z.vertices,N=z.faces,H=z.faceVertexUvs,z=q.matrixRotationWorld.extractRotation(A),S=0,E=I.length;E>S;S++)o=t(),o.positionWorld.copy(I[S].position),A.multiplyVector3(o.positionWorld),o.positionScreen.copy(o.positionWorld),C.multiplyVector4(o.positionScreen),o.positionScreen.x/=o.positionScreen.w,o.positionScreen.y/=o.positionScreen.w,o.visible=o.positionScreen.z>U&&o.positionScreen.z<j;for(I=0,S=N.length;S>I;I++){if((E=N[I])instanceof THREE.Face3){if(_=f[E.a],L=f[E.b],R=f[E.c],!(_.visible&&L.visible&&R.visible)||!q.doubleSided&&q.flipSided==(R.positionScreen.x-_.positionScreen.x)*(L.positionScreen.y-_.positionScreen.y)-(R.positionScreen.y-_.positionScreen.y)*(L.positionScreen.x-_.positionScreen.x)<0)continue;M=v[c]=v[c]||new THREE.RenderableFace3,c++,l=M,l.v1.copy(_),l.v2.copy(L),l.v3.copy(R)}else if(E instanceof THREE.Face4){if(_=f[E.a],L=f[E.b],R=f[E.c],M=f[E.d],!(_.visible&&L.visible&&R.visible&&M.visible)||!q.doubleSided&&q.flipSided==((M.positionScreen.x-_.positionScreen.x)*(L.positionScreen.y-_.positionScreen.y)-(M.positionScreen.y-_.positionScreen.y)*(L.positionScreen.x-_.positionScreen.x)<0||(L.positionScreen.x-R.positionScreen.x)*(M.positionScreen.y-R.positionScreen.y)-(L.positionScreen.y-R.positionScreen.y)*(M.positionScreen.x-R.positionScreen.x)<0))continue;O=b[d]=b[d]||new THREE.RenderableFace4,d++,l=O,l.v1.copy(_),l.v2.copy(L),l.v3.copy(R),l.v4.copy(M)}for(l.normalWorld.copy(E.normal),z.multiplyVector3(l.normalWorld),l.centroidWorld.copy(E.centroid),A.multiplyVector3(l.centroidWorld),l.centroidScreen.copy(l.centroidWorld),C.multiplyVector3(l.centroidScreen),R=E.vertexNormals,_=0,L=R.length;L>_;_++)M=l.vertexNormalsWorld[_],M.copy(R[_]),z.multiplyVector3(M);for(_=0,L=H.length;L>_;_++)if(O=H[_][I])for(R=0,M=O.length;M>R;R++)l.uvs[_][R]=O[R];l.material=D,l.faceMaterial=null!==E.materialIndex?F[E.materialIndex]:null,l.z=l.centroidScreen.z,x.elements.push(l)}}else if(q instanceof THREE.Line)for(k.multiply(C,A),I=q.geometry.vertices,_=t(),_.positionScreen.copy(I[0].position),k.multiplyVector4(_.positionScreen),S=1,E=I.length;E>S;S++)_=t(),_.positionScreen.copy(I[S].position),k.multiplyVector4(_.positionScreen),L=f[r-2],$.copy(_.positionScreen),P.copy(L.positionScreen),i($,P)&&($.multiplyScalar(1/$.w),P.multiplyScalar(1/P.w),q=y[u]=y[u]||new THREE.RenderableLine,u++,p=q,p.v1.positionScreen.copy($),p.v2.positionScreen.copy(P),p.z=Math.max($.z,P.z),p.material=D,x.elements.push(p));for(e=0,h=x.sprites.length;h>e;e++)q=x.sprites[e].object,A=q.matrixWorld,q instanceof THREE.Particle&&(T.set(A.n14,A.n24,A.n34,1),C.multiplyVector4(T),T.z/=T.w,T.z>0&&T.z<1)&&(U=w[m]=w[m]||new THREE.RenderableParticle,m++,g=U,g.x=T.x/T.w,g.y=T.y/T.w,g.z=T.z,g.rotation=q.rotation.z,g.scale.x=q.scale.x*Math.abs(g.x-(T.x+a.projectionMatrix.n11)/(T.w+a.projectionMatrix.n14)),g.scale.y=q.scale.y*Math.abs(g.y-(T.y+a.projectionMatrix.n22)/(T.w+a.projectionMatrix.n24)),g.material=q.material,x.elements.push(g));return s&&x.elements.sort(n),x}},THREE.Quaternion=function(e,t,n,i){this.set(e||0,t||0,n||0,void 0!==i?i:1)},THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEuler:function(e){var t=Math.PI/360,n=e.x*t,i=e.y*t,a=e.z*t,e=Math.cos(i),i=Math.sin(i),t=Math.cos(-a),a=Math.sin(-a),s=Math.cos(n),n=Math.sin(n),o=e*t,r=i*a;return this.w=o*s-r*n,this.x=o*n+r*s,this.y=i*t*s+e*a*n,this.z=e*a*s-i*t*n,this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(n),this},setFromRotationMatrix:function(e){var t=Math.pow(e.determinant(),1/3);return this.w=Math.sqrt(Math.max(0,t+e.n11+e.n22+e.n33))/2,this.x=Math.sqrt(Math.max(0,t+e.n11-e.n22-e.n33))/2,this.y=Math.sqrt(Math.max(0,t-e.n11+e.n22-e.n33))/2,this.z=Math.sqrt(Math.max(0,t-e.n11-e.n22+e.n33))/2,this.x=e.n32-e.n23<0?-Math.abs(this.x):Math.abs(this.x),this.y=e.n13-e.n31<0?-Math.abs(this.y):Math.abs(this.y),this.z=e.n21-e.n12<0?-Math.abs(this.z):Math.abs(this.z),this.normalize(),this},calculateW:function(){return this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z)),this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?this.w=this.z=this.y=this.x=0:(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this},multiplySelf:function(e){var t=this.x,n=this.y,i=this.z,a=this.w,s=e.x,o=e.y,r=e.z,e=e.w;return this.x=t*e+a*s+n*r-i*o,this.y=n*e+a*o+i*s-t*r,this.z=i*e+a*r+t*o-n*s,this.w=a*e-t*s-n*o-i*r,this},multiply:function(e,t){return this.x=e.x*t.w+e.y*t.z-e.z*t.y+e.w*t.x,this.y=-e.x*t.z+e.y*t.w+e.z*t.x+e.w*t.y,this.z=e.x*t.y-e.y*t.x+e.z*t.w+e.w*t.z,this.w=-e.x*t.x-e.y*t.y-e.z*t.z+e.w*t.w,this},multiplyVector3:function(e,t){t||(t=e);var n=e.x,i=e.y,a=e.z,s=this.x,o=this.y,r=this.z,l=this.w,c=l*n+o*a-r*i,d=l*i+r*n-s*a,p=l*a+s*i-o*n,n=-s*n-o*i-r*a;return t.x=c*l+n*-s+d*-r-p*-o,t.y=d*l+n*-o+p*-s-c*-r,t.z=p*l+n*-r+c*-o-d*-s,t}},THREE.Quaternion.slerp=function(e,t,n,i){var a=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(0>a?(n.w=-t.w,n.x=-t.x,n.y=-t.y,n.z=-t.z,a=-a):n.copy(t),Math.abs(a)>=1)return n.w=e.w,n.x=e.x,n.y=e.y,n.z=e.z,n;var s=Math.acos(a),a=Math.sqrt(1-a*a);return Math.abs(a)<.001?(n.w=.5*(e.w+t.w),n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y),n.z=.5*(e.z+t.z),n):(t=Math.sin((1-i)*s)/a,i=Math.sin(i*s)/a,n.w=e.w*t+n.w*i,n.x=e.x*t+n.x*i,n.y=e.y*t+n.y*i,n.z=e.z*t+n.z*i,n)},THREE.Vertex=function(e){this.position=e||new THREE.Vector3},THREE.Face3=function(e,t,n,i,a,s){this.a=e,this.b=t,this.c=n,this.normal=i instanceof THREE.Vector3?i:new THREE.Vector3,this.vertexNormals=i instanceof Array?i:[],this.color=a instanceof THREE.Color?a:new THREE.Color,this.vertexColors=a instanceof Array?a:[],this.vertexTangents=[],this.materialIndex=s,this.centroid=new THREE.Vector3},THREE.Face4=function(e,t,n,i,a,s,o){this.a=e,this.b=t,this.c=n,this.d=i,this.normal=a instanceof THREE.Vector3?a:new THREE.Vector3,this.vertexNormals=a instanceof Array?a:[],this.color=s instanceof THREE.Color?s:new THREE.Color,this.vertexColors=s instanceof Array?s:[],this.vertexTangents=[],this.materialIndex=o,this.centroid=new THREE.Vector3},THREE.UV=function(e,t){this.u=e||0,this.v=t||0},THREE.UV.prototype={constructor:THREE.UV,set:function(e,t){return this.u=e,this.v=t,this},copy:function(e){return this.u=e.u,this.v=e.v,this},clone:function(){return new THREE.UV(this.u,this.v)}},THREE.Geometry=function(){this.id=THREE.GeometryCount++,this.vertices=[],this.colors=[],this.materials=[],this.faces=[],this.faceUvs=[[]],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.dynamic=this.hasTangents=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){var t=new THREE.Matrix4;t.extractRotation(e,new THREE.Vector3(1,1,1));for(var n=0,i=this.vertices.length;i>n;n++)e.multiplyVector3(this.vertices[n].position);for(n=0,i=this.faces.length;i>n;n++){var a=this.faces[n];t.multiplyVector3(a.normal);for(var s=0,o=a.vertexNormals.length;o>s;s++)t.multiplyVector3(a.vertexNormals[s]);e.multiplyVector3(a.centroid)}},computeCentroids:function(){var e,t,n;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n.centroid.set(0,0,0),n instanceof THREE.Face3?(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.divideScalar(3)):n instanceof THREE.Face4&&(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.addSelf(this.vertices[n.d].position),n.centroid.divideScalar(4))},computeFaceNormals:function(){var e,t,n,i,a,s,o=new THREE.Vector3,r=new THREE.Vector3;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],i=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c],o.sub(s.position,a.position),r.sub(i.position,a.position),o.crossSelf(r),o.isZero()||o.normalize(),n.normal.copy(o)},computeVertexNormals:function(){var e,t,n,i;if(void 0===this.__tmpVertices){for(i=this.__tmpVertices=Array(this.vertices.length),e=0,t=this.vertices.length;t>e;e++)i[e]=new THREE.Vector3;for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n instanceof THREE.Face3?n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:n instanceof THREE.Face4&&(n.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(i=this.__tmpVertices,e=0,t=this.vertices.length;t>e;e++)i[e].set(0,0,0);for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n instanceof THREE.Face3?(i[n.a].addSelf(n.normal),i[n.b].addSelf(n.normal),i[n.c].addSelf(n.normal)):n instanceof THREE.Face4&&(i[n.a].addSelf(n.normal),i[n.b].addSelf(n.normal),i[n.c].addSelf(n.normal),i[n.d].addSelf(n.normal));for(e=0,t=this.vertices.length;t>e;e++)i[e].normalize();for(e=0,t=this.faces.length;t>e;e++)n=this.faces[e],n instanceof THREE.Face3?(n.vertexNormals[0].copy(i[n.a]),n.vertexNormals[1].copy(i[n.b]),n.vertexNormals[2].copy(i[n.c])):n instanceof THREE.Face4&&(n.vertexNormals[0].copy(i[n.a]),n.vertexNormals[1].copy(i[n.b]),n.vertexNormals[2].copy(i[n.c]),n.vertexNormals[3].copy(i[n.d]))},computeTangents:function(){function e(e,t,n,i,a,s,C){r=e.vertices[t].position,l=e.vertices[n].position,c=e.vertices[i].position,d=o[a],p=o[s],u=o[C],g=l.x-r.x,m=c.x-r.x,h=l.y-r.y,f=c.y-r.y,v=l.z-r.z,b=c.z-r.z,y=p.u-d.u,w=u.u-d.u,x=p.v-d.v,S=u.v-d.v,T=1/(y*S-w*x),$.set((S*g-x*m)*T,(S*h-x*f)*T,(S*v-x*b)*T),P.set((y*m-w*g)*T,(y*f-w*h)*T,(y*b-w*v)*T),k[t].addSelf($),k[n].addSelf($),k[i].addSelf($),E[t].addSelf(P),E[n].addSelf(P),E[i].addSelf(P)}var t,n,i,a,s,o,r,l,c,d,p,u,g,m,h,f,v,b,y,w,x,S,T,C,k=[],E=[],$=new THREE.Vector3,P=new THREE.Vector3,I=new THREE.Vector3,_=new THREE.Vector3,L=new THREE.Vector3;for(t=0,n=this.vertices.length;n>t;t++)k[t]=new THREE.Vector3,E[t]=new THREE.Vector3;for(t=0,n=this.faces.length;n>t;t++)s=this.faces[t],o=this.faceVertexUvs[0][t],s instanceof THREE.Face3?e(this,s.a,s.b,s.c,0,1,2):s instanceof THREE.Face4&&(e(this,s.a,s.b,s.c,0,1,2),e(this,s.a,s.b,s.d,0,1,3));var R=["a","b","c","d"];for(t=0,n=this.faces.length;n>t;t++)for(s=this.faces[t],i=0;i<s.vertexNormals.length;i++)L.copy(s.vertexNormals[i]),a=s[R[i]],C=k[a],I.copy(C),I.subSelf(L.multiplyScalar(L.dot(C))).normalize(),_.cross(s.vertexNormals[i],C),a=_.dot(E[a]),a=0>a?-1:1,s.vertexTangents[i]=new THREE.Vector4(I.x,I.y,I.z,a);this.hasTangents=!0},computeBoundingBox:function(){var e;if(this.vertices.length>0){this.boundingBox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,n=this.vertices.length;n>t;t++)e=this.vertices[t],e.position.x<this.boundingBox.x[0]?this.boundingBox.x[0]=e.position.x:e.position.x>this.boundingBox.x[1]&&(this.boundingBox.x[1]=e.position.x),e.position.y<this.boundingBox.y[0]?this.boundingBox.y[0]=e.position.y:e.position.y>this.boundingBox.y[1]&&(this.boundingBox.y[1]=e.position.y),e.position.z<this.boundingBox.z[0]?this.boundingBox.z[0]=e.position.z:e.position.z>this.boundingBox.z[1]&&(this.boundingBox.z[1]=e.position.z)}},computeBoundingSphere:function(){for(var e=0,t=0,n=this.vertices.length;n>t;t++)e=Math.max(e,this.vertices[t].position.length());this.boundingSphere={radius:e}},mergeVertices:function(){var e,t,n,i={},a=[],s=[],o=Math.pow(10,4);for(t=0,n=this.vertices.length;n>t;t++)e=this.vertices[t].position,e=[Math.round(e.x*o),Math.round(e.y*o),Math.round(e.z*o)].join("_"),void 0===i[e]?(i[e]=t,a.push(this.vertices[t]),s[t]=a.length-1):s[t]=s[i[e]];for(t=0,n=this.faces.length;n>t;t++)i=this.faces[t],i instanceof THREE.Face3?(i.a=s[i.a],i.b=s[i.b],i.c=s[i.c]):i instanceof THREE.Face4&&(i.a=s[i.a],i.b=s[i.b],i.c=s[i.c],i.d=s[i.d]);this.vertices=a}},THREE.GeometryCount=0,THREE.Camera=function(){return arguments.length?(console.warn("DEPRECATED: Camera() is now PerspectiveCamera() or OrthographicCamera()."),new THREE.PerspectiveCamera(arguments[0],arguments[1],arguments[2],arguments[3])):(THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,void(this.projectionMatrixInverse=new THREE.Matrix4))},THREE.Camera.prototype=new THREE.Object3D,THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&this.rotation.setRotationFromMatrix(this.matrix)},THREE.OrthographicCamera=function(e,t,n,i,a,s){THREE.Camera.call(this),this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==a?a:.1,this.far=void 0!==s?s:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=new THREE.Camera,THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix=THREE.Matrix4.makeOrtho(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.PerspectiveCamera=function(e,t,n,i){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=new THREE.Camera,THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(e,t){this.fov=2*Math.atan((void 0!==t?t:43.25)/(2*e)),this.fov*=180/Math.PI,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,n,i,a,s){this.fullWidth=e,this.fullHeight=t,this.x=n,this.y=i,this.width=a,this.height=s,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(this.fov*Math.PI/360)*this.near,n=-t,i=e*n,e=Math.abs(e*t-i),n=Math.abs(t-n);this.projectionMatrix=THREE.Matrix4.makeFrustum(i+this.x*e/this.fullWidth,i+(this.x+this.width)*e/this.fullWidth,t-(this.y+this.height)*n/this.fullHeight,t-this.y*n/this.fullHeight,this.near,this.far)}else this.projectionMatrix=THREE.Matrix4.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=new THREE.Object3D,THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.supr=THREE.Object3D.prototype,THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=new THREE.Light,THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(e,t,n){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,1,0),this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},THREE.DirectionalLight.prototype=new THREE.Light,THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.PointLight=function(e,t,n){THREE.Light.call(this,e),this.position=new THREE.Vector3(0,0,0),this.intensity=void 0!==t?t:1,this.distance=void 0!==n?n:0},THREE.PointLight.prototype=new THREE.Light,THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.Material=function(e){this.name="",this.id=THREE.MaterialCount++,e=e||{},this.opacity=void 0!==e.opacity?e.opacity:1,this.transparent=void 0!==e.transparent&&e.transparent,this.blending=void 0!==e.blending?e.blending:THREE.NormalBlending,this.depthTest=void 0===e.depthTest||e.depthTest,this.depthWrite=void 0===e.depthWrite||e.depthWrite,this.polygonOffset=void 0!==e.polygonOffset&&e.polygonOffset,this.polygonOffsetFactor=void 0!==e.polygonOffsetFactor?e.polygonOffsetFactor:0,this.polygonOffsetUnits=void 0!==e.polygonOffsetUnits?e.polygonOffsetUnits:0,this.alphaTest=void 0!==e.alphaTest?e.alphaTest:0,this.overdraw=void 0!==e.overdraw&&e.overdraw},THREE.MaterialCount=0,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NormalBlending=0,THREE.AdditiveBlending=1,THREE.SubtractiveBlending=2,THREE.MultiplyBlending=3,THREE.AdditiveAlphaBlending=4,THREE.LineBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.linewidth=void 0!==e.linewidth?e.linewidth:1,this.linecap=void 0!==e.linecap?e.linecap:"round",this.linejoin=void 0!==e.linejoin?e.linejoin:"round",this.vertexColors=!!e.vertexColors&&e.vertexColors,this.fog=void 0===e.fog||e.fog},THREE.LineBasicMaterial.prototype=new THREE.Material,THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.MeshBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshBasicMaterial.prototype=new THREE.Material,THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshLambertMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.ambient=void 0!==e.ambient?new THREE.Color(e.ambient):new THREE.Color(328965),this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshLambertMaterial.prototype=new THREE.Material,THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshPhongMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.ambient=void 0!==e.ambient?new THREE.Color(e.ambient):new THREE.Color(328965),this.specular=void 0!==e.specular?new THREE.Color(e.specular):new THREE.Color(1118481),this.shininess=void 0!==e.shininess?e.shininess:30,this.metal=void 0!==e.metal&&e.metal,this.perPixel=void 0!==e.perPixel&&e.perPixel,this.map=void 0!==e.map?e.map:null,this.lightMap=void 0!==e.lightMap?e.lightMap:null,this.envMap=void 0!==e.envMap?e.envMap:null,this.combine=void 0!==e.combine?e.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==e.reflectivity?e.reflectivity:1,this.refractionRatio=void 0!==e.refractionRatio?e.refractionRatio:.98,this.fog=void 0===e.fog||e.fog,this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1,this.wireframeLinecap=void 0!==e.wireframeLinecap?e.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==e.wireframeLinejoin?e.wireframeLinejoin:"round",this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.skinning=void 0!==e.skinning&&e.skinning,this.morphTargets=void 0!==e.morphTargets&&e.morphTargets},THREE.MeshPhongMaterial.prototype=new THREE.Material,THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshDepthMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.shading=void 0!==e.shading?e.shading:THREE.SmoothShading,this.wireframe=void 0!==e.wireframe&&e.wireframe,this.wireframeLinewidth=void 0!==e.wireframeLinewidth?e.wireframeLinewidth:1},THREE.MeshDepthMaterial.prototype=new THREE.Material,THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.shading=e.shading?e.shading:THREE.FlatShading,this.wireframe=!!e.wireframe&&e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth?e.wireframeLinewidth:1},THREE.MeshNormalMaterial.prototype=new THREE.Material,THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshFaceMaterial=function(){},THREE.ParticleBasicMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=void 0!==e.map?e.map:null,this.size=void 0!==e.size?e.size:1,this.sizeAttenuation=void 0===e.sizeAttenuation||e.sizeAttenuation,this.vertexColors=void 0!==e.vertexColors&&e.vertexColors,this.fog=void 0===e.fog||e.fog},THREE.ParticleBasicMaterial.prototype=new THREE.Material,THREE.ParticleBasicMaterial.prototype.constructor=THREE.ParticleBasicMaterial,THREE.ParticleCanvasMaterial=function(e){THREE.Material.call(this,e),e=e||{},this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.program=void 0!==e.program?e.program:function(){}},THREE.ParticleCanvasMaterial.prototype=new THREE.Material,THREE.ParticleCanvasMaterial.prototype.constructor=THREE.ParticleCanvasMaterial,THREE.Texture=function(e,t,n,i,a,s){this.id=THREE.TextureCount++,this.image=e,this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrapS=void 0!==n?n:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i?i:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==a?a:THREE.LinearFilter,this.minFilter=void 0!==s?s:THREE.LinearMipMapLinearFilter,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var e=new THREE.Texture(this.image,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);return e.offset.copy(this.offset),e.repeat.copy(this.repeat),e}},THREE.TextureCount=0,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.LatitudeReflectionMapping=function(){},THREE.LatitudeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.UVMapping=function(){},THREE.RepeatWrapping=0,THREE.ClampToEdgeWrapping=1,THREE.MirroredRepeatWrapping=2,THREE.NearestFilter=3,THREE.NearestMipMapNearestFilter=4,THREE.NearestMipMapLinearFilter=5,THREE.LinearFilter=6,THREE.LinearMipMapNearestFilter=7,THREE.LinearMipMapLinearFilter=8,THREE.ByteType=9,THREE.UnsignedByteType=10,THREE.ShortType=11,THREE.UnsignedShortType=12,THREE.IntType=13,THREE.UnsignedIntType=14,THREE.FloatType=15,THREE.AlphaFormat=16,THREE.RGBFormat=17,THREE.RGBAFormat=18,THREE.LuminanceFormat=19,THREE.LuminanceAlphaFormat=20,THREE.Particle=function(e){THREE.Object3D.call(this),this.material=e},THREE.Particle.prototype=new THREE.Object3D,THREE.Particle.prototype.constructor=THREE.Particle,THREE.Line=function(e,t,n){THREE.Object3D.call(this),this.geometry=e,this.material=t,this.type=void 0!==n?n:THREE.LineStrip,this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=new THREE.Object3D,THREE.Line.prototype.constructor=THREE.Line,THREE.Mesh=function(e,t){if(THREE.Object3D.call(this),this.geometry=e,this.material=t,t instanceof Array&&(console.warn("DEPRECATED: Mesh material can no longer be an Array. Using material at index 0..."),this.material=t[0]),this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=e.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var n=0;n<this.geometry.morphTargets.length;n++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[n].name]=n}},THREE.Mesh.prototype=new THREE.Object3D,THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.supr=THREE.Object3D.prototype,THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=new THREE.Object3D,THREE.Bone.prototype.constructor=THREE.Bone,THREE.Bone.prototype.supr=THREE.Object3D.prototype,THREE.Bone.prototype.update=function(e,t){this.matrixAutoUpdate&&(t|=this.updateMatrix()),(t||this.matrixWorldNeedsUpdate)&&(e?this.skinMatrix.multiply(e,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);var n,i=this.children.length;for(n=0;i>n;n++)this.children[n].update(this.skinMatrix,t)},THREE.Sprite=function(e){THREE.Object3D.call(this),this.color=void 0!==e.color?new THREE.Color(e.color):new THREE.Color(16777215),this.map=e.map instanceof THREE.Texture?e.map:THREE.ImageUtils.loadTexture(e.map),this.blending=void 0!==e.blending?e.blending:THREE.NormalBlending,this.useScreenCoordinates=void 0===e.useScreenCoordinates||e.useScreenCoordinates,this.mergeWith3D=void 0!==e.mergeWith3D?e.mergeWith3D:!this.useScreenCoordinates,this.affectedByDistance=void 0!==e.affectedByDistance?e.affectedByDistance:!this.useScreenCoordinates,this.scaleByViewport=void 0!==e.scaleByViewport?e.scaleByViewport:!this.affectedByDistance,this.alignment=e.alignment instanceof THREE.Vector2?e.alignment:THREE.SpriteAlignment.center,this.rotation3d=this.rotation,this.rotation=0,this.opacity=1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1)},THREE.Sprite.prototype=new THREE.Object3D,THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(1!==this.scale.x||1!==this.scale.y)&&(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,this.scale.y)),this.matrixWorldNeedsUpdate=!0},THREE.SpriteAlignment={},THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1),THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1),THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1),THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0),THREE.SpriteAlignment.center=new THREE.Vector2(0,0),THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0),THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1),THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1),THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1),THREE.Scene=function(){THREE.Object3D.call(this),this.overrideMaterial=this.fog=null,this.matrixAutoUpdate=!1,this.objects=[],this.lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=new THREE.Object3D,THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.addObject=function(e){if(e instanceof THREE.Light)-1===this.lights.indexOf(e)&&this.lights.push(e);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)&&-1===this.objects.indexOf(e)){this.objects.push(e),this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}for(t=0;t<e.children.length;t++)this.addObject(e.children[t])},THREE.Scene.prototype.removeObject=function(e){if(e instanceof THREE.Light){var t=this.lights.indexOf(e);-1!==t&&this.lights.splice(t,1)}else e instanceof THREE.Camera||-1!==(t=this.objects.indexOf(e))&&(this.objects.splice(t,1),this.__objectsRemoved.push(e),-1!==(t=this.__objectsAdded.indexOf(e))&&this.__objectsAdded.splice(t,1));for(t=0;t<e.children.length;t++)this.removeObject(e.children[t])},THREE.CanvasRenderer=function(e){function t(e){Y!=e&&(G.globalAlpha=Y=e)}function n(e){if(Z!=e){switch(e){case THREE.NormalBlending:G.globalCompositeOperation="source-over";break;case THREE.AdditiveBlending:G.globalCompositeOperation="lighter";break;case THREE.SubtractiveBlending:G.globalCompositeOperation="darker"}Z=e}}function i(e){J!=e&&(G.strokeStyle=J=e)}function a(e){K!=e&&(G.fillStyle=K=e)}var s,o,r,l,c,d,p,u,g,m,h,f,v,b,y,w,x,S,T,C,k,E,$,P,I,_,L,R,M,q,A,z,D,F,N,H,O,U,j,B=this,X=new THREE.Projector,e=e||{},V=void 0!==e.canvas?e.canvas:document.createElement("canvas"),G=V.getContext("2d"),W=new THREE.Color(0),Q=0,Y=1,Z=0,J=null,K=null,ee=null,te=null,ne=null,ie=new THREE.RenderableVertex,ae=new THREE.RenderableVertex,se=new THREE.Color,oe=new THREE.Color,re=new THREE.Color,le=new THREE.Color,ce=new THREE.Color,de=[],pe=[],ue=new THREE.Rectangle,ge=new THREE.Rectangle,me=new THREE.Rectangle,he=!1,fe=new THREE.Color,ve=new THREE.Color,be=new THREE.Color,ye=new THREE.Vector3,e=16;F=document.createElement("canvas"),F.width=F.height=2,N=F.getContext("2d"),N.fillStyle="rgba(0,0,0,1)",N.fillRect(0,0,2,2),H=N.getImageData(0,0,2,2),O=H.data,U=document.createElement("canvas"),U.width=U.height=e,j=U.getContext("2d"),j.translate(-e/2,-e/2),j.scale(e,e),e--,this.domElement=V,this.sortElements=this.sortObjects=this.autoClear=!0,this.info={render:{vertices:0,faces:0}},this.setSize=function(e,t){l=e,c=t,d=Math.floor(l/2),p=Math.floor(c/2),V.width=l,V.height=c,ue.set(-d,-p,d,p),ge.set(-d,-p,d,p),Y=1,Z=0,ne=te=ee=K=J=null},this.setClearColor=function(e,t){W.copy(e),Q=t,ge.set(-d,-p,d,p)},this.setClearColorHex=function(e,t){W.setHex(e),Q=t,ge.set(-d,-p,d,p)},this.clear=function(){G.setTransform(1,0,0,-1,d,p),ge.isEmpty()||(ge.minSelf(ue),ge.inflate(2),1>Q&&G.clearRect(Math.floor(ge.getX()),Math.floor(ge.getY()),Math.floor(ge.getWidth()),Math.floor(ge.getHeight())),Q>0&&(n(THREE.NormalBlending),t(1),a("rgba("+Math.floor(255*W.r)+","+Math.floor(255*W.g)+","+Math.floor(255*W.b)+","+Q+")"),G.fillRect(Math.floor(ge.getX()),Math.floor(ge.getY()),Math.floor(ge.getWidth()),Math.floor(ge.getHeight()))),ge.empty())},this.render=function(e,l){function c(e,t,n,i){var a,s,o,r,l,c;for(a=0,s=e.length;s>a;a++)o=e[a],r=o.color,o instanceof THREE.DirectionalLight?(l=o.matrixWorld.getPosition(),0>=(c=n.dot(l))||(c*=o.intensity,i.r+=r.r*c,i.g+=r.g*c,i.b+=r.b*c)):o instanceof THREE.PointLight&&(l=o.matrixWorld.getPosition(),0>=(c=n.dot(ye.sub(l,t).normalize()))||0!=(c*=0==o.distance?1:1-Math.min(t.distanceTo(l)/o.distance,1))&&(c*=o.intensity,i.r+=r.r*c,i.g+=r.g*c,i.b+=r.b*c))}function V(e,i,a,s,o,d,p,u){B.info.render.vertices+=3,B.info.render.faces++,t(u.opacity),n(u.blending),f=e.positionScreen.x,v=e.positionScreen.y,b=i.positionScreen.x,y=i.positionScreen.y,w=a.positionScreen.x,x=a.positionScreen.y,W(f,v,b,y,w,x),u instanceof THREE.MeshBasicMaterial?u.map?u.map.mapping instanceof THREE.UVMapping&&(L=p.uvs[0],J(f,v,b,y,w,x,L[s].u,L[s].v,L[o].u,L[o].v,L[d].u,L[d].v,u.map)):u.envMap?u.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(e=l.matrixWorldInverse,ye.copy(p.vertexNormalsWorld[s]),R=.5*(ye.x*e.n11+ye.y*e.n12+ye.z*e.n13)+.5,M=.5*-(ye.x*e.n21+ye.y*e.n22+ye.z*e.n23)+.5,ye.copy(p.vertexNormalsWorld[o]),q=.5*(ye.x*e.n11+ye.y*e.n12+ye.z*e.n13)+.5,A=.5*-(ye.x*e.n21+ye.y*e.n22+ye.z*e.n23)+.5,ye.copy(p.vertexNormalsWorld[d]),z=.5*(ye.x*e.n11+ye.y*e.n12+ye.z*e.n13)+.5,D=.5*-(ye.x*e.n21+ye.y*e.n22+ye.z*e.n23)+.5,J(f,v,b,y,w,x,R,M,q,A,z,D,u.envMap)):u.wireframe?Y(u.color,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(u.color):u instanceof THREE.MeshLambertMaterial?(u.map&&!u.wireframe&&(u.map.mapping instanceof THREE.UVMapping&&(L=p.uvs[0],J(f,v,b,y,w,x,L[s].u,L[s].v,L[o].u,L[o].v,L[d].u,L[d].v,u.map)),n(THREE.SubtractiveBlending)),he?u.wireframe||u.shading!=THREE.SmoothShading||3!=p.vertexNormalsWorld.length?(se.r=fe.r,se.g=fe.g,se.b=fe.b,c(r,p.centroidWorld,p.normalWorld,se),se.r=Math.max(0,Math.min(u.color.r*se.r,1)),se.g=Math.max(0,Math.min(u.color.g*se.g,1)),se.b=Math.max(0,Math.min(u.color.b*se.b,1)),u.wireframe?Y(se,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(se)):(oe.r=re.r=le.r=fe.r,oe.g=re.g=le.g=fe.g,oe.b=re.b=le.b=fe.b,c(r,p.v1.positionWorld,p.vertexNormalsWorld[0],oe),c(r,p.v2.positionWorld,p.vertexNormalsWorld[1],re),c(r,p.v3.positionWorld,p.vertexNormalsWorld[2],le),oe.r=Math.max(0,Math.min(u.color.r*oe.r,1)),oe.g=Math.max(0,Math.min(u.color.g*oe.g,1)),oe.b=Math.max(0,Math.min(u.color.b*oe.b,1)),re.r=Math.max(0,Math.min(u.color.r*re.r,1)),re.g=Math.max(0,Math.min(u.color.g*re.g,1)),re.b=Math.max(0,Math.min(u.color.b*re.b,1)),le.r=Math.max(0,Math.min(u.color.r*le.r,1)),le.g=Math.max(0,Math.min(u.color.g*le.g,1)),le.b=Math.max(0,Math.min(u.color.b*le.b,1)),ce.r=.5*(re.r+le.r),ce.g=.5*(re.g+le.g),ce.b=.5*(re.b+le.b),_=we(oe,re,le,ce),K(f,v,b,y,w,x,0,0,1,0,0,1,_)):u.wireframe?Y(u.color,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(u.color)):u instanceof THREE.MeshDepthMaterial?(P=l.near,I=l.far,oe.r=oe.g=oe.b=1-xe(e.positionScreen.z,P,I),re.r=re.g=re.b=1-xe(i.positionScreen.z,P,I),le.r=le.g=le.b=1-xe(a.positionScreen.z,P,I),ce.r=.5*(re.r+le.r),ce.g=.5*(re.g+le.g),ce.b=.5*(re.b+le.b),_=we(oe,re,le,ce),K(f,v,b,y,w,x,0,0,1,0,0,1,_)):u instanceof THREE.MeshNormalMaterial&&(se.r=Se(p.normalWorld.x),se.g=Se(p.normalWorld.y),se.b=Se(p.normalWorld.z),u.wireframe?Y(se,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(se))}function W(e,t,n,i,a,s){G.beginPath(),G.moveTo(e,t),G.lineTo(n,i),G.lineTo(a,s),G.lineTo(e,t),G.closePath()}function Q(e,t,n,i,a,s,o,r){G.beginPath(),G.moveTo(e,t),G.lineTo(n,i),G.lineTo(a,s),G.lineTo(o,r),G.lineTo(e,t),G.closePath()}function Y(e,t,n,a){ee!=t&&(G.lineWidth=ee=t),te!=n&&(G.lineCap=te=n),ne!=a&&(G.lineJoin=ne=a),i(e.getContextStyle()),G.stroke(),me.inflate(2*t)}function Z(e){a(e.getContextStyle()),G.fill()}function J(e,t,n,i,s,o,r,l,c,d,p,u,g){if(0!=g.image.width){if(1==g.needsUpdate||void 0==de[g.id]){var m=g.wrapS==THREE.RepeatWrapping,h=g.wrapT==THREE.RepeatWrapping;de[g.id]=G.createPattern(g.image,m&&h?"repeat":m&&!h?"repeat-x":!m&&h?"repeat-y":"no-repeat"),g.needsUpdate=!1}a(de[g.id]);var m=g.offset.x/g.repeat.x,h=g.offset.y/g.repeat.y,f=g.image.width*g.repeat.x,v=g.image.height*g.repeat.y,r=(r+m)*f,l=(l+h)*v,c=(c+m)*f,d=(d+h)*v,p=(p+m)*f,u=(u+h)*v;n-=e,i-=t,s-=e,o-=t,c-=r,d-=l,p-=r,u-=l,m=c*u-p*d,0==m?(void 0==pe[g.id]&&(t=document.createElement("canvas"),t.width=g.image.width,t.height=g.image.height,e=t.getContext("2d"),e.drawImage(g.image,0,0),pe[g.id]=e.getImageData(0,0,g.image.width,g.image.height).data,delete t),t=pe[g.id],r=4*(Math.floor(r)+Math.floor(l)*g.image.width),se.setRGB(t[r]/255,t[r+1]/255,t[r+2]/255),Z(se)):(m=1/m,g=(u*n-d*s)*m,d=(u*i-d*o)*m,n=(c*s-p*n)*m,i=(c*o-p*i)*m,e=e-g*r-n*l,r=t-d*r-i*l,G.save(),G.transform(g,d,n,i,e,r),G.fill(),G.restore())}}function K(e,t,n,i,a,s,o,r,l,c,d,p,u){var g,m;g=u.width-1,m=u.height-1,o*=g,r*=m,l*=g,c*=m,d*=g,p*=m,n-=e,i-=t,a-=e,s-=t,l-=o,c-=r,d-=o,p-=r,m=1/(l*p-d*c),g=(p*n-c*a)*m,c=(p*i-c*s)*m,n=(l*a-d*n)*m,i=(l*s-d*i)*m,e=e-g*o-n*r,t=t-c*o-i*r,G.save(),G.transform(g,c,n,i,e,t),G.clip(),G.drawImage(u,0,0),G.restore()}function we(e,t,n,i){var a=~~(255*e.r),s=~~(255*e.g),e=~~(255*e.b),o=~~(255*t.r),r=~~(255*t.g),t=~~(255*t.b),l=~~(255*n.r),c=~~(255*n.g),n=~~(255*n.b),d=~~(255*i.r),p=~~(255*i.g),i=~~(255*i.b);return O[0]=0>a?0:a>255?255:a,O[1]=0>s?0:s>255?255:s,O[2]=0>e?0:e>255?255:e,O[4]=0>o?0:o>255?255:o,O[5]=0>r?0:r>255?255:r,O[6]=0>t?0:t>255?255:t,O[8]=0>l?0:l>255?255:l,O[9]=0>c?0:c>255?255:c,O[10]=0>n?0:n>255?255:n,O[12]=0>d?0:d>255?255:d,O[13]=0>p?0:p>255?255:p,O[14]=0>i?0:i>255?255:i,N.putImageData(H,0,0),j.drawImage(F,0,0),U}function xe(e,t,n){return(e=(e-t)/(n-t))*e*(3-2*e)}function Se(e){return e=.5*(e+1),0>e?0:e>1?1:e}function Te(e,t){var n=t.x-e.x,i=t.y-e.y,a=n*n+i*i;0!=a&&(a=1/Math.sqrt(a),n*=a,i*=a,t.x+=n,t.y+=i,e.x-=n,e.y-=i)}var Ce,ke,Ee,$e;for(this.autoClear?this.clear():G.setTransform(1,0,0,-1,d,p),B.info.render.vertices=0,B.info.render.faces=0,s=X.projectScene(e,l,this.sortElements),o=s.elements,r=s.lights,(he=r.length>0)&&function(e){var t,n,i,a;for(fe.setRGB(0,0,0),ve.setRGB(0,0,0),be.setRGB(0,0,0),t=0,n=e.length;n>t;t++)i=e[t],a=i.color,i instanceof THREE.AmbientLight?(fe.r+=a.r,fe.g+=a.g,fe.b+=a.b):i instanceof THREE.DirectionalLight?(ve.r+=a.r,ve.g+=a.g,ve.b+=a.b):i instanceof THREE.PointLight&&(be.r+=a.r,be.g+=a.g,be.b+=a.b)}(r),Ce=0,ke=o.length;ke>Ce;Ce++)Ee=o[Ce],$e=Ee.material,null==($e=$e instanceof THREE.MeshFaceMaterial?Ee.faceMaterial:$e)||0==$e.opacity||(me.empty(),Ee instanceof THREE.RenderableParticle?(u=Ee,u.x*=d,u.y*=p,function(e,s,o){t(o.opacity),n(o.blending);var r,l,c,u,g,m;o instanceof THREE.ParticleBasicMaterial?o.map&&(u=o.map.image,g=u.width>>1,m=u.height>>1,o=s.scale.x*d,c=s.scale.y*p,r=o*g,l=c*m,me.set(e.x-r,e.y-l,e.x+r,e.y+l),ue.intersects(me)&&(G.save(),G.translate(e.x,e.y),G.rotate(-s.rotation),G.scale(o,-c),G.translate(-g,-m),G.drawImage(u,0,0),G.restore())):o instanceof THREE.ParticleCanvasMaterial&&(r=s.scale.x*d,l=s.scale.y*p,me.set(e.x-r,e.y-l,e.x+r,e.y+l),ue.intersects(me)&&(i(o.color.getContextStyle()),a(o.color.getContextStyle()),G.save(),G.translate(e.x,e.y),G.rotate(-s.rotation),G.scale(r,l),o.program(G),G.restore()))}(u,Ee,$e)):Ee instanceof THREE.RenderableLine?(u=Ee.v1,g=Ee.v2,u.positionScreen.x*=d,u.positionScreen.y*=p,g.positionScreen.x*=d,g.positionScreen.y*=p,me.addPoint(u.positionScreen.x,u.positionScreen.y),me.addPoint(g.positionScreen.x,g.positionScreen.y),ue.intersects(me)&&function(e,a,s,o){t(o.opacity),n(o.blending),G.beginPath(),G.moveTo(e.positionScreen.x,e.positionScreen.y),G.lineTo(a.positionScreen.x,a.positionScreen.y),G.closePath(),o instanceof THREE.LineBasicMaterial&&(e=o.linewidth,ee!=e&&(G.lineWidth=ee=e),e=o.linecap,te!=e&&(G.lineCap=te=e),e=o.linejoin,ne!=e&&(G.lineJoin=ne=e),i(o.color.getContextStyle()),G.stroke(),me.inflate(2*o.linewidth))}(u,g,Ee,$e)):Ee instanceof THREE.RenderableFace3?(u=Ee.v1,g=Ee.v2,m=Ee.v3,u.positionScreen.x*=d,u.positionScreen.y*=p,g.positionScreen.x*=d,g.positionScreen.y*=p,m.positionScreen.x*=d,m.positionScreen.y*=p,$e.overdraw&&(Te(u.positionScreen,g.positionScreen),Te(g.positionScreen,m.positionScreen),Te(m.positionScreen,u.positionScreen)),me.add3Points(u.positionScreen.x,u.positionScreen.y,g.positionScreen.x,g.positionScreen.y,m.positionScreen.x,m.positionScreen.y),ue.intersects(me)&&V(u,g,m,0,1,2,Ee,$e,e)):Ee instanceof THREE.RenderableFace4&&(u=Ee.v1,g=Ee.v2,m=Ee.v3,h=Ee.v4,u.positionScreen.x*=d,u.positionScreen.y*=p,g.positionScreen.x*=d,g.positionScreen.y*=p,m.positionScreen.x*=d,m.positionScreen.y*=p,h.positionScreen.x*=d,h.positionScreen.y*=p,ie.positionScreen.copy(g.positionScreen),ae.positionScreen.copy(h.positionScreen),$e.overdraw&&(Te(u.positionScreen,g.positionScreen),Te(g.positionScreen,h.positionScreen),Te(h.positionScreen,u.positionScreen),Te(m.positionScreen,ie.positionScreen),Te(m.positionScreen,ae.positionScreen)),me.addPoint(u.positionScreen.x,u.positionScreen.y),me.addPoint(g.positionScreen.x,g.positionScreen.y),me.addPoint(m.positionScreen.x,m.positionScreen.y),me.addPoint(h.positionScreen.x,h.positionScreen.y),ue.intersects(me)&&function(e,i,a,s,o,d,p,u,g){B.info.render.vertices+=4,B.info.render.faces++,t(u.opacity),n(u.blending),u.map||u.envMap?(V(e,i,s,0,1,3,p,u,g),V(o,a,d,1,2,3,p,u,g)):(f=e.positionScreen.x,v=e.positionScreen.y,b=i.positionScreen.x,y=i.positionScreen.y,w=a.positionScreen.x,x=a.positionScreen.y,S=s.positionScreen.x,T=s.positionScreen.y,C=o.positionScreen.x,k=o.positionScreen.y,E=d.positionScreen.x,$=d.positionScreen.y,u instanceof THREE.MeshBasicMaterial?(Q(f,v,b,y,w,x,S,T),u.wireframe?Y(u.color,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(u.color)):u instanceof THREE.MeshLambertMaterial?he?u.wireframe||u.shading!=THREE.SmoothShading||4!=p.vertexNormalsWorld.length?(se.r=fe.r,se.g=fe.g,se.b=fe.b,c(r,p.centroidWorld,p.normalWorld,se),se.r=Math.max(0,Math.min(u.color.r*se.r,1)),se.g=Math.max(0,Math.min(u.color.g*se.g,1)),se.b=Math.max(0,Math.min(u.color.b*se.b,1)),Q(f,v,b,y,w,x,S,T),u.wireframe?Y(se,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(se)):(oe.r=re.r=le.r=ce.r=fe.r,oe.g=re.g=le.g=ce.g=fe.g,oe.b=re.b=le.b=ce.b=fe.b,c(r,p.v1.positionWorld,p.vertexNormalsWorld[0],oe),c(r,p.v2.positionWorld,p.vertexNormalsWorld[1],re),c(r,p.v4.positionWorld,p.vertexNormalsWorld[3],le),c(r,p.v3.positionWorld,p.vertexNormalsWorld[2],ce),oe.r=Math.max(0,Math.min(u.color.r*oe.r,1)),oe.g=Math.max(0,Math.min(u.color.g*oe.g,1)),oe.b=Math.max(0,Math.min(u.color.b*oe.b,1)),re.r=Math.max(0,Math.min(u.color.r*re.r,1)),re.g=Math.max(0,Math.min(u.color.g*re.g,1)),re.b=Math.max(0,Math.min(u.color.b*re.b,1)),le.r=Math.max(0,Math.min(u.color.r*le.r,1)),le.g=Math.max(0,Math.min(u.color.g*le.g,1)),le.b=Math.max(0,Math.min(u.color.b*le.b,1)),ce.r=Math.max(0,Math.min(u.color.r*ce.r,1)),ce.g=Math.max(0,Math.min(u.color.g*ce.g,1)),ce.b=Math.max(0,Math.min(u.color.b*ce.b,1)),_=we(oe,re,le,ce),W(f,v,b,y,S,T),K(f,v,b,y,S,T,0,0,1,0,0,1,_),W(C,k,w,x,E,$),K(C,k,w,x,E,$,1,0,1,1,0,1,_)):(Q(f,v,b,y,w,x,S,T),u.wireframe?Y(u.color,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(u.color)):u instanceof THREE.MeshNormalMaterial?(se.r=Se(p.normalWorld.x),se.g=Se(p.normalWorld.y),se.b=Se(p.normalWorld.z),Q(f,v,b,y,w,x,S,T),u.wireframe?Y(se,u.wireframeLinewidth,u.wireframeLinecap,u.wireframeLinejoin):Z(se)):u instanceof THREE.MeshDepthMaterial&&(P=l.near,I=l.far,oe.r=oe.g=oe.b=1-xe(e.positionScreen.z,P,I),re.r=re.g=re.b=1-xe(i.positionScreen.z,P,I),le.r=le.g=le.b=1-xe(s.positionScreen.z,P,I),ce.r=ce.g=ce.b=1-xe(a.positionScreen.z,P,I),_=we(oe,re,le,ce),W(f,v,b,y,S,T),K(f,v,b,y,S,T,0,0,1,0,0,1,_),W(C,k,w,x,E,$),K(C,k,w,x,E,$,1,0,1,1,0,1,_)))}(u,g,m,h,ie,ae,Ee,$e,e)),ge.addRectangle(me));G.setTransform(1,0,0,1,0,0)}},THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.v4=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableObject=function(){this.z=this.object=null},THREE.RenderableParticle=function(){this.rotation=this.z=this.y=this.x=null,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.z=null,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.material=null},Particle3D=function(e){THREE.Particle.call(this,e),this.velocity=new THREE.Vector3(0,-8,0),this.velocity.rotateX(randomRange(-45,45)),this.velocity.rotateY(randomRange(0,360)),this.gravity=new THREE.Vector3(0,0,0),this.drag=1},Particle3D.prototype=new THREE.Particle,Particle3D.prototype.constructor=Particle3D,Particle3D.prototype.updatePhysics=function(){this.velocity.multiplyScalar(this.drag),this.velocity.addSelf(this.gravity),this.position.addSelf(this.velocity)};var TO_RADIANS=Math.PI/180;THREE.Vector3.prototype.rotateY=function(e){cosRY=Math.cos(e*TO_RADIANS),sinRY=Math.sin(e*TO_RADIANS);var t=this.z,n=this.x;this.x=n*cosRY+t*sinRY,this.z=n*-sinRY+t*cosRY},THREE.Vector3.prototype.rotateX=function(e){cosRY=Math.cos(e*TO_RADIANS),sinRY=Math.sin(e*TO_RADIANS);var t=this.z,n=this.y;this.y=n*cosRY+t*sinRY,this.z=n*-sinRY+t*cosRY},THREE.Vector3.prototype.rotateZ=function(e){cosRY=Math.cos(e*TO_RADIANS),sinRY=Math.sin(e*TO_RADIANS);var t=this.x,n=this.y;this.y=n*cosRY+t*sinRY,this.x=n*-sinRY+t*cosRY},function(e){function t(e){var t=document.getElementsByTagName("style")[0];t||(t=document.createElement("style"),head=document.head||document.getElementsByTagName("head")[0],t.type="text/css",head.appendChild(t));var n=document.createTextNode(e);t.appendChild(n)}function n(){return[{value:1,path:"1.7 0.1 0.1 0 -0.287 0 1.7 0.1 0 -0.287 0 0.1 1.6 0 -0.287 0 0 0 1.0 0"},{value:2,path:"2.1 -1.4 0.6 0.0 -0.12 -0.3 2.0 -0.3 0.0 -0.12 -1.1 -0.2 2.6 0.0 -0.12 0.0 0.0 0.0 1.0 0.0"},{value:3,path:"1.9 -0.3 -0.2 0 -0.341 -0.2  1.7 -0.1  0 -0.341 -0.1 -0.6 2.0 0 -0.341 0 0 0 1.0 0"},{value:4,path:"1.0 0.0 0.0 0.0 -0.26 0.0 1.1 0.0 0.0 -0.26 0.0 0.0 1.0 0.0 -0.26 0.0 0.0 0.0 1.0 0.0"},{value:5,path:"1.2 0.0 0.0 0.0 0.0 0.0 0.9 0.0 0.0 0.0 0.0 0.0 0.8 0.0 0.0 0 0 0 1.0 0"},{value:6,path:"0.8 0.3 0.1 0.0 0.182 0.1 0.9 0.0 0.0 0.182 0.1 0.3 0.7 0.0 0.182 0.0 0.0 0.0 1.0 0.0"},{value:7,path:"0.9 0 0 0 0.255 0 0.9 0 0 0.255 0 0 0.9 0 0.255 0 0 0 1.0 0"},{value:8,path:"0.6 0.3 0.1 0 0.28745 0.2 0.7 0.1 0 0.28745 0.2 0.3 0.4 0 0.28745 0 0 0 1.0 0"},{value:9,path:"0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0.8 1.6 0.2 0 -0.639 0 0 0 1.0 0"},{value:10,path:"0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0.2 0.5 0.1 0 0.16 0 0 0 1 0"},{value:11,path:"4.8 -1.0 -0.1 0 -1.523 -0.5 4.4 -0.1 0 -1.523 -0.5 -1.0 5.2 0 -1.523 0 0 0 1.0 0"}]}function i(e,t){for(var n=0;n<e.length;n++){var i=[];$.each(t,function(t,a){var s,o=$(a).attr("style");if(o){for(var r=o.split(";"),l=0,c=r.length;c>l;l++)if(r[l].indexOf("fill:")>=0){s=r[l].split(":")[1];break}}else s=$(a).attr("fill");s===e[n].svgFill&&i.push(t)}),e[n].elements=i}return e}function a(e,t,n,i){var a={},s=e/t;return s>n/i?(a.width=n,a.height=n/s):(a.height=i,a.width=i*s),a}function o(e,t,n){var i,a=e.properties.lineChart,s=[],o="",r="",l="",c=[],d=[],p=[],u=[],g=[];n.datasets.forEach(function(e){u.push(e.strokeColor),g.push(e.fillColor)});for(var m=0;m<u.length;m++)"line"===a.chartType?u[m]=a.fillColors[m]:g[m]=a.fillColors[m];for(var h=a.segments,f=0;f<h.length;f++)i=h[f],o=isNaN(i.value1)||i.value1<0?0:i.value1,r=isNaN(i.value2)||i.value2<0?0:i.value2,l=isNaN(i.value3)||i.value3<0?0:i.value3,(i.label||o||r||l)&&(s.push(i.label),c.push(o),d.push(r),p.push(l));var v={labels:s,datasets:[{label:a.lengends[0],fillColor:g[0],strokeColor:u[0],pointColor:u[0],pointStrokeColor:"#fff",data:c},{label:a.lengends[1],fillColor:g[1],strokeColor:u[1],pointColor:u[1],pointStrokeColor:"#fff",data:d},{label:a.lengends[2],fillColor:g[2],strokeColor:u[2],pointColor:u[2],pointStrokeColor:"#fff",data:p}]},b=n.options;return a.options&&a.options.scaleFontColor&&(b.scaleFontColor=a.options.scaleFontColor),n.destroy(),n=new Chart(t).Line(v,b),n.datasets.forEach(function(e){var t=!0;e.points.forEach(function(e){e.value&&(t=!1)}),t?e.points.length=0:e.points.forEach(function(e){e.value||(e.value=0)})}),n.update(),n}function r(e,t,n){for(var i,a=n.options,s=e.properties.barChart,o=[],r="",l="",c="",d=[],p=[],u=[],g=s.segments,m=0;m<g.length;m++){var i=g[m];r=isNaN(i.value1)||i.value1<0?"":i.value1,l=isNaN(i.value2)||i.value2<0?"":i.value2,c=isNaN(i.value3)||i.value3<0?"":i.value3,(i.label||r||l||c)&&(o.push(i.label),d.push(r),p.push(l),u.push(c))}var h={labels:o,datasets:[{fillColor:s.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:d,label:s.lengends[0]},{fillColor:s.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:p,label:s.lengends[1]},{fillColor:s.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:u,label:s.lengends[2]}]};return s.options&&s.options.scaleFontColor&&(a.scaleFontColor=s.options.scaleFontColor),n.destroy(),new Chart(t).Bar(h,a)}function l(e,t,n){var i=n.options,a="#000",s=e.properties.pieChart;s.options&&s.options.scaleFontColor&&(a=s.options.scaleFontColor),i.scaleFontColor=a,i.onAnimationComplete=function(){var e=this.chart.ctx,t=this.segments;e.textAlign="start",e.textBaseline="middle";for(var n=0,i=0;i<t.length;i++)n+=parseFloat(t[i].value);e.fillText(n,e.width/2-20,e.height/2,100);for(var i=0;i<t.length;i++){var s=t[i].startAngle+(t[i].endAngle-t[i].startAngle)/2,o=(t[i].outerRadius-t[i].innerRadius)/1.5+t[i].innerRadius,r=t[i].x+Math.cos(s)*o,l=t[i].y+Math.sin(s)*o;e.textAlign="center",e.textBaseline="middle",e.fillStyle=a,e.font="normal 12px Helvetica",e.fillText(t[i].value,r,l)}};var o=s;s.segments&&(o=s.segments);for(var r=0;r<o.length;r++)(isNaN(o[r].value)||o[r].value<0)&&(o[r].value="");return n.destroy(),new Chart(t).Pie(o,i)}function c(e){var t=[{value:300,color:"#57c7d4",label:"1月"},{value:150,color:"#3aa99e",label:"2月"},{value:100,color:"#f2a654",label:"3月"},{value:140,color:"#f96868",label:"4月"},{value:120,color:"#926dde",label:"5月"}],n={segmentShowStroke:!1,showTooltips:!1,scaleFontColor:"#000",legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><%if(segments[i].label){%><span style="background-color:<%=segments[i].fillColor%>"></span><%=segments[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx,t=this.segments;e.textAlign="start",e.textBaseline="middle";for(var n=0,i=0;i<t.length;i++)n+=parseFloat(t[i].value);e.fillText(n,e.width/2-20,e.height/2,100);for(var i=0;i<t.length;i++){var a=t[i].startAngle+(t[i].endAngle-t[i].startAngle)/2,s=(t[i].outerRadius-t[i].innerRadius)/1.5+t[i].innerRadius,o=t[i].x+Math.cos(a)*s,r=t[i].y+Math.sin(a)*s;e.textAlign="center",e.textBaseline="middle",e.fillStyle="#000",e.font="normal 12px Helvetica",e.fillText(t[i].value,o,r)}}};return new Chart(e).Pie(t,n)}function d(e){var t={labels:["1月","2月","3月","4月","5月"],datasets:[{fillColor:"#62a8ea",strokeColor:"rgba(0,0,0,0)",data:[60,70,80,56,40],label:"图例1"},{fillColor:"#926dde",strokeColor:"rgba(0,0,0,0)",data:[80,56,40,93,112],label:"图例2"},{fillColor:"#f2a654",strokeColor:"rgba(0,0,0,0)",data:[160,86,140,123,23],label:"图例3"}]},n={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>',animation:!1,onAnimationComplete:function(){var e=this.chart.ctx;e.fillStyle=this.scale.textColor,e.font="normal 12px Helvetica",e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(t){t.bars.forEach(function(t){e.fillText(t.value,t.x,t.y)})})}};return new Chart(e).Bar(t,n)}function p(e,t){var n=["rgba(255,255,255,0)","rgba(255,255,255,0)","rgba(255,255,255,0)"],i=["rgba(146,109,222,1)","rgba(87,199,212,1)","rgba(242,166,84,1)"],a=!1,s='<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].pointColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>';"curve"===t&&(n=["rgba(146, 109, 222,0.2)","rgba(87,199,212,0.2)","rgba(242,166,84,0.2)"],a=!0,s='<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><%if(datasets[i].label){%><span style="background-color:<%=datasets[i].fillColor%>"></span><%=datasets[i].label%><%}%></li><%}%></ul>');var o={labels:["1月","2月","3月","4月","5月"],datasets:[{label:"图例1",fillColor:n[0],strokeColor:i[0],pointColor:i[0],pointStrokeColor:"#fff",data:[28,24,40,19,27]},{label:"图例2",fillColor:n[1],strokeColor:i[1],pointColor:i[1],pointStrokeColor:"#fff",data:[123,132,146,118,189]},{label:"图例3",fillColor:n[2],strokeColor:i[2],pointColor:i[2],pointStrokeColor:"#fff",data:[201,232,256,215,278]}]},r={showTooltips:!1,scaleShowLabels:!0,scaleShowGridLines:!1,scaleBeginAtZero:!0,bezierCurve:a,legendTemplate:s,animation:!1,onAnimationComplete:function(){var e=this.chart.ctx,t=this.scale.max;e.font=this.scale.font,e.fillStyle=this.scale.textColor,e.textAlign="center",e.textBaseline="bottom",this.datasets.forEach(function(n){n.points.forEach(function(i,a){var s=5;t-i.value<10&&(s=0),0===a?e.fillText(i.value,i.x+10,i.y-s):a===n.points.length-1?e.fillText(i.value,i.x-10,i.y-s):e.fillText(i.value,i.x,i.y-s)})})}};return new Chart(e).Line(o,r)}function u(e,t){"view"===y.mode&&t.properties.url&&$(e).click(function(){var e=t.properties.url;isNaN(e)?window.open(e):eqxiu.pageScroll(e)})}function g(e){$(e).bind("touchstart mousedown",function(e){e.stopPropagation()})}function m(e){e.focus(function(){eqxiu.pauseAutoFlip()}).blur(function(){$(document).trigger("startAutoFlip")})}function h(e){for(var t=$(e).find("a[data]"),n=0;n<t.length;n++)if(t[n]&&"view"===y.mode){$(t[n]).css("cursor","pointer");var i=$(t[n]).attr("data");!function(e){t[n].removeAttribute("href"),$(t[n]).click(function(){eqxiu.pageScroll(e)})}(i)}}function f(t,n,i){var a=PREFIX_S1_URL+"scene/msg/list?sceneId="+t;i&&(a+="&lastTime="+i),a+="&date="+(new Date).getTime(),$.ajax({type:"GET",url:a,success:function(t){if(t.success){for(var i,a,s,o=document.createDocumentFragment(),r=t.list,l=0;l<r.length;l++)a=r[l].url?'<div class="headimg" style="background-image:url('+r[l].url+')"></div>':'<div class="headimg headimg-bg"><div class="logo-scale"><em class="eqf-eqxiu"></em></div></div>',i=$('<div class="record">'+a+'<div class="name">'+r[l].name+'</div><div class="mes">'+r[l].content+'</div><div class="time">'+e.DateFormit(r[l].createTime,"MM月DD日")+"</div></div>").get(0),o.appendChild(i);10===r.length?s=r[r.length-1].createTime:0===r.length&&(s=0),i&&o.appendChild(i),n(o,s)}}})}function v(e,t){if(t.trigger){var n=$(e);n.attr("data-event","1120603"),S&&clearTimeout(S),t.trigger.sends&&t.trigger.sends.length&&$.each(t.trigger.sends,function(e,t){n.bind(utilTrigger.getSendType(t.type).name,function(){S=setTimeout(function(){$.each(t.handles,function(e,t){var n=utilTrigger.getHandleType(t.type).name;$.each(t.ids,function(e,t){var i;i=$("#inside_"+t,".phone-view").length?$("#inside_"+t,".phone-view"):$("#inside_"+t),i.trigger(n)})})},1e3*t.delay)})})}}function b(t,n){if(n.sound){var i=$(t),a=$("#media").get(0);0===n.sound.src.indexOf("http://")?n.sound.src=n.sound.src:n.sound.src=PREFIX_FILE_HOST+n.sound.src,utilSound.addAudio(t,n.sound.src),i.click(function(){utilSound.play(t,function(){a&&e.executePlay()},function(){a&&e.executePause()})})}}var y=e.templateParser("jsonParser",function(){function e(e){return function(t,n){e[t]=n}}function n(e,n){try{var i=c[(""+e.type).charAt(0)](e,n)}catch(e){return}if(i){var a=$('<li comp-drag comp-rotate class="comp-resize comp-rotate inside" id="inside_'+e.id+'" num="'+e.num+'" ctype="'+e.type+'"></li>'),s=(""+e.type).charAt(0);if("3"!==s&&"1"!==s&&a.attr("comp-resize",""),"p"===s?a.removeAttr("comp-rotate"):"1"===s?a.removeAttr("comp-drag"):"2"===s?a.addClass("wsite-text"):"x"===s?a.addClass("show-text"):"4"===s?(e.properties.imgStyle&&$(i).css(e.properties.imgStyle),a.addClass("wsite-image")):"n"===s?a.addClass("wsite-image"):"h"===s?a.addClass("wsite-shape"):"5"===s?a.addClass("wsite-input"):"6"===s?a.addClass("wsite-button"):"8"===s?a.addClass("wsite-button"):"v"===s?a.addClass("wsite-video"):"b"===s&&(a.addClass("wsite-boards"),a.attr("min-h",60),a.attr("min-w",230)),"v"===(""+e.type).charAt(0)&&a.addClass("wsite-video"),e.properties&&e.properties.lock&&a.addClass("alock"),a.mouseenter(function(){$(this).addClass("inside-hover")}),a.mouseleave(function(){$(this).removeClass("inside-hover")}),"edit"===y.mode||"x"!==(""+e.type).charAt(0)){var o=$('<div class="element-box-contents">'),r=$('<div class="element-box">').append(o.append(i));a.append(r),"5"!==(""+e.type).charAt(0)&&"6"!==(""+e.type).charAt(0)&&"r"!==e.type&&"c"!==e.type&&"a"!==e.type&&"8"!==e.type&&"l"!==e.type&&"s"!==e.type&&"i"!==e.type&&"h"!==e.type&&"z"!==e.type||"edit"!==n||$(i).before($('<div class="element" style="position: absolute; height: 100%; width: 100%;z-index: 1;">'))}var l,d=e.fonts||e.css.fontFamily||e.fontFamily;if("2"===s||"x"===s){for(var p=e.content,u=/font-family:(.*?);/g,g=[],m=[];null!==(g=u.exec(p));)m.push(g[1].trim());if(1!==m.length||"defaultFont"!==m[0]&&"moren"!==m[0]||(d=null),d){if("view"===y.mode&&e.css.fontFamily&&window.scene&&(window.scene.publishTime||!mobilecheck()&&!tabletCheck()||(l="@font-face{font-family:"+e.css.fontFamily+';src: url("'+e.properties.localFontPath+'") format("truetype");}',t(l))),"object"==typeof d&&d.constructor===Object){if(!jQuery.isEmptyObject(d))for(var h in d)w[h]||("edit"===y.mode?l="@font-face{font-family:"+h+";src: url("+PREFIX_FILE_HOST+d[h]+") format(woff);}":window.scene&&window.scene.publishTime&&(l="@font-face{font-family:"+h+';src: url("'+PREFIX_S2_URL+"fc/"+h+"_"+e.sceneId+"_"+scene.publishTime+'.woff") format("woff");}'),t(l),w[h]=!0)}else w[d]||("edit"===y.mode?l="@font-face{font-family:"+d+";src: url("+PREFIX_FILE_HOST+e.preWoffPath+") format(woff);}":window.scene&&window.scene.publishTime&&(l="@font-face{font-family:"+d+';src: url("'+PREFIX_S2_URL+"fc/"+d+"_"+e.sceneId+"_"+scene.publishTime+'.woff") format("woff");}'),t(l),w[d]=!0);"edit"===y.mode&&localStorage.setItem("shoppingFontFamily",JSON.stringify(w))}}if(e.css){var f=320-parseInt(e.css.left,10);if(a.css({width:f}),a.css({width:e.css.width,height:e.css.height,left:e.css.left,top:e.css.top,zIndex:e.css.zIndex,bottom:e.css.bottom,transform:e.css.transform}),(0===e.css.boxShadowSize||""+e.css.boxShadowSize=="0")&&(e.css.boxShadow="0px 0px 0px rgba(0,0,0,0.5)"),"edit"!==y.mode&&"x"===(""+e.type).charAt(0))return a.append(i),a.find(".element-box").css({borderStyle:e.css.borderStyle,borderWidth:e.css.borderWidth,borderColor:e.css.borderColor,borderTopLeftRadius:e.css.borderTopLeftRadius,borderTopRightRadius:e.css.borderTopRightRadius,borderBottomRightRadius:e.css.borderBottomRightRadius,borderBottomLeftRadius:e.css.borderBottomLeftRadius,boxShadow:e.css.boxShadow,backgroundColor:e.css.backgroundColor,opacity:e.css.opacity,width:"100%",height:"100%",overflow:"hidden"}),a.find("img").css({width:"100%"}),a;isAndroid()&&isWeixin()&&""+e.type=="4"&&"0px"!==e.css.borderRadius&&0===e.css.borderWidth&&e.properties.anim&&(e.css.borderWidth=1,e.css.borderColor="rgba(0,0,0,0)");var v=$.extend(!0,{},e.css);delete v.fontFamily,r.css(v).css({width:"100%",height:"100%",transform:"none"}),r.children(".element-box-contents").css({width:"100%",height:"100%"}),"4"!==(""+e.type).charAt(0)&&"n"!==(""+e.type).charAt(0)&&"p"!==(""+e.type).charAt(0)&&"h"!==(""+e.type).charAt(0)&&"t"!==(""+e.type).charAt(0)&&"z"!==(""+e.type).charAt(0)&&$(i).css({width:e.css.width,height:e.css.height}),("w01"===e.type||"w02"===e.type)&&$(i).css({lineHeight:e.css.height+"px"}),"h"===(""+e.type).charAt(0)&&($(i).find("g").length?$(i).find("g").attr("fill",e.css.color):$(i).children().attr("fill",e.css.color),r.children(".element-box-contents").css("position","relative"))}return a}}function i(e){for(var t=0;t<e.length-1;t++)for(var n=t+1;n<e.length;n++)if(parseInt(e[t].css.zIndex,10)>parseInt(e[n].css.zIndex,10)){var i=e[t];e[t]=e[n],e[n]=i}for(var a=0;a<e.length;a++)e[a].css.zIndex=a+1+"";return e}function a(e,t,a){t=t.find(".edit_area");var s,o=e.elements;if(o)for(o=i(o),s=0;s<o.length;s++)if(o[s].sceneId=e.sceneId,""+o[s].type=="3"){var r=c[(""+o[s].type).charAt(0)](o[s],t);"edit"===a&&d[(""+o[s].type).charAt(0)]&&d[(""+o[s].type).charAt(0)](r,o[s])}else{var l=n(o[s],a);if(!l)continue;t.append(l);for(var g=0;g<u.length;g++)u[g](l,o[s],a);p[(""+o[s].type).charAt(0)]&&(p[(""+o[s].type).charAt(0)](l,o[s]),"edit"!==a&&(v(l,o[s]),b(l,o[s]))),"edit"===a&&d[(""+o[s].type).charAt(0)]&&d[(""+o[s].type).charAt(0)](l,o[s])}}function s(){return d}function o(){return c}function r(e){u.push(e)}function l(){return u}var c={},d={},p={},u=[],g=containerWidth=320,m=containerHeight=486,h=1,f=1;return{getComponents:o,getEventHandlers:s,addComponent:e(c),bindEditEvent:e(d),bindAfterRenderEvent:e(p),addInterceptor:r,getInterceptors:l,wrapComp:n,disEvent:!1,mode:"view",parse:function(e){var t=$('<div class="edit_wrapper" data-scene-id="'+e.def.sceneId+'"><ul eqx-edit-destroy id="edit_area'+e.def.id+'" paste-element class="edit_area weebly-content-area weebly-area-active"></div>'),n=this.mode=e.mode;this.def=e.def,e.disEvent&&(this.disEvent=!0),"view"===n&&tplCount++;var i=$(e.appendTo);return containerWidth=i.width(),containerHeight=i.height(),h=g/containerWidth,f=m/containerHeight,a(e.def,t.appendTo($(e.appendTo)),n)}}});y.addInterceptor(function(e,t,n){eqxCommon.animation(e,t,n,y.def.properties)}),y.addComponent("1",function(e){var t=document.createElement("div");if(t.id=e.id,t.setAttribute("class","element comp_title"),e.content&&(t.textContent=e.content),e.css){var n,i=e.css;for(n in i)t.style[n]=i[n]}if(e.properties.labels)for(var a=e.properties.labels,s=0;s<a.length;s++)$('<a class = "label_content" style = "display: inline-block;">').appendTo($(t)).html(a[s].title).css(a[s].color).css("width",100/a.length+"%");return t});var w={};y.addComponent("2",function(e){var t=document.createElement("div");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_paragraph editable-text"),e.content&&(e.properties.anim&&e.properties.anim.length&&"typer"===e.properties.anim[0].type&&"view"===y.mode?t.innerHTML="":t.innerHTML=e.content),t.style.cursor="default",e.css.fontSize&&(t.style.fontSize=e.css.fontSize+"px"),t}),y.addComponent("x",function(e){var t;return!mobilecheck()&&window.top===window.self&&$(".create_left").get(0)&&(y.mode="edit"),function(){t=document.createElement("div"),t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_paragraph editable-text"),e.content&&(t.innerHTML=e.content),t.style.cursor="default"}(),t}),y.addComponent("3",function(t,n){var i,a=document.createElement("div");if("edit"===y.mode?(i=n?n.parent(".edit_wrapper"):$("#nr .edit_wrapper"),a.setAttribute("class","wrapper-background"),a.setAttribute("id",t.id)):"view"===y.mode&&(i=n?n.parent(".edit_wrapper"):$("#edit_area"+y.def.id).parent(".edit_wrapper"),a.setAttribute("id","wrapper-background"+y.def.id)),2!==t.properties.croptype||"edit"===y.mode||y.def.istpl){var s="100%";$(a).prependTo(i),2!==t.properties.croptype||y.def.istpl||(s=486*t.properties.pageLength+"px",$(a).parent().css("overflow","visible")),$(a).css({width:"100%",height:s})}var o,r=new Image;if(t.properties.imgSrc){o=t.properties.imgSrc;var l=/\?imageMogr2/,c=/.svg/;if(e.isMobileApp()||c.test(o)||(o+=(l.test(o),"")),2===t.properties.croptype&&"view"===y.mode&&!y.def.istpl){var d="";return d=/^http.*!/.test(o)?"url("+o+")":"url("+PREFIX_FILE_HOST+o+")",n.parent().css({backgroundImage:d,height:486*(t.properties.pageLength-1)+(mobilecheck()?$(document).height():486)+"px"}),a}/^http.*!/.test(o)?(r.src=o,a.style.backgroundImage="url("+o+")"):(r.src=PREFIX_FILE_HOST+o,a.style.backgroundImage="url("+PREFIX_FILE_HOST+o+")"),a.style.backgroundOrigin="element content-box",a.style.backgroundSize="cover",a.style.backgroundPosition="50% 50%",t.effect&&("scaleUp"===t.effect.type?$(a).css({animation:"scaleUp 7s ease 1s","animation-fill-mode":"both"}):"scaleDown"===t.effect.type&&$(a).css({animation:"scaleDown 7s ease 1s","animation-fill-mode":"both"}))}else t.properties.bgColor&&(a.style.backgroundColor=t.properties.bgColor,t.properties.pageLength&&"edit"===y.mode&&$(a).css({height:486*t.properties.pageLength+"px"}).parent().css("overflow","visible"));return a}),y.addComponent("4",function(t){var i,a=new RegExp(e.getDomain(PREFIX_FILE_HOST)),s=/^http.*/.test(t.properties.src)?t.properties.src:PREFIX_FILE_HOST+t.properties.src;e.isMobileApp()||(s=s.replace(OLD_FILE_HOST,PREFIX_FILE_HOST));var o=/\?imageMogr2/,r=/.svg/;if(a.test(s)&&!r.test(s))if(o.test(s))s+="";else{var l=t.css;if(l){parseInt(t.css.height,10),parseInt(t.css.width,10);s+=""}else s+="?imageMogr2/strip"}if(t.properties.filter){if(t.properties.filter.type){var c=n(),d=c[t.properties.filter.type-1];i=document.createElement("div");var p;p=mobilecheck()?'<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+s+'" filter="url(#'+t.id+')"></image><defs><filter id="'+t.id+'"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="'+d.path+'"></feColorMatrix></filter></defs></g></svg>':'<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"><g><image width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="'+s+'" filter="url('+window.location.href+"#"+t.id+')"></image><defs><filter id="'+t.id+'"><feColorMatrix class="saturation" color-interpolation-filters="sRGB" type="matrix" values="'+d.path+'"></feColorMatrix></filter></defs></g></svg>',i.innerHTML=p}}else i=document.createElement("img"),i.id=t.id,i.setAttribute("ctype",t.type),i.setAttribute("class","element comp_image editable-image"),i.src=s;return""+t.type=="403"&&i.setAttribute("data-event","1120611"),""+t.type=="403"&&t.properties.wxSrc&&isWeixin()&&(i.style.display="none"),i}),y.addComponent("h",function(e){var t,n;if(e.properties.src)return t=document.createElementNS(eqxiuSvg.NAMESPACE,"svg"),t.setAttribute("class","element svg-element"),$.ajax({type:"GET",url:PREFIX_FILE_HOST+e.properties.src,dataType:"xml",success:function(n){var a=n.getElementsByTagName("svg"),s=parseFloat($(a).attr("width")),o=parseFloat($(a).attr("height")),r=$(a).find('[fill], [style*="fill"]'),l=e.properties.items?e.properties.items:[];if(e.properties.items)if(l[0].elements||(e.properties.items=i(l,r)),r.length===l.length)for(var c=0;c<l.length;c++)r.eq(c).css({fill:l[c].fill});else $.each(r,function(e,t){for(var n=0;n<l.length;n++)for(var i=l[n].elements,a=0;a<i.length;a++)e===i[a]&&(""!==l[n].fill?r.eq(e).css({fill:l[n].fill}):r.eq(e).css({fill:"none"}))});else{var d=[],p={};$.each(r,function(e,t){var n=$(t).attr("style");if(n){for(var i=n.split(";"),a=0,s=i.length;s>a;a++)if(i[a].indexOf("fill:")>=0){d.push(i[a].split(":")[1]);break}}else d.push($(t).attr("fill"))});for(var u=0;u<d.length;u++)p[d[u]]||(p[d[u]]=1,"none"!==d[u]?l.push({fill:d[u],svgFill:d[u]}):l.push({fill:"",svgFill:"none"}));e.properties.items=i(l,r)}viewBoxVal="0 0 "+s+" "+o;var g=t.parentNode;g.removeChild(t),t=a[0],g.appendChild(t),t.setAttribute("viewBox",viewBoxVal),t.setAttribute("preserveAspectRatio","none"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.id=e.id,t.setAttribute("class","element svg-element")}}),t;if(e.properties.type.indexOf("symbol")<0){var t=document.createElementNS(eqxiuSvg.NAMESPACE,"svg");return t.id=e.id,t.setAttribute("class","element svg-element"),t.setAttribute("xmlns",eqxiuSvg.NAMESPACE),t.setAttribute("version","1.1"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("preserveAspectRatio","none"),n=eqxiuSvg.ShapeFromType(e.properties.type),n.setAttribute("fill","#555"),t.appendChild(n),s=eqxiuSvg.boundingBox(n),viewBox=[Math.round(s.x)||0,Math.round(s.y)||0,Math.round(s.width)||32,Math.round(s.height)||32].join(" "),t.setAttribute("viewBox",viewBox),t}return t=document.createElement("div"),n=eqxiuSvg.ShapeFromType(e.properties.type,100,100,e.id,e.css.color),t='<svg id="'+e.id+'" class="element svg-element" ctype="'+e.type+'" xmlns="'+eqxiuSvg.NAMESPACE+'" version="1.1" width="100%" height="100%" preserveAspectRatio="xMidYMid" viewBox="'+e.properties.viewBox+'">'+n+"</svg>"}),y.addComponent("v",function(e){var t=document.createElement("a");return t.setAttribute("class","element video_area"),t.id=e.id,t.setAttribute("ctype",e.type),e.properties.src&&t.setAttribute("videourl",e.properties.src),t}),y.addComponent("5",function(e){var t=document.createElement("textarea");return t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_input editable-text"),t.setAttribute("maxlength","300"),e.properties.required&&t.setAttribute("required",e.properties.required),e.properties.placeholder&&t.setAttribute("placeholder",e.properties.placeholder),t.setAttribute("name","eq[f_"+e.id+"]"),t.style.width="100%",t}),y.addComponent("r",function(e){var t=$('<div class="element comp_radio editable-text" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.properties.required),t.attr("title",e.title),t.attr("name","eq[f_"+e.id+"]");var n=$('<div class="radio-title">'+e.title+"</div>");e.properties.titleStyle&&n.css(e.properties.titleStyle),t.append(n);var i=$('<div class="options"></div>'),a=JSON.parse(e.choices);return $.each(a.options,function(t,n){var s=$('<div class="option-group"><label class="option-label" for="'+e.id+(t+1)+'" data-event="11208"><input class="option" id="'+e.id+(t+1)+'" type="radio" name="eq[f_'+e.id+']" value="'+n.id+'" data-event="11208">'+n.label+"</label></div>");e.properties.optionStyle&&t<a.options.length-1&&s.css(e.properties.optionStyle),i.append(s)}),t.append(i),t.width("100%"),t.get(0)}),y.addComponent("c",function(e){var t=$('<div class="element comp_radio editable-text" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.properties.required),t.attr("title",e.title),t.attr("name","eq[f_"+e.id+"]");var n=$('<div class="radio-title">'+e.title+"(可多选)</div>");e.properties.titleStyle&&n.css(e.properties.titleStyle),t.append(n);var i=$('<div class="options"></div>'),a=JSON.parse(e.choices);return $.each(a.options,function(t,n){var s=$('<div class="option-group"><label class="option-label" for="'+e.id+(t+1)+'" data-event="11209"><input class="option" id="'+e.id+(t+1)+'" type="checkbox" name="eq[f_'+e.id+']" value="'+n.id+'" data-event="11209">'+n.label+"</label></div>");e.properties.optionStyle&&t<a.options.length-1&&s.css(e.properties.optionStyle),i.append(s)}),t.append(i),t.width("100%"),t.get(0)}),y.addComponent("a",function(e){var t=$('<div class="element comp_rating editable-text" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.properties.required),t.attr("title",e.title),t.attr("name","eq[f_"+e.id+"]"),t.append($('<div class="rating-title">'+e.title+"</div>"));for(var n=$('<div class="rating-icons"></div>'),i=0;5>i;i++)n.append($('<i class="'+e.properties.icon+"-line "+e.properties.size+'">').css("color",e.properties.color));return t.append(n),t.append($('<input type="hidden" name="eq[f_'+e.id+']" value="">')),t.width("100%"),t.get(0)}),y.addComponent("p",function(t){if(t.properties&&t.properties.children){var n=t.css.width,i=t.css.height,s=$('<div id="'+t.id+'" class="slider element" ctype="'+t.type+'"></div>');t.properties.bgColor&&s.css("backgroundColor",t.properties.bgColor);var o=/\?imageMogr2/,r=/.svg/;return $.each(t.properties.children,function(t,l){var c=a(l.width,l.height,n,i),d=l.src;e.isMobileApp()||r.test(d)||(d+=(o.test(d),""));var p=$('<img src="'+PREFIX_FILE_HOST+d+'">');p.css({margin:(i-c.height)/2+"px "+(n-c.width)/2+"px",width:c.width,height:c.height}),s.append(p)}),utilPictures.deleteInterval(t.id),s.get(0)}}),y.addComponent("n",function(e){if(e.properties&&e.properties.pics.length){var t=$('<div id="'+e.id+'" class="random-event element comp_image editable-image" ctype="'+e.type+'"></div>');e.css.width||(e.css.width="180px");var n=180*parseInt(e.properties.pics[0].height,10)/parseInt(e.properties.pics[0].width,10);return e.css.height||(e.css.height=n+"px"),$.each(e.properties.pics,function(e,n){var i=$('<img src="'+PREFIX_FILE_HOST+n.src+'">');i.css({width:"100%",height:"100%",display:"none"}),0===e&&(i.css({display:"block"}),t.css({width:"100%",height:"100%"})),t.append(i)}),t.get(0)}}),y.addComponent("6",function(e){var t=document.createElement("button");if(t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_button editable-text"),t.setAttribute("data-event","11201"),e.properties.title){var n=e.properties.title.replace(/ /g,"&nbsp;");t.innerHTML=n}return t.style.width="100%",t}),y.addComponent("8",function(e){var t=document.createElement("a");t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),t.setAttribute("data-event","1120602");var n=null;return e.properties.imgSrc?(n=$('<img style="width: 100%; height: 100%;" src="'+(PREFIX_FILE_HOST+e.properties.imgSrc)+'"/>'),$(t).html(n),"view"===y.mode&&$(t).attr("href","tel:"+e.properties.number)):e.properties.title&&(n=e.properties.title.replace(/ /g,"&nbsp;"),$(t).html(n),"view"===y.mode&&$(t).attr("href","tel:"+e.properties.number)),t.style.cursor="default",t.style.width="100%",t}),y.addComponent("l",function(e){var t=document.createElement("a");t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),t.setAttribute("data-event","1120601");var n=null;return e.properties.imgSrc?(n=$('<img style="width: 100%; height: 100%;" src="'+(PREFIX_FILE_HOST+e.properties.imgSrc)+'"/>'),$(t).html(n)):e.properties.title&&(n=e.properties.title.replace(/ /g,"&nbsp;"),$(t).html(n)),t.style.cursor="default",t.style.width="100%",t}),y.addComponent("s",function(e){var t=document.createElement("a");t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element comp_anchor editable-text"),t.setAttribute("data-event","1120604");var n=null;return e.properties.imgSrc?(n=$('<img style="width: 100%; height: 100%;" src="'+(PREFIX_FILE_HOST+e.properties.imgSrc)+'"/>'),$(t).html(n)):e.properties.title&&(n=e.properties.title.replace(/ /g,"&nbsp;"),$(t).html(n)),t.style.cursor="default",t.style.width="100%",t}),y.addComponent("i",function(t){var n=$('<div class="element comp_counter not-voted editable-text" id="'+t.id+'"></div>');n.attr("ctype",t.type),n.attr("name","eq[f_"+t.id+"]"),n.addClass(t.properties.layout).addClass(t.properties.size);var i=$('<div class="counter-container"></div>');t.properties.imgSrc?(i.append($('<img class="counter-elem counter-icon" style="width: 115px; height: 115px; margin: 0 auto;" src="'+(PREFIX_FILE_HOST+t.properties.imgSrc)+'"/>')),i.attr("data-event","1120609")):(i.append($('<i class="counter-elem counter-icon '+t.properties.icon+'">').css("color",t.properties.color)),"eqf-love"===t.properties.icon?i.attr("data-event","1120605"):"eqf-good"===t.properties.icon?i.attr("data-event","1120606"):"eqf-flower2"===t.properties.icon?i.attr("data-event","1120607"):"eqf-vote"===t.properties.icon&&i.attr("data-event","1120608"));var a=$('<span class="counter-elem counter-number">0</span>').css("color",t.properties.color);if(i.append(a),"view"===y.mode?e.counterValues&&e.counterValues.then(function(n){var i=n.map[t.id]||0;a.attr("data-counter-number",i);var s=e.fixedNum(i);a.text(s)}):n.removeClass("not-voted"),n.width("100%"),"counter-tb"===t.properties.layout){var s=0;s=t.properties.imgSrc?"counter-l"===t.properties.size?77:"counter-m"===t.properties.size?71:66:"counter-l"===t.properties.size?40:"counter-m"===t.properties.size?30:20,i.css("margin-top",-s)}return"edit"!==y.mode&&setTimeout(function(){var e={width:"auto","min-width":t.css.width};n.css(e),n.parents("li.comp-resize").css(e)},100),n.append(i),t.css.lineHeight&&n.css("line-height",t.css.lineHeight),n.get(0)}),y.addComponent("d",function(t){var n=$('<div class="element comp_counter editable-text" id="'+t.id+'"></div>');n.attr("ctype",t.type),n.addClass(t.properties.layout).addClass(t.properties.size);var i=$('<div class="counter-container"></div>');i.append($('<i class="counter-elem counter-icon '+t.properties.icon+'">').css("color",t.properties.color));var a=$('<span class="counter-elem counter-number">0</span>').css("color",t.properties.color);if(i.append(a),"view"===y.mode&&e.showCount&&e.showCount.then(function(t){var n=e.fixedNum(t),i=n||0;a.text(i)}),n.width("100%"),"counter-tb"===t.properties.layout){var s=0;s="counter-l"===t.properties.size?40:"counter-m"===t.properties.size?30:20,i.css("margin-top",-s)}return n.append(i),t.css.lineHeight&&n.css("line-height",t.css.lineHeight),n.get(0)}),y.addComponent("7",function(e){var t=document.createElement("div");if(t.id="map_"+e.id,t.setAttribute("class","element comp_map_wrapper"),e.content&&(t.textContent=e.content),e.css){var n,i=e.css;for(n in i)t.style[n]=i[n]}return t.style.height="250px",t}),y.addComponent("m",function(e){var t,n,i=new qq.maps.LatLng(e.properties.lat?e.properties.lat:39.916527,e.properties.lng?e.properties.lng:116.397128);t=document.createElement("div"),t.id=e.id,t.setAttribute("ctype",e.type),t.setAttribute("class","element"),"edit"===y.mode?n={draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,disableDefaultUI:!0,center:i,zoom:e.properties.zoom?e.properties.zoom:11}:(n={disableDefaultUI:!0,center:i,zoom:e.properties.zoom?e.properties.zoom:11},$(t).on("mousedown mousemove mouseup mouseleave touchstart touchmove touchend",function(e){e.stopPropagation()}));var a=new qq.maps.Map(t,n);if("edit"===y.mode&&$(t).data("map",a),e.content&&""!==e.content){var s=new qq.maps.Label({position:i,map:a,content:e.content});"edit"===y.mode&&$(t).data("label",s)}var o=new qq.maps.Point(25,5),r=new qq.maps.Size(34,34),l=new qq.maps.Point(0,0),c=new qq.maps.MarkerImage(PREFIX_HOST+"/assets/images/marker.png",r,l,o),d=new qq.maps.Marker({map:a,position:a.getCenter()});return d.setIcon(c),$(t).data("marker",d),t}),y.addComponent("w",function(e){var t,n=document.createElement("a");return""+e.type=="w01"?(t="element comp_wechat_play",n.innerHTML='<span style="font-size:16px;" class="eqf-nosy"></span>'):""+e.type=="w02"&&(t="element comp_wechat_hear",n.innerHTML=e.properties.title,n.setAttribute("data-event","1120612")),n.id=e.id,n.setAttribute("class",t),n.setAttribute("ctype",e.type),n}),y.addComponent("t",function(e){var t=$('<div class="create-chart" id="chart-'+e.id+'"></div>'),n=document.createElement("h5");n.setAttribute("class","chart-title"),t.append(n);var i=document.createElement("canvas");i.id=e.id,i.setAttribute("ctype",e.type),t.append(i);var a=document.createElement("div");a.id="legend-"+e.id,t.append(a);var s,u=e.properties.chartType,g=i.getContext("2d"),m=x(g);if(mobilecheck()&&m>1){var h=parseFloat(e.css.width),f=parseFloat(e.css.height)/2;i.width=h,i.height=f,i.style.width=h/m+"px",i.style.height=f/m+"px",g.scale(m,m)}"pie"===u?(s=c(g),"edit"===y.mode&&$(i).data("pieChart",s)):"bar"===u?(s=d(g),"edit"===y.mode&&$(i).data("barChart",s)):("line"===u||"curve"===u)&&(s=p(g,u),"edit"===y.mode&&$(i).data("lineChart",s)),e.properties.chartTitle&&(n.innerHTML=e.properties.chartTitle),"pie"===u&&e.properties.pieChart&&(s=l(e,g,s),$(i).data("pieChart",s)),"bar"===u&&e.properties.barChart&&(s=r(e,g,s),$(i).data("barChart",s)),"line"!==u&&"curve"!==u||!e.properties.lineChart||(s=o(e,g,s),$(i).data("lineChart",s)),a.innerHTML=s.generateLegend();var v=e.properties.legPosition;return"position-align"===v?$(a).addClass("position-align"):"position-right"===v?$(a).addClass("position-right"):"position-none"===v&&$(a).addClass("position-none"),mobilecheck()||($(i).attr("width")&&($(i).removeAttr("width"),$(i).css("width","100%")),$(i).attr("height")&&($(i).removeAttr("height"),$(i).css("height","50%")),s.update()),t.get(0)});var x=function(e){var t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t};y.addComponent("z",function(e){var t=$('<div style="width:100%;height:100%" id="'+e.id+'"></div>');t.attr("ctype",e.type),t.attr("required",e.required);var n=$('<button type="button" class="btn dropdown-toggle btn-default" style="width:100%;height:100%;background-color:#ffffff;color:#666;padding-top: 0px;border: 1px solid rgb(8,161,239);font-family: Open Sans, sans-serif;font-weight: 400;font-size: 16px;border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;position:absolute;top:0px;left:0px;pointer-events:none;padding-bottom: 0px;padding-right:0px;padding-left:0px;overflow: hidden" data-toggle="dropdown" title="Nothing selected" aria-expanded="false"><span class="filter-option pull-left" style="margin-left: 8px;float:left;width:calc(100% - 42px);width:-moz-calc(100% - 42px);width:-webkit-calc(100% - 42px);overflow:hidden;text-align: left;" id="selectButton'+e.id+'">'+e.showText+'</span>&nbsp;<span class="bs-caret" style="float:right;margin-right:10px;"><span class="caret" style="display: inline-block;width: 0px;height: 0px;vertical-align: middle;border-top:4px dashed;border-right: 4px solid transparent;border-left: 4px solid transparent;margin-left: 0px;"></span></span></button>');t.append(n);var i=JSON.parse(e.choices).options,a=$('<select style="width:100%;height:100%; " name="eq[f_'+e.id+']"></select>');a.attr("ctype",e.type),a.attr("data-event","11210");var s=null,o=0;return s=e.placeholderText===e.showText?$('<option value="'+e.placeholderText+'" selected>'+e.placeholderText+"</option>"):$('<option value="'+e.placeholderText+'">'+e.placeholderText+"</option>"),a.append(s),$.each(i,function(t,n){n.label===e.showText?(o++,s=$('<option value="'+n.label+'" selected>'+n.label+"</option>")):s=$('<option value="'+n.label+'">'+n.label+"</option>"),a.append(s)}),$(a).change(function(){$("#selectButton"+e.id).text($(a).val())}),t.append(a),t}),y.addComponent("b",function(e){var t,n,i=document.createElement("div"),a=document.createDocumentFragment(),s=$('<div class="tool"><a class="replay">'+e.properties.meslabel+'</a><a class="more">'+e.properties.morelabel+"</a></div>").get(0);if(a.appendChild(s),"view"!==y.mode||y.disEvent){t=[{mes:"赞一个！好多新功能哦~",name:"匿名用户",time:"2月1日 13:00"},{mes:"赞一个！好多新功能哦~",name:"匿名用户",time:"2月1日 12:58"},{mes:"赞一个！好多新功能哦~",name:"匿名用户",time:"2月1日 12:55"}];for(var o=0;o<t.length;o++)n=$('<div class="record"><div class="headimg headimg-bg"><div class="logo"><em class="eqf-logo"></em></div></div><div class="name">'+t[o].name+'</div><div class="mes">'+t[o].mes+'</div><div class="time">'+t[o].time+"</div></div>").get(0),a.appendChild(n)}else f(e.sceneId,function(t,n){if(0===n){var a=$('<div class="empty-boards"><image style="margin-top:-20px;" src="'+CLIENT_CDN+"view/images/"+e.properties.style+'_boards.png" /></div>').get(0);i.appendChild(a)}else i.appendChild(t)});return i.appendChild(a),i.id=e.id,i.setAttribute("class","element boards-"+e.properties.style),i.setAttribute("ctype",e.type),i}),y.addComponent("g",function(e,t){var n=document.createElement("div");return"edit"===t&&$('<div class="over-ele"></div><div class="ad-contain"></div>').appendTo(n),e.content&&("edit"===t?$(n).find(".ad-contain").append($(e.content)):($(e.content).appendTo(n),e.css.zIndex=1e5)),n.id=e.id,n.setAttribute("class","element"),n.setAttribute("ctype",e.type),n}),y.bindAfterRenderEvent("8",function(e,t){e=$("a",e)[0];var n={id:t.sceneId,num:t.properties.number};if("view"===y.mode){var i=function(){$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"eqs/dial",data:$.param(n),async:!1,error:function(){}})};e.addEventListener("click",i)}}),y.bindAfterRenderEvent("l",function(e,t){if(e=$("a",e)[0],"view"===y.mode){var n=t.properties.url;$(e).click(function(){isNaN(n)?window.open(n):eqxiu.pageScroll(n)})}}),y.bindAfterRenderEvent("i",function(t,n){if("view"===y.mode&&!y.disEvent){var i=$(t).find(".comp_counter");i.click(function(){var a={sceneId:n.sceneId,fieldId:n.id},s=$(t);$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"index.php?c=scene&a=counterset",data:$.param(a),async:!1,error:function(){alert("Connection error")},success:function(){i.unbind("click"),s.find(".comp_counter").removeClass("not-voted");var t=$(".counter-number",s),n=(parseInt(t.attr("data-counter-number"),10)||0)+1;t.attr("data-counter-number",n);var a=e.fixedNum(n);$(".counter-number",s).text(a)}})})}}),y.bindAfterRenderEvent("4",function(e,t){"view"===y.mode&&(""+t.type=="4"?($(e).attr("data-event","1120601"),u(e,t)):""+t.type=="403"&&e.on("click",function(){return isWeixin()?void $(document).trigger("wx.img.upload",t.id):void alert("请在微信中点击我！")}))}),y.bindAfterRenderEvent("x",function(e,t){u(e,t)}),y.bindAfterRenderEvent("h",function(e,t){$(e).attr("data-event","1120601"),u(e,t)}),y.bindAfterRenderEvent("5",function(e,t){var n=mobilecheck();g($(e).find("textarea")),m($(e).find("textarea")),"view"===y.mode&&n&&parseFloat(t.css.top)>=200&&($(e).find("textarea").focus(function(){$(e).closest(".edit_area").css({top:"-150px"})}),$(e).find("textarea").blur(function(){$(e).closest(".edit_area").css({top:0})}))}),y.bindAfterRenderEvent("r",function(e){"view"===y.mode&&g($(e).find("label"))}),y.bindAfterRenderEvent("c",function(e){"view"===y.mode&&g($(e).find("label"))}),y.bindAfterRenderEvent("v",function(e,t){"view"===y.mode&&$(e).click(function(){$(e).hide(),$("#audio_btn").hasClass("video_exist")&&($("#audio_btn").hide(),$("#media")[0].pause()),utilSound.pause(),$('<div class="video_mask page_effect lock" id="mask_'+t.id+'"></div>').appendTo($(e).closest(".m-img")),$('<a class = "close_mask eqf-wrong" id="close_'+t.id+'"></a>').appendTo($(e).closest(".m-img")),$(t.properties.src).appendTo($("#mask_"+t.id)).attr("style","position: absolute;top:0; min-height: 45%; max-height: 100%; top: 20%;").attr("width","100%").removeAttr("height"),$("#close_"+t.id).bind("click",function(){$(e).show(),$("#mask_"+t.id).remove(),$("#close_"+t.id).remove(),$("#audio_btn").hasClass("video_exist")&&$("#audio_btn").show(function(){$("#media")[0].play()})})})}),y.bindAfterRenderEvent("2",function(e,t){h(e),u(e,t)}),y.bindAfterRenderEvent("6",function(t,n){if(t=$("button",t)[0],"view"===y.mode){var i={REQUIRED:"为必填项！",WRONG_PHONE_NUMBER_FORMAT:"电话号码格式错误！",WRONG_EMAIL_FORMAT:"邮箱格式错误！",FILL_OUT_THE_FORM:"请填写表单！",DUPLICATED_SUBMISSION:"请不要重复提交！",THANKS_FOR_PARTICIPATION:"谢谢您的参与！"},a=function(e,t,a){var s=!0,o={};if($("textarea",a).each(function(){if(s){if("required"===$(this).attr("required")&&""===$(this).val().trim())return alert($(this).attr("placeholder")+i.REQUIRED),void(s=!1);if("502"===$(this).attr("ctype")&&""!==$(this).val().trim()){if(!new RegExp(/^\d{3,15}$/).test($(this).val()))return alert("电话输入有误，请输入3-15位数字"),void(s=!1)}if("503"===$(this).attr("ctype")&&""!==$(this).val().trim()){if(!new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g).test($(this).val()))return alert("邮箱格式错误！"),void(s=!1)}o[$(this).attr("name")]=$(this).val()}}),$("input:checked",a).each(function(){var e=$(this);o[e.attr("name")]?o[e.attr("name")]+=","+e.val():o[e.attr("name")]=e.val()}),$('.comp_radio[required="required"]',a).each(function(){var e=$(this);o[e.attr("name")]||(alert(e.attr("title")+i.REQUIRED),s=!1)}),$('input[type="hidden"]',a).each(function(){o[$(this).attr("name")]=$(this).val()}),$('.comp_rating[required="required"]',a).each(function(){var e=$(this);o[e.attr("name")]&&""+o[e.attr("name")]!="0"||(alert(e.attr("title")+"为必填项！"),s=!1)}),s){var r=!1;if($.isEmptyObject(o))return void(r=!0);for(var l in o)if(""!==o[l]){r=!0;break}if(!r)return void alert("请填写表单！");$("select",a).each(function(){var e=$(this).attr("name").substring(5,$(this).attr("name").length-1),t=$(this).find("option:first").val(),n=$(this).val();if("required"===$("#"+e).attr("required")){if(t===n)return alert("你还没有选择下拉列表！"),void(s=!1)}else t===n&&$(this).val(null);o[$(this).attr("name")]=$(this).val()}),s&&$.ajax({cache:!0,type:"POST",url:PREFIX_S1_URL+"index.php?c=scenedata&a=add&id="+t,data:$.param(o),async:!1,error:function(){alert("Connection error")},success:function(){$(e).unbind("click").click(function(){alert("请不要重复提交！")});var t;n.properties.layout||(n.properties.layout="rating-l",n.properties.text=""),n.properties.text.trim()||"rating-l"!==n.properties.layout?("rating-m"===n.properties.layout&&(t=n.properties.checkedLink?'<div class="feedback-box"><div class="feedback-form"><img src = "'+(PREFIX_FILE_HOST+n.properties.imgSrc)+'"/><a href="'+n.properties.link+'" style="margin-top:20px;"><span>'+n.properties.text+'</span></a><button class="feedback-button">我知道了</button></div></div>':'<div class="feedback-box"><div class="feedback-form"><img src = "'+(PREFIX_FILE_HOST+n.properties.imgSrc)+'"/><span style="margin-top:20px;">'+n.properties.text+'</span><button class="feedback-button">我知道了</button></div></div>'),"rating-s"===n.properties.layout&&(t=n.properties.checkedLink?'<div class="feedback-box"><div class="feedback-form"><a href="'+n.properties.link+'"><span>'+n.properties.text+'</span></a><img src = "'+(PREFIX_FILE_HOST+n.properties.imgSrc)+'" style="margin-top:20px;"/><button class="feedback-button">我知道了</button></div></div>':'<div class="feedback-box"><div class="feedback-form"><span>'+n.properties.text+'</span><img src = "'+(PREFIX_FILE_HOST+n.properties.imgSrc)+'" style="margin-top:20px;"/><button class="feedback-button">我知道了</button></div></div>'),"rating-l"===n.properties.layout&&(t=n.properties.checkedLink?'<div class="feedback-box"><div class="feedback-form"><a href="'+n.properties.link+'"><span>'+n.properties.text+'</span></a><button class="feedback-button">我知道了</button></div></div>':'<div class="feedback-box"><div class="feedback-form"><span>'+n.properties.text+'</span><button class="feedback-button">我知道了</button></div></div>')):t='<div class="feedback-box"><div class="feedback-form"><span>谢谢您的参与!</span><button class="feedback-button">我知道了</button></div></div>',$(t).prependTo(".z-current");var i=(0-parseInt($(".feedback-form").css("height"),10))/2;$(".feedback-form").css({marginTop:i+"px"}),$(".z-current").on("click",".feedback-button",function(){$(".feedback-box").animate({opacity:0},{duration:1e3,complete:function(){$(".feedback-box").remove()}})})}})}};$(t).bind("click",function(){if(e.isMobileApp())return void alert("场景还没有发布呢，请发布后提交内容！");var n,i=$(t).parents(".edit_wrapper").attr("data-scene-id");n=i?$(t).parents(".nr").find('.edit_wrapper[data-scene-id="'+i+'"]'):$(t).parents(".nr"),a(this,i,n)})}}),y.bindAfterRenderEvent("7",function(e,t){var n=new BMap.Map("map_"+t.id,{enableMapClick:!1}),i=new BMap.Point(t.properties.x,t.properties.y),a=new BMap.Marker(i);n.addOverlay(a);var s=new BMap.Label(t.properties.markTitle,{offset:new BMap.Size(20,-10)});a.setLabel(s),n.disableDoubleClickZoom(),n.centerAndZoom(i,15)}),y.bindAfterRenderEvent("p",function(e,t){if(!$(e).closest(".page_tpl_container ").length){$(e).children(".element-box").css("overflow","visible"),utilPictures.deleteInterval(t.id);var n=$(e).find("#"+t.id);new flux.slider(n,{autoplay:t.properties.autoPlay,delay:t.properties.interval,pagination:!1,transitions:[utilPictures.getPicStyle(t.properties.picStyle).name],width:t.css.width,height:t.css.height,bgColor:t.properties.bgColor,onStartEnd:function(e){utilPictures.addInterval(t.id,e)}})}}),y.bindAfterRenderEvent("a",function(e,t){function n(e){a.each(function(t,n){$(n).removeClass(o).addClass(o+"-line"),e>=t&&$(n).removeClass(o+"-line").addClass(o)})}var i=$(e);if("view"===y.mode){var a=i.find("i"),s=i.find("input"),o=t.properties.icon;a.each(function(e,t){$(t).attr("data-event","11211"),$(t).bind("click",function(){n(e),s.val(e+1)}),$(t).bind("mouseenter",function(){n(e)})}),i.find(".rating-icons").bind("mouseleave",function(){n(parseInt(s.val(),10)-1)}),g(i.find(".rating-icons"))}}),y.bindAfterRenderEvent("w",function(e,t){"view"===y.mode&&(g($(e)),$(e).on("mousedown touchstart",function(e){if(e.preventDefault(),isWeixin())"w01"===t.type?$(document).trigger("wx.audio.play",t.id):"w02"===t.type&&$(document).trigger("wx.audio.record",t.id);else if("w01"===t.type){var n=document.createElement("audio");n.src=t.properties.src,n.play();var i=$("#media").get(0);i.pause()}else"w02"===t.type&&alert("请在微信中点我！")}).on("mouseup touchend",function(){isWeixin()&&"w02"===t.type&&$(document).trigger("wx.audio.recordend",t.id)}))}),y.bindAfterRenderEvent("g",function(e){e.attr("data-event","11212")}),y.bindAfterRenderEvent("b",function(t,n){function i(){if(r.find(".boards-panel").length)r.find(".boards-panel").show();else{r.append($('<div class="boards-panel boards-'+n.properties.style+'"><div class="boards-top"><div class="head">留言板<em class="eqf-wrong"></em></div><div class="boards-form"><textarea maxlength="140" class="content-text"></textarea><span class="content-tip">0/140</span><a class="record-btn" data-event="11207">提交留言</a></div><div class="spline-con"><span>更多留言</span><span class="spline"></span></div></div><div class="boards-con"><div class="list"></div></div>'+l+"</div>")),s=r.find(".record-btn"),iphoneCheck()&&r.find(".boards-con").addClass("ios-boards-con");var t=0;s.on("click",function(){if(e.isMobileApp())return void alert("场景还没有发布呢，请发布后提交内容！");if(!t){var n=r.find(".boards-panel .content-text").val();if(!$.trim(n))return void alert("留言不能为空!");t=10,s.text("提交留言("+t+"秒)"),s.css("backgroundColor","#b4b4b4");var i=setInterval(function(){t--,s.text("提交留言("+t+"秒)"),t||(s.css("backgroundColor","").text("提交留言"),clearInterval(i))},1e3),a={sceneId:c,content:n,url:"",name:"匿名用户"};weChatUser&&weChatUser.headimgurl&&(a.name=weChatUser.nickname,a.url=weChatUser.headimgurl),$.ajax({type:"POST",url:PREFIX_URL+"scene/form/send/msg",data:$.param(a),error:function(){alert("Connection error")},success:function(e){if(e.success){alert("留言成功，谢谢参与！");var t='<div class="headimg headimg-bg"><div class="logo-scale"><em class="eqf-eqxiu"></em></div></div>';weChatUser.headimgurl&&(t='<div class="headimg" style="background-image:url('+weChatUser.headimgurl+')"></div>'),$(".z-current #"+d).find(".empty-boards").length&&$(".z-current #"+d).find(".empty-boards").remove(),$(".z-current #"+d).find(".tool").after($('<div class="record">'+t+'<div class="name">'+e.obj.name+'</div><div class="mes">'+e.obj.content+'</div><div class="time">刚刚</div></div>')),r.find(".list").prepend($('<div class="record clearfix">'+t+'<div class="name">'+e.obj.name+'</div><div class="mes">'+e.obj.content+'</div><div class="time">刚刚</div></div>'))}}})}}),r.find(".boards-panel .content-text").on("input",function(e){var t=e.target.value.length+e.target.value.split("\n").length-1;r.find(".boards-panel .content-tip").html(t+"/140")})}r.find(".boards-panel").on("touchstart touchmove touchend mousedown mouseup mousemove",function(e){e.stopPropagation()}),r.find(".z-current").hide();var i=$('<div class="more-mes">查看更多</div>'),o=r.find(".list");o.empty();var p=o.get(0);o.append(i),f(c,function(e,t){a=t,p.insertBefore(e,i.get(0)),t||(i.html("没有更多"),i.unbind("click"))}),i.on("click",function(){f(c,function(e,t){a=t,o.get(0).insertBefore(e,i.get(0)),t||(i.html("没有更多"),i.unbind("click"))},a)})}if("view"===y.mode&&!y.disEvent){var a,s,o=$(t),r=mobilecheck()?$(document.body):$(".nr"),l=mobilecheck()?'<div class="boards-bottom"></div>':"",c=n.sceneId,d=n.id;o.find(".tool a").on("click",function(e,t){(!e.isTrigger||t)&&(!e.isTrigger||"longPage"!==t||mobilecheck())&&($.isEmptyObject(weChatUser)&&isWeixin()?wechatUtils.weChatAuth(function(){i()},n.pageId):i())}),r.on("click",".boards-panel .eqf-wrong",function(){r.find(".boards-panel .list").empty(),r.find(".boards-panel").hide(),r.find(".z-current").show()})}});var S}(window.eqShow),function(){var e;eqShow.shakeTrigger=function(t,n){function i(e){var t=e.accelerationIncludingGravity,n=(new Date).getTime();if(n-p>100){var s=parseInt(n-p);p=n,l=t.x,c=t.y,d=t.z;var r=Math.abs(l+c+d-u-g-m)/s*1e4;window.removeEventListener("devicemotion",i,!0),r>o&&(h||(eqShow.playTriggerSound(),h=!0),window.removeEventListener("devicemotion",i,!0),a.sends&&a.sends.length&&$.each(a.sends,function(e,t){time=setTimeout(function(){$.each(t.handles,function(e,t){var n=utilTrigger.getHandleType(t.type).name;$.each(t.ids,function(e,t){$("#inside_"+t).trigger(n,0)})})},1e3*t.delay)})),u=l,g=c,m=d}}var a,s=$(n).find(".m-img").attr("id").substring(4);if(t[s-1].properties&&(a=t[s-1].properties.trigger),a&&a.sends){var o=4e3,r=PREFIX_HOST+"/assets/audio/wxShake.mp3";e=document.createElement("audio"),e.src=r;var l,c,d,p=0,u=0,g=0,m=0,h=!1;window.DeviceMotionEvent&&n&&window.addEventListener("devicemotion",i,!1)}},eqShow.playTriggerSound=function(){e&&e.play()}}(),function(e){"use strict";var t=function(t,n){this.el=e(t),this.options=e.extend({},e.fn.typed.defaults,n),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};t.prototype={constructor:t,init:function(){var e=this;e.timeout=setTimeout(function(){for(var t=0;t<e.strings.length;++t)e.sequence[t]=t;e.shuffle&&(e.sequence=e.shuffleArray(e.sequence)),e.typewrite(e.strings[e.sequence[e.arrayPos]],e.strPos)},e.startDelay)},build:function(){var t=this;if(!0===this.showCursor&&(this.cursor=e('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){t.strings=[],this.stringsElement.hide();var n=this.stringsElement.find("p");e.each(n,function(n,i){t.strings.push(e(i).html())})}this.init()},typewrite:function(e,t){if(!0!==this.stop){var n=Math.round(70*Math.random())+this.typeSpeed,i=this;i.timeout=setTimeout(function(){var n=0,a=e.substr(t);if("^"===a.charAt(0)){var s=1;/^\^\d+/.test(a)&&(a=/\d+/.exec(a)[0],s+=a.length,n=parseInt(a)),e=e.substring(0,t)+e.substring(t+s)}if("html"===i.contentType){var o=e.substr(t).charAt(0);if("<"===o||"&"===o){var r="",l="";for(l="<"===o?">":";";e.substr(t).charAt(0)!==l;)r+=e.substr(t).charAt(0),t++;r+=l}}i.timeout=setTimeout(function(){if(t===e.length){if(i.options.onStringTyped(i.arrayPos),i.arrayPos===i.strings.length-1&&(i.options.callback(),i.curLoop++,!1===i.loop||i.curLoop===i.loopCount))return;i.timeout=setTimeout(function(){i.backspace(e,t)},i.backDelay)}else{0===t&&i.options.preStringTyped(i.arrayPos);var n=e.substr(0,t+1);i.attr?i.el.attr(i.attr,n):i.isInput?i.el.val(n):"html"===i.contentType?i.el.html(n):i.el.text(n),t++,i.typewrite(e,t)}},n)},n)}},backspace:function(e,t){if(!0!==this.stop){var n=Math.round(70*Math.random())+this.backSpeed,i=this;i.timeout=setTimeout(function(){if("html"===i.contentType&&">"===e.substr(t).charAt(0)){for(var n="";"<"!==e.substr(t).charAt(0);)n-=e.substr(t).charAt(0),t--;t--,n+="<"}var a=e.substr(0,t);i.attr?i.el.attr(i.attr,a):i.isInput?i.el.val(a):"html"===i.contentType?i.el.html(a):i.el.text(a),t>i.stopNum?(t--,i.backspace(e,t)):t<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.shuffle&&(i.sequence=i.shuffleArray(i.sequence)),i.init()):i.typewrite(i.strings[i.sequence[i.arrayPos]],t))},n)}},shuffleArray:function(e){var t,n,i=e.length;if(i)for(;--i;)n=Math.floor(Math.random()*(i+1)),t=e[n],e[n]=e[i],e[i]=t;return e},reset:function(){var e=this;clearInterval(e.timeout);var t=this.el.attr("id");this.el.after('<span id="'+t+'"/>'),this.el.remove(),void 0!==this.cursor&&this.cursor.remove(),e.options.resetCallback()}},e.fn.typed=function(n){return this.each(function(){var i=e(this),a=i.data("typed"),s="object"==typeof n&&n;a||i.data("typed",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery),function(){var e=!0,t=!0;eqShow.playVideo=function(n){if(n&&n.bgAudio){var i=$("#media"),a=$("#audio_btn"),s="";n.bgAudio.url?s=0===n.bgAudio.url.indexOf("http://")?n.bgAudio.url:PREFIX_FILE_HOST+n.bgAudio.url:!n.bgAudio.url&&n.bgAudio.src&&(s=0===n.bgAudio.src.indexOf("http://")?n.bgAudio.src:PREFIX_FILE_HOST+n.bgAudio.src),i.attr("src",s),a.addClass("video_exist"),i.bind("canplay",function(){i.get(0).play()}).bind("play",function(){a.addClass("rotate")}).bind("pause",function(e){a.removeClass("rotate")});var o=mobilecheck()?"touchend":"click";$("#audio_btn").show().on(o,function(t){t.cancelBubble=!0,t.stopPropagation(),$(this).hasClass("rotate")?(e=!1,i.get(0).pause()):(i.get(0).play(),e=!0,utilSound.pause())})}$("#nr #page1").on("mousedown touchstart",function(){if(mobilecheck()&&!isWeixin()&&t){var e=$("#nr .z-current .m-img"),n=parseInt(e.attr("id").substring(4),10);t&&1===n&&window.completeEffect(e)&&(t=!1,window.scene.bgAudio&&$("#media").get(0).play())}})},eqShow.executePlay=function(){e&&$("#media").get(0).play()},eqShow.executePause=function(){e&&$("#media").get(0).pause()}}(),function(e){function t(){var e={"Allura-Regular":{value:1,familyName:"Allura-Regular",fontFamilyName:"Allura-Regular",src:"assets/images/fonts/Allura-Regular.png",blueSrc:"assets/images/fonts/Allura-Regular_blue.png"},"Amaranth-Regular":{value:2,familyName:"Amaranth-Regular",fontFamilyName:"Amaranth-Regular",src:"assets/images/fonts/Amaranth-Regular.png",blueSrc:"assets/images/fonts/Amaranth-Regular_blue.png"},"Anton-Regular":{value:3,familyName:"Anton-Regular",fontFamilyName:"Anton-Regular",src:"assets/images/fonts/Anton-Regular.png",blueSrc:"assets/images/fonts/Anton-Regular_blue.png"},"Arial-Regular":{value:4,familyName:"Arial-Regular",fontFamilyName:"Arial-Regular",src:"assets/images/fonts/Arial-Regular.png",blueSrc:"assets/images/fonts/Arial-Regular_blue.png"},"Arialnarrow-Regular":{value:5,familyName:"Arialnarrow-Regular",fontFamilyName:"Arialnarrow-Regular",src:"assets/images/fonts/Arialnarrow-Regular.png",blueSrc:"assets/images/fonts/Arialnarrow-Regular_blue.png"},"Arialroundedmtbold-Regular":{value:6,familyName:"Arialroundedmtbold-Regular",fontFamilyName:"Arialroundedmtbold-Regular",src:"assets/images/fonts/Arialroundedmtbold-Regular.png",blueSrc:"assets/images/fonts/Arialroundedmtbold-Regular_blue.png"},"Banglasangammn-Regular":{value:7,familyName:"Banglasangammn-Regular",fontFamilyName:"Banglasangammn-Regular",src:"assets/images/fonts/Banglasangammn-Regular.png",blueSrc:"assets/images/fonts/Banglasangammn-Regular_blue.png"},"Blackopsone-Regular":{value:8,familyName:"Blackopsone-Regular",fontFamilyName:"Blackopsone-Regular",src:"assets/images/fonts/Blackopsone-Regular.png",blueSrc:"assets/images/fonts/Blackopsone-Regular_blue.png"},"Bradleyhand-Bold":{value:9,familyName:"Bradleyhand-Bold",fontFamilyName:"Bradleyhand-Bold",src:"assets/images/fonts/Bradleyhand-Bold.png",blueSrc:"assets/images/fonts/Bradleyhand-Bold_blue.png"},"Cabinsketch-Bold":{value:10,familyName:"Cabinsketch-Bold",fontFamilyName:"Cabinsketch-Bold",src:"assets/images/fonts/Cabinsketch-Bold.png",blueSrc:"assets/images/fonts/Cabinsketch-Bold_blue.png"},simsun:{value:11,familyName:"宋体",fontFamilyName:"simsun",src:"assets/images/fonts/songti.png",blueSrc:"assets/images/fonts/songti_blue.png"},simsun:{value:12,familyName:"宋体",fontFamilyName:"simsun",src:"assets/images/fonts/songti.png",blueSrc:"assets/images/fonts/songti_blue.png"},weiruanyahei:{value:12,familyName:"微软雅黑",fontFamilyName:"weiruanyahei",src:"assets/images/fonts/weiruanyahei.png",blueSrc:"assets/images/fonts/weiruanyahei_blue.png"},mnjbwks:{value:13,familyName:"迷你简笔魏楷书",fontFamilyName:"mnjbwks",src:"assets/images/fonts/mnjbwks.png",blueSrc:"assets/images/fonts/mnjbwks_blue.png"},hzgb:{value:17,familyName:"汉真广标",fontFamilyName:"hzgb",src:"assets/images/fonts/hzgb.png",blueSrc:"assets/images/fonts/hzgb_blue.png"},changyi:{value:18,familyName:"迷你简长艺",fontFamilyName:"changyi",src:"assets/images/fonts/changyi.png",blueSrc:"assets/images/fonts/changyi_blue.png"}};this.getFontName=function(t){if(t===undefined)return e;for(var n in e)if(t===n)return e[n];return null};var t;this.setUserType=function(e){t=e},this.getUserType=function(){return t}}e.utilFont=new t}(window),function(e){function t(){var e={};this.addInterval=function(t,n){e[t]=n},this.deleteInterval=function(t){e[t]&&(clearInterval(e[t]),delete e[t])},this.clearInterval=function(){for(var t in e)this.deleteInterval(t)};var t=[{value:1,desc:"轮播",name:"slide"},{value:2,desc:"下落",name:"bars"},{value:3,desc:"百页窗",name:"blinds"},{value:4,desc:"消隐",name:"blocks"},{value:5,desc:"渐变",name:"blocks2"},{value:9,desc:"梳理",name:"zip"},{value:11,desc:"翻转",name:"bars3d"},{value:13,desc:"立方体",name:"cube"},{value:14,desc:"棋盘",name:"tiles3d"},{value:16,desc:"飞出",name:"explode"}];this.getPicStyle=function(e){if(e===undefined)return t;for(var n=0;n<t.length;n++)if(e===t[n].value)return t[n]}}e.utilPictures=new t}(window),function(e,t){function n(){var e,n,i,a=[];t("#media"),this.addAudio=function(e,s){var o=new Audio;o.src=s,a.push({elem:e,audio:o}),t(o).bind("ended",function(){n=!1,i()})},this.play=function(t,s,o){var r;i=s;for(var l=0;l<a.length;l++)a[l].elem==t&&(r=a[l].audio);e==r&&n?(r.pause(),n=!1,s()):e!=r||n?(e&&e.pause(),r.currentTime=0,r.play(),o(),n=!0,e=r):(r.play(),n=!0,o())},this.pause=function(){e&&(e.pause(),n=!1)}}e.utilSound=new n}(window,$),function(e){function t(){var e={CLICK:{name:"click",value:1,title:"点击"},SHAKE:{name:"shake",value:2,title:"摇一摇"}},t={SHOW:{name:"show",value:1},HIDE:{name:"hide",value:2},RANDOMEVENT:{name:"randomEvent",value:3}};this.getSendType=function(t){if(t===undefined)return e;for(var n in e)if(t===e[n].value)return e[n];return null},this.getHandleType=function(e){if(e===undefined)return t;for(var n in t)if(e===t[n].value)return t[n];return null}}e.utilTrigger=new t}(window);var tplCount=0,eqxCommon=function(){var e=function(e){var t,n,i=e.type;return"typer"===i&&(t="typer"),0===i&&(t="fadeIn"),1===i&&(n=e.direction,0===n&&(t="fadeInLeft"),1===n&&(t="fadeInDown"),2===n&&(t="fadeInRight"),3===n&&(t="fadeInUp")),6===i&&(t="wobble"),5===i&&(t="rubberBand"),7===i&&(t="rotateIn"),8===i&&(t="flip"),9===i&&(t="swing"),2===i&&(n=e.direction,0===n&&(t="bounceInLeft"),1===n&&(t="bounceInDown"),2===n&&(t="bounceInRight"),3===n&&(t="bounceInUp")),3===i&&(t="bounceIn"),4===i&&(t="zoomIn"),10===i&&(t="fadeOut"),11===i&&(t="flipOutY"),12===i&&(t="rollIn"),13===i&&(t="lightSpeedIn"),14===i&&(t="bounceOut"),15===i&&(t="rollOut"),16===i&&(t="lightSpeedOut"),17===i&&(n=e.direction,0===n&&(t="fadeOutRight"),1===n&&(t="fadeOutDown"),2===n&&(t="fadeOutLeft"),3===n&&(t="fadeOutUp")),18===i&&(t="zoomOut"),19===i&&(n=e.direction,0===n&&(t="bounceOutRight"),1===n&&(t="bounceOutDown"),2===n&&(t="bounceOutLeft"),3===n&&(t="bounceOutUp")),20===i&&(t="flipInY"),21===i&&(t="tada"),22===i&&(t="jello"),23===i&&(t="flash"),26===i&&(t="twisterInDown"),27===i&&(t="puffIn"),28===i&&(t="puffOut"),29===i&&(t="slideDown"),30===i&&(t="slideUp"),24===i&&(t="flipInX"),25===i&&(t="flipOutX"),31===i&&(t="twisterInUp"),32==i&&(t="vanishOut"),33==i&&(t="vanishIn"),t},t=function(e,t,n,i,a){function s(e,i,a,o,r){if(a.length&&l<a.length){if("typer"==i[l]){var c=e.find(".element"),d=a[l].interval,p=a[l].delay;if(o&&r.top>486&&"view"==n){var u=function(n,o){Math.abs(o)>r.top&&(c.data("typed")&&(clearInterval(c.data("typed").timeout),c.removeData("typed")),c.empty(),c.typed({strings:[t.content],contentType:"html",showCursor:!1,typeSpeed:1e3*d||0,startDelay:1e3*p||0,callback:function(){clearInterval(c.data("typed").timeout),c.removeData("typed"),l++,s(e,i,a)}}),$(document).unbind("pageScrollPos",u))};return void $(document).bind("pageScrollPos",u)}c.data("typed")&&(clearInterval(c.data("typed").timeout),c.removeData("typed")),c.empty(),c.typed({strings:[t.content],contentType:"html",showCursor:!1,typeSpeed:1e3*d||0,startDelay:1e3*a[l].delay||0,callback:function(){clearInterval(c.data("typed").timeout),c.removeData("typed"),l++,s(e,i,a)}})}if(e.css("animation",""),e.get(0),e.css("animation",i[l]+" "+a[l].duration+"s ease "+a[l].delay+"s "+(a[l].countNum?a[l].countNum:"")),"view"==n?(a[l].count&&l==a.length-1&&e.css("animation-iteration-count","infinite"),e.css("animation-fill-mode","both")):(e.css("animation-iteration-count","1"),e.css("animation-fill-mode","backwards")),a[l].linear&&e.css("animation-timing-function","linear"),o&&r.top>486&&"view"==n){e.css("display","none");var g=function(t,n){Math.abs(n)>r.top&&(e.css("display","block"),$(document).unbind("pageScrollPos",g))};$(document).bind("pageScrollPos",g)}e.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){l++,s(e,i,a)})}}if(t.trigger&&t.trigger.receives&&t.trigger.receives.length&&!a&&"view"==n)for(var o=t.trigger.receives,r=0;r<o.length;r++)if(1==o[r].type&&o[r].ids.length)return;var l=0;if(t.properties&&t.properties.anim){var c=[];t.properties.anim.length?c=t.properties.anim:c.push(t.properties.anim);var d=$(".element-box",e);d.attr("element-anim","");for(var p,u=[],g=[],r=0,m=c.length;m>r;r++)null!=c[r].type&&-1!=c[r].type&&(p=eqxCommon.convertType(c[r]),u.push(p),g.push(c[r]));if(i&&i.scale)return;t.properties.anim.trigger?e.click(function(){s(d,p,t.properties.anim)}):i&&i.longPage?s(d,u,g,!0,t.css):s(d,u,g)}},n=function(e,t){var n,i=$(e);t.trigger&&t.trigger.receives&&t.trigger.receives.length&&$.each(t.trigger.receives,function(e,a){if(a.ids.length){var s=utilTrigger.getHandleType(a.type).name;("show"==s||"randomEvent"==s)&&i.hide(),"hide"==s&&i.show(),i.bind(s,function(e,a){if("show"==s)$(this).show(),n||(n=!0,eqxCommon.animation(i,t,"view",null,!0));else if("hide"==s)$(this).hide(),n=!1;else if("randomEvent"==s){eqShow.playTriggerSound(),$(this).show();var o=Math.floor(Math.random()*t.properties.pics.length);$(this).find("img").css({display:"none"}),$(this).find("img").eq(o).css({display:"block"})}})}})},i=function(){var e,t,n=window.navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if($.isArray(n.languages))for(e=0;e<n.languages.length;e++)if((t=n.languages[e])&&t.length)return t;for(e=0;e<i.length;e++)if((t=n[i[e]])&&t.length)return t;return null};return{convertType:e,animation:t,bindTrigger:n,getFirstBrowserLanguage:i}}();eqShow.clearTyperText=function(e){if(e&&e.elements){var t=e.elements;$.each(t,function(e,t){if(t.properties&&t.properties.anim){var n=t.properties.anim;$.each(n,function(e,n){0==e&&"typer"==n.type&&$("#inside_"+t.id).find(".element").empty()})}})}},eqShow.isMobileApp=function(){return!!window.viewData},eqShow.setPageHis=function(e){if(mobilecheck()){var t=eqShow.getQueryString("toPage"),n=location.href;t?t!==""+e&&(n=n.replace(t,e)):n+=(/\?/.test(n)?"&":"?")+"toPage="+e,window.history.pushState({title:$("title").html(),url:n},$("title").html(),n)}},eqShow.getShowCount=function(e){return this.showCount=$.ajax({type:"GET",url:PREFIX_S1_URL+"index.php?c=scene&a=view&id="+e,xhrFields:{withCredentials:!0},error:function(){alert("Connection error")},crossDomain:!0}),this.showCount},eqShow.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return n?unescape(n[2]):null},eqShow.delQueStr=function(e,t){var n="";if(-1===e.indexOf("?"))return e;n=e.substr(e.indexOf("?")+1);var a=[],s="";if(-1!==n.indexOf("&")){a=n.split("&");for(i in a)a[i].split("=")[0]!=t&&(s=s+a[i].split("=")[0]+"="+a[i].split("=")[1]+"&");return e.substr(0,e.indexOf("?"))+"?"+s.substr(0,s.length-1)}return a=n.split("="),a[0]==t?e.substr(0,e.indexOf("?")):e},eqShow.getDomain=function(e){var t="null";(void 0===e||null==e)&&(e=window.location.href);var n=/.*\:\/\/([^\/]*).*/,i=e.match(n);return void 0!==i&&null!=i&&(t=i[1]),t},eqShow.DateFormit=function(e,t){var n,i=new Date(e);switch(t){case"MM月DD日":n=i.getMonth()+1+"月"+i.getDate()+"日 "+i.getHours()+":"+i.getMinutes();break;case"T":n="刚刚"}return n},eqShow.fixedNum=function(e){var t;return 1e4>e?t=e:e>=1e4&&1e8>e?t=(e/1e4).toFixed(2)+"万":e>=1e8&&(t=(e/1e8).toFixed(2)+"亿"),t},eqShow.showProgressBar=function(e,t,n){if(e.obj.property.slideNumber){var i=$('<div class="progress"></div>'),a=$("<span></span>"),s=$('<em class="page-tip"></em>');i.append(a).append(s),n&&e.obj.property.slideDisplay?n.append(i.css("display",e.obj.property.slideDisplay)):$("#nr").append(i.css("display","block"))}var o=function(){e.obj.property.slideNumber&&a&&setTimeout(function(){var e=$(".z-active").get(0)?$(".z-active").get(0):$(".z-current").get(0);if(e){var n=$(e).find(".m-img").attr("id").substring(4),o=t.length,r=n/o,l=100;s.text(n+"/"+o),a.css("width",parseFloat(i.width())*r),$(e).find(".lock").length&&(l=0),i.css("z-index",l)}},100)};o(),t.eq(0).find(".u-arrow-bottom").css("bottom","30px"),eqShow.progressInterval=setInterval(function(){o()},300)},eqShow.selectElement=function(e){return $("#inside_"+e,".phone-view").length?$("#inside_"+e,".phone-view"):$("#inside_"+e)},eqShow.substtrCharacters=function(e,t){if(e&&(e=e.replace(/\n|\r/g," ")),e&&e.length>t/2){var n=e.replace(/[^\x00-\xff]/g,"xx");if(n.length>t){var i=n.substring(0,t).replace(/xx/g,"中").length;e=e.substring(0,i)}}return e},eqShow.getCharactersLen=function(e){return e.replace(/[^\x00-\xff]/g,"xx").length},eqShow.getRGB=function(e){if(e=e.toLowerCase(),e.indexOf("rgba")>=0){var t=e.split(",");t[0]=t[0].replace("rgba","rgb"),t.pop(),t[t.length-1]+=")",e=t.join(",")}return e},eqShow.convertToHexColor=function(e){if(e=e.toLowerCase(),e.indexOf("rgb")>=0){var t=e.split(","),n=t[0].substring(t[0].indexOf("(")+1);n=parseInt(n,10).toString(16),n=n.length<2?"0"+n:n;var i=parseInt(t[1],10).toString(16);i=i.length<2?"0"+i:i;var a=t[2].substring(0,t[2].indexOf(")"));a=parseInt(a,10).toString(16),a=a.length<2?"0"+a:a,e="#"+n+i+a}return e},eqShow.responsiveImage=function(e,t,n,i,a){var s=new Image;s.src=e,s.onload=function(s){var o,r,l=this;$.each(t,function(e,t){t.elements&&t.elements.length&&$.each(t.elements,function(e,t){if(t.id==n){var i=parseInt(t.css.width),a=parseInt(t.css.height);l.width/l.height>=i/a?(o=i,r=l.height*(i/l.width)):(r=a,o=l.width*(a/l.height))}})}),a.css({display:"block",width:o+"px",height:r+"px","margin-top":(parseInt(i.height())-r)/2+"px","margin-left":(parseInt(i.width())-o)/2+"px"}).attr("src",e)}},eqShow.getCookieId=function(){var e="",t="C_ID=",n=document.cookie,i=n.indexOf(t);if(-1!=i){i+=t.length;var a=n.indexOf(";",i);-1==a&&(a=n.length),e=n.substring(i,a)}return e},eqShow.delayLoadJSAndCSS=function(e,t,n){var i,a;if(t||(t=e.substr(e.lastIndexOf(".")+1)),"js"==t){var s=document.getElementsByTagName("script");for(a=0;a<s.length;a++)if(s[a].src&&-1!=s[a].src.indexOf(e)||s[a].title==n)return s[a];i=document.createElement("script"),i.type="text/javascript",i.src=e,n&&(i.title=n)}else{if("css"!=t)return;var o=document.getElementsByTagName("link");for(a=0;a<o.length;a++)if(o[a].href&&-1!=o[a].href.indexOf(e)||o[a].title==n)return o[a];i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=e,n&&(i.title=n),i.disabled=!1}return document.getElementsByTagName("head")[0].appendChild(i),i},eqShow.copyToClipboard=function(e){var t,n,i="_hiddenCopyText_",a="INPUT"===e.tagName||"TEXTAREA"===e.tagName;if(a)s=e,t=e.selectionStart,n=e.selectionEnd;else{if(!(s=document.getElementById(i))){var s=document.createElement("textarea");s.style.position="absolute",s.style.left="-9999px",s.style.top="0",s.id=i,document.body.appendChild(s)}s.textContent=e.textContent}var o=document.activeElement;s.focus(),s.setSelectionRange(0,s.value.length);var r;try{r=document.execCommand("copy")}catch(e){r=!1}return o&&"function"==typeof o.focus&&o.focus(),a?e.setSelectionRange(t,n):s.textContent="",r},eqShow.getUrlParameter=function(e){var t,n,i=decodeURIComponent(window.location.search.substring(1)),a=i.split("&");for(n=0;n<a.length;n++)if(t=a[n].split("="),t[0]===e)return t[1]===undefined||t[1]};var listPages=[];angular.module("active",["services.active"]),angular.module("active").controller("ActiveCtrl",["$rootScope","$http","$scope","$timeout","security","$window","activeService","MineService","$routeParams",function(e,t,n){n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_SERVER_HOST=PREFIX_URL,n.PREFIX_CLIENT_HOST=PREFIX_HOST}]),angular.module("app",["ngRoute","home","active","show","main","reg","scene","data.edit","error","usercenter","message","invitation","ui.bootstrap","ngSanitize","ui.select","services.i18nNotifications","services.httpRequestTracker","services.active","services.config","services.configSer","services.dataCache","services.validate","service.codeMessage","security.register.company","security","app.upload","templates-app","templates-common","ui.sortable","I18N.MESSAGES","app.directives.keymap","app.directives.notification","active1","activeXq","search","category","nav","recommend","visitor","visitorXq","common.directives.dropDown","ngSVGAttributes","fillscene","regGuide","eqxAuth","app.upgrade"]),angular.module("app").config(["$routeProvider","$locationProvider","securityAuthorizationProvider","uiSelectConfig","$provide","$httpProvider","$tooltipProvider","authServiceProvider",function(e,t,n,i,a,s,o,r){r.setConfig({host:LOGIN_AUTH_HOST}),o.options({placement:"bottom",appendToBody:"true"}),i.theme="bootstrap",e.when("/home",{feedBackUrl:"http://eqxiu.com/v/vk2Ucz15",templateUrl:"home/home.tpl.html",controller:"HomeCtrl"}).when("/home/:id",{feedBackUrl:"http://eqxiu.com/v/vk2Ucz15",templateUrl:"home/home.tpl.html",controller:"HomeCtrl",reloadOnSearch:!1}).when("/reg",{templateUrl:"reg/reg.tpl.html",controller:"RegCtrl"}).when("/companyreg",{templateUrl:"security/register/companyReg.tpl.html",controller:"companyRegsterCtrl"}).when("/agreement",{templateUrl:"reg/agreement.tpl.html"}).when("/about",{templateUrl:"about.tpl.html"}).when("/error/:codeid",{templateUrl:"error/error.tpl.html",controller:"ErrorCtrl"}).when("/active",{templateUrl:"active/active.tpl.html",controller:"ActiveCtrl"}).when("/main",{feedBackUrl:"http://eqxiu.com/v/2qFiYzrc",templateUrl:"main/main.tpl.html",controller:"MainCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/print/printShop",{templateUrl:"main/print/transition/printShop.tpl.html",controller:"PrintShopCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/print/:tab",{templateUrl:"main/print/print.tpl.html",controller:"PrintCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/customer",{feedBackUrl:"http://eqxiu.com/v/zJuTC6jT",templateUrl:"main/customer.tpl.html",controller:"CustomerCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/main/customer/:sceneId",{templateUrl:"data/editData.tpl.html",controller:"EditDataCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/scene",{templateUrl:"scene/scene.tpl.html",controller:"SceneCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/scene/create/:sceneId",{templateUrl:"scene/create.tpl.html",controller:"CreateSceneCtrl",reloadOnSearch:!1,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/scene/support/",{templateUrl:"scene/support/support.tpl.html",controller:"SupportCtrl",reloadOnSearch:!1}).when("/usercenter/:id",{feedBackUrl:"http://eqxiu.com/v/eWdpV5XU",templateUrl:"usercenter/usercenter.tpl.html",controller:"UserCenterCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/message",{templateUrl:"usercenter/message.tpl.html",controller:"MessageCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/invitation",{templateUrl:"usercenter/console/invitation.tpl.html",controller:"InvitationCtrl",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/show",{templateUrl:"show/index.tpl.html",controller:"ShowCtrl"}).when("/show/active",{templateUrl:"show/active/active.tpl.html",controller:"Active1Ctrl"}).when("/show/active/:id",{templateUrl:"show/active/active-xq.tpl.html",controller:"ActiveXqCtrl"}).when("/show/search/:name",{templateUrl:"show/search/search.tpl.html",controller:"SearchCtrl"}).when("/show/category/:id",{templateUrl:"show/category/category.tpl.html",controller:"CategoryCtrl"}).when("/show/recommend/:category",{templateUrl:"show/recommend/recommend.tpl.html",controller:"RecommendCtrl"}).when("/show/visitor",{templateUrl:"show/visitor/visitor.tpl.html",controller:"VisitorCtrl"}).when("/show/visitor/:id",{templateUrl:"show/visitor/visitor-xq.tpl.html",controller:"VisitorXqCtrl"}).when("/privilege",{templateUrl:"usercenter/tab/privilege.tpl.html",controller:"PrivilegeCtrl"}).when("/region",{templateUrl:"region/region.tpl.html"}).when("/fillscene/:sceneId",{templateUrl:"fillscene/fillscene.tpl.html",controller:"fillSceneCtrl",reloadOnSearch:!0,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/reg/guide/:type",{templateUrl:"regSuccess/guide.tpl.html",controller:"RegGuideCtrl",reloadOnSearch:!0,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/upgrade/:versionType",{templateUrl:"upgrade/upgrade.tpl.html",controller:"upgradeController",reloadOnSearch:!1,resolve:{authenticatedUser:n.requireAuthenticatedUser}}).when("/xdBuy",{templateUrl:"upgrade/upgrade.tpl.html",controller:"upgradeController",resolve:{authenticatedUser:n.requireAuthenticatedUser}}).otherwise({redirectTo:"/home"})}]),angular.module("app").run(["security","$rootScope","configService",function(e,t,n){t.CLIENT_CDN=CLIENT_CDN,t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_SERVER_HOST=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.PREFIX_S3_URL=PREFIX_S3_URL,t.PREFIX_SHOW_HOST=PREFIX_SHOW_HOST,e.requestCurrentUser(),n.getLogo().then(function(e){try{t.logoSrc=e.data}catch(e){t.logoSrc=CLIENT_CDN+"assets/images/eqxiulogo1.svg"}},function(){t.logoSrc=CLIENT_CDN+"assets/images/eqxiulogo1.svg"})}]),angular.module("app").run(["security","$rootScope","configService","$anchorScroll","$location","usercenterService",function(e,t){t.CLIENT_CDN=CLIENT_CDN,t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_SERVER_HOST=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.PREFIX_S3_URL=PREFIX_S3_URL,t.PRINT_HOST_SERVER=PRINT_HOST_SERVER,t.PRINT_HOST_RESOURCE=PRINT_HOST_RESOURCE,e.requestCurrentUser();var n=$(document);t.load2=function(){n.scroll(function(){s=n.scrollTop(),s>100?$(".scroll").css("display","block"):$(".scroll").css("display","none")})},t.appIconDown=!0,t.downApp=function(){t.appIconDown=!1},t.closeDown=function(){t.appIconDown=!0},t.goTop=function(){n.scrollTop(0)},t.$on("$routeChangeSuccess",function(e,n){n.$$route&&(t.feedBackUrl=n.$$route.feedBackUrl)})}]),angular.module("app").run(["$route","$rootScope","$location",function(e,t,n){t.$on("$locationChangeStart",function(){t.branchid&&n.search("branchid",t.branchid),$(".modal").remove(),$(".modal-backdrop").remove()});var i=n.path;n.path=function(a,s){if(!1===s)var o=e.current,r=t.$on("$locationChangeSuccess",function(){e.current=o,r()});return i.apply(n,[a])}}]),angular.module("app").controller("AppCtrl",["$window","$scope","$rootScope","$location","$route","$modal","security","sceneService","$routeParams","$timeout","i18nNotifications","usercenterService","thirdpartyService","$modalStack","$sce","authService",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m,h){function f(e,t,i,a){p.getNewMessage(e,t,i,a).then(function(e){a?(n.sysMsgs=e.data.list,n.sysNewCount=e.data.map.count):(n.newMsgs=e.data.list,n.newMsgCount=e.data.map.count>9?"9+":e.data.map.count)})}var v="https://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime(),b="/upgrade/"===i.path().substring(0,9)||"/xdBuy"===i.path();t.validateCodeUrl=m.trustAsResourceUrl(v),checkBrower()&&(t.isSafari=!0),t.copyUrl=function(){alert("该浏览器不支持复制，请手动选中、复制、粘贴")},t.userXd=0,t.getUserXd=function(){p.getUserXd().then(function(e){t.userXd=e.data.obj||0})},t.$on("userXd",function(){t.getUserXd()}),t.buyXd=function(){s.open({windowClass:"console",templateUrl:"?c=pay",controller:"BuyXdController",resolve:{getUserXd:function(){return function(){t.getUserXd(),n.$broadcast("buyXd")}}}})},n.buyXdQ=t.buyXd,t.openSysMsg=!1,t.openSysMsgDialog=!function(){return sessionStorage.getItem("sysMsgHasRead")}(),t.closeSysMsgDialog=function(){t.openSysMsgDialog=!t.openSysMsgDialog,sessionStorage.setItem("sysMsgHasRead","true")},t.notifications=d,t.removeNotification=function(e){d.remove(e)},e.setValue=function(e){ao=document.getElementById("ngdialog1"),document.body.removeChild(ao),t.thirdpartyLoginParam=e,t.$apply()},t.$watch("thirdpartyLoginParam",function(e){e&&(e.state&&/WECHAT_STATE/.test(e.state)?u.weiChatLogin(e.code).then(function(e){200===e.data.code&&(i.path("main"),o.setLoginSuccess(!0))}):u.qqLogin(e.access_token,e.expires_in))}),t.$on("$locationChangeStart",function(){if(o.isAuthenticated()&&"/home"===i.path()&&i.path("main"),i.search().resetToken){var e=i.search().resetToken;h.showAuth({type:"reset",resetToken:e}).then(function(e){"reset"===e.type&&i.path("/main").search({})})}var t=g.getTop();t&&g.dismiss(t.key)}),t.openAuth=function(e){h.showAuth({type:e}).then(function(e){"registerEnterprise"===e.type?i.path("/reg/guide/company"):"register"===e.type?i.path("/main"):"login"===e.type?b?a.reload():i.path("/main"):"reset"===e.type&&i.path("/main")})},t.isAuthenticated=o.isAuthenticated,i.search().branchid&&(n.branchid=i.search().branchid),n.sysMsgs=[],t.$on("minusCount",function(){f(1,4,!0)}),t.$watch(function(){return o.currentUser},function(e){e&&(t.user=e,n.user=e,t.userProperty=e,t.isEditor=o.isEditor(),n.isEditor=o.isEditor(),t.isAdvancedUser=o.isAdvancedUser(),n.isAdvancedUser=o.isAdvancedUser(),t.isVendorUser=o.isVendorUser(),n.isVendorUser=o.isVendorUser(),t.$broadcast("currentUser",e),o.isAuthenticated()&&(("/home"===i.path()||"/home/login"===i.path())&&i.path("main"),t.getUserXd(),b||(f(1,4,!0,!0),f(1,4,!0))))},!0),t.showBoardsDropdown=function(){t.isProjectsDropdownVisible=!0},t.hideBoardsDropdown=function(){t.isProjectsDropdownVisible=!1};var y=$(document);y.scroll(function(){y.scrollTop()>180?$(".header-contain",y).addClass("head-shadow"):$(".header-contain",y).removeClass("head-shadow")}),t.$watch("branchid",function(){t.hideOpea=!!n.branchid}),t.openReg=function(){s.open({windowClass:"request_contain",templateUrl:"usercenter/request_reg.tpl.html",controller:"UsercenterrequestCtrl",resolve:{}})},t.showToolBar=function(){return i.$$path.indexOf("/scene/create")<0},t.showPanel=function(){$("#helpPanel").stop().animate({right:"0"},500)},t.hidePanel=function(){$("#helpPanel").stop().animate({right:"-120"},500)},t.suggestionUrl="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=45",t.feedbackUrl="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=46",t.qqChatUrl="http://shang.qq.com/wpa/qunwpa?idkey=4a2d63670009360b878aa9a1e1437ef4caec132f74a0e2c4df4a686168cc73dc",t.helpUrl="http://bbs.eqxiu.com/forum.php",t.createSkillUrl="http://bbs.eqxiu.com/forum.php?gid=37",t.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)}}]).filter("fixnum",[function(){return function(e){var t=e;return e>=1e4&&1e8>e?t=(e/1e4).toFixed(1)+"万":e>=1e8&&(t=(e/1e8).toFixed(1)+"亿"),t}}]),angular.module("app").run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="prev eqf-chevron-small-left" ng-click="prev()" ng-show="slides.length > 1"></a>\n    <a class="next eqf-chevron-small-right" ng-click="next()" ng-show="slides.length > 1"></a>\n</div>\n')}]),angular.module("data.edit",["services.usercenter","services.i18nNotifications"]),angular.module("data.edit").controller("EditDataCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","dataService","i18nNotifications",function(e,t,n,i,a,s,o,r,l,c,d){t.sceneId=i.sceneId,t.sexOptions=[{id:1,name:"男"},{id:2,name:"女"}],t.sex=t.sexOptions[0],t.isAllowedToAccessGrouping=s.isAllowToAccess(s.accessDef.GROUP_CUSTOMER);var p=e.branchid,u={};t.getDataDetail=function(){c.getDataDetail(t.sceneId,p).then(function(e){t.dataDetail=e.data.obj,u=e.data.obj,t.groupNames=t.dataDetail.group;var n=t.dataDetail.email,i=t.dataDetail.sex,a=t.dataDetail.mobile,s=t.dataDetail.tel;t.formEmails=n?n.split(","):[""],t.formMobiles=a?a.split(","):[""],t.formTels=s?s.split(","):[""],i&&(t.sex="男"===i?t.sexOptions[0]:t.sexOptions[1])})},"create"!==t.sceneId&&t.getDataDetail(t.sceneId),t.dataDetail||(t.dataDetail={},t.sex=null,t.formEmails=[""],t.formMobiles=[""],t.formTels=[""]),t.updateData=function(e,n){var i=e.name,a={};if("email"===i||"mobile"===i||"tel"===i){a[i]="";var s,o=[];for(s=0;s<n.length;s++)n[s]&&o.push(n[s]);for(s=0;s<o.length-1;s++)a[i]+=o[s]+",";a[i]+=o[s]}else a[i]=t.dataDetail[i];u[i]=a[i]},t.updateSex=function(e){var n={};n.id=t.sceneId,0!==e.id?n.sex=e.name:n.sex="",u.sex=n.sex},t.formEmails=[""],t.formMobiles=[""],t.formTels=[""],t.removeInputs=function(e,n,i){if(i.length>1){if(!i[e])return void i.splice(e,1);i.splice(e,1),t.updateData({name:n},i)}else 1===i.length&&""!==i[0]&&(i[e]="",t.updateData({name:n},i))},t.addInputs=function(e){e.push("")},t.saveData=function(){if(countCharacters(u.name)>50)return void d.pushForCurrentRoute("customer.name.overflow","notify.success");delete u.group,u&&$.each(u,function(e,t){"undefined"===t&&(u[e]=null)});var e="create"===t.sceneId;"create"===t.sceneId&&delete u.id,c.saveData($.param(u),e).then(function(e){e.data.success&&(alert("保存成功"),l.path("/main/customer"))})},t.cancel=function(){l.path("/main/customer")},t.groups=[],t.getGroups=function(){t.groups.length>0||c.getGroups().then(function(e){t.groups=e.data.list},function(){})},t.getGroups(),t.deleteAssociation=function(e,n){var i={cId:e,gId:n};r.openConfirmDialog({msg:"确定解除组关联?"},function(){c.deleteAssociation(i).then(function(e){if(e.data.success)for(var i=0;i<t.groupNames.length;i++)t.groupNames[i].id===n&&t.groupNames.splice(i,1)},function(){alert("服务器异常！")})})},t.addGroup=function(){o.open({windowClass:"group-console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{}}}}).result.then(function(e){t.groups.splice(1,0,e)},function(){})};var g=[];t.assignGroup=function(){for(var e=[],n=0,i=t.groups.length;i>n;n++)if(t.groups[n].selected){g.push(t.groups[n].id);var a={id:t.groups[n].id,name:t.groups[n].name};e.push(a)}if(!g.length)return void alert("您还没有选择分组!");var s={cIds:t.dataDetail.id,gIds:g};c.assignGroup(s).then(function(n){if(n.data.success){m();for(var i=0;i<e.length;i++)if(t.groupNames.length>0)for(var a=0;a<t.groupNames.length&&t.groupNames[a].id!==e[i].id;a++)a===t.groupNames.length-1&&t.groupNames.push(e[i]);else t.groupNames.push(e[i]);d.pushForCurrentRoute("data.assign.success","notify.success")}})},t.deleteGroup=function(e,n){r.openConfirmDialog({msg:"确定删除此分组?"},function(){c.deleteGroup(e.id).then(function(i){if(i.data.success){m(),t.groups.splice(n,1);for(var a=0;a<t.groupNames.length;a++)t.groupNames[a].id===e.id&&t.groupNames.splice(a,1)}},function(){alert("服务器异常")})})};var m=function(){for(var e=0,n=t.groups.length;n>e;e++)t.groups[e].selected=!1}}]),angular.module("bindemail-dialog",[]).controller("BindEmailDialogCtrl",["$scope",function(){}]),angular.module("confirm-dialog",[]).controller("ConfirmDialogCtrl",["$scope","confirmObj",function(e,t){e.confirmObj=t,e.ok=function(){e.$close()},e.cancel=function(){e.$dismiss()}}]),angular.module("message-dialog",[]).controller("MessageDialogCtrl",["$scope","msgObj",function(e,t){e.msgObj=t,e.close=function(){e.$close()},e.cancel=function(){e.$dismiss()}}]),angular.module("error",[]),angular.module("error").controller("ErrorCtrl",["$rootScope","$http","$scope","$timeout","security","$window",function(e,t,n){n.PREFIX_CLIENT_HOST=PREFIX_HOST}]),angular.module("fillscene",[]),angular.module("fillscene").controller("fillSceneCtrl",["$scope","sceneService","pageTplService","dataCacheService","i18nNotifications","$routeParams","$location","$rootScope",function(e,t,n,i,a,s,o,r){function l(){e.editCompList=[],e.showCompList=[],e.textCompList=[],e.picCompList=[],g={};for(var t=e.pageData.elements,n=0;n<t.length;n++){var i=t[n];if(i.properties&&i.properties.setstatus&&4!==i.properties.setstatus&&"4"!==i.properties.setstatus){var a={setlabel:i.properties.setlabel||i.name,content:i.properties.src,descrip:i.properties.setremark,id:i.id,type:i.type,left:parseInt(i.css.left,10),top:parseInt(i.css.top,10),num:i.css.zIndex};4!==i.type&&"4"!==i.type||2===i.properties.setstatus||"2"===i.properties.setstatus?2==i.type&&2!=i.properties.setstatus?(a.content=i.content,e.textCompList.push(a)):(a.checked=!0,e.showCompList.push(a)):e.picCompList.push(a),g[a.id]=i}}if(e.pageData.properties){var s=c(e.pageData.properties);if(s){var o={checked:!0,id:s,type:"eff",setlabel:"特效"};e.showCompList.push(o)}}d(),e.editCompList=e.textCompList.concat(e.picCompList)}function c(e){return e.scratch?"scratch":e.finger?"finger":e.fallingObject?"fallingObject":e.effect?"effect":void 0}function d(){for(var t=0;t<e.textCompList.length;t++){for(var n=0;n<e.textCompList.length-1-t;n++)if(e.textCompList[n].num>e.textCompList[n+1].num){var i=e.textCompList[n];e.textCompList[n]=e.textCompList[n+1],e.textCompList[n+1]=i}e.textCompList[e.textCompList.length-t-1].num=e.textCompList.length-t}for(t=0;t<e.picCompList.length;t++){for(var n=0;n<e.picCompList.length-1-t;n++)if(e.picCompList[n].num>e.picCompList[n+1].num){var i=e.picCompList[n];e.picCompList[n]=e.picCompList[n+1],e.picCompList[n+1]=i}e.picCompList[e.picCompList.length-1-t].num=e.picCompList.length-t}}function p(t){var n=e.pageList[t];$(".phone-view").empty(),e.curPage=n,e.pageNum=t,e.showSetting=!0,e.getPageData(n.id)}function u(t,a,s,o){n.getPageTplTypestemp(t,null,a,s).then(function(t){if(t.data.list&&t.data.list.length>0){e.pageTpls=t.data.list;var n=t.config.url.split("&time")[0];i.contains(n)||(i.push("pageTpl",i.getAsyncUrl(),t),i.setAsyncUrl())}else e.pageTpls=[];o&&o()})}e.sceneId=s.sceneId,e.showSetting=!0,e.pageNum=0,n.getPageTagLabel(11004).then(function(t){if(e.tplList=[],t.data.success)for(var n=0;n<t.data.list.length;n++)e.tplList.push(t.data.list[n].id)}),t.getPageNames(e.sceneId).then(function(t){t.data.success&&(t.data.list&&t.data.list.length?(e.pageList=t.data.list,e.curPage=e.pageList[0],e.getPageData(e.curPage.id)):e.pageList=[])}),e.getPageData=function(n,i,a){t.getSceneByPage(n,i).then(function(n){n.data.success&&(i?a(n.data.obj):(e.pageData=n.data.obj,e.pageData.properties&&e.pageData.properties.longPage?e.pageLen=e.pageData.properties.longPage:e.pageLen=1,t.templateEditor.parse({def:e.pageData,appendTo:".phone-view",mode:"edit"}),l(),e.originData=JSON.stringify(e.pageData),a&&a()))})};var g={};e.sortableOptions={placeholder:"ui-state-highlight ui-sort-position",containment:".fill-left",update:function(n,i){var a=i.item.sortable.dropindex+1,s=e.pageList[i.item.sortable.index].id;t.changePageSort(a,s)}},e.selectPage=function(t){e.pageList[t].id!==e.curPage.id&&e.saveScene(function(){p(t)})},e.replaceTpl=function(t){e.showSetting&&e.tplList&&e.tplList.length&&(e.showSetting=!1,u(e.tplList[0],100,1,t))};var m=!1;e.addPage=function(){m||(m=!0,e.saveScene(function(){e.getPageData(e.curPage.id,!0,function(t){e.pageData=t;var n=e.pageNum+1;e.pageNum++;var i={elements:[],name:"",id:t.id,num:n+1,sceneId:e.sceneId,properties:{}};e.pageData.properties&&e.pageData.properties.longPage?e.pageLen=e.pageData.properties.longPage:e.pageLen=1,e.pageList.splice(n,0,i),e.curPage=i,u(e.tplList[0],100,1,function(){e.pageTpls.length&&e.selectPageTpl(e.pageTpls[0].id,function(){m=!1})})})}))},e.replaceImg=function(e){t.openConsoleModal({type:4},!1,function(t){e.content=t.data},function(){},"fill-console")},e.selectPageTpl=function(n,i){$(".phone-view").empty(),t.getSceneTpl(n).then(function(n){n.data.success&&(e.pageData.elements=t.getElements(),e.curPage.properties||(e.curPage.properties={}),e.pageData.properties||(e.pageData.properties={}),n.data.obj.properties&&n.data.obj.properties.thumbSrc&&(e.curPage.properties.thumbSrc=e.pageData.properties.thumbSrc=n.data.obj.properties.thumbSrc),t.templateEditor.parse({def:e.pageData,appendTo:".phone-view",mode:"edit"}),l(),i&&i())})};var h=!1;e.deletePage=function(n){n.stopPropagation(),h||1!==e.pageList.length&&e.curPage.id&&(h=!0,$(".phone-view").empty(),t.deletePage(e.curPage.id).then(function(t){var n=e.pageNum+1;t.data.success?(e.pageList.length===n?(e.pageList.pop(),e.pageNum--,e.curPage=e.pageList[n-2]):(e.pageList.splice(n-1,1),e.curPage=e.pageList[n-1]),e.getPageData(e.curPage.id,null,function(){h=!1})):alert(t.data.msg)},function(){h=!1}))},e.backset=function(){e.showSetting=!0};var f=!1;e.saveScene=function(n){if(!f){f=!0;for(var i=0;i<e.textCompList.length;i++)g[e.textCompList[i].id].content=e.textCompList[i].content;for(i=0;i<e.picCompList.length;i++)g[e.picCompList[i].id].properties.src=e.picCompList[i].content;for(i=0;i<e.showCompList.length;i++)for(var s=0;s<e.pageData.elements.length;s++)if(!e.showCompList[i].checked){if("eff"===e.showCompList[i].type){delete e.pageData.properties[e.showCompList[i].id];break}if(e.showCompList[i].id===e.pageData.elements[s].id){e.pageData.elements.splice(s,1);break}}return JSON.stringify(e.pageData)===e.originData?(f=!1,void(n?n():o.path("scene/create/"+e.sceneId).search({pageId:1,openSetting:"show"}))):void t.saveScene(e.pageData).then(function(t){return f=!1,t.data.success?(a.pushForCurrentRoute("scene.save.success.published","notify.success"),void(n?n():o.path("scene/create/"+e.sceneId).search({pageId:1,openSetting:"show"}))):void alert("保存失败，服务器忙碌请稍后再试。")},function(){f=!1,alert("保存失败，服务器忙碌请稍后再试。")})}},e.$on("get.file.list",function(t,n){e.curComp.content=n.path}),e.uploadImg=function(t){e.curComp=t},e.backup=function(){r.isFillScene=!0,o.path("/scene")},e.nextPage=function(){e.pageNum!==e.pageList.length-1&&e.saveScene(function(){p(e.pageNum+1)})},e.prePage=function(){0!==e.pageNum&&e.saveScene(function(){p(e.pageNum-1)})}}]).directive("editComponent",[function(){function e(n){for(var i=0;i<t.length;i++)if(Math.abs(t[i].left-n.left)<10&&Math.abs(t[i].top-n.top)<10)return e({left:n.left+10,top:n.top});return n.left<=4?e({left:n.left+5,top:n.top}):(t.push(n),n)}var t=[];return{restrict:"A",scope:{ele:"@",content:"@"},template:'<div class="comp-num"></div>',link:function(n,i,a,s){var o=JSON.parse(a.ele),r=o.type;4===r||"4"===r?$("#inside_"+o.id).css("border","1px solid #44cb83"):($("#inside_"+o.id).css("border","1px solid #08a1ef"),i.find(".comp-num").css({backgroundColor:"#08a1ef"}));var l=e(o);i.css({left:l.left,top:l.top,position:"absolute"}),i.find(".comp-num").text(o.num),n.$watch("content",function(e,t){e!==t&&(2===r||"2"===r?$("#"+o.id).html(e):$("#"+o.id).attr("src",PREFIX_FILE_HOST+e))}),i.on("$destroy",function(){t=[]})}}}]).directive("fillSceneLen",[function(){return{scope:{len:"@"},link:function(e,t,n,i){1!==e.len&&"1"!==e.len&&($(".phone-view").css("height",486*e.len),$(".comp-view").css("height",486*e.len)),e.$watch("len",function(t,n){t!==n&&($(".phone-view").css("height",486*e.len),$(".comp-view").css("height",486*e.len))})}}}]).directive("compShowHide",[function(){return{scope:{eleId:"@",value:"@"},restrict:"A",link:function(e,t,n,i){e.$watch("value",function(t,n){t!==n&&("true"===t?$(".phone-view").find("#inside_"+e.eleId).show():$(".phone-view").find("#inside_"+e.eleId).hide())})}}}]),angular.module("home",["services.sample","app.directives.addelement","services.staticRes","services.scene","app.directives.qrcode","app.directives.loading"]),angular.module("home").controller("HomeCtrl",["$rootScope","$http","$scope","$timeout","security","$window","sceneService","$routeParams","$route","$location","configService","thirdpartyService","staticResService","configSerService","sampleService",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m){n.home70fun=function(){$(".header-fixed").addClass("header-opacity"),$(".header-shadow").hide(),$(".slide").slider({autoRollingTime:1e4,bgSpeed:500,motion:{"a1-1":{left:-384,opacity:0,speed:1e3,delay:500},"a1-2":{left:931,opacity:0,speed:1e3,delay:1e3},"a1-3":{left:1116,opacity:0,speed:1e3,delay:1200},"a1-4":{left:731,opacity:0,speed:1e3,delay:1400},"a2-1":{top:679,opacity:0,speed:1e3,delay:500},"a2-2":{top:679,opacity:0,speed:1e3,delay:800},"a2-3":{left:-1169,opacity:0,speed:1e3,delay:800},"a2-4":{opacity:0,speed:1e3,delay:1200},"a2-5":{opacity:0,speed:1e3,delay:1500},"a2-6":{opacity:0,speed:1e3,delay:1700},"a2-7":{top:559,opacity:0,speed:1e3,delay:1800},"a2-8":{top:559,opacity:0,speed:1e3,delay:2e3},"a2-9":{top:559,opacity:0,speed:1e3,delay:2200},"a2-10":{opacity:0,speed:1e3,delay:2400},"a2-11":{opacity:0,speed:1e3,delay:2600},"a2-12":{top:-60,opacity:0,speed:1e3,delay:2800},"a3-1":{top:679,opacity:0,speed:1e3,delay:200},"a3-2":{left:-200,opacity:0,speed:1e3,delay:1e3},"a3-3":{left:824,opacity:0,speed:1e3,delay:1e3},"a3-4":{left:-94,opacity:0,speed:500,delay:1500},"a3-5":{opacity:0,speed:500,delay:1600},"a3-6":{opacity:0,speed:500,delay:1700},"a3-7":{opacity:0,speed:500,delay:1800},"a3-8":{opacity:0,speed:500,delay:1900},"a3-9":{opacity:0,speed:500,delay:2e3},"a3-10":{opacity:0,speed:500,delay:2100},"a3-11":{opacity:0,speed:500,delay:2200},"a3-14":{opacity:0,speed:1e3,delay:2300},"a3-15":{opacity:0,speed:1e3,delay:2400},"a3-23":{opacity:0,speed:500,delay:2500},"a3-22":{opacity:0,speed:500,delay:2600},"a3-21":{opacity:0,speed:500,delay:2700},"a3-20":{opacity:0,speed:500,delay:2800},"a3-19":{opacity:0,speed:500,delay:2900},"a3-18":{opacity:0,speed:500,delay:3e3},"a3-17":{opacity:0,speed:500,delay:3100},"a3-16":{opacity:0,speed:500,delay:3200},"a3-12":{opacity:0,speed:500,delay:3300},"a3-13":{opacity:0,speed:500,delay:3400},"a4-1":{top:679,opacity:0,speed:1e3,delay:200},"a4-2":{left:-200,opacity:0,speed:1e3,delay:1e3},"a4-3":{left:824,opacity:0,speed:1e3,delay:1e3},"a4-4":{left:-94,opacity:0,speed:500,delay:1500},"a4-5":{left:-60,opacity:0,speed:500,delay:1500},"a5-1":{top:679,opacity:0,speed:1e3,delay:500},"a5-2":{top:679,opacity:0,speed:1e3,delay:800},"a5-3":{left:-1169,opacity:0,speed:1e3,delay:800},"a5-4":{opacity:0,speed:1e3,delay:1200},"a6-1":{top:679,opacity:0,speed:1e3,delay:200},"a6-2":{left:-200,opacity:0,speed:1e3,delay:1e3},"a6-3":{left:824,opacity:0,speed:1e3,delay:1e3},"a6-4":{left:-94,opacity:0,speed:500,delay:1500},end:null}})},n.showCode=!1,n.isAuthenticated=a.isAuthenticated,n.registerMsg={},n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.PREFIX_SERVER_HOST=PREFIX_URL,n.scene||(n.scene={}),n.typeindex="all",n.pageSize=12,n.pageNo=1,n.getHomes=function(e,t,i,a){n.typeindex=e,m.getSamples(t,i,a).then(function(e){n.homes=e.data.list},function(e){})};(function(e){g.getActivityBanner(e).then(function(e){n.homeAd=e.data.list})})("indexAd"),n.sceneTypes=u.getSceneType(),d.getBanner70().then(function(e){console.log("re",e),$("#slides_bgcc").html(e.data.banner_bg),$("#slide_switchcc").html(e.data.slide_switchcc),$("#banner_body").html(e.data.banner_body);var t=setInterval(function(){$("#scenecount").html(parseInt($("#scenecount").html())+150)},10);setTimeout(function(){window.clearInterval(t),$("#scenecount").html(e.data.scenecount)},5e3),n.home70fun()}),d.getMenu70().then(function(e){n.menus=e.data.list}),n.getHomes("all",null,1,12),d.getFriendLinks().then(function(e){n.friendLinks=e.data.list,n.friendLinks.length>15&&(n.friendLinks.length=15)})}]).directive("iframeImgSwitch",function(){return{compile:function(e){(document.documentMode||navigator.userAgent.indexOf("Edge")>0)&&(e.find(".svg-animation").css("display","none"),e.find(".noSvg").css("display","block"))}}}),angular.module("customer.group",["services.data","services.i18nNotifications"]),angular.module("customer.group").controller("AddGroupCtrl",["$rootScope","$scope","dataService","i18nNotifications","sceneCreat",function(e,t,n,i,a){t.group={},t.authError="",a&&(t.group.name=a.name,t.group.id=a.id,t.title=a.title),t.confirm=function(){if(!t.group.name)return void(t.authError="请输入分组名称");if(countCharacters(t.group.name)>12)return void(t.authError="分组名称不能大于12个字符或6个汉字！");var e={name:t.group.name};a&&a.type?t.group.id?n.updateSceneGroup(t.group.id,t.group.name).then(function(){i.pushForCurrentRoute("group.create.success","notify.success"),t.$close({id:t.group.id,name:t.group.name})}):n.createSceneGroup(e).then(function(e){e.data.success&&(i.pushForCurrentRoute("group.create.success","notify.success"),t.$close({id:e.data.obj,name:t.group.name}))}):n.createGroup(e).then(function(e){e.data.success&&(i.pushForCurrentRoute("group.create.success","notify.success"),t.$close({id:e.data.obj,name:t.group.name}))})},t.cancel=function(){t.$dismiss()}}]),angular.module("main.transferScene",["services.usercenter"]),angular.module("main.transferScene").controller("TransferSceneCtrl",["$scope","$rootScope","sceneService","sceneId","dataCacheService","ModalService",function(e,t,n,i,a,s){e.model={toUser:"",toPlatform:0,actionerrorFlag:!1},e.selectPlatform=function(t){e.model.toPlatform=t},e.transferScene=!0,e.confirm=function(){return e.model.toUser?0===e.model.toPlatform&&e.model.toUser===t.user.loginName?(e.actionerror="不能转送自己",void(e.model.actionerrorFlag=!0)):(0===e.model.toPlatform?e.notification="转赠后将不再拥有原场景,建议备份后再转赠":e.notification="转赠后同时保留此场景",void s.openConfirmDialog({msg:e.notification,confirmName:"确定",cancelName:"取消"},function(){n.transferScene(i.sceneId,e.model.toUser,e.model.toPlatform).then(function(t){200===t.data.code||"200"===t.data.code?(a.clear("sceneList"),e.transferScene=!1):s.openMsgDialog({msg:t.data.msg})})})):(e.actionerror="账号不能为空",void(e.model.actionerrorFlag=!0))},e.cancel=function(){e.$dismiss()},e.submit=function(){e.$close()}}]),angular.module("main.data",["app.directives.dataDraggable","customer.group","services.i18nNotifications","app.directives.customer"]),angular.module("main.data").controller("CustomerCtrl",["$rootScope","$scope","$route","$location","$timeout","dataService","$modal","ModalService","i18nNotifications","security","$modal",function(e,t,n,i,a,s,o,r,l,c,o){t.PREFIX_URL=PREFIX_URL,t.isActive="customer",t.select=0,t.showBranchSelect=!0;var d=e.branchid;t.toPage=1,t.model={},t.dataShow="message",s.getCustomDatas(d),t.$on("customDatas",function(e,n){t.customCount=n}),t.customer={group:null,origin:null},t.branchEdit=!0,t.branchDelete=!0,t.branchExport=!0,a(function(){(21===t.user.type||"21"===t.user.type||51===t.user.type||"51"===t.user.type)&&(t.user.extPermi?(/^([\d,]+,)?1(,[\d,]*)?$/.test(t.user.extPermi)?t.branchEdit=!0:t.branchEdit=!1,/^([\d,]+,)?2(,[\d,]*)?$/.test(t.user.extPermi)?t.branchDelete=!0:t.branchDelete=!1,/^([\d,]+,)?3(,[\d,]*)?$/.test(t.user.extPermi)?t.branchExport=!0:t.branchExport=!1):(t.branchEdit=!1,t.branchDelete=!1,t.branchExport=!1))},100),t.downLoad=function(e,t){var n;n=PREFIX_S3_URL+"index.php?c=custom&a=exp"+(d?"?user="+d:""),t&&(n+=(/\?/.test(n)?"&":"?")+"origin="+t),e&&(n+=(/\?/.test(n)?"&":"?")+"groupId="+e),location.href=n},t.staticFileds=[],t.staticFileds=[{id:"name",name:"姓名"},{id:"mobile",name:"手机"},{id:"email",name:"邮箱"},{id:"sex",name:"性别"},{id:"company",name:"公司"},{id:"job",name:"职位"},{id:"address",name:"地址"},{id:"tel",name:"电话"},{id:"website",name:"个人网站"},{id:"qq",name:"QQ"},{id:"weixin",name:"微信"},{id:"remark",name:"其他"}],t.selectScene=function(e,n){t.selectedSceneId=e,s.getSceneField(e).then(function(e){t.fields=e.data.list,t.select=n,$(".list_attribute").html("拖拽到此处")})},t.clickScene=function(){i.path("main")},t.clickSpread=function(){i.path("main/spread")},t.clickCustomer=function(){i.path("main/customer")},t.editCustomer=function(e){t.getDataDetail(e.id),t.editData=!0},t.removeCustomer=function(e){r.openConfirmDialog({msg:"确定删除此条数据?"},function(){s.deleteDataById(e.id).then(function(e){(200===e.data.code||"200"===e.data.code)&&l.pushForCurrentRoute("custom.data.delete","notify.success"),1===t.customerDatas.length&&t.model.currentPage>1?t.getDataBySceneId(t.model.currentPage-1,d,t.groupId,t.origin):t.getDataBySceneId(t.model.currentPage,d,t.groupId,t.origin),s.getCustomDatas(d)})})},t.addColor=function(e){t.trIndex=e},t.removeColor=function(){t.trIndex=-1},t.totalItems=0,t.model.currentPage=0,t.toPage="",t.pageChanged=function(e,n,i,a){return 1>e||e>t.totalItems/10+1?void alert("此页超出范围"):(t.model.currentPage=e,void t.getDataBySceneId(e,n,i,a))},t.getDataBySceneId=function(e,n,i,a){e||(e=1),i&&(t.groupId=i),a&&(t.origin=a),s.getAllData(e,n,i,a).then(function(e){t.customerDatas=e.data.list,t.totalItems=e.data.map.count,t.model.currentPage=e.data.map.pageNo,t.toPage="",t.totalNum=Math.ceil(t.totalItems/e.data.map.pageSize)})},t.getDataBySceneId(1,d,null,null),t.editCustom=function(e){i.path("/main/customer/"+e.id)};(function(){s.getDataMessage(d).then(function(e){t.dataMessage=e.data.list})})(),t.sceneLoad=function(e){var t=PREFIX_S3_URL+"index.php?c=scenedata&a=excel&flag=noheader&id="+e+(d?"&user="+d:"");location.href=t},t.importDatas=function(){s.getPremergeScenes(d).then(function(e){t.importDatas=e.data.list,e.data.list.length>0&&t.selectScene(e.data.list[0].ID,0)})},t.associateData={};var p=!0;if(t.confirm=function(){p?jQuery.isEmptyObject(t.associateData,{})?(alert("请导入数据！"),p=!0):(s.mergeSceneData(t.selectedSceneId,t.associateData).then(function(){alert("你已成功导入客户！"),n.reload()}),p=!1):alert("请不要重复提交！")},t.importDatas(),t.isAllowedToAccessGrouping=c.isAllowToAccess(c.accessDef.GROUP_CUSTOMER),t.isAllowedToAccessGrouping){t.allImages={selected:!1},t.selectAll=function(){for(var e=0,n=t.customerDatas.length;n>e;e++)t.customerDatas[e].selected=t.allImages.selected},t.selectCustomer=function(e){e.selected||(t.allImages.selected=!1)},t.groups=[],t.getGroups=function(){t.groups.length>0||s.getGroups(d).then(function(e){t.groups=e.data.list})},t.getGroups(),t.getOrigins=function(){s.getOrigin(d).then(function(e){t.origins=e.data.list},function(){})},t.getOrigins(),t.addGroup=function(){o.open({windowClass:"group-console console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{}}}}).result.then(function(e){t.groups.push(e),h(),l.pushForCurrentRoute("group.create.success","notify.success")})};var u=[],g=[];t.assignGroup=function(){u=[],g=[];for(var e=0,n=t.customerDatas.length;n>e;e++)t.customerDatas[e].selected&&u.push(t.customerDatas[e].id);for(e=0,n=t.groups.length;n>e;e++)t.groups[e].selected&&g.push(t.groups[e].id);if(!u.length)return void alert("您还没有选择客户!");if(!g.length)return void alert("您还没有选择分组!");var i={cIds:u,gIds:g};s.assignGroup(i).then(function(e){e.data.success&&(h(),t.allImages.selected=!1,m(),l.pushForCurrentRoute("data.assign.success","notify.success"))},function(){})},t.deleteCustomer=function(e){u=[];var n,i;if(e)n={ids:e.id},i="确定删除此条数据?";else{for(var a=0,o=t.customerDatas.length;o>a;a++)t.customerDatas[a].selected&&u.push(t.customerDatas[a].id);if(!u.length)return void alert("您还没有选择客户!");n={ids:u},i="确定删除此条数据?"}r.openConfirmDialog({msg:i},function(){s.deleteCustomer(n).then(function(e){e.data.success&&(t.allImages.selected=!1,m(),h(),l.pushForCurrentRoute("data.delete.success","notify.success"))},function(){alert("服务器异常")})})},t.deleteGroup=function(e,n){r.openConfirmDialog({msg:"确定删除此分组?"},function(){s.deleteGroup(e.id).then(function(e){e.data.success&&(t.groups.splice(n,1),h(),l.pushForCurrentRoute("group.delete.success","notify.success"))},function(){alert("服务器异常")})})};var m=function(){1===t.customerDatas.length&&t.model.currentPage>1?t.getDataBySceneId(t.model.currentPage-1):t.getDataBySceneId(t.model.currentPage)},h=function(){for(var e=0,n=t.groups.length;n>e;e++)t.groups[e].selected=!1}}t.createData=function(){i.path("main/customer/create")},t.sceneData=function(){t.dataShow="dataIn"},t.uploadData=function(){o.open({windowClass:"login-container six-contain",templateUrl:"main/uploadData.tpl.html",controller:"uploadDataCtrl",resolve:{}}).result.then(function(e){e&&t.getDataBySceneId(1,d,null,null)})},t.$watch("model.currentPage",function(e,n){e&&e!=n&&(t.model.toPage=e)},!0)}]).filter("propsFilter",function(){return function(e,t){var n=[];if(angular.isArray(e)){var i=Object.keys(t);e.forEach(function(e){for(var a=!1,s=0;s<i.length;s++){var o=i[s],r=t[o].toLowerCase();if(-1!==e[o].toString().toLowerCase().indexOf(r)){a=!0;break}}a&&n.push(e)})}else n=[];return n}}),angular.module("main",["main.print.shop","services.mine","services.data","app.directives.pageTplTypes","services.staticRes","app.directives.addelement","main.data","main.print","main.print.ads","main.transferScene","services.usercenter","main.userGuide","services.i18nNotifications","common.directives.scroll","main.newVersionFrame","main.data.uploadData","scene.create.console.font"]),angular.module("main").controller("MainCtrl",["$rootScope","$scope","$location","security","MineService","dataService","sceneService","ModalService","$modal","usercenterService","i18nNotifications","configSerService","$filter","staticResService","$timeout","dataCacheService","$route","storageService","fontService","guideService",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m,h,f,v,b,y){function w(e){b.checkBoughtFonts(e).then(function(t){if(200===t.data.code||"200"===t.data.code){if(t.data.list&&t.data.list.length){var n=t.data.list,i='场景中使用的<span class="color-blue">'+n.join()+"</span>字体仅限当前账号使用，一经转赠，受赠人需要重新购买字体后方可使用，是否继续转赠？";return void r.openConfirmDialog({msg:i,confirmName:"确认",cancelName:"取消"},function(){x(e)})}x(e)}else x(e)},function(t){x(e)})}function x(e){l.open({windowClass:"six-contain",templateUrl:"main/console/transferscene.tpl.html",controller:"TransferSceneCtrl",resolve:{sceneId:function(){return{sceneId:e}}}}).result.then(function(){t.getMyScenes()},function(){t.getMyScenes()})}function S(e){var n,i="确定删除此场景?";if(2===t.currentUser.type||"2"===t.currentUser.type||21===t.currentUser.type||"21"===t.currentUser.type){if(t.currentUser.memberType)switch(t.currentUser.memberType){case 1:case 2:case 3:case 4:n=3;break;case 6:case 7:n=7;break;case 8:case 9:n=15}else 5===t.currentUser.type||"5"===t.currentUser.type||51===t.currentUser.type||"51"===t.currentUser.type?n=15:1!==t.currentUser.type&&"1"!==t.currentUser.type&&(n=3);i+="删除后，该场景将在回收站保留"+n+"天"}r.openConfirmDialog({msg:i},function(){a.deleteSceneById(e).then(function(e){e.data.success?(1===t.myScenes.length&&t.currentPage>1&&t.currentPage--,s.getDatas(C),t.getMyScenes(t.currentPage,P.name)):alert(e.data.msg)})})}t.PREFIX_URL=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.client_cdn=CLIENT_CDN,t.scene={type:null},t.pageSize=12;t.isActive="main",t.loginSuccess=i.isLoginSuccess,t.myScene=!0,t.allPageCount=0;var T={};t.userType=i.currentUser.type,t.currentUser=i.currentUser,-1!==[1,2,5,21,51].indexOf(t.currentUser.type)&&(t.companyType=!0),t.currentTpl={exemplarPreview:!1},t.createScene=function(e,n){if((1===t.userType||"1"===t.userType)&&n)return void r.openConfirmDialog({msg:"免费升级企业会员可使用 会员专属场景",confirmName:"免费升级",cancelName:"再看看"},function(){window.open("/#/privilege")});if(e&&e.price){var i=e.disCountPrice||parseFloat(e.price)||0,a={tplPrice:i,userXd:t.userXd,scene:e};-1!==[7,8,9].indexOf(t.user.memberType)&&-1!==[2,21].indexOf(t.user.type)?a.bFlagMember=!0:a.bFlagMember=!1,l.open({windowClass:"login-container six-contain",templateUrl:"scene/buySample.tpl.html",controller:"SceneBuySample",resolve:{buySampleObject:function(){return a}}}).result.then(function(t){l.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return t}}})})}else l.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return null}}})};var C=e.branchid;t.initShowGuide=!0;var C=e.branchid;y.newVersionFrameFn(),t.XdpageSize=100,t.getBranches=function(e){c.getBranches(t.XdpageSize,e).then(function(e){e.data.success&&(t.branches=e.data.list)})},(2===i.currentUser.type||"2"===i.currentUser.type||5===i.currentUser.type||"5"===i.currentUser.type||(21===i.currentUser.type||"21"===i.currentUser.type)&&e.userPermit.indexOf(",1405,")>=0)&&t.getBranches(1),e.branchid?(t.switchChild=!1,"my"!==t.sceneList&&(t.sceneList="my",window.localStorage&&(T[i.currentUser.id]=t.sceneList,localStorage.setItem("sceneTab",JSON.stringify(T))))):t.switchChild=!0,t.selectBranch=function(i){i?(t.branchCurrent=i,e.branchid=i.id,n.search({branchid:i.id}),t.switchChild=!1):(e.branchid="",n.search("branchid",null)),f.reload()};var k=n.search().branchid;m(function(){if(k)for(var e=0;e<t.branches.length;e++)t.branches[e].id===k&&(t.branchCurrent=t.branches[e])},300),t.showSceneList=function(){t.initShowGuide=!1,e.$broadcast("eqmain.overflow.visible")},t.editScene=function(e,t,i){return e&&e.stopPropagation(),1===i.isExpedited||"1"===i.isExpedited?void r.openMsgDialog({msg:"该场景已在加急审核中，暂时无法编辑场景，请耐心等待",btn:"确认"}):void(30===i.bizType||"30"===i.bizType?l.open({windowClass:"seven-contain",templateUrl:"main/mobileTansform.tpl.html"}).result.then(function(){n.path("scene/create/"+t).search("pageId",1)}):n.path("scene/create/"+t).search("pageId",1))},t.showPreview=function(e,n){var i=t.url+"/v/"+n.code;return C?void window.open(i):void(n.publishTime?n.publishTime&&n.updateTime>n.publishTime?r.openConfirmDialog({msg:"场景有更新需要再次发布才能预览最新内容，坚持预览会看到修改之前的场景",confirmName:"发布",cancelName:"坚持预览"},function(){t.publishScene(e,n)},function(){e&&e.stopPropagation(),window.open(i)}):(e&&e.stopPropagation(),window.open(i)):r.openConfirmDialog({msg:"尚未发布场景无法预览，请先发布",confirmName:"发布",cancelName:"取消"},function(){t.publishScene(e,n)}))},window.localStorage&&"false"===localStorage.getItem("myScenesListType")?t.listType=!1:t.listType=!0,t.listToggle=function(){t.listType=!t.listType,("system"===t.sceneList||"sample"===t.sceneList)&&(t.listType=!0),window.localStorage&&localStorage.setItem("myScenesListType",t.listType)},t.addColor=function(e){t.trIndex=e},t.removeColor=function(){t.trIndex=-1},t.sceneSettings=function(e,t,i){return 1===i.isExpedited||"1"===i.isExpedited?void r.openMsgDialog({msg:"该场景已在加急审核中，暂时无法设置场景，请耐心等待",btn:"确认"}):(e&&e.stopPropagation(),void(30===i.bizType||"30"===i.bizType?l.open({windowClass:"seven-contain",templateUrl:"main/mobileTansform.tpl.html"}).result.then(function(){n.path("scene/create/"+t).search({pageId:1,openSetting:"show"})}):n.path("scene/create/"+t).search({pageId:1,openSetting:"show"})))},t.clickScene=function(){n.path("main")},t.clickSpread=function(){n.path("main/spread")},t.creatCompanyTpl=function(e,n,i){e&&e.stopPropagation(),o.createCompanyTpls(n).then(function(e){e.data.success&&(t.myScenes[i].isTpl=3,d.pushForCurrentRoute("scene.save.success.companyTpl","notify.success"))})},t.clearCompanyTpl=function(e,n,i){e&&e.stopPropagation(),o.clearCompanyTpls(n).then(function(e){e.data.success&&(t.myScenes[i].isTpl=0,d.pushForCurrentRoute("scene.clear.success.companyTpl","notify.success"))})},t.clickCustomer=function(){n.path("main/customer")},t.register=i.getRegisterInfo(),t.logout=function(){i.logout()},t.copyScene=function(e,t){e&&e.stopPropagation(),r.openConfirmDialog({msg:"确定复制此场景?"},function(){o.copySceneById(t).then(function(e){(200===e.data.code||"200"===e.data.code)&&n.path("scene/create/"+e.data.obj).search("pageId",1)})})},t.isAllowedToAccessTransfer=i.isAllowToAccess(i.accessDef.TRANSFER_SCENE),t.isAllowedToAccessTransfer&&(t.transferScene=function(e,t,n){return e&&e.stopPropagation(),1===n||0===n?void d.pushForCurrentRoute("transfer.scene.guarantee","notify.success"):void w(t)}),t.getStyle=function(e){return{"background-image":"url("+PREFIX_FILE_HOST+e+")","background-size":"cover"}},t.totalItems=0,t.page={currentPage:1},t.toPage="",t.name=null,t.EnterPress=function(e,n){var i=e||window.event;(13===i.keyCode||"13"===i.keyCode)&&t.submit(n)},t.searchButton=!0;var E={},P={};t.submit=function(e){P.name=e,t.name=e,a.getMyScenes(t.scene.type?t.scene.type.value:null,1,t.pageSize,C,e,null,P.groupId),e&&(t.searchButton=!1),E.refresh=!0},t.changeName=function(e){t.searchButton=!0,""===e&&E.refresh&&(P.name=e,a.getMyScenes(t.scene.type?t.scene.type.value:null,1,t.pageSize,C,e,null,P.groupId))},t.clearSearch=function(){P.name="",t.searchButton=!0,t.name="",a.getMyScenes(t.scene.type?t.scene.type.value:null,1,t.pageSize,C,null,null,P.groupId)},t.getMyScenes=function(e,n){"myScene"===n&&(P.groupId=null),a.getMyScenes(t.scene.type?t.scene.type.value:null,e,t.pageSize,C,P.name,null,P.groupId)},t.$on("get.my.scene.list",function(){var n=a.scenes;t.canvasUrl=PREFIX_SHOW_HOST,"group"!==L&&"my"!==t.sceneList&&(t.sceneList="my"),n.list&&n.list.length>0?(t.myScenes=n.list,t.totalItems=n.map.count,t.page.currentPage=n.map.pageNo,t.toPage=n.map.pageNo,e.user&&e.user.domain?(t.url="http://"+e.user.domain,t.canvasUrl=PREFIX_SHOW_HOST):t.url=PREFIX_SHOW_HOST):(t.totalItems=0,t.currentPage>1?t.getMyScenes(--t.currentPage):t.myScenes=[])}),t.switchList=function(e){t.sceneList=e,("system"===e||"sample"===e)&&(t.listType||t.listToggle()),window.localStorage&&(T[i.currentUser.id]=t.sceneList,localStorage.setItem("sceneTab",JSON.stringify(T)))};var I={},_={};t.getNewSample=function(n){a.getNewSample().then(function(i){if(200===i.data.code||"200"===i.data.code)if(window.localStorage){if(localStorage.getItem("guid")&&JSON.parse(localStorage.getItem("guid"))[e.user.id]){var a=JSON.parse(localStorage.getItem("guid"));a[e.user.id]!==i.data.obj.guid&&(t.guid=!0,I[e.user.id]=i.data.obj.guid,"recommend"===n&&(t.guid=!1,localStorage.setItem("guid",JSON.stringify(I))))}else I[e.user.id]=i.data.obj.guid,localStorage.setItem("guid",JSON.stringify(I));if(localStorage.getItem("comp")&&JSON.parse(localStorage.getItem("comp"))[e.user.id]){var s=JSON.parse(localStorage.getItem("comp"));s[e.user.id]!==i.data.obj.comp&&(t.comp=!0,_[e.user.id]=i.data.obj.comp,"company"===n&&(t.comp=!1,localStorage.setItem("comp",JSON.stringify(_))))}else _[e.user.id]=i.data.obj.comp,localStorage.setItem("comp",JSON.stringify(_))}else I[e.user.id]=i.data.obj.guid,_[e.user.id]=i.data.obj.comp,window.localStorage&&(localStorage.setItem("guid",JSON.stringify(I)),localStorage.setItem("comp",JSON.stringify(_)))})},t.getNewSample(),t.canvasSampleUrl=PREFIX_SHOW_HOST,t.getSysScene=function(){a.getSysRecommend(1)},t.$on("get.getSysRecommend.list",function(e,n){if(n.list.length>0){t.myScenes=n.list;for(var i=0;i<t.myScenes.length;i++)t.myScenes[i].avatar&&(0===t.myScenes[i].avatar.indexOf("http://")?t.myScenes[i].avatar=t.myScenes[i].avatar:t.myScenes[i].avatar=PREFIX_FILE_HOST+t.myScenes[i].avatar)}else t.myScenes=[]}),t.getCompanyScene=function(){a.getCompanySample(i.currentUser.id,1,12)},t.$on("get.company.sample.scene",function(e,n){t.myScenes=n.list,t.page.currentPage=n.map.pageNo,t.totalItems=n.map.count,t.toPage=n.map.pageNo;for(var i=0;i<t.myScenes.length;i++)t.myScenes[i].avatar&&(0===t.myScenes[i].avatar.indexOf("http://")?t.myScenes[i].avatar=t.myScenes[i].avatar:t.myScenes[i].avatar=PREFIX_FILE_HOST+t.myScenes[i].avatar)}),t.currentGroup={},t.currentGroup.currentName="我的场景",t.currentGroup.activeName="my",t.currentNameGroup=function(e,n){t.currentGroup.clickName=e,t.currentGroup.currentName=e,t.currentGroup.currentId=n,t.currentGroup.activeName=n,t.currentGroup.clickId=n,0===n||"0"===n?(t.getGroupScene(0),t.switchList(0),t.currentGroup.activeName=0,t.currentGroup.currentName="未分组",t.currentGroup.currentId="0",t.currentGroup.clickName="",t.currentGroup.clickId="0"):n?(t.getGroupScene(n,"group"),t.switchList(n)):(t.getMyScenes(1,"myScene"),t.switchList("my"),t.currentGroup.activeName="my",t.currentGroup.currentName="我的场景",t.currentGroup.currentId=null,t.currentGroup.clickName=null,t.currentGroup.clickId=null)},t.$watch("sceneList",function(e,n){e!==n&&t.sceneList!==t.currentGroup.activeName&&(t.currentGroup.clickId="20160114yqxlyx")},!0);var L;if(t.getGroupScene=function(e){L="group",P.groupId=e,t.page.currentPage=1,a.getMyScenes(t.scene.type?t.scene.type.value:null,1,12,C,P.name,null,e)},m(function(){a.getMyGroup(i.currentUser.id),t.$on("get.my.group",function(e,n){t.groups=n,t.groups.length>0&&(t.showWeiGroup=!0)})},300),e.firstLoginGuide)t.sceneList="system",t.getSysScene(),e.firstLoginGuide=!1;else if(window.localStorage)if(localStorage.getItem("sceneTab")){try{T=JSON.parse(localStorage.getItem("sceneTab"))}catch(e){T=localStorage.getItem("sceneTab")}"string"==typeof T?(T={},t.sceneList="my",t.getMyScenes()):(t.sceneList=JSON.parse(localStorage.getItem("sceneTab"))[i.currentUser.id],t.sceneList?"my"===t.sceneList?t.currentNameGroup():"system"===t.sceneList?t.getSysScene():"sample"===t.sceneList?t.getCompanyScene():m(function(){t.$on("get.my.group",function(e,n){t.groups=n;for(var i=0;i<t.groups.length;i++)t.groups[i].id===t.sceneList&&t.currentNameGroup(t.groups[i].groupName,t.sceneList)})}):t.currentNameGroup())}else t.currentNameGroup();t.addGroup=function(e){return t.groups&&t.groups.length>=5?void r.openMsgDialog({msg:"创建分组不能超过5个"}):void l.open({windowClass:"group-console console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{type:!0}}}}).result.then(function(n){t.groups.push({groupName:n.name,id:n.id}),n&&(t.showWeiGroup=!0,e&&t.moreGroup(n.id,e,null,"sceneList")),d.pushForCurrentRoute("group.create.success","notify.success")})},t.manageGroupName=!1,t.manageGroup=function(){t.manageGroupName=!t.manageGroupName},t.showGroud=!1,t.$watch("showGroud",function(){!0===t.manageGroupName&&(t.showGroud=!1)}),t.editGroup=function(e,n){l.open({windowClass:"group-console console",templateUrl:"main/console/group.tpl.html",controller:"AddGroupCtrl",resolve:{sceneCreat:function(){return{type:!0,name:n,id:e,title:"修改分组名称"}}}}).result.then(function(e){for(var n=0;n<t.groups.length;n++)e.id===t.groups[n].id&&(t.groups[n].groupName=e.name,t.currentGroup.currentId===e.id&&(t.currentGroup.currentName=e.name,t.currentGroup.currentId=e.id,t.currentGroup.clickName=e.name));d.pushForCurrentRoute("group.edit.success","notify.success")})},t.deleteGroup=function(e,n){r.openConfirmDialog({msg:"删除后，分组下的场景将移动至未分组下",confirmName:"确定",cancelName:"取消"},function(){a.deleteGroup(e,n),t.currentNameGroup()})},t.$on("delete.my.group",function(e,n){t.groups.splice(n,1),t.groups.length>0?t.showWeiGroup=!0:t.showWeiGroup=!1,d.pushForCurrentRoute("group.delete.success","notify.success")}),t.moreGroup=function(e,n,i,s){return P.groupId===e?void r.openMsgDialog({msg:"此场景已在该分组内"}):void a.moveGroupScene(e,n).then(function(n){if(200===n.data.code||"200"===n.data.code){if(s)return t.switchList(e),void t.getGroupScene(e,"group");var i=parseInt(P.groupId,10);i>=0&&i!==e&&a.getMyScenes(t.scene.type?t.scene.type.value:null,t.currentPage,12,C,P.name,null,P.groupId),d.pushForCurrentRoute("group.scene.success","notify.success")}})},t.deleteScene=function(e,t,n){return e&&e.stopPropagation(),1===n||0===n?void d.pushForCurrentRoute("delete.scene.guarantee","notify.success"):void S(t)},t.pageChanged=function(e){return 1>e||e>t.totalItems/10+1?void alert("此页超出范围"):(t.currentPage=e,void("sample"===t.sceneList?a.getCompanySample(i.currentUser.id,e,t.pageSize):t.getMyScenes(e,P.name)))},t.getTdStyle=function(e){var t=$(".header_table td:eq("+e+")").outerWidth();return{width:t+"px",maxWidth:t+"px"}},t.scene.types=g.getSceneType(),t.dataDetail={},s.getDatas(C),s.getCustomDatas(C),t.$on("sceneDatas",function(e,n){t.datasCount=n}),t.$on("customDatas",function(e,n){t.customCount=n}),t.showDetail=function(t){var n="promotion/share/"+t+"/socialShare";e.branchid&&(n+="?branchid="+e.branchid),window.open(n,"_self")},t.showStatistics=function(t){var n="promotion/statistics/"+t;e.branchid&&(n+="?branchid="+e.branchid),window.open(n,"_self")},t.showData=function(t){var n="promotion/dataCollect/"+t;e.branchid&&(n+="?branchid="+e.branchid),window.open(n,"_self")},t.publishScene=function(e,n){if(e&&e.stopPropagation(),!n.name)return void r.openMsgDialog({msg:"尚未设置标题，请设置后再执行此操作",btn:"去设置"},function(){t.sceneSettings(e,n.id,n)});var i=window.open();1===n.staticStatus?r.openConfirmDialog({msg:"场景已经静态化,发布后不能及时更新,确定更改吗",confirmName:"确定",cancelName:"取消"},function(){o.publishScene(n.id).then(function(e){if(e.data.success){n.publishTime=(new Date).getTime(),d.pushForCurrentRoute("scene.publish.success","notify.success");var a=t.url+"/v/"+n.code;i.location=a}})},function(){}):o.publishScene(n.id).then(function(e){if(e.data.success){n.publishTime=(new Date).getTime(),d.pushForCurrentRoute("scene.publish.success","notify.success");var a=t.url+"/v/"+n.code;i.location=a}})},t.canvasUrlStatic=VIP_HOST,t.openPreview=function(e){t.currentTpl.exemplarPreview=!0,t.currentTpl.tpl=e}}]).directive("selectPicker",function(){return{restrict:"EA",link:function(e,t){t.selectpicker()}}}),angular.module("main.newVersionFrame",[]),angular.module("main.newVersionFrame").controller("newVersionFrame",["$scope",function(e){e.cancel=function(){e.$dismiss()}}]),angular.module("main.print.ads",["common.resources.print"]).controller("AdsCtrl",["$scope","printResource",function(e,t){t.getAds(),e.$on("ads.get",function(t,n){var i=localStorage.getItem("main_print_ads"),a=n.list.map(function(e){return e.id}).sort(function(e,t){return e-t}).join("");return e.adsList=n.list,e.showArrow=!0,e.adsList.length?(e.adsList.length<2&&(e.showArrow=!1),e.showAds=!i||i!=a,void(e.showAds&&window.localStorage.setItem("main_print_ads",a))):void(e.showAds=!1)})}]).directive("eqdRepeatLast",function(){return function(e,t,n){e.$last&&e[n.eqdRepeatLast]()}}).directive("eqdAds",function(){function e(e,t){var n=t.find(".items"),i=n.width(),a=0,s=null;n.css({height:i/2,marginTop:-i/4,marginLeft:-i/2}),e.repeatOver=function(){a=e.adsList.length,s=t.find(".items ul"),s.css({width:i*a}),s.find("li").css({width:i}),s.find("img").css({maxHeight:i/2})};var o=0;e.toggle=function(e){"left"==e?0>=o?o=a-1:--o:o>=a-1?o=0:++o,s.css({transform:"translate(-"+i*o+"px)"})},e.close=function(){t.css({display:"none"})}}return{restrict:"E",templateUrl:"main/print/ads.tpl.html",controller:"AdsCtrl",replace:!0,link:e}}),angular.module("print.common.directives.preview",["common.resources.print"]).directive("eqdPreview",["printResource","ModalService",preview]),angular.module("main.print.affirmPrint",["common.resources.print"]).controller("AffirmPrintCtrl",["$rootScope","$scope","printResource","printId","i18nNotifications",function(e,t,n,i,a){var s=t.picker={coverArr:[]},o=1682;n.getPrintDetail(i),t.$on("printDetail.get",function(e,t){$.each(t.pages,function(e,t){s.coverArr.push({cover:t.cover,checked:!1,pageId:t.id,version:t.version})}),t.shopId&&(o=t.shopId)}),t.confirm=function(){var e=[],n=[],i=!1;$.each(s.coverArr,function(t,a){if(a.checked){if(!a.cover)return i=!0,!1;e.push(a.pageId),n.push(a.version)}}),i?a.pushForCurrentRoute("print.shop.images.fail","notify.success"):e.length>2?a.pushForCurrentRoute("print.images.number","notify.success"):e.length?t.$close({pagesId:e.join(","),sVersion:"1"+n.join(""),shopId:o}):a.pushForCurrentRoute("print.images.null","notify.success")},t.cancel=function(){t.$dismiss()}}]),angular.module("main.print.applyTpl",["common.resources.print"]).controller("ApplyTplCtrl",["$rootScope","$scope","printResource","printId",function(e,t,n,i){t.showTips=!1,t.$on("print.apply",function(e,n){"success"==n&&(t.showTips=!0)}),t.confirm=function(){n.applyTpl(i),e.$broadcast("affirm.apply",i)},t.cancel=function(){t.$close()}}]),angular.module("main.print.define",["common.resources.print","print.directives.validate"]).controller("DefineCtrl",["$scope",function(e){e.size={type:"",width:"",height:"",unit:"mm"},e.$watch("size.unit",function(t){var n=$(".eqc-define input"),i=parseInt(e.size.width,10),a=parseInt(e.size.height,10);"mm"==t?(n.attr("maxlength","3"),e.size.width=i?(i/300*25.4).toFixed():"",e.size.height=a?(a/300*25.4).toFixed():""):"px"==t&&(n.attr("maxlength","4"),e.size.width=i?(i/25.4*300).toFixed():"",e.size.height=a?(a/25.4*300).toFixed():"")}),e.confirm=function(){var t=/^[1-9]\d*$/;return t.test(e.size.width)&&t.test(e.size.height)?void e.$close(e.size):void alert("请输入有效的尺寸信息")},e.cancel=function(){e.$dismiss()}}]),angular.module("main.print.saveToH5",["common.resources.print"]).controller("SaveToH5Ctrl",["$rootScope","$scope","printResource","printId","i18nNotifications",function(e,t,n,i,a){var s=t.picker={isAllCheck:!0,coverArr:[]};t.scenePicGroup=-1,t.isSave=!1,t.showTips=!1,n.getPrintDetail(i),t.$on("printDetail.get",function(e,t){$.each(t.pages,function(e,t){/\.(png|jpg|jpeg|gif)$/.test(t.cover)?s.coverArr.push({cover:t.cover,tmbCover:t.properties.coverTmp,checked:!0}):s.coverArr.push({cover:t.cover,tmbCover:t.cover,checked:!0})})}),n.getScenePicGroup(),t.$on("scenePic.group.get",function(e,n){t.picGroupList=n}),t.selectAll=function(){s.isAllCheck?$.each(s.coverArr,function(e,t){t.checked=!0}):$.each(s.coverArr,function(e,t){t.checked=!1})},t.changeItem=function(){t.isSave=!1},t.saveLocation=function(e){t.scenePicGroup=e},t.$on("saveToH5.success",function(){t.showTips=!0,window.sessionStorage.removeItem("fileService")}),t.confirm=function(){var e=[],i=!1;$.each(s.coverArr,function(t,n){if(n.checked){if(!n.cover)return i=!0,!1;var a=n.cover.split("/"),s=a[a.length-1],o=s.split(".");if(/\.(png|jpg|jpeg|gif)$/.test(n.cover)){var r=o[o.length-1];e.push({name:Date.now()+"."+r,extName:r,path:n.tmbCover,tmbPath:n.cover})}else e.push({name:n.cover,extName:"png",path:n.tmbCover,tmbPath:n.cover})}}),i?a.pushForCurrentRoute("print.scene.images.fail","notify.success"):e.length?(window.localStorage.setItem("print_scene_images_update","true"),n.saveToH5(t.scenePicGroup,e)):t.isSave=!0},t.$watch("picker.coverArr",function(){var e=s.coverArr.filter(function(e){return!1===e.checked});s.isAllCheck=!e.length},!0),t.cancel=function(){t.$dismiss()}}]),angular.module("main.print.transfer",["common.resources.print"]).controller("TransferPrintCtrl",["$scope","$rootScope","$routeParams","$location","printResource","printId",function(e,t,n,i,a,s){e.model={toUser:""},e.showTips=!1,e.confirm=function(){return e.model.toUser?e.model.toUser==t.user.loginName?void(e.activeError="不能转送给当前用户"):(a.transferPrint(s,e.model.toUser),void e.$on("print.transfer",function(n,i,s){"success"==i?(e.showTips=!0,a.getPrintList(t.currentPage,t.worksPageSize,t.printType)):e.activeError=s.msg})):void(e.activeError="账号不能为空")},e.cancel=function(){e.$close()}}]),angular.module("main.print",["main.print.template","main.print.mine","main.print.create","print.common.directives.preview"]).controller("PrintCtrl",["$scope","$rootScope","$location","printResource","$routeParams","$modal",function(e,t,n,i,a,s){e.tabView=a.tab,e.isActive="print",e.getStyle=function(e,t){return{backgroundImage:"url("+(e?PREFIX_FILE_HOST+e+"?imageMogr2/auto-orient/thumbnail/"+t+"x"+t+"/strip":CLIENT_CDN+PRINT_HOST_RESOURCE+"images/design_c.png")+")"}},e.showTab=function(a,s){a.stopPropagation(),"mine"==s&&i.getPrintList(1,t.worksPageSize),n.path("/main/print/"+s,!1),e.tabView=s},e.add=function(e,t,n,a){var s={type:e,width:t,height:n,unit:a||"px"};"mm"==a&&$.extend(s,{width:(parseFloat(t)/25.4*300).toFixed(),height:(parseFloat(n)/25.4*300).toFixed()});var o=window.open("","_blank");i.addPrint(s).then(function(e){var t=e.obj;o.location.href="print/create/"+t.id})},e.define=function(){s.open({windowClass:"six-contain",templateUrl:"main/print/dialog/define.tpl.html",controller:"DefineCtrl"}).result.then(function(t){e.add("0",t.width,t.height,t.unit)})}}]).directive("eqdPrintList",["$scope",function(){}]),angular.module("main.print.create",["main.print.define","common.resources.print"]).controller("PrintCreateCtrl",[function(){$(document).scrollTop(0)}]).directive("eqdCreate",[function(){function e(){}return{restrict:"E",templateUrl:"main/print/tab/create.tpl.html",controller:"PrintCreateCtrl",replace:!0,link:e}}]),angular.module("main.print.hotZone",["common.resources.print"]).controller("HotZoneCtrl",["$scope","printResource",function(e,t){t.getHotList(),e.$on("hotList.get",function(t,n){var i=n.obj;e.hotList0=i[0],e.hotList1=i[1],e.hotList2=i[2]}),e.copyHotItem=function(e){window.open("print/copyTpl/"+e,"_blank")}}]).directive("eqdHotZone",[function(){return{restrict:"E",templateUrl:"main/print/tab/hotZone.tpl.html",controller:"HotZoneCtrl",scope:!0,replace:!0}}]),angular.module("main.print.mine",["main.print.works","main.print.order"]).controller("MineCtrl",["$scope",function(e){e.showContent=!0,e.getContent=function(t){e.showContent="works"==t}}]).directive("eqdMine",[function(){function e(e,t,n){}return{restrict:"E",scope:!0,templateUrl:"main/print/tab/mine.tpl.html",controller:"MineCtrl",replace:!0,link:e}}]),angular.module("main.print.order",["common.resources.print"]).controller("OrderCtrl",["$scope","$rootScope","printResource",function(e,t,n){function i(t,i,a){n.getOrderInfo(t,i,a).then(function(t){e.orderList=t.list,e.totalItems=t.map.count,e.currentPage=t.map.pageNo,e.allPageCount=t.map.count,e.toPage=t.map.pageNo})}var a=[],s=e.count={all:"0",nonPayment:"0",completed:"0",cancel:"0"};n.getOrderCount().then(function(e){var t=e.list;if(t.length){var n=0;t.forEach(function(e,t,i){switch(e.status){case 0:s.nonPayment=e.count;break;case 3:s.completed=e.count;break;case-1:s.cancel=e.count}n+=e.count}),s.all=n.toString()}}),n.getOrderInfo(1,8,"all").then(function(t){a=e.orderList=t.list,e.currentStatus="all",e.totalItems=t.map.count,e.currentPage=t.map.pageNo,e.allPageCount=t.map.count,e.toPage=t.map.pageNo}),e.pageChanged=function(t){return 1>t||t>e.totalItems/8+1?void alert("此页超出范围"):(i(t,8,e.currentStatus),void(e.currentOrderPage=t))},e.getOrderList=function(t){e.currentStatus=t,i(1,8,t)},e.getDetails=function(e,t){var i=window.open("","_blank");n.getDetailsURL(e,t).then(function(e){if(e&&e.map){var t=e.map;window.localStorage.setItem("print_shop_url",t.url),window.localStorage.setItem("print_shop_data",t.data),i.location.href="main/print/printShop"}})}}]).directive("eqdOrder",[function(){function e(e,t,n){}return{restrict:"E",templateUrl:"main/print/tab/order.tpl.html",controller:"OrderCtrl",scope:!0,replace:!0,link:e}}]),angular.module("main.print.template",["main.print.tplSort","main.print.hotZone","common.resources.print"]).controller("TemplateCtrl",["$rootScope","$scope","printResource",function(e,t){t.selected="hot",t.showList=!1,t.getList=function(e){switch(e){case"hot":t.showList=!1,t.selected="hot";break;case"tpl":t.showList=!0,t.selected="tpl"}}}]).directive("eqdTemplate",[function(){function e(){}return{restrict:"E",templateUrl:"main/print/tab/template.tpl.html",controller:"TemplateCtrl",scope:!0,replace:!0,link:e}}]),angular.module("main.print.tplSort",["common.resources.print","common.resources.print.template"]).controller("TplSortCtrl",["$rootScope","$scope","printResource","templateResource",function(e,t,n,i){var a=n.getAllTypes(),s=a.length-1,o="",r=n.getTplTypes().onlineMarketing,l=n.getTplTypes().adPrint;t.typeObj=null,t.activeTpl=1,t.getTplList=function(a){switch(a){case 1:n.getTemplateList(1,12),e.tplType=null,t.typeObj=null,t.tagCategory=null,t.activeTpl=1;break;case 2:t.typeObj=r,t.tagCategory=null,t.activeTpl=2,t.activeType="8",o="8",i.getTagCategory(8),t.activeTag="0",n.getTemplateList(1,12,8,0);break;case 3:t.typeObj=l,t.tagCategory=null,t.activeTpl=3,t.activeType="5",o="5",i.getTagCategory(5),t.activeTag="0",n.getTemplateList(1,12,5,0)}},t.getTypeList=function(a){t.activeType=a,n.getTemplateList(1,12,parseInt(a,10)),o=e.tplType=parseInt(a,10),i.getTagCategory(a),t.activeTag="0"},t.$on("TagCategory.get",function(e,n){(t.tagCategory=n.list).unshift({name:"全部",value:"0"})}),t.getTagList=function(e){t.activeTag=e,n.getTemplateList(1,12,parseInt(o,10),parseInt(e,10))},n.getTemplateList(e.currentTplPage,12,e.tplType),t.$on("templateList.get",function(e,n){var i=t.templateList=n.list,a=i.length;t.tplTotalItems=n.map.count,t.currentTplPage=n.map.pageNo,t.allPageCount=n.map.count,t.toPage=n.map.pageNo;for(var s=0;a>s;s++)i[s].avatar&&0!==i[s].avatar.indexOf("http://")&&(i[s].avatar=PREFIX_FILE_HOST+i[s].avatar)}),t.pageTplChanged=function(i){return 1>i||i>t.tplTotalItems/12+1?void alert("此页超出范围"):(n.getTemplateList(i,12,e.tplType),void(e.currentTplPage=i))},t.addTemplate=function(e,t,i,a,s,o){var r={type:e,width:t,height:i,unit:a||"px"};"mm"==a&&$.extend(r,{width:(parseFloat(t)/25.4*300).toFixed(),height:(parseFloat(i)/25.4*300).toFixed()});var l=window.open("","_blank");n.addPrint(r).then(function(e){var t=e.obj;l.location.href="print/template/"+t.id+"/"+o+"/"+s})},t.intoTemplate=function(e,n,i){if(9==e)window.open("print/copyTpl/"+i,"_blank");else for(var o=0;s>o;o++)a[o].value==e&&t.addTemplate(e,a[o].width,a[o].height,a[o].unit,n,i)}}]).directive("eqdTplSort",function(){return{restrict:"E",templateUrl:"main/print/tab/tplSort.tpl.html",controller:"TplSortCtrl",replace:!0}}),angular.module("main.print.works",["main.print.affirmPrint","main.print.saveToH5","main.print.applyTpl","main.print.transfer","common.resources.print","services.dataCache"]).controller("WorksCtrl",["$rootScope","$scope","printResource",function(e,t,n){var i={};t.printTypes=n.getAllTypes(),e.worksPageSize=12;var a=n.getTplTypes().onlineMarketing,s=n.getTplTypes().adPrint;t.typeOfWorks=null,t.activeWorksType=1,t.getWorksList=function(i){switch(i){case 1:t.typeOfWorks=null,t.activeWorksType=1,e.printType=null,n.getPrintList(e.currentPage,e.worksPageSize,e.printType);break;case 2:t.typeOfWorks=a,t.activeWorksType=2,e.printType="8",n.getPrintList(e.currentPage,e.worksPageSize,e.printType);break;case 3:t.typeOfWorks=s,t.activeWorksType=3,e.printType="5",n.getPrintList(e.currentPage,e.worksPageSize,e.printType)}},n.getPrintList(e.currentPage,e.worksPageSize,e.printType),t.getPrintList=function(t){var i=t||null;n.getPrintList(1,e.worksPageSize,i),e.printType=i},t.$on("printList.get",function(e,n){i=t.printList=n.list,t.totalItems=n.map.count,t.currentPage=n.map.pageNo,t.allPageCount=n.map.count,t.toPage=n.map.pageNo}),t.pageChanged=function(i){return 1>i||i>t.totalItems/e.worksPageSize+1?void alert("此页超出范围"):(n.getPrintList(i,e.worksPageSize,e.printType),void(e.currentPage=i))},t.$on("print.delete",function(){n.getPrintList(e.currentPage,e.worksPageSize,e.printType)}),t.$on("print.copy",function(){n.getPrintList(1,e.worksPageSize,e.printType)}),t.$on("affirm.apply",function(e,t){for(var n=i.length,a=0;n>a;a++)i[a].id==t&&(i[a].isTpl=2)})}]).directive("eqdWorks",["$rootScope","ModalService","printResource","$modal","i18nNotifications",function(e,t,n,i,a){function s(e){e.delete=function(e){t.openConfirmDialog({msg:"确定删除此作品?"},function(){n.deletePrint(e)})},e.copy=function(e){n.copyPrint(e)},e.transfer=function(e){i.open({windowClass:"six-contain",templateUrl:"main/print/dialog/transferPrint.tpl.html",controller:"TransferPrintCtrl",resolve:{printId:function(){return e}}})},e.applyTpl=function(e,t){t||i.open({windowClass:"six-contain",templateUrl:"main/print/dialog/applyTpl.tpl.html",controller:"ApplyTplCtrl",resolve:{printId:function(){return e}}})},e.setPrint=function(e){window.open("print/set/"+e,"_blank")},e.saveToH5=function(e,t){return 9==t?void window.open("print/gifSaveToH5/"+e,"_blank"):void i.open({windowClass:"eight-contain",templateUrl:"main/print/dialog/saveToH5.tpl.html",controller:"SaveToH5Ctrl",resolve:{printId:function(){return e}}})},e.affirmPrint=function(e,t){return 2==t||3==t?void a.pushForCurrentRoute("print.images","notify.success"):void i.open({windowClass:"eight-contain",templateUrl:"main/print/dialog/affirmPrint.tpl.html",controller:"AffirmPrintCtrl",resolve:{printId:function(){return e}}}).result.then(function(t){var i=window.open("","_blank");n.getPngPrint(e,t.shopId,t.pagesId,t.sVersion).then(function(e){var t=e.map;window.localStorage.setItem("print_shop_url",t.url),window.localStorage.setItem("print_shop_data",t.data),i.location.href="main/print/printShop"})},function(){})}}return{restrict:"E",templateUrl:"main/print/tab/works.tpl.html",controller:"WorksCtrl",scope:!0,replace:!0,link:s}}]).filter("printType",function(){return function(e){switch(e){case 0:return"自定义";case 1:return"名片";case 2:return"邀请函";case 3:return"贺卡";case 4:return"海报";case 5:return"宣传单";case 6:return"淘宝商品主图";case 7:return"微信公众号首图";case 8:return"长图";case 9:return"GIF动图"}}}).filter("statusFilter",function(){return function(e){switch(e){case 0:return"申请模板";case 1:return"已通过";case 2:case 3:return"申请中";case-1:return"未通过"}}}).filter("statusColorFilter",function(){return function(e){switch(e){case 0:return"#fff";case 1:return"#44cb83";case 2:case 3:return"#08a1ef";case-1:return"#ff5448"}}}).filter("statusBgFilter",function(){return function(e){return 0===e?"#08a1ef":"#eee"}}).filter("isOnline",function(){return function(e){switch(e){case 0:case 6:case 7:case 8:case 9:return!0;case 1:case 2:case 3:case 4:case 5:return!1}}}),angular.module("main.print.shop",[]).controller("PrintShopCtrl",[function(){}]).directive("eqdPrintShop",[function(){function e(e,t,n){var i=window.localStorage.getItem("print_shop_url"),a=window.localStorage.getItem("print_shop_data"),s=$("#order_form"),o=$("#hidden_data");s.attr("action",i),o.attr("value",a),s.submit(),window.localStorage.removeItem("print_shop_url"),window.localStorage.removeItem("print_shop_data")}return{restrict:"A",replace:!0,scope:!0,link:e}}]),angular.module("main.data.uploadData",["services.usercenter","services.i18nNotifications"]),angular.module("main.data.uploadData").controller("uploadDataCtrl",["$rootScope","$scope","uploaderService","ModalService",function(e,t,n,i){t.uploader=n.uploader("8"),t.$on("thumbnailList.update",function(e,n){for(var a=0;a<t.uploader.queue.length;a++)100==t.uploader.queue[a].progress&&(i.openMsgDialog({msg:n,btn:"确定"}),t.$close("true"))}),t.$on("upload.fail",function(e,n){i.openMsgDialog({msg:n,btn:"确定"}),t.$dismiss()}),t.cancel=function(){t.$dismiss()}}]),function(){angular.module("main.userGuide",["usercenter.relAccount"]).controller("userGuideCtrl",["$rootScope","$scope","dateFilter",function(e,t){var n;if(window.localStorage){var i=JSON.parse(localStorage.getItem("loginInfo"));i&&i[e.user.id]?!i.isShow||t.user.checkEmail?t.firstLogin=!1:sessionStorage.getItem("emailGuide")?t.firstLogin=!1:(i.isShow=!0,n=!0,t.firstLogin=!0):(t.firstLogin=!0,i=i||{},i[e.user.id]=1,i.isShow=!0,localStorage.setItem("loginInfo",JSON.stringify(i)))}t.currentGuide="bindEmailGuide",t.showNextGuide=function(){sessionStorage.setItem("emailGuide","true"),n?t.firstLogin=!1:(t.currentGuide="createGuide",t.firstLogin=!0)};var a=0;t.showGuide=function(){"createGuide"===t.currentGuide&&(t.firstLogin=1==++a)},t.isShow=function(){if(window.localStorage){var e=JSON.parse(localStorage.getItem("loginInfo"));e.isShow=!e.isShow,localStorage.setItem("loginInfo",JSON.stringify(e))}}}])}(),angular.module("scene.my.upload",["angularFileUpload"]),angular.module("scene.my.upload").controller("UploadCtrl",["$scope","FileUploader","fileService","category","$timeout","$interval",function(e,t,n,i,a,s){e.category=i;var o;o=e.category.scratch||e.category.headerImage||e.category.companyImg?e.uploader=new t({url:PREFIX_URL+"index.php?c=upfile&a=upload&bizType="+i.categoryId+"&fileType="+i.fileType,withCredentials:!0,queueLimit:1,onSuccessItem:function(t,n,i,a){function o(){s.cancel(r),alert("上传完毕"),e.$close(n.obj.path)}e.progressNum=0;var r=s(function(){e.progressNum<100?e.progressNum+=15:o()},100)}}):e.uploader=new t({url:PREFIX_URL+"index.php?c=upfile&a=upload&bizType="+i.categoryId+"&fileType="+i.fileType,withCredentials:!0,queueLimit:5,onCompleteAll:function(){function t(){s.cancel(n),alert("上传完毕"),e.$close()}e.progressNum=0;var n=s(function(){e.progressNum<100?e.progressNum+=15:t()},100)}}),i.limitSize=i.limitSize||3145728;var r,l=i.limitSize;"0"==i.fileType||"1"==i.fileType?r="|jpg|png|jpeg|bmp|gif|svg+xml|":("2"==i.fileType||"4"==i.fileType)&&(r="|mp3|mpeg|"),o.filters.push({name:"imageFilter",fn:function(e,t){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!==r.indexOf(n)}}),o.filters.push({name:"imageSizeFilter",fn:function(e,t){var n=e.size;return n>=l&&alert("上传文件大小限制在"+l/1024/1024+"M以内"),l>n}}),o.filters.push({name:"fileNameFilter",fn:function(e,t){return e.name.length>50&&alert("文件名应限制在50字符以内"),e.name.length<=50}}),e.removeQueue=function(){}}]),angular.module("reg",[]),angular.module("reg").controller("TestLoginCtrl",["$rootScope","$scope",function(e,t){t.weiChatUrl="https://open.weixin.qq.com/connect/qrconnect?appid=wxc5f1bbae4bb93ced&redirect_uri=http://www.hjtmt.com/testlogin.html&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect"}]),angular.module("applyCompany",["services.usercenter","services.i18nNotifications"]),angular.module("applyCompany").controller("ApplyCompanyCtrl",["$rootScope","$scope","security","$sce","usercenterService","i18nNotifications","$routeParams","$timeout","validateService","$location",function(e,t,n,i,a,s,o,r,l,c){function d(){0===u?(t.isCodeAccessiable=!1,t.codeTip="",u=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+u+")",r(function(){u--,d()},1e3))}config.product="popup";var p="https://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime();t.validateCodeUrl=i.trustAsResourceUrl(p),t.companyInfo={id:n.currentUser.id},t.userMobile=n.currentUser.checkPhone,t.checkName=function(e){return e.name?countCharacters(e.name)>40?(t.nameError="企业名称不能超过40个字符",!1):(t.nameError="",!0):(t.nameError="请填写企业名称",!1)},t.checkEmail=function(e){var n=l.checkEmail(e.email);return t.emailError=n,!n},t.checkcontacts=function(e){return e.contacts?countCharacters(e.contacts)>30?(t.contactsError="联系人不能超过30个字符",!1):(t.contactsError="",!0):(t.contactsError="请填写联系人",!1)},t.checkAddress=function(e){return e.address?countCharacters(e.address)>50?(t.addressError="联系地址不能超过50个字符",!1):(t.addressError="",!0):(t.addressError="请填写联系地址",!1)},t.checkCode=function(e){return e.code?(t.codeError="",!0):(t.codeError="请输入手机验证码",!1)},t.getImageCode=function(){challenge&&validate&&seccode&&t.getCode()},t.getCode=function(){var e=t.companyInfo;if(!e.mobile)return challenge=null,validate=null,seccode=null,t.telError="请填写手机号码",!1;t.telError="";var n={phone:e.mobile,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};a.companyMobile(n).then(function(e){challenge="",validate="",seccode="",e.data.success?d():t.telError=e.data.msg})};var u=60;t.checkFormFormat=function(e){return!(!(t.checkName(e)&&t.checkEmail(e)&&t.checkcontacts(e)&&t.checkAddress(e))||1!==t.userMobile&&!t.checkCode(e))},t.upgradeCompanyMessage=function(i){t.checkFormFormat(i)&&a.saveCompanyInfo(i,!0).then(function(a){if(a.data.success)if(n.currentUser.type=2,e.$broadcast("companyState"),t.changeLocation)s.pushForCurrentRoute("account.success","notify.success"),e.$broadcast("upgrade",i.mobile);else if(localStorage.getItem("upgradeUrl")){var o=localStorage.getItem("upgradeUrl");localStorage.removeItem("upgradeUrl"),c.path(o)}else e.$broadcast("regSuccess");else t.codeError=a.data.msg})}}]),angular.module("regGuide",["services.usercenter","services.i18nNotifications","applyCompany","services.guide"]),angular.module("regGuide").controller("RegGuideCtrl",["$rootScope","$scope","security","$sce","usercenterService","i18nNotifications","$routeParams","$timeout","guideService","upgradeAccountService",function(e,t,n,i,a,s,o,r,l,c){t.type=o.type,"person"===t.type&&l.newVersionFrameFn(),t.verson=[{name:"企业基础版",price:"3000",time:"元/每年",decoration:"享受企业专属模板<br />享受企业专属CDN加速<br />赠送10个企业子账号<br />赠送10次去Logo底标<br />访问数据分析",type:"7"},{name:"企业标准版",price:"6800",time:"元/每年",decoration:"享受企业专属模板<br />享受企业专属CDN加速<br />赠送50个企业子账号<br />赠送50次去Logo底标<br />访问及分享数据分析<br />访客画像分析",type:"8"},{name:"企业高级版",price:"15600",time:"元/每年",decoration:"享受企业专属模板<br />享受企业专属CDN加速<br />赠送100个企业子账号<br />赠送200次去Logo底标<br />访问及分享数据分析<br />访客画像分析<br />传播层级分析",type:"9"}],t.$on("regSuccess",function(){t.regSuccess=!0,l.newVersionFrameFn()}),t.upgradeCompany=function(e){c.upgradeAccountFunc(e)}}]).directive("eqdRegCompany",[function(){return{restrict:"AE",templateUrl:"regSuccess/console/applyComMes.tpl.html",controller:"ApplyCompanyCtrl",scope:{changeLocation:"="}}}]),angular.module("scene.buy.sample",[]),angular.module("scene.buy.sample").controller("SceneBuySample",["$scope","$rootScope","sceneService","buySampleObject","ModalService",function(e,t,n,i,a){e.modal=i,e.modal.bFlagMember&&n.getUserNum(e.modal.scene).then(function(t){200===t.data.code?t.data.obj>=0&&(e.modal.sampleCount=t.data.obj):a.openMsgDialog({msg:t.data.msg})}),e.confirm=function(){if(e.modal.sampleType=parseInt(e.modal.sampleType,10),1===e.modal.sampleType){if(0===e.modal.sampleCount)return void a.openMsgDialog({msg:"当前免费使用次数不足,请选择其他方式使用"})}else if(e.modal.tplPrice>e.modal.userXd)return void a.openConfirmDialog({msg:"秀点余额不足",confirmName:"立即购买",cancelName:"取消"},function(){t.buyXdQ()});e.$close(e.modal.sampleType)},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console",["scene.create.console.bg","scene.create.console.map","scene.create.console.input","scene.create.console.radio.checkbox","scene.create.console.rating","scene.create.console.counter","scene.create.console.linkComponent","scene.create.console.button","scene.create.console.setting","scene.create.console.tel","scene.create.console.fake","scene.create.console.pictures1","scene.create.console.sound","scene.create.console.soundComponent","scene.create.console.micro","scene.create.console.link","scene.create.console.video","scene.create.console.category","scene.create.console.imageCrop","scene.create.console.cropImage","scene.create.console.cropSound","scene.pageeffect.console","scene.create.console.scene-setting-component","scene.create.console.shape","scene.create.console.randomevent","scene.create.console.statistics","scene.create.console.font"]),angular.module("scene.create.console").controller("ConsoleCtrl",["$scope",function(){}]),angular.module("scene.create.console").directive("autofocus",function(){return function(e,t){setTimeout(function(){t.focus().select()},400)}}).directive("checkCount",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,n,i){var a=parseInt(n.checkCount,10);i.$viewChangeListeners.push(function(){if(countCharacters(i.$modelValue)>a){var e=i.$modelValue.replace(/[^\x00-\xff]/g,"xx"),t=e.substring(0,a).replace(/xx/g,"中").length;i.$setViewValue(i.$modelValue.substring(0,t)),i.$render()}})}}}),angular.module("scene.create.console.setting.anim",["app.directives.uislider","app.directives.limitInput"]),angular.module("scene.create.console.setting.anim").controller("AnimConsoleCtrl",["$scope","$rootScope","sceneService","security",function(e,t,n,i){function a(n,i){var a={anim:n,animClasses:p,count:i,elemId:e.elemDef.id,elemDef:e.elemDef};t.$broadcast("previewCurrentChange",a)}function s(n,i){var a={animations:n,animClasses:i,count:d,elemId:e.elemDef.id,elemDef:e.elemDef};t.$broadcast("previewAllChanges",a)}var o,r,l=e.elemDef=n.currentElemDef;if(l.properties.anim)for(o=0;o<l.properties.anim.length;o++)(33===l.properties.anim[o].type||"33"===l.properties.anim[o].type)&&(l.properties.anim[o].type=0),(32===l.properties.anim[o].type||"32"===l.properties.anim[o].type)&&(l.properties.anim[o].type=10);e.animations=[],e.types=[],e.directions=[];var c,d,p=[];e.animTypeEnum=[{id:-1,name:"无"},{id:"typer",name:"文本：打字机",cat:"特殊"},{id:0,name:"淡入",cat:"进入"},{id:1,name:"移入",cat:"进入"},{id:2,name:"弹入",cat:"进入"},{id:20,name:"翻转进入",cat:"进入"},{id:3,name:"中心弹入",cat:"进入"},{id:4,name:"中心放大",cat:"进入"},{id:12,name:"翻滚进入",cat:"进入"},{id:24,name:"翻开进入",cat:"进入"},{id:13,name:"光速进入",cat:"进入"},{id:26,name:"魔幻进入",cat:"进入"},{id:27,name:"缩小进入",cat:"进入"},{id:31,name:"旋转进入",cat:"进入"},{id:6,name:"摇摆",cat:"强调"},{id:5,name:"抖动",cat:"强调"},{id:7,name:"旋转",cat:"强调"},{id:8,name:"翻转",cat:"强调"},{id:9,name:"悬摆",cat:"强调"},{id:23,name:"闪烁",cat:"强调"},{id:29,name:"下滑",cat:"强调"},{id:30,name:"上滑",cat:"强调"},{id:21,name:"放大抖动",cat:"强调"},{id:22,name:"倾斜摆动",cat:"强调"},{id:10,name:"淡出",cat:"退出"},{id:17,name:"移出",cat:"退出"},{id:19,name:"弹出",cat:"退出"},{id:11,name:"翻转消失",cat:"退出"},{id:14,name:"中心消失",cat:"退出"},{id:18,name:"中心缩小",cat:"退出"},{id:15,name:"翻滚退出",cat:"退出"},{id:25,name:"翻开消失",cat:"退出"},{id:16,name:"光速退出",cat:"退出"},{id:28,name:"放大退出",cat:"退出"}];var u=[23,24,25];if(!i.isAllowToAccess(i.accessDef.COMP_ANIMATION))for(o=0;o<e.animTypeEnum.length;o++)for(r=0;r<u.length;r++)e.animTypeEnum[o].id===u[r]&&(e.animTypeEnum.splice(o,1),o--);if(e.animDirectionEnum=[{id:0,name:"从左向右"},{id:1,name:"从上到下"},{id:2,name:"从右向左"},{id:3,name:"从下到上"}],l.properties.anim)if(l.properties.anim instanceof Array){if(l.properties.anim.length)for(o=0;o<l.properties.anim.length;o++)if(null!==l.properties.anim[o].type&&-1!==l.properties.anim[o].type&&"-1"!==l.properties.anim[o].type){for(e.animations.push(l.properties.anim[o]),r=0,tlen=e.animTypeEnum.length;r<tlen;r++)e.animations[o].type===e.animTypeEnum[r].id&&(e.types[o]=e.animTypeEnum[r]);for(r=0,tlen=e.animDirectionEnum.length;r<tlen;r++)e.animations[o].direction===e.animDirectionEnum[r].id&&(e.directions[o]=e.animDirectionEnum[r])}else l.properties.anim.splice(o,1),o--}else{for(o=0;o<e.animTypeEnum.length;o++)e.animTypeEnum[o].id===l.properties.anim.type&&(e.types[0]=e.animTypeEnum[o]);null!==l.properties.anim.direction?e.directions[0]=e.animDirectionEnum[l.properties.anim.direction]:e.directions[0]=e.animDirectionEnum[0],l.properties.anim.duration=parseFloat(l.properties.anim.duration),l.properties.anim.delay=parseFloat(l.properties.anim.delay),l.properties.anim.countNum=parseInt(l.properties.anim.countNum,10)||1,e.animations.push(l.properties.anim)}l.properties||(l.properties={});var g={type:null,direction:null,duration:2,delay:0,countNum:1,interval:0,count:null,interval:0};e.addAnim=function(t){if(!t.originalEvent._constructed){var n=angular.copy(g);n.type=e.animTypeEnum[0].id,n.direction=e.animDirectionEnum[0].id,e.animations.push(n);var i=e.animations.length;e.types[i-1]=e.animTypeEnum[0],e.directions[i-1]=e.animDirectionEnum[0]}},e.removeAnim=function(t,n){n.stopPropagation(),e.animations.splice(t,1),e.types.splice(t,1),e.directions.splice(t,1)},e.clear=function(){e.animations=[]},e.$watch("animations",function(t,n){t!==n&&(l.properties.anim=e.animations)},!0),e.$watch("types",function(t,n){if(t&&t!==n)for(var i=0;i<t.length;i++)n[i]&&t[i].id!==n[i].id&&a(e.animations[i],i)},!0),e.$watch("directions",function(t,n){if(t&&t!==n)for(var i=0;i<t.length;i++)n[i]&&t[i].id!==n[i].id&&a(e.animations[i],i)},!0),e.previewAnim=function(t){if(!t.originalEvent||!t.originalEvent._constructed){for(var n=angular.copy(e.animations),i=[],a=[],o=0;o<n.length;o++)null!==n[o].type&&-1!==n[o].type&&"-1"!==n[o].type?(i.push(n[o]),a[o]=eqxCommon.convertType(n[o])):(n.splice(o,1),o--);d=0,s(i,a)}},e.$on("formatAnim",function(t,n){n&&(e.animations=n,e.previewAnim(t))}),e.changeAnimation=function(t,n){return"typer"===t.type&&2!==e.elemDef.type&&"2"!==e.elemDef.type?(alert("当前选择仅适用于文本组件！"),e.types[n]=e.animTypeEnum[0],void(t.type=-1)):(c=eqxCommon.convertType(t),void(p[n]=c))}}]),angular.module("scene.create.console.bg",["services.file","scene.my.upload","app.directives.responsiveImage","app.directives.rightclick","services.file.upload","services.i18nNotifications","app.directives.autoclose"]),angular.module("scene.create.console.bg").controller("BgConsoleCtrl",["$scope","$timeout","$rootScope","$interval","$modal","ModalService","sceneService","fileService","localizedMessages","obj","uploaderService","i18nNotifications","security","dataCacheService",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g){function m(){e.$watch("imgList",function(t){for(var n=0;n<t.length;n++){if(t[n].selected)return void(e.mangeObj.manageAll=!0);e.mangeObj.manageAll=!1}},!0)}function h(){e.systemImages=!1,e.userTagId="",e.sysCatId="",r.getUserFiles1(1,v,f,null,e.userTagId)}var f=e.fileType=1;e.imgType=c.fileType,e.type=c.type,c.elemDef&&(e.bFlagType=c.elemDef.type),3!=e.bFlagType&&(c.longPage=1);var v;e.currentPage=1,e.systemImages=!0,e.isAllowedHistory=u.isAllowToAccess(u.accessDef.USERCENTER_HISTORY),e.toPage=1,e.mangeObj={manageAll:!1},e.showObj={showGroup:!1},v=e.pageSize=18,("p"==e.type||"n"==e.type)&&(e.mangeObj.manageAll=!0),e.switchToSystemImages=function(t){e.systemImages="true"===t,"false"==t&&(e.sysTagId="")};var b=function(e){r.getSysCategory(e)},y=function(e,t,n,i,a){r.getSystemFiles1(e,t,n,i,a)};if(e.getSystemFiles=function(){e.mangeObj.manageAll=!1,window.localStorage&&("1"==e.fileType?localStorage.setItem("photoTag",""):localStorage.setItem("backgroundTag","")),e.userTagId="","3"==e.bFlagType?e.sysCatId="1301":e.sysCatId="101",e.sysTagList=[],e.sysTagId="",S=[],y(1,v,f,e.sysCatId),r.getSysTagByCatId(e.sysCatId)},e.getHistory=function(){e.userTagId="history",r.getFilesHistory(1).then(function(t){t.data.success&&(e.imgList=t.data.list)})},e.$on("sysCategory.update",function(t){e.sysCategoryList=r.sysCategoryList}),e.getSysCatAndList=function(t,n){S=[],e.sysCatId=t,"0"!=t?r.getSysTagByCatId(t):(e.sysTagList=[],e.sysTagId="",angular.forEach(e.imgList,function(e,t){e.selected=!1})),e.sysTagId=null,1!=c.longPage&&n?e.getSysImgByTag("pure"):y(1,v,f,t)},e.$on("sysTag.update",function(t){e.sysTagList=r.sysTagList}),e.getSysImgByTag=function(t){"pure"!=t?(S=[],e.sysTagId=t,y(1,v,f,e.sysCatId,t)):(e.sysTagId="pure",e.sysTagId=t,y(1,v,f,t))},e.$watch("currentPage",function(t,n){t!=n&&(e.toPage=t,S=[],e.systemImages?y(t,v,f,e.sysCatId,e.sysTagId):r.getUserFiles1(t,v,f,null,e.userTagId))}),e.getImgByPage=function(){e.currentPage=e.toPage},e.getUserFiles=function(t,n){t!==e.userTagId&&(e.mangeObj.manageAll=!1,window.localStorage&&("1"==e.fileType?localStorage.setItem("photoTag",t):localStorage.setItem("backgroundTag",t)),e.thumbnailList=[],S=[],e.userTagId=t,e.sysCatId="",r.getUserFiles1(n,v,f,null,t))},e.$on("imgList.update",function(t){e.imgList=r.imgList,e.totalItems=r.totalItems,e.currentPage=r.pageNo}),1==c.longPage)if(window.localStorage){var w="1"==e.fileType?localStorage.getItem("photoTag"):localStorage.getItem("backgroundTag");w?(e.getUserFiles(parseInt(w,10)),e.switchToSystemImages(!1),e.sysCatId=""):("3"==e.bFlagType?e.sysCatId="1301":e.sysCatId="101",y(1,v,f,e.sysCatId),r.getSysTagByCatId(e.sysCatId))}else y(1,v,f);1==c.longPage?b(f):(b(f),e.getSysCatAndList("1301",!0),e.getSysImgByTag("pure"),e.systemImages=!0,e.longPage=!0);var x=null;e.createTag=function(){return e.tagList.length>=8?void(e.authError="最多能创建8个自定义分组！"):void(x=a.open({windowClass:"console",templateUrl:"scene/console/category.tpl.html",controller:"CategoryConsoleCtrl"}))};(function(){r.getTagList()})(),e.deleteTag=function(e,t){s.openConfirmDialog({msg:"确定删除此分组?"},function(){r.deleteTag(e,t)})},e.$on("tagList.update",function(t){e.tagList=r.tagList}),e.$on("tagList.delete",function(e){h()});var S=[];e.switchSelect=function(t,n,i,a){if(e.mangeObj.manageAll||!a)if(i.stopPropagation(),t.selected=!t.selected,e.systemImages&&"p"!=c.type&&"n"!=c.type)if(angular.forEach(e.imgList,function(e,n){!e.selected||e.id==t.id&&e.color==t.color||(e.selected=!1)}),t.selected){var s;S=[],t.path?s={id:t.id,src:t.path,shape:t.shape}:t.color&&(s={color:t.color}),S.push(s)}else S=[];else if(t.selected)e.mangeObj.manageAll=!0,S.push({id:t.id,src:t.path||t.tmbPath,shape:t.shape});else{m();for(var o in S)S[o].id==t.id&&S.splice(o,1)}},e.cancelSelect=function(){for(var t in e.imgList)e.imgList[t].selected&&(e.imgList[t].selected=!1);S=[]},e.assignTag=function(t){var n=[];e.showObj.showGroup=!1;for(var i=0;i<S.length;i++)n.push(S[i].id);if(!n.length)return void(e.authError="请先点击管理选择一张图片再进行分组");angular.forEach(e.imgList,function(e,t){e.selected=!1});var a=n.join(",");g.clear("fileService"),r.assignTag(t,a),S=[]},e.$on("tag.assign",function(){p.pushForCurrentRoute("data.assign.success","notify.success")}),e.unbindTag=function(t){for(var n=[],i=0;i<S.length;i++)n.push(S[i].id);if(!n.length)return void(e.authError="请先选择一张图片再解除分组");var a=n.join(",");g.clear("fileService"),r.unbindTag(t,a)},e.$on("tag.unbind",function(){p.pushForCurrentRoute("group.delete.data","notify.success"),r.getUserFiles1(e.currentPage,v,f,null,e.userTagId)}),e.deleteFile=function(t){var n=[];if(!t&&0===S.length)return void(e.authError="请您选中图片后再进行删除操作！");for(var i=0;i<S.length;i++)n.push(S[i].id);var a="";a=e.isAllowedHistory?t?"确定删除此图片？删除后，该图片将在回收站保留3天":"确定删除所选图片？删除后，该图片将在回收站中保留3天":t?"确定删除此图片？":"确定删除所选图片？";var o=t||n.join(",");s.openConfirmDialog({msg:a},function(){r.deleteFile(o),g.clear("fileService")})},e.$on("files.delete",function(t){e.sysCatId="",S=[],r.getUserFiles1(e.currentPage,v,f,null,e.userTagId)}),e.replaceImage=function(){if(!S.length)return void(e.authError="请您先选择图片！");var t;if("p"!=c.type&&"n"!=c.type){if(S.length>1)return void(e.authError="只能选择一张图片进行替换！");t=S[0]}else{var n=c.count+S.length,i="p"==c.type?6:10;if(n>i)return e.authError="最多可选择"+(i-c.count)+"张图片",!1;e.picObj=[];for(var a=0;a<S.length;a++)e.picObj.push({width:S[a].shape.width,height:S[a].shape.height,src:S[a].src})}var s={};t&&t.src&&(s={type:"imgSrc",data:t.src,width:t.shape.width,height:t.shape.height,id:t.id,isSys:e.systemImages}),"0"==c.fileType?t.src?e.$close(s):e.$close({type:"backgroundColor",color:t.color}):(("p"==c.type||"n"==c.type)&&(s.selectedImages=e.picObj),e.$close(s))},e.replaceByClick=function(t,n,i){if(!e.mangeObj.manageAll){if("p"==c.type||"n"==c.type)return void e.switchSelect(t,n,i,!0);S=[],(!S.length&&!e.mangeObj.manageAll||e.systemImages)&&(t.path||t.tmbPath?S.push({id:t.id,src:t.path||t.tmbPath,shape:t.shape}):t.color&&S.push({color:t.color}),e.replaceImage())}},e.uploader=d.uploader(f),e.$on("uploadfiles.add",function(t){e.systemImages&&h(),g.clear("fileService"),e.imgList.length==v&&e.imgList.splice(e.imgList.length-e.uploader.queue.length-1,e.uploader.queue.length)});var T;e.$on("thumbnailList.update",function(t,n){for(var i=0;i<e.uploader.queue.length;i++)100==e.uploader.queue[i].progress&&(e.uploader.queue.splice(i,1),T=n,e.imgList.unshift(T));g.clear("fileService")}),e.$on("upload.bg.complete",function(t,n){r.deleteFile(T.id),o.openCropModal(n,function(t){T.tmbPath=t.src,T.id=t.id,e.imgList.unshift(T)},function(e){})}),e.cancel=function(){e.$dismiss()},e.$watch("userTagId",function(t,n){var i=PREFIX_URL+"index.php?c=upfile&a=upload&bizType=0&fileType="+f;t&&(i+="&tagId="+t),e.uploader.url=i})}]),angular.module("scene.create.console.button",[]),angular.module("scene.create.console.button").controller("ButtonConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal","ModalService",function(e,t,n,i,a,s){e.model={title:i.properties.title,text:i.properties.text,link:i.properties.link?i.properties.link:"http://",imgSrc:i.properties.imgSrc,layout:i.properties.layout,showPic:i.properties.showPic,checkedLink:i.properties.checkedLink},e.authError="",e.buttons=[{id:1,text:"点击提交",btnStyle:{backgroundColor:"#08a1ef",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"立即提交",btnStyle:{backgroundColor:"rgb(255, 255, 255)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(0, 0, 0)"}},{id:3,text:"提交信息",btnStyle:{backgroundColor:"#f6b223",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"立即参加",btnStyle:{height:"30px",backgroundColor:"#333333","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:5,text:"提交表单",btnStyle:{height:"30px",backgroundColor:"#a0d86b","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:6,text:"马上订购",btnStyle:{height:"30px",backgroundColor:"#ff6666","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}}],angular.forEach(e.buttons,function(t,n){""!==e.model.title&&i.css.backgroundColor&&i.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=n)});e.confirm=function(){if(!e.model.title||0===e.model.title.length)return e.authError="按钮名称不能为空",void $('.bg_console input[type="text"]').focus();if(!0===e.model.showPic&&!e.model.imgSrc)return void s.openMsgDialog({msg:"请上传图片!"});if(e.model.checkedLink){if(!e.model.link)return void s.openMsgDialog({msg:"请填写链接地址!"});if(!e.model.text)return void s.openMsgDialog({msg:"请填写提示信息!"});/^http:|^https:|^ftp:/.test(e.model.link)||(e.model.link="http://"+e.model.link)}e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,n){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=n},e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){return t.width/t.height==1?void(e.model.imgSrc=t.data):void a.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:t.data},cw:250}}}}).result.then(function(t){e.model.imgSrc=t.src})},function(){})}}]),angular.module("scene.create.console.category",["services.file"]),angular.module("scene.create.console.category").controller("CategoryConsoleCtrl",["$scope","$timeout","localizedMessages","fileService",function(e,t,n,i){e.category={},e.authError="",e.confirm=function(){return e.category.name&&e.category.name.trim()?countCharacters(e.category.name)>16?void(e.authError="分类名称不能超过16个字符"):(i.createTag(e.category.name),void e.$close()):void(e.authError="请输入分类名称！")},e.cancel=function(){e.$dismiss()}}]),angular.module("chart.style",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput","services.history","scene.create.console.map"]),angular.module("chart.style").controller("chartStyleCtrl",["$scope","sceneService","$modal","$rootScope",function(e,t,n,i){function a(t){var n=p.options;n.scaleFontColor=t.options.scaleFontColor,n.onAnimationComplete=function(){var e=this.chart.ctx,n=this.segments;e.textAlign="start",e.textBaseline="middle";for(var i=0,a=0;a<n.length;a++)i+=parseFloat(n[a].value);e.fillText(i,e.width/2-20,e.height/2,100);for(var a=0;a<n.length;a++){var s=n[a].startAngle+(n[a].endAngle-n[a].startAngle)/2,o=(n[a].outerRadius-n[a].innerRadius)/1.5+n[a].innerRadius,r=n[a].x+Math.cos(s)*o,l=n[a].y+Math.sin(s)*o;e.textAlign="center",e.textBaseline="middle",e.fillStyle=t.options.scaleFontColor,e.font="normal 12px Helvetica",e.fillText(n[a].value,r,l)}},p.destroy(),p=new Chart(e.ctx).Pie(t.segments,n),d.data("pieChart",p)}function s(e,t){if(e.sectorNum!==t.sectorNum){var n=0;if(e.sectorNum>t.sectorNum){n=e.sectorNum-t.sectorNum;for(var i=0;n>i;i++){var s=Math.floor(100*Math.random()+10);p.addData({label:"扇区"+(parseInt(t.sectorNum,10)+i+1),value:s,color:e.colors[parseInt(t.sectorNum,10)+i]}),e.segments.push({label:"扇区"+(parseInt(t.sectorNum,10)+i+1),value:s,color:e.colors[parseInt(t.sectorNum,10)+i]})}}else{n=t.sectorNum-e.sectorNum,e.segments=e.segments.slice(0,e.sectorNum);for(var i=0;n>i;i++)p.removeData(p.segments.length-1)}}else if(e.options.scaleFontColor!==t.options.scaleFontColor)a(e);else{for(var o=0,r=p.segments.length;r>o;o++)p.segments[o].label=e.segments[o].label,isNaN(e.segments[o].value)||e.segments[o].value<0?p.segments[o].value="":p.segments[o].value=e.segments[o].value,p.segments[o].fillColor=jQuery.Color(e.segments[o].color).toString(),p.segments[o].highlightColor=jQuery.Color(e.segments[o].color).toString();p.update(),c.find("#legend-"+l.id).html(p.generateLegend())}l.properties.pieChart=e,l.properties.pieChart.options=p.options}function o(t){for(var n,i=[],a=[],s=[],o=[],r="",p="",g="",m=0;m<t.segments.length;m++)n=t.segments[m],r=isNaN(n.value1)||n.value1<0?"":n.value1,p=isNaN(n.value2)||n.value2<0?"":n.value2,g=isNaN(n.value3)||n.value3<0?"":n.value3,(n.label||r||p||g)&&(o.push(n.label),i.push(r),a.push(p),s.push(g));var h={labels:o,datasets:[{fillColor:t.fillColors[0],strokeColor:"rgba(0,0,0,0)",data:i,label:t.lengends[0]},{fillColor:t.fillColors[1],strokeColor:"rgba(0,0,0,0)",data:a,label:t.lengends[1]},{fillColor:t.fillColors[2],strokeColor:"rgba(0,0,0,0)",data:s,label:t.lengends[2]}]};u.destroy(),u=new Chart(e.ctx).Bar(h,t.options),c.find("#legend-"+l.id).html(u.generateLegend()),l.properties.barChart=t,l.properties.barChart.options=u.options,d.data("barChart",u)}function r(t){var n,i=[],a=[],s=[],o=[],r="",p="",u="",m=[],h=[];g.datasets.forEach(function(e){m.push(e.strokeColor),h.push(e.fillColor)});for(var f=0;f<t.lengends.length;f++)""+e.charts.chartType=="line"?m[f]=t.fillColors[f]:h[f]=t.fillColors[f];for(var v=0;v<t.segments.length;v++)n=t.segments[v],r=isNaN(n.value1)||n.value1<0?0:n.value1,p=isNaN(n.value2)||n.value2<0?0:n.value2,u=isNaN(n.value3)||n.value3<0?0:n.value3,(n.label||r||p||u)&&(o.push(n.label),i.push(r),a.push(p),s.push(u));var b={labels:o,datasets:[{label:t.lengends[0],fillColor:h[0],strokeColor:m[0],pointColor:m[0],pointStrokeColor:"#fff",data:i},{label:t.lengends[1],fillColor:h[1],strokeColor:m[1],pointColor:m[1],pointStrokeColor:"#fff",data:a},{label:t.lengends[2],fillColor:h[2],strokeColor:m[2],pointColor:m[2],pointStrokeColor:"#fff",data:s}]};g.destroy(),g=new Chart(e.ctx).Line(b,t.options),g.datasets.forEach(function(e){var t=!0;e.points.forEach(function(e){e.value&&(t=!1)}),t?e.points.length=0:e.points.forEach(function(e){e.value||(e.value=0)})}),g.update(),c.find("#legend-"+l.id).html(g.generateLegend()),l.properties.lineChart=t,l.properties.lineChart.options=g.options,d.data("lineChart",g)}if(e.confirm=function(){e.$dismiss()},!e.$parent.charts){var l=e.elemDef=t.currentElemDef||{css:{}},c=$(".workspace #chart-"+l.id),d=$(".workspace").find("#"+l.id),p=d.data("pieChart"),u=d.data("barChart"),g=d.data("lineChart");if(l.type+""=="t"){e.charts={},e.charts.options={},e.charts.chartType=l.properties.chartType,e.charts.colors=["#57c7d4","#3aa99e","#f2a654","#f96868","#926dde","#62a8ea","#F978A6","#F8E59B"],e.charts.segments=[],e.charts.sectorNum=2,e.charts.chartTitle=c.find(".chart-title").html(),e.ctx=d.get(0).getContext("2d"),l.properties.legPosition?e.charts.legPosition=l.properties.legPosition:(e.charts.legPosition="position-left",l.properties.legPosition="position-left");var m=[],h=[],f=[],v=[],b=[],y=[],w=0,x=[];if(p){if(e.charts.options=p.options,p.segments){e.charts.sectorNum=p.segments.length,w=p.segments.length;for(var S=0;w>S;S++)e.charts.segments.push({label:p.segments[S].label,value:p.segments[S].value,color:p.segments[S].fillColor})}l.properties.pieChart=e.charts}if(u){if(e.charts.options=u.options,u.datasets){x=u.datasets,w=x[0].bars.length;for(var S=0;w>S;S++)m.push(x[0].bars[S].label);for(var S=0;S<x.length;S++){h.push(x[S].label),f.push(x[S].fillColor);for(var T=x[S].bars.length,C=0;T>C;C++)0===S?v.push(x[S].bars[C].value):1===S?b.push(x[S].bars[C].value):y.push(x[S].bars[C].value)}}l.properties.barChart=e.charts}if(g){if(e.charts.options=g.options,g.datasets){x=g.datasets;for(var S=0;S<x.length;S++)if(0!==(w=x[S].points.length)){for(var C=0;w>C;C++)m.push(x[S].points[C].label);break}for(var S=0;S<x.length;S++){h.push(x[S].label),""+e.charts.chartType=="line"?f.push(x[S].strokeColor):f.push(x[S].fillColor);for(var k=x[S].points.length,C=0;k>C;C++)0===S?v.push(x[S].points[C].value):1===S?b.push(x[S].points[C].value):y.push(x[S].points[C].value)}}l.properties.lineChart=e.charts}if(u||g){e.charts.lengends=h,e.charts.fillColors=f;for(var E=0;E<m.length;E++)e.charts.segments.push({label:m[E],value1:v[E],value2:b[E],value3:y[E]});for(;e.charts.segments.length<12;)e.charts.segments.push({label:"",value1:"",value2:"",value3:""})}l.properties.chartTitle=e.charts.chartTitle}e.$watch("charts",function(t,n){l.type+""=="t"&&t&&t!==n&&(c.find(".chart-title").html(t.chartTitle),l.properties.chartTitle=t.chartTitle,""+e.charts.chartType=="pie"?s(t,n):""+e.charts.chartType=="bar"&&u.datasets?o(t):""+e.charts.chartType!="line"&&""+e.charts.chartType!="curve"||!g.datasets||r(t),d.attr("width")&&(d.removeAttr("width"),d.css("width","100%")),d.attr("height")&&(d.removeAttr("height"),d.css("height","50%")),""+e.charts.chartType=="pie"?p.update():""+e.charts.chartType=="bar"?u.update():(""+e.charts.chartType=="line"||""+e.charts.chartType=="curve")&&g.update())},!0),e.maxLength20=function(){for(var t=e.charts.segments,n=0;n<t.length;n++)t[n].label=e.substtrCharacters(t[n].label);e.charts.legendName&&(e.charts.legendName=e.substtrCharacters(e.charts.legendName))},e.substtrCharacters=function(e){if(e&&(e=e.replace(/\n|\r/g," ")),e&&e.length>10){var t=e.replace(/[^\x00-\xff]/g,"xx");if(t.length>20){var n=t.substring(0,20).replace(/xx/g,"中").length;e=e.substring(0,n)}}return e},e.showEditDataView=function(){n.open({windowClass:"six-contain",templateUrl:"scene/console/chartViewEdit.tpl.html",controller:"chartStyleCtrl",scope:e})}}}]).directive("legendStyle",function(){return{restrict:"AE",link:function(e,t,n){$targetEle=$(".workspace #legend-"+e.elemDef.id),e.$watch(function(){return $(t).val()},function(t,n){t!==n&&($targetEle.removeAttr("class"),""+t=="position-align"?$targetEle.addClass("position-align"):""+t=="position-right"?$targetEle.addClass("position-right"):""+t=="position-none"&&$targetEle.addClass("position-none"),e.elemDef.properties.legPosition=t)})}}}),angular.module("comp.style",[]),angular.module("comp.style").controller("CompStyleCtrl",["$scope","setCompService","sceneService",function(e,t,n){2===e.elemDef.type||"2"===e.elemDef.type||4===e.elemDef.type||"4"===e.elemDef.type?e.statusArr=[{name:"可控可替换",value:1},{name:"可控不可替换",value:2},{name:"不可控可替换",value:3},{name:"不可控不可替换",value:4}]:e.statusArr=[{name:"可控",value:2},{name:"不可控",value:4}],e.wordLineList=[{name:"0%",value:"0"},{name:"10%",value:"0.1em"},{name:"25%",value:"0.25em"},{name:"50%",value:"0.5em"},{name:"75%",value:"0.75em"},{name:"100%",value:"1em"}],e.countCharacters=countCharacters;var i=e.setModel.setlabel;e.cssModel=e.elemDef.css,e.cssModel.letterSpacing||(e.cssModel.letterSpacing="0"),e.$watch("setModel",function(t){t&&(4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus||e.setModel.isnew?4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus&&e.setModel.isnew?(e.setModel.isnew=!1,e.elemDef.name=e.setModel.setlabel,e.elemDef.properties.setremark=e.setModel.setremark,e.elemDef.properties.setstatus=e.setModel.setstatus):4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus?(e.elemDef.name=e.setModel.setlabel,e.elemDef.properties.setremark=e.setModel.setremark,e.elemDef.properties.setstatus=e.setModel.setstatus):i!==e.setModel.setlabel&&(e.elemDef.name=e.setModel.setlabel):(e.setModel.isnew=!0,e.elemDef.name=e.setModel.setlabel,e.elemDef.properties.setremark="",e.elemDef.properties.setstatus=4))},!0),e.bold=function(){e.cssModel.fontWeight?e.cssModel.fontWeight="":e.cssModel.fontWeight="bold"},e.italic=function(){e.cssModel.fontStyle?e.cssModel.fontStyle="":e.cssModel.fontStyle="italic"},e.underLine=function(){var t=$.trim(e.cssModel.textDecoration);t&&t.indexOf("underline")>-1?e.cssModel.textDecoration=t.replace("underline",""):e.cssModel.textDecoration=t+" underline"},e.delLine=function(){var t=$.trim(e.cssModel.textDecoration);t&&t.indexOf("line-through")>-1?e.cssModel.textDecoration=t.replace("line-through",""):e.cssModel.textDecoration=t+" line-through"},e.textAlign=function(t){e.cssModel.textAlign=t},e.addLink=function(){n.openLinkModal(e.elemDef)},e.removeLink=function(){e.elemDef.properties.url=""}}]).directive("compStyleSet",[function(){return{restrict:"A",scope:{cssItem:"@"},link:function(e,t,n,i){var a=$("#inside_"+n.elemId+" .element-box");e.$watch("cssItem",function(e,t){e=JSON.parse(e),delete e.width,delete e.height,e.fontFamily&&delete e.fontFamily,a.css(e)},!0)}}}]),angular.module("scene.create.console.counter",[]),angular.module("scene.create.console.counter").controller("CounterConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal",function(e,t,n,i,a){e.model={title:i.title,properties:{layout:i.properties.layout,size:i.properties.size,color:i.properties.color,icon:i.properties.icon,imgSrc:i.properties.imgSrc}},e.authError="",e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.properties.icon="",e.model.properties.imgSrc=i.properties.imgSrc=t.data},function(){})},e.confirm=function(){angular.extend(i,e.model);var t=parseInt(i.css.height,10)||0;e.model.properties.imgSrc&&115>t&&(e.model.btnStyle={width:"320px",height:"115px",lineHeight:"115px",backgroundColor:"transparent"}),"counter-tb"===e.model.properties.layout&&(!e.model.properties.imgSrc&&80>t&&(e.model.btnStyle={height:"80px",lineHeight:"80px"}),e.model.properties.imgSrc&&155>t&&(e.model.btnStyle=e.model.btnStyle||{},e.model.btnStyle.height=e.model.btnStyle.lineHeight="155px")),e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseEqfont=function(t){e.model.properties.icon=t,e.model.properties.imgSrc=null,""+t=="eqf-love"?e.model.properties.color="#ff5448":""+t=="eqf-good"?e.model.properties.color="#f2a653":""+t=="eqf-flower2"?e.model.properties.color="#ea1f64":""+t=="eqf-vote"&&(e.model.properties.color="#08a1ef")}}]),angular.module("scene.create.console.cropImage",["services.file"]).directive("cropImage",["sceneService","fileService","$compile",function(e,t){return{restrict:"EAC",scope:{},replace:!0,templateUrl:"scene/console/cropimage.tpl.html",link:function(n,i){function a(){g.css.width/g.css.height>p/u?(c=parseInt(g.css.width*p/g.css.width,10),d=parseInt(g.css.height*p/g.css.width,10)):(c=parseInt(g.css.width*u/g.css.height,10),d=parseInt(g.css.height*u/g.css.height,10));var e=(p-c)/2,t=(u-d)/2,n=(p-c)/2+c,i=(u-d)/2+d;l=[0,0,p,u],f=g.css.width/g.css.height,r=[e,t,n,i]}function s(e){$(".cropWidth").html(parseInt(e.w,10)),$(".cropHeight").html(parseInt(e.h,10))}n.PREFIX_FILE_HOST=PREFIX_FILE_HOST;var o,r,l,c,d,p,u,g=e.currentElemDef,m=e.currentElemDef.properties.src,h=$("#target"),f=g.css.width/g.css.height;n.fit=!0,n.lockRatio=!1,n.$on("changeElemDef",function(e,t){g=t,n.fit=!0,n.lockRatio=!1,g.properties.src!==m?(m=g.properties.src,o.setImage(PREFIX_FILE_HOST+m),h.unbind("load").attr("src",PREFIX_FILE_HOST+m).load(function(){p=this.width,u=this.height,n.preSelectImage(m),n.$apply()})):(n.preSelectImage(m),n.$apply())}),n.preSelectImage=function(e){o?(a(),o.setOptions({aspectRatio:f,setSelect:r})):h.attr("src",PREFIX_FILE_HOST+e).load(function(){p=this.width,u=this.height,h.Jcrop({onChange:s,keySupport:!1,setSelect:[0,0,100,100],boxHeight:320,boxWidth:680},function(){o=this}),e&&(a(),o.setOptions({aspectRatio:f,setSelect:r}))})},n.preSelectImage(m),n.$watch("lockRatio",function(e){if(o){var t=o.tellSelect();t.w=parseInt(t.w,10),t.h=parseInt(t.h,10),e?o.setOptions({aspectRatio:t.w/t.h}):o.setOptions({aspectRatio:null})}}),n.$watch("fit",function(e){if(o)if(e){var t=o.tellSelect();t.x=parseInt(t.x,10),t.y=parseInt(t.y,10),t.x2=parseInt(t.x2,10),t.y2=parseInt(t.y2,10),l=[t.x,t.y,t.x2,t.y2],o.setOptions({aspectRatio:f,setSelect:r})}else o.setOptions({aspectRatio:null,setSelect:l})}),n.crop=function(){var n=e.currentElemDef,a=o.tellSelect();return 0===a.w||0===a.h?void $(i).hide():(a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.w=parseInt(a.w,10),a.h=parseInt(a.h,10),a.x2=parseInt(a.x2,10),a.y2=parseInt(a.y2,10),a.src=$("#target").attr("src").split(PREFIX_FILE_HOST)[1],void t.cropImage(a).then(function(e){var t={type:"imgSrc",data:e.data.obj,width:a.w,height:a.h};n.properties.src=t.data;var s=t.width/t.height,o=$("#"+n.id),r=$("#inside_"+n.id).width(),l=$("#inside_"+n.id).height();s>=r/l?(l=r/s,$("#inside_"+n.id).height(l),n.css.height=l,n.properties.height=l,o.outerHeight(l),o.outerWidth(r),o.css("marginLeft",0),o.css("marginTop",0)):(r=l*s,$("#inside_"+n.id).width(r),n.css.width=r,n.properties.width=r,o.outerWidth(r),o.outerHeight(l),o.css("marginTop",0),o.css("marginLeft",0)),o.attr("src",PREFIX_FILE_HOST+t.data),n.properties.imgStyle={},n.properties.imgStyle.width=o.outerWidth(),n.properties.imgStyle.height=o.outerHeight(),n.properties.imgStyle.marginTop=o.css("marginTop"),n.properties.imgStyle.marginLeft=o.css("marginLeft"),$(i).hide()},function(){n.properties.src||e.deleteElement(n.id)}))},n.cancel=function(){$(i).hide()}}}}]),angular.module("scene.custom.activities",["ui.bootstrap.datepicker"]),angular.module("scene.custom.activities").controller("CustomActivitiesCtrl",["$scope","$modal","customActivitiesService","ModalService","activityInfo","userXd","uploaderService","fileService","dateFilter",function(e,t,n,i,a,s,o,r,l){e.resourceType="doc,docx",e.fileType=8,e.rewards=[{label:"",xd:""},{label:"",xd:""},{label:"",xd:""}],a?(e.active=a,e.active.introductionName=a.wordName,e.active.endDate=l(a.endDate),e.active.startDate=l(a.startDate),-1!==a.promStatus&&"-1"!==a.promStatus&&(e.formDis=!0)):e.active={},e.cancel=function(){e.$dismiss()},e.deleteTheReward=function(t){e.rewards.splice(t,1)},e.addNewReward=function(){e.rewards.length>=10||e.rewards.splice(0,0,{label:"",xd:""})},e.$on("thumbnailList.update",function(t,n){for(var i=0;i<e.uploader.queue.length;i++)(100===e.uploader.queue[i].progress||"100"===e.uploader.queue[i].progress)&&(e.uploader.queue.splice(i,1),e.active.introductionName=n.name,e.active.fileId=n.id)}),e.$on("get.file.list",function(t,n){e.active.introductionName=n.name,e.active.fileId=n.id}),e.openImageModal=function(n){e.formDis||t.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(i){return i.width/i.height==1?void(e.active[n]=i.data):void t.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:i.data},cw:250}}}}).result.then(function(t){t.width,t.height,t.src,e.active[n]=t.src})},function(){})},e.ok=function(){if(e.formDis)return void e.$dismiss();if(!e.activite){if(!e.active.title)return void i.openMsgDialog({msg:"请设置活动主题"});if(!e.active.startDate)return void i.openMsgDialog({msg:"请设置活动开始时间"});if(!e.active.endDate)return void i.openMsgDialog({msg:"请设置活动结束时间"});if(!e.active.fileId)return void i.openMsgDialog({msg:"请设置活动描述"});e.active.startDate=l(e.active.startDate),e.active.endDate=l(e.active.endDate),n.saveActivite(e.active).then(function(){i.openMsgDialog({msg:"活动创建成功!"}),e.active.promStatus=0,e.$close(e.active)})}},e.removeIntro=function(){e.formDis||(e.active.fileId=null,e.active.introductionName=null)}}]).factory("customActivitiesService",["$http",function(e){var t={};return t.saveActivite=function(t){return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=scene&a=companyPromotion/save",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},t.getActivite=function(){return e({withCredentials:!0,method:"GET",url:PREFIX_URL+"index.php?c=scene&a=companyPromotion"})},t}]),angular.module("scene.create.console.setting.dropdown",[]),angular.module("scene.create.console.setting.dropdown").controller("DropdownConsoleCtrl",["$scope","sceneService","$timeout","ModalService","$element","historyService","setCompService","security",function(e,t,n,i,a,s,o,r){function l(){null===e.currentParam.selectedOption||"空"===e.currentParam.selectedOption?e.elemDef.showText=e.model.placeholderText:e.elemDef.showText=e.currentParam.selectedOption.label,e.elemDef.placeholderText=e.model.placeholderText,$("#selectButton"+e.elemDef.id).text(e.elemDef.showText)}e.elemDef=t.currentElemDef,e.elemDef.selectedOption="",e.isTplEditor=r.isTplEditor(),e.model={choices:JSON.parse(e.elemDef.choices),placeholderText:"请选择"},e.currentParam={placeholderAvaiable:!0,selectedOption:"空"},e.checkPlaceholder=function(){null!==e.currentParam.selectedOption?(e.currentParam.placeholderAvaiable=!1,e.elemDef.showText=e.currentParam.selectedOption.label,e.elemDef.placeholderText=e.model.placeholderText,$("#selectButton"+e.elemDef.id).text(e.currentParam.selectedOption.label)):e.currentParam.placeholderAvaiable=!0},e.addNewOption=function(t){e.model.choices.options.length<10?(++e.model.choices.seq,e.model.choices.options.splice(t+1,0,{id:e.model.choices.seq,label:"请输入内容"})):i.openMsgDialog({msg:"您可以添加十个选项，每个选项最多请不要超过20字符。"})},e.deleteTheOption=function(t){e.model.choices.options.length>1&&i.openConfirmDialog({msg:"您确定要删除内容为“"+e.model.choices.options[t].label+"”的选项？<br/>删除选项后，将导致该选项已收集的数据无法正确地显示。"},function(){e.model.choices.options.splice(t,1)})},e.countCharacters=countCharacters,e.clear=function(){e.model.choices={seq:3,options:[{id:1,label:"请输入内容"},{id:2,label:"请输入内容"},{id:3,label:"请输入内容"}]},e.currentParam.selectedOption="空",e.model.placeholderText="请选择"},e.$watch("model.choices.options",function(){e.elemDef.choices=JSON.stringify(e.model.choices),n(function(){$(a[0].querySelector("select")).change()})},!0),e.$watch("model.placeholderText",function(){l()},!0),e.$watch("currentParam.selectedOption",function(){l()},!0),function(){var t=0;angular.forEach(e.model.choices.options,function(n,i){n.label===e.elemDef.showText&&(t++,e.currentParam.selectedOption=n)}),1>t&&(e.currentParam.selectedOption="空",e.model.placeholderText=e.elemDef.showText)}(),e.isTplEditor&&(e.statusArr=[{name:"可控不可替换",value:2},{name:"不可控不可替换",value:4}],e.setModel=o.initModel(e.elemDef),e.$watch("setModel",function(){4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus||e.setModel.isnew?4!==e.setModel.setstatus&&"4"!==e.setModel.setstatus&&e.setModel.isnew&&(delete e.setModel.isnew,o.addElemDef(e.setModel)):(e.setModel.isnew=!0,o.removeElemDef(e.setModel.id)),$.extend(!0,e.elemDef.properties,e.setModel)},!0))}]),angular.module("scene.create.console.fake",[]),angular.module("scene.create.console.fake").controller("FakeConsoleCtrl",["$scope","type",function(e,t){e.type=t}]),angular.module("scene.create.console.imageCrop",["services.file"]).controller("imageCropCtrl",["$rootScope","$scope","imageCropService","obj","dataCacheService",function(e,t,n,i){var a,s;t.cropSize=i.properties,s=i.properties.originSrc?i.properties.originSrc.replace(PREFIX_FILE_HOST,""):i.properties.src.replace(PREFIX_FILE_HOST,""),""+i.type=="square"?a=t.cropOption={type:i.type,title:"图片裁切",desc:"图片将按照要求的比例进行裁切",showItems:!1,imgSrc:i.properties.src,cropItems:[{ratio:1,desc:"正方形比例"}]}:3===i.type||""+i.type===3?(a=t.cropOption={type:i.type,title:"背景裁切",desc:"背景图将按照要求的比例进行裁切",showItems:!1,imgSrc:s,cropItems:[{ratio:640/1008,desc:"背景图比例"}]},i.properties.pageLength&&1!==i.properties.pageLength&&(a.showItems=!0,a.cropItems=[{value:1,ratio:640/1008,desc:"固定背景模式"},{value:2,ratio:640/(1008*i.properties.pageLength),desc:"全屏背景模式"}])):(4===i.type||"4"===i.type)&&(a=t.cropOption={type:i.type,title:"图片裁切",desc:"请根据你的需求，点击右侧常用比例进行裁切",showItems:!0,imgSrc:s,cropItems:[{value:1,ratio:0,desc:"原图比例"},{value:2,ratio:1,desc:"1:1"},{value:3,ratio:4/3,desc:"4:3"},{value:4,ratio:.75,desc:"3:4"},{value:5,ratio:320/486,desc:"标准屏比例"},{value:6,ratio:320/243,desc:"1/2屏比例"},{value:7,ratio:320/162,desc:"1/3屏比例"},{value:8,ratio:-1,desc:"自定义",lock:!1}]}),i.properties.radioValue?(!i.properties.lock||8!==i.properties.radioValue&&"8"!==i.properties.radioValue||(a.cropItems[i.properties.radioValue-1].lock=!0),a.currentItem=a.cropItems[i.properties.radioValue-1]):2===i.properties.croptype||"2"===i.properties.croptype?a.currentItem=a.cropItems[1]:a.currentItem=a.cropItems[0],t.cropItemChange=function(t){null===t.lock&&a.cropItems[7]&&(a.cropItems[7].lock=!1),a.currentItem=t,e.$broadcast("cropItem.change",t)},t.ok=function(){i.properties.pageLength&&(i.properties.type=a.currentItem.value),i.subType&&delete i.subType,e.$broadcast("cropImage.ok",i)},t.cancel=function(){t.$dismiss(i.properties.src)}}]).factory("imageCropService",["$rootScope","fileService",function(e,t){var n={};return n.cropImage=function(n){t.cropImage(n).success(function(t){if(t.success){var i={width:n.w,height:n.h,src:t.map.path,id:t.map.id};e.$broadcast("crop.success",i)}else alert(t.msg),e.$broadcast("crop.fail")}).error(function(){alert("网络连接超时，请稍后重试"),e.$broadcast("crop.fail")})},n}]).directive("eqxCropPreview",["imageCropService","dataCacheService",function(e,t){function n(e,n){i(e,n),e.$on("$destroy",function(){g=!1}),e.$on("cropItem.change",function(e,t){s(t)}),e.$on("cropImage.ok",function(i,a){g||(p=a,t.clear("fileService"),o(e,n))}),e.$on("crop.success",function(t,n){(4===p.type||"4"===p.type)&&(u&&(n.radioValue=u.value,u.lock&&""+u.value=="8"&&(n.lock=!0)),r(n)),""+p.type=="3"&&""+p.properties.type=="2"&&(n.type=2,n.pageLength=p.properties.pageLength),e.$close(n)})}function i(e,t){t.hide().load(function(){t.show();var n=$(".image_crop"),i={width:n.width(),height:n.height()},s=i.width/i.height;c={width:this.width,height:this.height};var o,r=c.width/c.height;c.width>i.width||c.height>i.height?r>s?(t.css({width:i.width,height:i.width/r}),o={position:"absolute",top:"50%",marginTop:-i.width/r/2}):(t.css({width:i.height*r,height:i.height}),o={margin:"auto"}):o={position:"absolute",left:"50%",top:"50%",marginLeft:-c.width/2,marginTop:-c.height/2},d={width:t.width(),height:t.height()},a(e,t,o)})}function a(e,t,n){var i,a,s=t.parent().attr("ctype"),o=e.cropSize,r={};o&&(r=e.cropSize.cropSize),i=d.width,a=d.height;var c=e.$parent.cropOption.currentItem;if(r&&(r.w>i&&(r.w=i,r.h=i/c.ratio),r.h>a&&(r.h=a,r.w=a*c.ratio),r.x2=r.x+r.w,r.y2=r.y+r.h),""+s===3||""+s=="square")i>a?i=a*c.ratio:a=i/c.ratio,t.Jcrop({keySupport:!1,aspectRatio:c.ratio,allowSelect:!1,setSelect:r?[r.x,r.y,r.x2,r.y2]:[0,0,i,a],onRelease:function(){this.setOptions({setSelect:[0,0,i,a]})}},function(){l=this});else{t.Jcrop({keySupport:!1,aspectRatio:c.ratio,allowSelect:!1,setSelect:r?[r.x,r.y,r.x2,r.y2]:[0,0,i,a],onRelease:function(){this.setOptions({setSelect:[0,0,i,a]})}},function(){l=this});var p;-1===c.ratio&&(p={aspectRatio:r.w/r.h,setSelect:[r.x,r.y,r.x2,r.y2]},l.setOptions(p))}$(".jcrop-holder").css(n)}function s(e){var t,n=d.width,i=d.height;if(u=e,-1===e.ratio){var a=l.tellSelect();t=e.lock?{aspectRatio:a.w/a.h,setSelect:[0,0,a.w,a.h]}:{aspectRatio:0,setSelect:[0,0,a.w,a.h]}}else 0===e.ratio?t={aspectRatio:n/i,setSelect:[0,0,n,i]}:(n>i?n=i*e.ratio:i=n/e.ratio,t={aspectRatio:n/i,setSelect:[0,0,n,i]});l.setOptions(t)}function o(t,n){var i=l.tellSelect(),a={};$.extend(a,i);var s=t.cropSize.cropSize;if(s&&parseInt(s.x,10)===parseInt(i.x,10)&&parseInt(s.w,10)===parseInt(i.w,10)&&parseInt(s.y,10)===parseInt(i.y,10)&&parseInt(s.h,10)===parseInt(i.h,10))return void t.$dismiss(p.properties.src);if(i.w===d.width&&i.h===d.height||0===i.w&&0===i.h){if(!p)return;return void t.$dismiss(p.properties.src)}if(""+p.type=="3"&&Math.abs(i.w-d.width)<=2&&Math.abs(i.h-d.height)<=2){var o={type:p.properties.type,src:p.properties.src,pageLength:p.properties.pageLength,id:p.properties.id};return void t.$close(o)}var r=c.width/d.width;a.ratio=r,i.w=parseInt(i.w*r,10),i.h=parseInt(i.h*r,10),i.x=parseInt(i.x*r,10),i.y=parseInt(i.y*r,10),i.y<0&&(i.y=0),i.x<0&&(i.x=0),i.src=n.attr("src").split(PREFIX_FILE_HOST)[1],i.x+i.w>c.width&&(i.w=c.width-i.x),i.y+i.h>c.height&&(i.h=c.height-i.y),""+p.type=="3"?i.fileType=0:i.fileType=1,delete i.x2,delete i.y2,p.cw&&(i.cw=p.cw),i.name=p.properties.name||"default.png",e.cropImage(i,a)}function r(e){var t=p;t.properties.src=e.src,t.properties.id=e.id,e.originSrc&&(t.properties.originSrc=e.originSrc,t.properties.cropSize=e.cropSize),e.radioValue&&(t.properties.radioValue=e.radioValue),e.lock?t.properties.lock=e.lock:t.properties.lock=!1;var n=e.width/e.height,i=$("#"+t.id),a=$("#inside_"+t.id),s=a.width(),o=a.height();n>=s/o?(o=s/n,a.height(o),t.css.height=o,t.properties.height=o,i.outerHeight(o),i.outerWidth(s),i.css("marginLeft",0),i.css("marginTop",0)):(s=o*n,a.width(s),t.css.width=s,t.properties.width=s,i.outerWidth(s),i.outerHeight(o),i.css("marginTop",0),i.css("marginLeft",0)),i.attr("src",PREFIX_FILE_HOST+e.src+""),t.properties.imgStyle={},t.properties.imgStyle.width=i.outerWidth(),t.properties.imgStyle.height=i.outerHeight(),t.properties.imgStyle.marginTop=i.css("marginTop"),t.properties.imgStyle.marginLeft=i.css("marginLeft")}var l,c,d,p,u,g=!1;return{link:n}}]),angular.module("scene.create.console.input",[]),angular.module("scene.create.console.input").controller("InputConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,n,i){e.model={title:i.title,type:i.type,required:i.properties.required},e.authError="";var a="输入框";e.buttons=[{id:1,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",color:"rgb(0, 0, 0)"}},{id:2,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#fff",color:"rgb(0, 0, 0)"}},{id:3,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#f6b223",color:"rgb(0, 0, 0)"}},{id:4,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#333",color:"rgb(0, 0, 0)"}},{id:5,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#a0d86b",color:"rgb(0, 0, 0)"}},{id:6,text:a,btnStyle:{height:"40px",backgroundColor:"#fff","text-align":"center",borderWidth:"1",borderStyle:"solid",borderColor:"#f66",color:"rgb(0, 0, 0)"}}],angular.forEach(e.buttons,function(t,n){""!==e.model.title&&i.css.borderColor&&i.css.borderColor===t.btnStyle.borderColor&&(e.btnIndex=n)}),e.confirm=function(){return e.model.title&&0!==e.model.title.length?void e.$close(e.model):(e.authError="输入框名称不能为空",void $('input[type="text"]').focus())},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,n){e.model.btnStyle=t.btnStyle,e.btnIndex=n}}]),angular.module("scene.create.console.linkComponent",[]),angular.module("scene.create.console.linkComponent").controller("LinkComponentConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal","sceneService",function(e,t,n,i,a,s){e.model={title:i.properties.title,imgSrc:i.properties.imgSrc,url:{link:"external",externalLink:"http://"}},i.properties.url&&(angular.isNumber(i.properties.url)?(e.model.url.link="internal",e.model.url.internalLink=i.properties.url):(e.model.url.link="external",e.model.url.externalLink=decodeURIComponent(i.properties.url.split("=")[2]))),e.authError="",e.buttons=[{id:1,text:"点我购买",btnStyle:{width:"100px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"点开链接",btnStyle:{width:"100px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:3,text:"马上购买",btnStyle:{width:"100px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"关注我们",btnStyle:{width:"100px",height:"30px",backgroundColor:"#fff","text-align":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)"}}],e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.title="",e.btnIndex=-1,e.model.btnStyle={width:"115px",height:"115px","line-height":"1",backgroundColor:""},e.model.imgSrc=i.properties.imgSrc=t.data},function(){})},angular.forEach(e.buttons,function(t,n){""!==e.model.title&&i.css.backgroundColor&&i.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=n)});e.confirm=function(){return null!==e.model.imgSrc||e.model.title&&0!==e.model.title.length?e.model.url.internalLink||e.model.url.externalLink?("internal"===e.model.url.link?i.properties.url=e.model.url.internalLink:/^http:|^https:|^ftp:/.test(e.model.url.externalLink)?i.properties.url=e.model.url.externalLink:i.properties.url="http://"+e.model.url.externalLink,i.properties.title=e.model.title,void e.$close(e.model)):void(e.authError="链接不能为空"):(e.authError="按钮名称不能为空",void $("#buttonName").focus())},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,n){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=n,e.model.imgSrc=i.properties.imgSrc=null},e.removeLink=function(t){"external"===t?e.model.url.externalLink=null:"internal"===t&&(e.model.url.internalLink=0),e.model.url.link=""},e.changed=function(){"external"===e.model.url.link?e.model.url.internalLink=0:e.model.url.externalLink="http://"},e.selectRadio=function(t){"external"===t?e.model.url.link="external":"internal"===t&&(e.model.url.link="internal"),e.changed()},e.getPageNames=function(){var t=i.sceneId;s.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),angular.forEach(e.pageList,function(e){e.name||(e.name="第"+e.num+"页")}),i.properties.url&&angular.isNumber(i.properties.url)&&(e.model.url.link="internal",e.model.url.internalLink=i.properties.url)})},e.getPageNames()}]),angular.module("scene.create.console.link",["services.scene"]),angular.module("scene.create.console.link").directive("limitLinkLength",["ModalService",function(e){return{restrict:"A",require:"?ngModel",link:function(t,n){n.blur(function(){(n.val()||"").length>40&&e.openMsgDialog({msg:'<div align="left">提示：链接过长有可能会导致链接组件打不开，建议生成短链接后再使用。生成短链接地址<a href="http://dwz.cn" target="_blank"><font color="#08A1EF">http://dwz.cn</font></a></div>'})})}}}]),angular.module("scene.create.console.link").controller("LinkConsoleCtrl",["$scope","$timeout","obj","sceneService",function(e,t,n,i){e.url={},e.url.externalLink="http://";var a;e.confirm=function(){"external"===e.url.link?a=/^http:|^https:|^ftp:/.test(e.url.externalLink)?e.url.externalLink:"http://"+e.url.externalLink:"internal"===e.url.link&&(a=e.url.internalLink.id),e.$close(a)},e.cancel=function(){e.$dismiss()},e.removeLink=function(t){"external"===t?e.url.externalLink="http://":"internal"===t&&(e.url.internalLink=e.pageList[0]),e.url.link=""},e.changed=function(){"external"===e.url.link?e.url.internalLink=e.pageList[0]:e.url.externalLink="http://"},e.selectRadio=function(t){e.url.link||("external"===t?e.url.link="external":"internal"===t&&(e.url.link="internal"))},e.getPageNames=function(){var t=n.sceneId;i.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),e.url.internalLink=e.pageList[0],angular.forEach(e.pageList,function(t){t.name||(t.name="第"+t.num+"页"),n.properties.url&&n.properties.url===t.id&&(e.url.link="internal",e.url.internalLink=t)}),n.properties.url&&isNaN(n.properties.url)&&(e.url.link="external",e.url.externalLink=decodeURIComponent(n.properties.url.split("=")[2]))})},e.getPageNames()}]),angular.module("scene.create.console.map",["app.directives.comp.editor"]),angular.module("scene.create.console.map").directive("eqdMap",["$timeout","$interval",function(e,t){return{scope:{center:"=",zoom:"=",bounds:"=",change:"&"},controller:["$scope",function(e){this.addMark=function(n){if(e.map)n.setMap(e.map);else var i=t(function(){e.map&&(n.setMap(e.map),t.cancel(i))},400)}}],restrict:"A",link:function(n,i){function a(){e(function(){n.change()&&n.change()({zoom:n.zoom,center:n.center,bounds:r.getBounds()})},100)}var s=new qq.maps.LatLng(n.center.lat,n.center.lng),o={zoom:n.zoom,center:s,mapTypeControlOptions:{mapTypeIds:[]}},r=n.map=new qq.maps.Map(i.get(0),o),l=t(function(){var e=r.getBounds();e&&(r.panBy(-1,-1),e.lat.maxY!==e.lat.minY&&e.lng.maxX!==e.lng.minX&&(t.cancel(l),n.bounds=e))},400);qq.maps.event.addListener(r,"zoom_changed",function(){n.zoom=r.getZoom(),n.bounds=r.getBounds(),a()}),qq.maps.event.addListener(r,"center_changed",function(){n.center=r.getCenter(),n.bounds=r.getBounds(),a()}),n.$watch("zoom",function(e,t){e!==t&&r.setZoom(e)}),n.$watch("center",function(e,t){e!==t&&(s=new qq.maps.LatLng(e.lat,e.lng),r.panTo(s))})}}}]).directive("eqdMapMark",[function(){return{scope:{position:"="},require:"^eqdMap",restrict:"E",link:function(e,t,n,i){var a;e.position&&(a?a.setPosition(e.position):a=new qq.maps.Marker({position:e.position,animation:qq.maps.MarkerAnimation.DROP,map:null}),i.addMark(a)),e.$watch("position",function(t,n){t!==n&&(a?a.setPosition(e.position):a=new qq.maps.Marker({position:e.position,animation:qq.maps.MarkerAnimation.DROP,map:null}),t?i.addMark(a):a.setMap(null))})}}}]),angular.module("scene.create.console.micro",["app.directives.addelement","services.scene"]),angular.module("scene.create.console.micro").controller("MicroConsoleCtrl",["$scope","$timeout","localizedMessages","obj","sceneService",function(e,t,n,i,a){e.model||(e.model={});var s=[];e.isSelected=[],e.backgroundColors=[{backgroundColor:"#D34141"},{backgroundColor:"#000"},{backgroundColor:"#23A3D3"},{backgroundColor:"#79C450"},{backgroundColor:"#fafafa"}],e.labelNames=[{id:1,title:"栏目一",color:{backgroundColor:""}},{id:2,title:"栏目二",color:{backgroundColor:""}},{id:3,title:"栏目三",color:{backgroundColor:""}},{id:4,title:"栏目四",color:{backgroundColor:""}}],e.model.color=i.properties.labels[0].color.backgroundColor,e.selectColor=function(t){e.model.color=t.backgroundColor,angular.forEach(e.labelNames,function(e){e.color.backgroundColor&&(e.color.backgroundColor=t.backgroundColor)})},angular.forEach(i.properties.labels,function(t){angular.forEach(e.labelNames,function(e){t.id==e.id&&(e.title=t.title,e.color.backgroundColor=t.color.backgroundColor,e.link=t.link,e.selected=!0,t.mousedown=!1)})}),e.confirm=function(){s=[];var t=0,n=0;angular.forEach(e.labelNames,function(e){e.selected&&(e.link?s.push(e):n++,t++)}),2>t?alert("导航标签不能少于两个！"):n>0?alert("每个导航必须有链接页面！"):e.$close(s)},e.cancel=function(){e.$dismiss()},e.switchLabel=function(t,n){e.label=t,t.selected?e.labelIndex==n?(t.color.backgroundColor="",t.selected=!1,t.mousedown=!1):(e.labelIndex=n,t.mousedown=!0):(t.color.backgroundColor=e.model.color,e.labelIndex=n,t.selected=!0,t.mousedown=!0),t.mousedown?(e.model.title=t.title,t.link?e.model.link=e.pageList[t.link]:e.model.link=e.pageList[0]):(e.model.title="",e.model.link=e.pageList[0])},e.selectLink=function(t){e.label.mousedown&&(e.label.link=t.num,console.log(e.labelNames))},e.changeLabelName=function(){e.label.mousedown&&(e.label.title=e.model.title)},e.getPageNames=function(){var t=i.sceneId;a.getPageNames(t).then(function(t){e.pageList=t.data.list,e.pageList.unshift({id:0,name:"无"}),angular.forEach(e.pageList,function(e){e.name||(e.name="第"+e.num+"页")}),e.model.link=e.pageList[0]})},e.getPageNames()}]),angular.module("scene.create.console.pictures",["services.file"]).controller("picturesCtrl",["$scope","$timeout","$rootScope","$modal","picturesService","obj",function(e,t,n,i,a,s){var o=e.picStyles=utilPictures.getPicStyle();e.currentImageIndex=-1;var r=angular.copy(s),l=e.position=r.css;if(null!=l.width&&null!=l.height){var c=l.width/l.height;c>2?(l.width=530,l.height=530/c):(l.height=265,l.width=265*c)}var d=e.properties=r.properties;d.autoPlay=null==d.autoPlay||d.autoPlay,d.interval=null==d.interval?2e3:d.interval,d.picStyle=null==d.picStyle?o[0]:utilPictures.getPicStyle(d.picStyle),d.bgColor=null==d.bgColor?"rgba(255,255,255,1)":d.bgColor,d.children=null==d.children?[]:d.children,a.setImages(d.children),e.authError="",e.choosePic=function(){return d.children.length>=6?void(e.authError="最多可选择6张图片"):void i.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"p",count:d.children.length,elemDef:s}}}}).result.then(function(e){$.each(e.selectedImages,function(e,t){a.addImages({src:t.src,desc:"",height:t.height,width:t.width})})},function(){})},e.ok=function(){return 0===d.children.length?void(e.authError="请选择图片"):(d.picStyle=d.picStyle.value,s.properties=d,void e.$close(d))},e.cancel=function(){e.$dismiss()},e.$on("currentImage.update",function(t,n){e.currentImageIndex=n}),e.$on("images.add",function(e,t){d.children=t}),e.$on("images.update",function(e,t){d.children=t})}]).factory("picturesService",["$rootScope","fileService",function(e,t){var n,i,a={},s=[];return a.setJcrop=function(t){e.$broadcast("jcrop.update",t)},a.setImageSize=function(t){e.$broadcast("image.update",t)},a.setCurrentImage=function(t){i=t,e.$broadcast("currentImage.update",t)},a.getCurrentImage=function(){return i},a.addImages=function(t){s.push(t),e.$broadcast("images.add",s)},a.updateImages=function(t,n){s.splice(t,1,n),e.$broadcast("images.update",s)},a.deleteImages=function(t){s.splice(t,1),e.$broadcast("images.update",s)},a.setImages=function(e){return s=e},a.getImages=function(){return s},a.setProperties=function(e){n=e},a.getProperties=function(){return n},a.cropImage=function(n){t.cropImage(n).success(function(t){if(t.success){var i={width:n.w,height:n.h,desc:"",src:t.obj};e.$broadcast("crop.success",i)}else alert(t.msg)}).error(function(){alert("网络连接超时，请稍后重试")})},a}]).directive("eqxPicturesImageCrop",["$compile","picturesService",function(e,t){return{link:function(n,i){var a=$(i),s=$(".pic-preview"),o={width:s.width(),height:s.height()};n.showOperation=!0;var r;n.$on("image.update",function(e,t){r={width:t.width,height:t.height}}),n.$on("jcrop.update",function(i,l){s.append(e('<div class="operation" ng-show="!showOperation"><a class="quxiao" ng-click="cropCancel()">取消</a><a class="finish" ng-click="cropOk()">完成</a></div>')(n)),n.showOperation=!0,n.$apply();var c=s.children("img"),d={width:c.width(),height:c.height()};a.removeClass("hover").unbind("click").click(function(){0!==t.getImages().length&&(n.showOperation=$(this).hasClass("hover"),n.showOperation?($(this).removeClass("hover"),l.release(),l.disable()):($(this).addClass("hover"),l.setSelect([0,0,d.width,d.height]),l.enable()))}),n.cropOk=function(){var e=l.tellSelect();if(!(e.w===o.width&&e.h===o.height||0===e.w&&0===e.h)){var n=r.width/d.width;e.w=parseInt(e.w*n,10),e.h=parseInt(e.h*n,10),e.x=parseInt(e.x*n,10),e.y=parseInt(e.y*n,10),e.x2=parseInt((e.w+e.x)*n,10),e.y2=parseInt((e.h+e.y)*n,10),e.src=c.attr("src").split(PREFIX_FILE_HOST)[1],t.cropImage(e)}},n.cropCancel=function(){n.showOperation=!0,a.removeClass("hover"),l.release(),l.disable()}})}}}]).directive("eqxPicturesImagePreview",["picturesService",function(e){return{link:function(t,n){var i,a,s=$(n),o=$(".pic-preview"),r={width:o.width(),height:o.height()},l=r.width/r.height;s.hide(),s.load(function(){s.show(),a={width:this.width,height:this.height},e.setImageSize(a);var t,n=a.width/a.height;n>l?($(this).css({width:r.width,height:r.width/n}),t={position:"absolute",top:"50%",marginTop:-r.width/n/2}):($(this).css({width:r.height*n,height:r.height}),t={margin:"auto"}),s.Jcrop({keySupport:!1,aspectRatio:l},function(){i=this}),$(".jcrop-holder").css(t),e.setJcrop(i),i.disable()})}}}]).directive("eqxPicturesImageClick",["$compile","picturesService",function(e,t){function n(t,n){$(".pic-preview").html(e('<img eqx-pictures-image-preview ng-src="'+n+'" />')(t))}return{link:function(e,i){var a=$(i);a.click(function(){if(!a.hasClass("hover")){var i=a.index();t.setCurrentImage(i),n(e,$(this).find(".pic-img").attr("src"))}}),a.children(".delete-img").click(function(n){n.stopPropagation(),a.hasClass("hover")&&$(".pic-preview").empty();var i=a.index();t.deleteImages(i);var s=t.getCurrentImage();s>i?t.setCurrentImage(--s):i===s&&t.setCurrentImage(-1),e.$apply()}),e.$on("crop.success",function(i,s){if(a.hasClass("hover")){var o=PREFIX_FILE_HOST+s.src;n(e,o);var r=a.index();t.updateImages(r,s)}})}}}]),angular.module("scene.create.console.pictures1",["services.file"]).controller("pictures1Ctrl",["$rootScope","$scope","$modal","picturesCropService","obj","dataCacheService",function(e,t,n,i,a,s){function o(e){var t;u.children[e].originSrc&&(t=u.children[e].originSrc),l.currentImage={index:e,src:u.children[e].src+"?t="+Date.now(),originSrc:t}}function r(e,n,i){$("<img>").attr("src",PREFIX_FILE_HOST+n).load(function(){$.extend(m.items[e],{coordinate:{x:0,y:0,x2:this.width,y2:this.height,w:this.width,h:this.height,src:n,name:i,fileType:1,index:e},realSize:{width:this.width,height:this.height}}),t.distoryElem.properties.children&&t.distoryElem.properties.children[e]&&t.distoryElem.properties.children[e].cropSize&&(m.items[e].coordinate.x=t.distoryElem.properties.children[e].cropSize.x,m.items[e].coordinate.y=t.distoryElem.properties.children[e].cropSize.y,m.items[e].coordinate.w=t.distoryElem.properties.children[e].cropSize.w,m.items[e].coordinate.h=t.distoryElem.properties.children[e].cropSize.h)})}t.distoryElem=a;var l=t.imageOption={title:"图集组件",desc:"通过图片裁切可制作超酷图集",showCrop:!1,showLoading:!1,currentImage:{index:-1,src:""}},c=t.cropOption={showItems:!0,imgSrc:a.properties.src,cropItems:[{value:2,ratio:1,desc:"1:1"},{value:3,ratio:4/3,desc:"4:3"},{value:4,ratio:.75,desc:"3:4"},{value:5,ratio:320/486,desc:"标准屏比例"},{value:6,ratio:320/243,desc:"1/2屏比例"},{value:7,ratio:320/162,desc:"1/3屏比例"},{value:8,ratio:-1,desc:"自定义",lock:!1}]};a.properties.ratioItem?(a.properties.lock&&""+a.properties.ratioItem=="8"&&(c.cropItems[a.properties.ratioItem-2].lock=!0),c.currentItem=c.cropItems[a.properties.ratioItem-2]):c.currentItem=c.cropItems[0];var d=t.picStyles=utilPictures.getPicStyle(),p=angular.copy(a),u=t.properties=p.properties;u.autoPlay=1==!u.autoPlay||u.autoPlay,u.interval=1==!u.interval?2e3:u.interval,u.picStyle=1==!u.picStyle?d[0]:utilPictures.getPicStyle(u.picStyle),u.bgColor=1==!u.bgColor?"rgba(255,255,255,0)":u.bgColor,u.children=1==!u.children?[]:u.children,u.children.length>0&&(l.showCrop=!0,o(0));for(var g=0;6>g;g++)u.children[g]?r(g,u.children[g].originSrc?u.children[g].originSrc:u.children[g].src,u.children[g].name):u.children.push({});var m=i.getCoordinateObj();t.cropItemChange=function(t){null===t.lock&&(c.cropItems[6].lock=!1),c.currentItem=t,e.$broadcast("cropItem.change",t)},t.addPictures=function(e,t,i){e.stopPropagation();var s=0;i?$.each(u.children,function(e,t){t.src&&s++}):s=5,n.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"p",count:s,elemDef:a}}}}).result.then(function(e){l.showCrop=!0;var n=t,a=0,s=u.children.length;if(i)for(;s>n;){if(!u.children[n++].src){var c=e.selectedImages[a++];u.children[n-1]={src:c.src,desc:"",height:c.height,width:c.width,name:c.name},r(n-1,c.src,c.name),o(t)}if(a===e.selectedImages.length)break;n===s&&(n=0)}else{var d=e.selectedImages[0];u.children[t]={src:d.src,desc:"",height:d.height,width:d.width},r(t,d.src,d.name),o(t)}})},t.setPicturesSize=function(e){var t,n,i,s=e.children[0],o=s.width/s.height;p.css.width||p.css.height?(t=p.css.width/p.css.height,o>t?(n=p.css.width,i=n/o):(i=p.css.height,n=i*o)):(t=2,o>t?(n=320,i=n/o):(i=160,n=i*o)),a.css.width=n,a.css.height=i},t.delPicture=function(t){u.children[t]={},m.items[t]={},t===l.currentImage.index&&(l.currentImage.index=-1,e.$broadcast("image.delete",t))},t.changePicture=function(e){l.currentImage.index!==e&&o(e)};var h=!0;t.ok=function(){return h?(h=!1,0===u.children.length?void(l.desc="请选择图片，最多添加6张"):void(i.getCropping()||(l.showLoading=!0,e.$broadcast("cropImage.ok",u)))):void 0},t.cancel=function(){t.$dismiss()},t.$on("crop.complete.all",function(e,n){u.picStyle=u.picStyle.value,$.each(n,function(e,t){u.children[t.index]=t}),s.clear("fileService");for(var i=angular.copy(u),a=i.children,o=5;o>=0;o--)a[o].src||a.splice(o,1);h=!0,t.setPicturesSize(i),t.$close(i)}),t.$on("crop.fail",function(){i.setCropping(!1),l.showLoading=!1})}]).factory("picturesCropService",["$rootScope","fileService",function(e,t){var n,i={},a=[],s=!1,o=0,r=0;return i.getCoordinateObj=function(){return n},i.initCoordinateObj=function(){n={ratio:null,items:[]};for(var e=0;6>e;e++)n.items.push({})},i.setCropCount=function(e){var t=0;if(e&&e.items)for(var n=0;n<e.items.length;n++)e.items[n].coordinate&&e.items[n].coordinate.src&&t++;o=t},i.getCropCount=function(){return o},i.setCropping=function(e){s=e},i.getCropping=function(){return s},i.cropImage=function(n){t.cropImage(n).success(function(t){if(t.success){var i={width:n.w,height:n.h,src:t.map.path,desc:"",index:t.map.index};a.push(i),r++,o===r&&(o=r=0,e.$broadcast("crop.complete.all",angular.copy(a)),a.length=0)}else alert(t.msg),e.$broadcast("crop.fail")}).error(function(){alert("网络连接超时，请稍后重试"),e.$broadcast("crop.fail")})},i.initCoordinateObj(),i}]).directive("eqxPicturesCropPreview",["picturesCropService",function(e){function t(t,i){var a=e.getCoordinateObj();p=t,n(i,a),t.$on("$destroy",function(){l=c=d=null,e.initCoordinateObj(),e.setCropping(!1)}),t.$on("cropItem.change",function(e,t){o(t)}),t.$on("image.delete",function(){$(".image_crop").children("div").remove()}),t.$on("cropImage.ok",function(e,n){d&&d.value&&(n.ratioItem=d.value,d.lock?n.lock=!0:n.lock=!1),r(t,n,a)})}function n(e,t){var n=$(".image_crop"),a={width:n.width(),height:n.height()},s=a.width/a.height;e.hide().load(function(){var n={width:this.width,height:this.height};e.removeAttr("style").show();var o,r=n.width/n.height;n.width>a.width||n.height>a.height?r>s?(e.css({width:a.width,height:a.width/r}),o={position:"absolute",top:"50%",marginTop:-a.width/r/2}):(e.css({width:a.height*r,height:a.height}),o={margin:"auto"}):o={position:"absolute",left:"50%",top:"50%",marginLeft:-n.width/2,marginTop:-n.height/2},c={width:e.width(),height:e.height()};var l=e.attr("index");e.attr("src"),$.extend(t.items[l],{displaySize:c}),i(e,t,o,l)})}function i(e,t,n,i){l&&(l.destroy(),l=null);var s,o=c.width,r=c.height,u=!1;p.distoryElem.properties.children&&p.distoryElem.properties.children[i]&&p.distoryElem.properties.children[i].cropSize&&(u=!0),(s=t.items[i].coordinate)&&(s.w>o&&(t.ratio=t.items[0].coordinate.w/t.items[0].coordinate.h,s.w=o,s.h=o/t.ratio),s.h>r&&(t.ratio=t.items[0].coordinate.w/t.items[0].coordinate.h,s.h=r,s.w=r*t.ratio),s.x2=s.x+s.w,s.y2=s.y+s.h);var g;g=d&&-1===d.ratio?0:d?d.ratio:u?s.w/s.h:1,e.Jcrop({keySupport:!1,aspectRatio:g,allowSelect:!1,setSelect:s?[s.x,s.y,s.x2,s.y2]:[0,0,o,r],onRelease:function(){this.setOptions({setSelect:[0,0,o,r]})},onSelect:function(){l&&a(i,t)}},function(){l=this,a(i,t)}),$(".jcrop-holder").css(n)}function a(e,t){var n=l.tellSelect();n.w||(n.w=n.x2-n.x),n.h||(n.h=n.y2-n.y),t.ratio=n.w/n.h,$.extend(t.items[e].coordinate,n),$.each(t.items,function(e,n){var i=n.coordinate;i&&s(i,t)})}function s(e,t){e.w/e.h>t.ratio?(e.w=e.h*t.ratio,e.x2=e.x+e.w):(e.h=e.w/t.ratio,e.y2=e.y+e.h)}function o(e){d=e;var t,n=c.width,i=c.height;if(-1===e.ratio){var a=l.tellSelect();t=e.lock?{aspectRatio:a.w/a.h,setSelect:[0,0,a.w,a.h]}:{aspectRatio:0,setSelect:[0,0,a.w,a.h]}}else n>i?n=i*e.ratio:i=n/e.ratio,t={aspectRatio:n/i,setSelect:[0,0,n,i]};l.setOptions(t)}function r(t,n,i){var a=[];$.each(i.items,function(t,n){var o=n.coordinate,r=n.realSize;if(o&&r){if(u={},$.extend(!0,u,n.coordinate),s(o,i),n.displaySize){var l=r.width/n.displaySize.width;o.w=Math.ceil(o.w*l),o.h=Math.ceil(o.h*l),o.x=Math.ceil(o.x*l),o.y=Math.ceil(o.y*l)}else{var c=o.w/o.h;r.width/r.height>c?(o.w=Math.ceil(r.height*c),o.h=r.height):(o.w=r.width,o.h=Math.ceil(r.width/c))}o.x+o.w>n.realSize.width&&(o.w=r.width-o.x),o.y+o.h>n.realSize.height&&(o.h=r.height-o.y),o.w===r.width&&o.h===r.height||0===o.w||0===o.h?(a.push({src:o.src,desc:"",height:o.h,width:o.w}),e.setCropCount(i),e.cropImage(o,o,!1)):(delete o.x2,delete o.y2,e.setCropping(!0),e.setCropCount(i),e.cropImage(o,u,!1))}})}var l,c,d,p;return{link:t};var u}]),angular.module("scene.create.console.radio.checkbox",[]),angular.module("scene.create.console.radio.checkbox").directive("stopPropagation",function(){return function(e,t){t.bind("keydown",function(e){e.stopPropagation()})}}),angular.module("scene.create.console.radio.checkbox").controller("RadioCheckboxConsoleCtrl",["$scope","$timeout","localizedMessages","obj","ModalService",function(e,t,n,i,a){function s(e){var t=$("#optionGroupContainer"),n=t.find(".option-group").eq(e),i=n.position().top;i>72&&t.scrollTop(t.scrollTop()+(i-72))}var o=JSON.parse(i.choices);e.model={title:i.title,type:i.type,options:o.options,required:i.properties.required},e.buttons=[{id:1,btnStyle:{backgroundColor:"#08a1ef",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#08a1ef",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#08a1ef",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#08a1ef"}}},{id:2,btnStyle:{backgroundColor:"#fff",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#fff",color:"rgb(0, 0, 0)"},properties:{titleStyle:{backgroundColor:"#fff",color:"#000"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#fff"}}},{id:3,btnStyle:{backgroundColor:"#f6b223",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#f6b223",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#f6b223",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#f6b223"}}},{id:4,btnStyle:{backgroundColor:"#333",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#333",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#333",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#333"}}},{id:5,btnStyle:{backgroundColor:"#a0d86b",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#a0d86b",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#a0d86b",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#a0d86b"}}},{id:6,btnStyle:{backgroundColor:"#ff6666",height:"30px","line-height":"30px",borderWidth:"1px",borderStyle:"solid",borderColor:"#ff6666",color:"rgb(255, 255, 255)"},properties:{titleStyle:{backgroundColor:"#ff6666",color:"#ffffff"},optionStyle:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#ff6666"}}}],angular.forEach(e.buttons,function(t,n){i.properties.titleStyle&&i.properties.titleStyle.backgroundColor===t.properties.titleStyle.backgroundColor&&(e.btnIndex=n)}),e.chooseTabButton=function(t,n){e.model.btnStyle=t.btnStyle,e.btnIndex=n,$.extend(i.css,{borderStyle:t.btnStyle.borderStyle,borderColor:t.btnStyle.borderColor})},e.authError="",e.addNewOption=function(t){e.model.options.length<8?(++o.seq,e.model.options.splice(t+1,0,{id:o.seq,label:"选项"+o.seq}),setTimeout(function(){s(t)})):a.openMsgDialog({msg:"（您可以添加八个选项，每个选项最多请不要超过41字）"})},e.deleteTheOption=function(t){e.model.options.length>1&&a.openConfirmDialog({msg:"您确定要删除内容为“"+e.model.options[t].label+"”的选项？<br/>删除选项后，将导致该选项已收集的数据无法正确地显示。"},function(){e.model.options.splice(t,1)})},e.confirm=function(){return e.model.title&&0!==e.model.title.length?(angular.forEach(e.model.options,function(e){delete e.$$hashKey}),i.choices=JSON.stringify(o),i.properties.required=e.model.required,(e.btnIndex||0===e.btnIndex)&&$.extend(i.properties,e.buttons[e.btnIndex].properties),void e.$close(e.model)):(e.authError="输入框名称不能为空",void $("#radioTitle").focus())},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console.randomevent",["app.directives.responsiveImage"]),angular.module("scene.create.console.randomevent").controller("RandomEventCtrl",["$scope","$rootScope","randomEventService","$modal","obj",function(e,t,n,i,a){a.properties.pics.length?e.picList=a.properties.pics:e.picList=[],e.delImage=function(t){e.picList.splice(t,1)},e.replaceImage=function(t){i.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"n",count:9,elemDef:a}}}}).result.then(function(n){e.picList[t]=n.selectedImages[0]})},e.choosePic=function(){return e.picList.length>=10?void(e.authError="最多可选择10张图片"):void i.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,type:"n",count:e.picList.length,elemDef:a}}}}).result.then(function(t){$.each(t.selectedImages,function(t,n){e.picList.unshift(n)})})},e.confirm=function(){e.$close(e.picList)},e.cancel=function(){e.$dismiss()}}]).factory("randomEventService",["$rootScope",function(){return{}}]),angular.module("scene.create.console.rating",["common.directives.inputColor"]),angular.module("scene.create.console.rating").controller("RatingConsoleCtrl",["$scope","$timeout","localizedMessages","obj",function(e,t,n,i){e.model={title:i.title,properties:{icon:i.properties.icon,size:i.properties.size,color:i.properties.color,required:i.properties.required}},e.authError="",e.confirm=function(){return e.model.title&&0!==e.model.title.length?($.extend(!0,i,e.model),void e.$close(e.model)):(e.authError="标题名称不能为空",void $("#ratingTitle").focus())},e.chooseEqfont=function(t){e.model.properties.icon=t},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create.console.scene-setting-component",["scene.preview","scene.custom.activities","services.qCloud"]).controller("SceneSettingComponentController",["$q","$routeParams","$rootScope","$scope","$element","sceneService","MineService","dataService","$sce","$modal","usercenterService","security","pageTplService","i18nNotifications","ModalService","sceneSettingCache","memberHandler","eqADTypeChoice","staticResService","sceneDataParseService","dataCacheService","fileService","storageService","customActivitiesService","qCloudService","$location",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m,h,f,v,b,y,w,x,S,T,C,k){function E(e){A.test(e)?i.coverUrl=e:q.test(e)?i.coverUrl=e+"/strip":i.coverUrl=e+""}function P(e,t){var n=!0;switch(e){case v.HIDE:i.eqShowType=O.EQHIDE,i.scene.property.eqAdType=v.HIDE,i.scene.property.hideEqAd=!0;break;case v.DEFAULT_BOTTOM:i.eqShowType=O.EQLINK,i.scene.property.eqAdType=v.DEFAULT_BOTTOM,i.scene.property.hideEqAd=!1;break;case v.CUSTOM_BOTTOM:i.eqShowType=O.EQLINK,i.scene.property.eqAdType=v.CUSTOM_BOTTOM,i.scene.property.hideEqAd=!1,-1!==[2,21].indexOf(p.currentUser.type)&&-1!==[7,8,9].indexOf(p.currentUser.memberType)&&D(),i.scene.property.bottomLabel&&i.scene.property.bottomLabel.id||(i.chooseCustomBottomLabel(i.bottomPageTpls[0].id),n=!1);break;default:case v.FREEPAGE:i.eqShowType=O.EQFREE,i.scene.property&&(i.scene.property.eqAdType=v.FREEPAGE,i.scene.property.hideEqAd=!1)}t&&(i.$broadcast("changeView",!1),n&&y.changeBottomType(i.eqShowType,i.scene.property.lastPageId,i.scene.property.bottomLabel,i.scene.property.eqAdType))}function I(e){i.newCoverImage.tmbPath=e,i.newCoverImage.path=e,i.scene.cover=i.newCoverImage.path,y.changeSceneCover(i.scene.cover),E(i.scene.cover)}function _(){return!(!i.scene.name||!i.scene.name.trim())||(m.openMsgDialog({msg:"场景标题不能为空！"}),!1)}function L(){return!i.scene.accessCode||""+i.scene.applyPromotion=="0"&&""+i.scene.applyTemplate=="0"?3!==i.sceneStatue||i.scene.accessCode&&4===i.scene.accessCode.length?"1"!==i.scene.isShow||i.scene.tagId?i.scene.promIds&&(i.scene.property.eqAdType!==v.FREEPAGE||i.scene.property.adSpend)?(m.openMsgDialog({msg:"该场景已选择清除"+your_webname+"尾页，不可以参加活动；请复制该场景展示后，再次选择参与活动。"}),!1):!(i.appendActive&&!i.scene.promIds)||(m.openMsgDialog({msg:"请选择活动尾页！"}),!1):(m.openMsgDialog({msg:"请选择申请秀场的场景类型"},function(){$("#tag").focus()}),!1):(m.openMsgDialog({msg:"请输入有效的场景密码！"}),!1):(m.openMsgDialog({msg:"申请样例、推荐的场景不能同时设置密码，请修改。"}),!1)}function R(){return!i.scene.property||i.scene.property.eqAdType!==v.CUSTOM_BOTTOM||i.scene.property.bottomLabel&&i.scene.property.bottomLabel.id?i.scene.property&&i.scene.property.bottomLabel&&3===i.scene.property.eqAdType&&i.scene.property.bottomLabel.name&&countCharacters(i.scene.property.bottomLabel.name)>16?(m.openMsgDialog({msg:"品牌联合底标自定义名称不能超过16个字符"}),!1):i.scene.property&&3===i.scene.property.eqAdType&&i.scene.property.bottomLabel&&!i.scene.property.bottomLabel.name&&i.scene.property.bottomLabel.url&&"http://"!==i.scene.property.bottomLabel.url?(m.openMsgDialog({msg:"请输入自定义底标名称"}),!1):i.scene.promIds&&i.activityPageTpls.length&&!i.scene.property.activityPageId?(m.openMsgDialog({msg:"请选择活动尾页！"}),!1):i.oldSceneApplyState.promIds&&i.scene.property.eqAdType!==v.FREEPAGE?(m.openMsgDialog({msg:"该场景已选择参加活动，不可以清除"+your_webname+"尾页，请重新选择！"}),!1):!(i.loadingLogo&&!i.scene.loadingLogo)||(m.openMsgDialog({msg:"请设置加载logo！"}),!1):(m.openMsgDialog({msg:"请选择您要使用的自定义底标！"}),!1)}function M(){var e=!0;i.isFormerScene&&i.adSpend===f.getPriceByADType(i.scene.property.eqAdType)&&delete i.scene.property.eqAdType,""+i.scene.property.showShareCount!="1"||i.scene.property.shareDes||(i.scene.property.shareDes=i.shareCountPlaceholder),angular.isObject(i.scene.property)&&(i.scene.property=angular.toJson(i.scene.property)),angular.isString(i.scene.type)&&(i.scene.type=parseInt(i.scene.type,10)),i.$parent.scene.bgAudio&&(i.scene.bgAudio=angular.isObject(i.$parent.scene.bgAudio)?JSON.stringify(i.$parent.scene.bgAudio):i.$parent.scene.bgAudio),!1===i.scene.loadingLogo&&delete i.scene.loadingLogo,function(){1===i.scene.staticStatus?m.openConfirmDialog({msg:"场景已经静态化,设置更改后不能及时更新,确定更改吗",confirmName:"确定",cancelName:"取消"},function(){s.saveSceneSettings(i.scene).then(function(t){200===t.data.code?(w.clear("sceneList"),g.pushForCurrentRoute("scene.setting.success","notify.success"),e&&(i.$parent.sceneSetting.showFlag=!1,eqShow.templateParser("jsonParser").mode="edit"),i.$parent.sceneSetting.oldBgAudio!==i.scene.bgAudio&&x.saveFilesHistory(JSON.parse(i.scene.bgAudio).id,2).then(function(){w.clear("fileService1")}),i.$parent.sceneSetting.oldBgAudio=i.scene.bgAudio,t.data.obj?angular.copy(t.data.obj,s.getCurrentScene()):angular.copy(i.scene,s.getCurrentScene()),z.resolve(t)):(m.openMsgDialog({msg:t.data.msg}),angular.isString(i.scene.property)&&(i.scene.property=JSON.parse(i.scene.property)),i.scene.type=""+i.scene.type,z.reject(t))},function(e){i.invalidText=e,z.reject(e)})},function(){}):s.saveSceneSettings(i.scene).then(function(t){200===t.data.code?(w.clear("sceneList"),g.pushForCurrentRoute("scene.setting.success","notify.success"),e&&(i.$parent.sceneSetting.showFlag=!1,eqShow.templateParser("jsonParser").mode="edit"),i.$parent.sceneSetting.oldBgAudio!==i.scene.bgAudio&&x.saveFilesHistory(JSON.parse(i.scene.bgAudio).id,2).then(function(){w.clear("fileService1")}),i.$parent.sceneSetting.oldBgAudio=i.scene.bgAudio,t.data.obj?angular.copy(t.data.obj,s.getCurrentScene()):angular.copy(i.scene,s.getCurrentScene()),z.resolve(t)):(m.openMsgDialog({msg:t.data.msg}),angular.isString(i.scene.property)&&(i.scene.property=JSON.parse(i.scene.property)),i.scene.type=""+i.scene.type,z.reject(t))},function(e){i.invalidText=e,z.reject(e)})}()}i.isVipUser=f.isVipUser,i.oriSceneState=!1,i.sceneState=!1;var q=/\?imageMogr2/,A=/.svg/;k.search().thridParty&&"mta"==k.search().thridParty?i.tabid="companyset":i.tabid="customset";var z=e.defer();(21===n.user.type&&n.userPermit.indexOf(",1401,")>=0||21!==n.user.type)&&(i.sceneBuyXd=!0);var D=function(){d.getCompanyInfo().then(function(e){e.data.success&&(i.scene.property.bottomLabel?i.scene.property.bottomLabel.name||(i.scene.property.bottomLabel.name=e.data.obj.name):i.scene.property.bottomLabel={name:e.data.obj.name})})};if(i.shareCountPlaceholder="分享的人，你也一起来吧",i.freeUpgrade=function(){m.openConfirmDialog({msg:'免费升级企业账号，尊享以下特权：<p class="mt5">1.免费使用技术支持底标</p><p class="mt5">2.免费使用品牌联合底标</p><p class="mt5">3.免费使用部分高级组件</p><p class="mt5"> 4.可自定义加载Logo功能</p>',confirmName:"免费升级",cancelName:"取消"},function(){window.open("/#/privilege")})},i.setPhoneCtrl=function(){var e=i.scene.pageMode;i.phonePageMode=0===e||1===e||2===e||6===e||7===e||8===e||11===e||12===e||13===e||14===e?"NS":"EW"},i.user&&i.user.expiryTime){var F=(new Date).getTime();i.user.expiryTime<=F&&(i.user.memberType=null)}T.getActivite().then(function(e){e.data.obj&&(i.activityObj=e.data.obj)});var N=["101","102","103","104","105","106"];i.scene?(i.scene.accessCode?i.sceneStatue=3:(i.sceneStatue=i.scene.status,i.sceneStatue<0&&(i.sceneStatue=1)),i.appendActive=!!i.scene.promIds,i.oldAppendActive=i.appendActive,i.loadingLogo=!!i.scene.loadingLogo,-1===N.indexOf(i.scene.type+"")&&(i.scene.type="101"),i.setPhoneCtrl(),E(i.scene.cover)):i.$watch("sceneId",function(e,t){e!==t&&(i.scene.accessCode?i.sceneStatue=3:i.sceneStatue=i.scene.status,i.loadingLogo=!!i.scene.loadingLogo,i.appendActive=!!i.scene.promIds,i.oldAppendActive=i.appendActive,-1===N.indexOf(i.scene.type+"")&&(i.scene.type="101"),i.setPhoneCtrl(),E(i.scene.cover))}),i.$watch("scene",function(e,t){e!==t&&(i.oldScene=JSON.stringify(i.scene))}),i.closeSetting=function(){JSON.stringify(i.scene)!==i.oldScene?m.openConfirmDialog({msg:"设置内容有变化，是否确认修改"},function(){i.saveSceneSettings(i.scene)},function(){i.sceneSetting.showFlag=!1}):i.sceneSetting.showFlag=!1,eqShow.stopSnowFly&&clearInterval(eqShow.stopSnowFly),eqShow.stopFallingObject&&clearInterval(eqShow.stopFallingObject),eqShow.stopFireworkEffect&&eqShow.stopFireworkEffect(),eqShow.templateParser("jsonParser").mode="edit"},i.logoPrice=100,i.memberPrice=100,i.sceneSetting.saveSceneSetting=function(){return z=e.defer(),i.saveSceneSettings(i.scene),z.promise},i.isAllowToAccessLastPageSetting=p.isAllowToAccess(p.accessDef.SCENE_HIDE_LASTPAGE_SETTING),i.isAllowedToAccessNewPageFlip=p.isAllowToAccess(p.accessDef.ACCESS_NEW_PAGEFLIP),i.isAllowedToAccessOpenQCloud=p.isAllowToAccess(p.accessDef.ACCESS_QCLOUD)&&(-1!==[6,7,8,9].indexOf(i.user.memberType)||5===i.user.type),(2===p.currentUser.type||21===p.currentUser.type)&&f.initUserMemberDetail(function(e){i.memberObj=e,i.memberObj.loadingLogo&&(i.memberObj.loadingLogo=parseFloat(i.memberObj.loadingLogo,10)),i.memberObj.tailPage&&(i.memberObj.tailPage=parseFloat(i.memberObj.tailPage,10)),i.logoPrice=f.getPriceWithMemberPrivilege(100,!0),i.memberPrice=f.getPriceWithMemberPrivilege(100,!1)});var H={SHARE_SCENE:"shareScene",LOADING_LOGO:"loadingLogo",EQSHOW:"eqShow"};i.eqSceneSettingTabs=H,i.eqSceneSettingCurrent=H.SHARE_SCENE;var O={EQFREE:"eqFree",EQLINK:"eqLink",EQHIDE:"eqHide"};i.eqADTypeChoice=v,i.switchToAdState=P,i.adSpend=0,i.isFormerScene=!1,i.nextPage=function(){y.app.nextPage(),n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name},i.prePage=function(){y.app.prePage(),n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name},i.changeSceneName=function(){y.changeSceneName(i.scene.name)},i.PREFIX_FILE_HOST=PREFIX_FILE_HOST,i.alwaysOpen=!0,i.changeView=function(){i.showPhoneTitle="正在设置的内容用于场景分享时显示",n.$broadcast("changeView",!0)},i.changeTagId=function(){i.$parent.scene.tagId&&(i.scene.tagId=i.$parent.scene.tagId,g.pushForCurrentRoute("already.apply.discovery","notify.success"))},i.changeAppendActive=function(e){if(i.oldSceneApplyState.promIds&&(i.scene.promIds!==i.oldSceneApplyState.promIds||!i.appendActive))return i.appendActive=!0,void m.openMsgDialog({msg:"该场景已经参与活动，不可参与其他活动；请复制该场景展示后，再次选择参与活动。"});var t;return e||!i.appendActive||(t=S.get("appendActive"))&&-1!==t.split(",").indexOf(n.user.id)?(e||i.appendActive||!i.scene.promIds||y.removeActivePage(),e&&(i.appendActive=!0,i.showActiveTip=!1,i.hideActiveTip&&(t=S.get("appendActive"),t?t+=","+n.user.id:t=n.user.id,S.push("appendActive",t))),void(i.appendActive||(i.scene.promIds=null,i.activityPageTpls=[]))):(i.appendActive=!1,void(i.showActiveTip=!0))},i.changeLoop=function(){n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name,y.app.setTriggerLoop(i.scene.property.triggerLoop)},i.changePageMode=function(){n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name,i.setPhoneCtrl(),y.changeScrollMode(i.scene.pageMode)},i.changeProgess=function(){n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name,n.$broadcast("processBar",i.scene.property.slideNumber)},i.changeCode=function(){n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name,n.$broadcast("passPanelSwitch",i.scene.isAccessCode)},i.changeLogo=function(){return i.isLoadingLogoAccessible?(i.loadingLogo=!i.loadingLogo,i.loadingLogo?i.showPhoneTitle="正在设置的内容用于场景加载时显示":(delete i.scene.loadingLogo,i.showPhoneTitle=i.scene.name),void n.$broadcast("showLoading",i.loadingLogo,i.scene.loadingLogo)):void i.freeUpgrade()},i.changeBottomLabel=function(){i.showPhoneTitle="正在设置底标",y.changeBottomType(i.eqShowType,i.scene.property.lastPageId,i.scene.property.bottomLabel,i.scene.property.eqAdType)},i.changeAutoFlip=function(){n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name,i.scene.property.autoFlip?y.app.startAutoFlip(i.scene.property.autoFlipTime):y.app.pauseAutoFlip()},i.changeHandFlip=function(){n.$broadcast("changeView",!1),i.showPhoneTitle=i.scene.name,y.app.forbidHandFlip(i.scene.property.forbidHandFlip)},i.changeEqshowType=function(){"eqHide"===i.eqShowType&&y.removeLastPage()},i.changeSceneState=function(){if(i.oldSceneApplyState.promIds)return 1!==i.sceneStatue&&m.openMsgDialog({msg:"该场景已经参与活动，不可以关闭或加密!"}),void(i.sceneStatue=1);if(3===i.sceneStatue){if(!i.isScenePasswordAccessible)return i.sceneStatue=1,void i.freeUpgrade();i.scene.status=1,i.scene.isAccessCode=!0,n.$broadcast("changeView",!1),n.$broadcast("passPanelSwitch",!0)}else i.scene.status=i.sceneStatue,delete i.scene.isAccessCode,delete i.scene.accessCode,n.$broadcast("changeView",!1),n.$broadcast("passPanelSwitch",!1);i.showPhoneTitle=i.scene.name,1!==i.sceneStatue&&(i.scene.isShow=0,i.scene.applyTemplate=0,i.appendActive=!1,i.scene.isTpl=0,i.scene.promIds=null)},i.$watch("scene.bgAudio",function(e,t){angular.isObject(e)&&angular.isObject(t)?e.url!==t.url&&y.playVideo(e):e!==t&&y.playVideo(e),n.$broadcast("changeView",!1),i.scene&&(i.showPhoneTitle=i.scene.name)}),i.openScene=function(e,t){t?s.openScene(e.id).then(function(t){t.data.success&&(e.status=1)}):s.closeScene(e.id).then(function(t){t.data.success&&(e.status=2)})},i.openImageModal=function(){n.$broadcast("changeView",!0),c.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(e){return e.width/e.height==1?(i.newCoverImage=e,void I(e.data)):void c.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:e.data},cw:250}}}}).result.then(function(e){var t={width:e.width,height:e.height,data:e.src,type:"imgSrc"};i.newCoverImage=t,I(t.data)})})};var U=null;i.countCharacters=countCharacters,i.changeTab=function(e){("customset"===i.tabid?_():"shareset"===i.tabid?L():R())&&(i.tabid=e)};i.saveSceneSettings=function(e){if(_()&&L()&&R()){3===i.scene.property.eqAdType&&i.scene.property.bottomLabel&&i.scene.property.bottomLabel.url&&(/^http:|^https:|^ftp:/.test(i.scene.property.bottomLabel.url)||(i.scene.property.bottomLabel.url="http://"+i.scene.property.bottomLabel.url)),i.scene.property.eqAdType=parseInt(i.scene.property.eqAdType,10);var t=f.getCurrentSelectionPrice(i.scene,i.adSpend,i.isFormerScene,U);0===t?M():t&&t>i.userXd?m.openMsgDialog({msg:'<div class="cost-xd">当前选择需要消耗秀点<font color="#ff6e6e">'+t+'</font>个<br/>秀点余额不足(<font color="#ff6e6e">'+(i.userXd||0)+'</font>个)<span class="get-xd"><a style="text-decoration: underline;" href="#/usercenter/member" target = "_blank">购买秀点</a></span></div>'}):t?m.openConfirmDialog({msg:'当前选择需要消耗秀点<font color="#ff6e6e">'+t+'</font>个<br/>秀点余额为<font color="#ff6e6e">'+(i.userXd||0)+"</font>个"},function(){i.getUserXd(),M()}):M()}},i.oldSceneApplyState={applyPromotion:"",applyTemplate:"",promIds:"",isTpl:""},i.getSceneDetail=function(){s.getCurrentScenePromise().then(function(){i.scene=angular.copy(s.getCurrentScene()),i.scene.price=""+(i.scene.price||"0"),i.oldSceneApplyState.applyPromotion=i.scene.applyPromotion=""+i.scene.applyPromotion,i.oldSceneApplyState.applyTemplate=i.scene.applyTemplate=""+i.scene.applyTemplate,i.scene.isTpl=""+i.scene.isTpl,i.scene.isShow=i.scene.isShow?""+i.scene.isShow:"0",i.oldSceneApplyState.promIds=i.scene.promIds=i.scene.promIds?parseFloat(i.scene.promIds):null,i.oldSceneApplyState.isTpl=i.scene.isTpl,2===i.scene.pageMode&&(i.scene.pageMode=0),i.scene.property?angular.isString(i.scene.property)&&(i.scene.property=JSON.parse(i.scene.property)):i.scene.property={},U=i.scene.loadingLogo||i.scene.property.loadingLogo,i.scene.property.hasOwnProperty("triggerLoop")||(i.scene.property.triggerLoop=!0),i.scene.property.hasOwnProperty("slideNumber")||(i.scene.property.slideNumber=!0),i.scene.property.autoFlipTime||(i.scene.property.autoFlipTime=3),i.scene.property.showShareCount&&""+i.scene.property.showShareCount!="0"||(i.scene.property.shareDes=""),i.initQCloudStatus=!1,i.isQCloudServiceSuccess=!0,"1"===i.scene.thirdCode?(i.QCloudStatus=!0,i.initQCloudStatus=!0):(i.QCloudStatus=!1,i.initQCloudStatus=!1),i.adSpend=i.scene.property.adSpend||0,i.isFormerScene=!1,i.scene.property.hideEqAd?(i.adSpend=f.getPriceByADType(v.HIDE),i.scene.property.eqAdType=v.HIDE,i.eqShowType=O.EQHIDE):i.scene.property.eqAdType?P(i.scene.property.eqAdType):i.scene.createTime<14165028e5?(i.isFormerScene=!0,i.adSpend=f.getPriceByADType(v.HIDE),P(v.HIDE)):i.scene.property.isAdvancedUser?i.scene.property.bottomLabel&&i.scene.property.bottomLabel.id?(i.isFormerScene=!0,i.adSpend=f.getPriceByADType(v.CUSTOM_BOTTOM),P(v.CUSTOM_BOTTOM)):(i.isFormerScene=!0,i.adSpend=f.getPriceByADType(v.DEFAULT_BOTTOM),P(v.DEFAULT_BOTTOM)):-1!==[5,51].indexOf(p.currentUser.type)||-1!==[2,21].indexOf(p.currentUser.type)&&-1!==[7,8,9].indexOf(p.currentUser.memberType)?(i.adSpend=f.getPriceByADType(v.CUSTOM_BOTTOM),P(v.CUSTOM_BOTTOM)):(i.adSpend=f.getPriceByADType(v.FREEPAGE),P(v.FREEPAGE)),i.scene.startDate&&i.scene.endDate&&(i.startDate=new Date(i.scene.startDate),i.endDate=new Date(i.scene.endDate),i.alwaysOpen=!1),i.scene.type=""+i.scene.type,h.activitiesPromise.then(function(e){i.activities=e.data.list||[],i.getActivityPageTpl()}),i.scene.bgAudio&&(i.scene.bgAudio=angular.isString(i.scene.bgAudio)?JSON.parse(i.scene.bgAudio):i.scene.bgAudio);var e=i.$watch("$parent.scene.bgAudio",function(e){i.scene.bgAudio=angular.isString(e)?JSON.parse(e):e});i.$on("$destroy",function(){e()})})},i.types=b.getSceneType(),i.tplPrices=[];var j=h.sceneTplPricesPromise.then(function(e){for(var t=0;t<e.data.list.length;t++)"免费"!==e.data.list[t].name&&-1===e.data.list[t].name.indexOf("秀点")&&(e.data.list[t].name+="秀点");i.tplPrices=e.data.list||[]}),B=[];i.sceneTags=[];var X=h.sceneTagsPromise.then(function(e){i.sceneTags=B=e.data.list||[]});e.all([j,X]).then(function(){i.getSceneDetail()});var V=i.$watch("scene.type",function(e){e&&(i.sceneTags=[],angular.forEach(B,function(t){""+e==""+t.bizType&&i.sceneTags.push(t)}))});i.$on("$destroy",function(){V()}),i.pagemodes=[{id:0,name:"上下翻页"},{id:4,name:"左右翻页"},{id:1,name:"上下惯性翻页"},{id:3,name:"左右惯性翻页"},{id:11,name:"上下连续翻页"},{id:5,name:"左右连续翻页"},{id:6,name:"立体翻页"},{id:7,name:"卡片翻页"},{id:8,name:"放大翻页"},{id:9,name:"交换翻页"},{id:10,name:"翻书翻页"},{id:12,name:"掉落翻页"},{id:13,name:"淡入翻页"}];var G=[11,12];if(!i.isAllowedToAccessNewPageFlip)for(var W=0;W<i.pagemodes.length;W++)for(var Q=0;Q<G.length;Q++)i.pagemodes[W].id===G[Q]&&(i.pagemodes.splice(W,1),W--);h.pageTplsPromise.then(function(e){e.data.list&&e.data.list.length>0?i.pageTpls=e.data.list:i.pageTpls=[]}),h.bottomPageTplsPromise.then(function(e){e.data.list&&e.data.list.length>0?i.bottomPageTpls=e.data.list:i.bottomPageTpls=[]}),i.chooseLastPage=function(e){i.scene.property.lastPageId=e,P(v.FREEPAGE,!0)},i.chooseCustomBottomLabel=function(e){i.scene.property.bottomLabel||(i.scene.property.bottomLabel={}),i.scene.property.bottomLabel.id=e,y.changeBottomType(i.eqShowType,i.scene.property.lastPageId,i.scene.property.bottomLabel,i.scene.property.eqAdType)},i.maxLength30=function(){if(i.scene.description&&(i.scene.description=i.scene.description.replace(/\n|\r/g," ")),i.scene.description&&i.scene.description.length>30){var e=i.scene.description.replace(/[^\x00-\xff]/g,"xx");if(e.length>60){var t=e.substring(0,60).replace(/xx/g,"中").length;i.scene.description=i.scene.description.substring(0,t)}}},i.maxLength24=function(){if(i.scene.name&&(i.scene.name=i.scene.name.replace(/\n|\r/g," ")),i.scene.name&&i.scene.name.length>24){var e=i.scene.name.replace(/[^\x00-\xff]/g,"xx");if(e.length>48){var t=e.substring(0,48).replace(/xx/g,"中").length;i.scene.name=i.scene.name.substring(0,t)}}},i.uploadLoadingLogo=function(){c.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(e){i.scene.loadingLogo=e.data,n.$broadcast("showLoading",i.scene.loadingLogo,e.data)})},i.isLoadingLogoAccessible=p.isAllowToAccess(p.accessDef.LOADING_LOGO),i.isTemplatePaymentAccessible=p.isAllowToAccess(p.accessDef.TEMPLATE_PAYMENT),i.cancelSceneSetting=function(){i.$parent.sceneSetting.showFlag=!1},i.fourNumberPassword=function(){i.scene.accessCode&&(i.scene.accessCode=i.scene.accessCode.replace(/\D/g,""),i.scene.accessCode.length>4&&(i.scene.accessCode=i.scene.accessCode.substr(0,4)))},i.isScenePasswordAccessible=p.isAllowToAccess(p.accessDef.SCENE_PASSWORD),i.activityPageTpls=[],i.selectedActivity=null,i.getActivityPageTpl=function(e){if(i.oldSceneApplyState.promIds&&i.scene.promIds!==i.oldSceneApplyState.promIds)return m.openMsgDialog({msg:"该场景已经参与活动，不可参与其他活动；请复制该场景展示后，再次选择参与活动。"}),void(i.scene.promIds=i.oldSceneApplyState.promIds);if(i.scene.promIds){var t=null;angular.forEach(i.activities,function(e){e.id===i.scene.promIds&&(t=e.sceneId,i.selectedActivity=e)}),t?u.getPageTpls(t).then(function(t){t.data.list&&t.data.list.length>0?(i.activityPageTpls=t.data.list,(!i.scene.property.activityPageId||e)&&(i.activityPageTpls.length?(i.scene.property.activityPageId=i.activityPageTpls[0].id,i.chooseActivityPageTpl(i.scene.property.activityPageId)):i.scene.property.activityPageId=null)):i.activityPageTpls=[]}):i.activityPageTpls=[]}else i.activityPageTpls=[],i.scene.property.activityPageId=null},i.chooseActivityPageTpl=function(e){i.scene.property.activityPageId=e,y.replaceActivePage(e)},i.openStatisticData=function(){i.QCloudStatus?(i.QCloudStatus=!1,i.scene.thirdCode="0",i.isQCloudServiceSuccess=!0):(i.QCloudStatus=!0,i.scene.thirdCode="1",i.isQCloudServiceSuccess=!0)}}]).value("eqADTypeChoice",{HIDE:0,FREEPAGE:1,DEFAULT_BOTTOM:2,CUSTOM_BOTTOM:3}).service("memberHandler",["usercenterService","security","eqADTypeChoice",function(e,t,n){function i(e,t){return/^\d+$/.test(t)?0:e*parseFloat(t)}var a={},s=null;return a.isVipUser=1!==t.currentUser.type,a.initUserMemberDetail=function(n){e.getUserMemberDetail(t.currentUser.id).then(function(e){s=e.data.obj,n&&n(s)})},a.getCurrentSelectionPrice=function(e,t,i,s){var o=a.getPriceByADType(e.property.eqAdType);o=a.isVipUser&&e.property.eqAdType!==n.HIDE?0:a.getPriceWithMemberPrivilege(o);var r=o-t;return i&&0!==r?r=o:0>r&&(r=0),!s&&e.loadingLogo&&(r+=a.getPriceWithMemberPrivilege(100,!0)),r},a.getPriceWithMemberPrivilege=function(e,n){return 2===t.currentUser.type&&t.currentUser.memberType&&(new Date).getTime()<t.currentUser.expiryTime||21===t.currentUser.type?n?i(e,s.loadingLogo||"1.0"):i(e,s.tailPage||"1.0"):e},a.getPriceByADType=function(e){switch(e){case n.HIDE:return 100;case n.FREEPAGE:return 0;case n.DEFAULT_BOTTOM:return 15;case n.CUSTOM_BOTTOM:return[6,7,8,9].indexOf(t.currentUser.memberType)?0:30}},a}]).service("sceneSettingCache",["sceneService","pageTplService",function(e,t){return{sceneTplPricesPromise:e.getSceneTemplatePrices(),sceneTagsPromise:t.getTagSysListWithType(),pageTplsPromise:t.getPageTpls(1301),bottomPageTplsPromise:t.getPageTpls(1311),activitiesPromise:e.getActivities()}}]).directive("sceneSettingComponent",[function(){return{scope:!0,controller:"SceneSettingComponentController",templateUrl:"scene/console/scene-setting-component.tpl.html",link:function(e,t){setTimeout(function(){t.find(".scene-setting-info.fade").addClass("in")})}}}]),angular.module("scene.create.console.setting",["scene.create.console.setting.style","scene.create.console.setting.anim","scene.create.console.setting.trigger","scene.create.console.setting.dropdown"]),angular.module("scene.create.console.setting").directive("styleModal",["sceneService","$compile","storageService",function(e,t,n){return{restrict:"AE",replace:!0,scope:{},templateUrl:"scene/console/setting.tpl.html",link:function(t,i,a){i.bind("keydown",function(e){e.stopPropagation()}),t.elemDef=e.currentElemDef,t.styleSettingPosition=JSON.parse(n.get("styleSettingPosition")),t.styleSettingPosition&&(i.context.style.top=t.styleSettingPosition.top,i.context.style.left=t.styleSettingPosition.left),e.currentTab="style",i.bind("mouseup",function(){var e=this.style.top,i=this.style.left;t.position={top:e,left:i},n.push("styleSettingPosition",JSON.stringify(t.position))});var s="style";t.$on("showStylePanel",function(n,i){s=t.activeTab,t.activeTab="",t.$apply(),t.elemDef=e.currentElemDef,i&&i.activeTab?"style"===i.activeTab?"z"===t.elemDef.type?t.activeTab="dropdown":t.activeTab="style":t.activeTab=i.activeTab:"style"===s||"dropdown"===s?"z"===t.elemDef.type?t.activeTab="dropdown":t.activeTab="style":t.activeTab=s,t.$apply()}),t.activeTab=a.activeTab,t.cancel=function(){$(i).hide()},t.$on("close.style.panel",function(){i.hide(),$(".edit_area").find(".boom, .boom1").remove()}),t.$on("$locationChangeStart",function(){t.cancel()}),t.showSettingTab=function(n){t.activeTab=n,e.currentTab=n},t.$watch("activeTab",function(n,i){n!==i&&(e.currentTab=t.activeTab)}),t.$watch("elemDef",function(){!t.elemDef||"w01"!==t.elemDef.type&&"w02"!==t.elemDef.type||"trigger"===e.currentTab&&(e.currentTab="style",t.activeTab="style"),t.elemDef||(e.currentTab="trigger",t.activeTab="trigger")})}}}]),angular.module("scene.create.console.shape",[]).controller("ShapeConsoleCtrl",["$rootScope","$scope","ModalService","obj","shapeService","fileService","storageService","security",function(e,t,n,i,a,s,o,r){var l=t.fileType=7;t.systemImages=!1;t.currentPage=1,t.toPage=1;var c,d=t.pageSize=18,p=r.currentUser.id;t.sysCategoryList=[{name:"图形",value:"8201"},{name:"文字",value:"8203"},{name:"图标",value:"8202"}],t.sysTagList=[],t.imgList=[],t.totalItems=0,t.currentPage=1,t.$watch("currentPage",function(e,n){e!==n&&(t.toPage=e,s.getSystemFiles1(e,d,l,t.sysCatId,t.sysTagId))}),t.getImgByPage=function(){return t.toPage<1||t.toPage>t.totalItems/18+1?void alert("此页超出范围"):void(t.currentPage=t.toPage)},t.cancel=function(){t.$dismiss()},t.selectSvg=function(e,n){var i=n.id,s=e.target.dataset.url;c=JSON.parse(o.get("shapeUse-"+p))||[];for(var r=0;r<c.length;r++)c[r].id===n.id&&c.splice(r,1);c.push(n),o.push("shapeUse-"+p,JSON.stringify(c)),a.getSvgElement(s).then(function(e){for(var n,a=$(e.data),o=a.length,r=0;o>r;r++)if("svg"===a[r].tagName){n=a[r];break}var l=parseFloat($(n).attr("width")),c=parseFloat($(n).attr("height"));l>c?(l=100*l/c+"px",c="100px"):(c=100*c/l+"px",l="100px");var d=$(n).find("[fill], [style*='fill']"),p=[],u=[],g={};$.each(d,function(e,t){var n=$(t).attr("style");if(n){for(var i=n.split(";"),a=0,s=i.length;s>a;a++)if(i[a].indexOf("fill:")>=0){u.push(i[a].split(":")[1]);break}}else u.push($(t).attr("fill"))});for(var m=0;m<u.length;m++)g[u[m]]||(g[u[m]]=1,"none"!==u[m]?p.push({fill:u[m],svgFill:u[m]}):p.push({fill:"",svgFill:"none"}));for(var h=0;h<p.length;h++){var f=[];$.each(d,function(e,t){var n,i=$(t).attr("style");if(i){for(var a=i.split(";"),s=0,o=a.length;o>s;s++)if(a[s].indexOf("fill:")>=0){n=a[s].split(":")[1];break}}else n=$(t).attr("fill");n===p[h].svgFill&&f.push(e)}),p[h].elements=f}t.$close({data:s,id:i,width:l,height:c,items:p})})},t.getSystemCategoryList=function(){t.userTagId="",t.systemImages=!0,t.sysTagList=[],t.sysCategoryList.length&&t.getSysCatAndList(t.sysCategoryList[0].value)},t.getSysCatAndList=function(e){t.sysCatId=e,s.getSysTagByCatId(e)},t.getSysImgByTag=function(e){t.sysTagId=e,s.getSystemFiles1(1,d,l,t.sysCatId,e)},t.$on("sysTag.update",function(){t.sysTagList=s.sysTagList,t.imgList=[],t.totalItems=0,t.currentPage=1,t.sysTagList.length&&t.getSysImgByTag(t.sysTagList[0].id)}),t.$on("imgList.update",function(){t.imgList=s.imgList,t.totalItems=s.totalItems,t.currentPage=s.pageNo}),t.switchToSystemImages=function(e){t.systemImages="true"===e},t.getHistory=function(){t.userTagId="history",c=JSON.parse(o.get("shapeUse-"+p))||[],s.getFilesHistory(l).then(function(e){if(e.data.success){t.imgList=e.data.list;for(var n=0;n<c.length;n++)for(var i=0;i<t.imgList.length;i++)t.imgList[i].id===c[n].id&&(t.imgList.splice(i,1),i--);for(var n=0;n<c.length;n++)t.imgList.unshift(c[n]);t.imgList.length>18&&(t.imgList=t.imgList.slice(0,18))}})},t.confirm=function(){t.authError="请您先选择图片！"},t.getSystemCategoryList()}]).factory("shapeService",["$rootScope","$http",function(e,t){var n={};return n.getSvgElement=function(e){return t({method:"GET",url:PREFIX_FILE_HOST+e})},n}]),angular.module("scene.create.console.soundComponent",["app.directives.addelement"]),angular.module("scene.create.console.soundComponent").controller("SoundComponentConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal",function(e,t,n,i,a){e.model={title:i.properties.title,imgSrc:i.properties.imgSrc,sound:i.sound},e.authError="",e.buttons=[{id:1,text:"有惊喜",btnStyle:{width:"100px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"听一听",btnStyle:{width:"100px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:3,text:"点我听歌",btnStyle:{width:"100px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"点播歌曲",btnStyle:{width:"100px",height:"30px",backgroundColor:"#fff","text-align":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)"}}],e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.title="",e.btnIndex=-1,e.model.btnStyle={width:"115px",height:"115px","line-height":"1",backgroundColor:"transparent"},e.model.imgSrc=i.properties.imgSrc=t.data},function(){})},angular.forEach(e.buttons,function(t,n){""!==e.model.title&&i.css.backgroundColor&&i.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=n)}),e.confirm=function(){return null!==e.model.imgSrc||e.model.title&&0!==e.model.title.length?!e.model.sound||$.isEmptyObject(e.model.sound)?void(e.authError="您还没有选择音效"):(i.sound=e.model.sound,i.properties.title=e.model.title,void e.$close(e.model)):(e.authError="按钮名称不能为空",void $('.form-list input[type="text"].btn-name').focus())},e.openSoundModal=function(){a.open({windowClass:"console img_console",templateUrl:"scene/console/sound.tpl.html",controller:"soundCtrl",resolve:{obj:function(){return{elemDef:i,type:4}}}}).result.then(function(t){e.model.sound=t})},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,n){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=n,e.model.imgSrc=i.properties.imgSrc=null}}]),angular.module("scene.create.console.sound",["services.file","soundLink"]).controller("soundCtrl",["$rootScope","$scope","soundService","ModalService","obj","uploaderService","$modal","fileService","dataCacheService",function(e,t,n,i,a,s,o,r,l){var c=t.sounds=[],d=t.type=a.type;t.selectSoundError="",t.uploader=s.uploader(a.type,4194304,1);var p=t.pageSize=10;t.actionContent=!1,t.pagination={},t.sound={},t.soundLink={src:""};var u=!1;window.localStorage?(u=2==d?localStorage.getItem("musicTag"):localStorage.getItem("soundTag"),t.isMySound="true"==u||!("false"==u||!u)&&"history"):t.isMySound=!1,t.alertAction=!0,t.soundAction=!1,t.popSoundAction=function(){t.soundAction=!0},t.closeAction=function(){t.soundAction=!1,g.indexOf(e.user.id)>-1&&(t.alertAction=!1)},t.actionShow=!1;var g=[];if(window.localStorage){var m=localStorage.getItem("setSoundAction");m&&(g=m.split(","),g.indexOf(e.user.id)>-1&&(t.alertAction=!1))}if(t.isCheckbox=function(t){t&&(g.push(e.user.id),localStorage.setItem("setSoundAction",g.join(",")))},4==d&&a.elemDef.sound&&a.elemDef.sound.src&&(t.sound=a.elemDef.sound),2==d&&a.elemDef.bgAudio)if("string"==typeof a.elemDef.bgAudio){var h=JSON.parse(a.elemDef.bgAudio);t.sound=h,h&&h.src&&(t.sound.url=h.src)}else t.sound=a.elemDef.bgAudio,a.elemDef.bgAudio.src&&(t.sound.url=a.elemDef.bgAudio.src);t.$on("uploadfiles.add",function(e){2==t.type?l.clear("mySounds"):l.clear("fileService1"),t.selectTab(!0)}),t.$on("thumbnailList.update",function(e,n){for(var i,a=0;a<t.uploader.queue.length;a++)if(100==t.uploader.queue[a].progress){t.uploader.queue.splice(a,1),i=n,c.unshift(i);for(var s=0;10>s;s++)0===c[a].size?c[a].size=null:c[a].size>0&&c[a].size<1024?c[a].size=c[a].size+" KB":c[a].size>=1024&&(c[a].size=(c[a].size/1024).toPrecision(2)+" MB")}c.length>0&&(t.actionContent=!1),2==t.type?l.clear("mySounds"):l.clear("fileService1")});var f=function(){t.isMySound=!0,t.selectTab(!0)};t.getSounds=function(e){t.toPage=e,4==d?t.isMySound?n.getMySounds(e):t.getSysMusicList(t.sysCatId,e):2==d&&(t.isMySound?n.getMyAudios(e):t.getSysMusicList(t.sysCatId,e))},t.sysCate=!t.isMySound,t.selectTab=function(e){window.localStorage&&(2==t.type?localStorage.setItem("musicTag",e):localStorage.setItem("soundTag",e)),t.sysCate=!e,t.isMySound=e,"history"==e?t.getHistory():t.getSounds(1)},t.getHistory=function(){r.getFilesHistory(2).then(function(n){n.data.success&&e.$broadcast("sounds.update",n.data,d,t.type)})},t.urlLink=function(){o.open({windowClass:"console six-contain",templateUrl:"scene/console/soundLink.tpl.html",controller:"SoundLinkCtrl",resolve:{obj:function(){return a.type}}}).result.then(function(){f()},function(){})},t.isSoundSelected=function(e,t,n){return 2===e?t.id?t.id==n.id:t.url==n.url:4===e?t.id?t.id==n.id:t.src==n.src:void 0},t.selectSound=function(e,n,i){t.sound=i?{}:e},t.playSound=function(t,n){t.stopPropagation(),e.$broadcast("sound.play",c[n])},t.deleteMySound=function(e,a){e.stopPropagation(),i.openConfirmDialog({msg:"确定删除此音乐吗？"},function(){2==t.type?l.clear("mySounds"):l.clear("fileService1"),n.deleteMySound(c[a].id)})},t.clear=function(){t.sound={}},t.ok=function(){var e,n=t.sound;4==d&&(e=n.src?{name:n.name,src:n.src,id:n.id}:{},t.$close(e)),2==d&&(h=n.url?{url:n.url,name:n.name,id:n.id}:{},t.$close(h))},t.cancel=function(){t.$dismiss()},t.$on("sounds.update",function(e,n,i){if(c.length=0,n.list.length>0){t.actionContent=!1,$.each(n.list,function(e,t){0===t.path.indexOf("http://")&&(t.isValue=!0),t.size<1024&&t.size>0?t.size=t.size+" KB":t.size>=1024?t.size=(t.size/1024).toPrecision(2)+" MB":0===t.size&&(t.size=null),4==i?c.push({id:t.id,name:t.name,src:t.path,isPlaying:!1,size:t.size,isValue:t.isValue}):2==i&&c.push({id:t.id,name:t.name,url:t.path,isPlaying:!1,size:t.size,isValue:t.isValue})});var a=n.map;a&&(t.pagination={totalItems:a.count,pageSize:a.pageSize,currentPage:a.pageNo,numPages:Math.ceil(a.count/a.pageSize)})}else t.pagination.totalItems=0,t.actionContent=!0}),t.$on("mySounds.delete",function(e,i){i===t.sound.id&&(t.sound={}),2==d?n.getMyAudios(t.pagination.currentPage):4==d&&n.getMySounds(t.pagination.currentPage)});t.$on("sysMusic.update",function(e){t.sysMusicList=r.sysMusicList}),function(e){r.getSysMusicCategory(e)}(d),t.getSysMusicList=function(e,i){t.sysCatId=e,n.getSysMusicList(i,p,d,e)},"history"==t.isMySound?t.getHistory():t.isMySound?4==d?n.getMySounds(1):n.getMyAudios(1):t.getSysMusicList(0,1)}]).factory("soundService",["$rootScope","$modal","fileService","dataCacheService","$http",function(e,t,n,i,a){var s={};return s.getSysMusicList=function(t,a,s,o){n.getSystemFiles(t,a,s,o).then(function(t){t.data.success?(i.getAsyncUrl()&&(i.push("fileService1",i.getAsyncUrl(),t),i.setAsyncUrl()),e.$broadcast("sounds.update",t.data,s)):alert(t.data.msg)},function(){alert(networkOut)})},s.getMyAudios=function(t){n.getFileByCategory(t,10,"0","2").then(function(t){t.data.success?(i.getAsyncUrl()&&(i.push("mySounds",i.getAsyncUrl(),t),i.setAsyncUrl()),e.$broadcast("sounds.update",t.data,2)):alert(t.data.msg)},function(){alert(networkOut)})},s.getMySounds=function(t){n.getUserFiles(t,10,4,0).then(function(t){t.data.success?(i.getAsyncUrl()&&(i.push("fileService1",i.getAsyncUrl(),t),i.setAsyncUrl()),e.$broadcast("sounds.update",t.data,4)):alert(t.data.msg)},function(){alert(networkOut)})},s.deleteMySound=function(t){n.deleteFile1(t).success(function(n){n.success?e.$broadcast("mySounds.delete",t):alert(n.msg)}).error(function(){alert(networkOut)})},s.getMiuteByTime=function(e){return Math.round(e%60)>10?Math.floor(e/60)+":"+Math.round(e%60):Math.floor(e/60)+":0"+Math.round(e%60)},s.soundCrop=function(e,t,n){var i="m/scene/mp3/transfer";return i+="?sourcefile="+e+"&startTime="+t+"&endTime"+n,a({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},s}]).directive("eqxAudio",function(){function e(e,n){var i={};n.bind("pause",function(){n.attr("src")&&e.$apply(function(){i.isPlaying=!1})}).bind("play",function(){n.attr("src")&&e.$apply(function(){i.isPlaying=!0})});var a=n.get(0);e.$on("sound.play",function(e,n){t(i,n,a),i=n})}function t(e,t,n){var i,a={};a.src=t.src||t.url,i=0===a.src.indexOf("http://")?a.src:PREFIX_FILE_HOST+a.src;var s=i.substr(i.lastIndexOf("/")+1),o=n.src.substr(i.lastIndexOf("/")+1);null==e.id?s==o&&t.isPlaying?n.pause():s!=o||t.isPlaying?(n.src=i,n.play(),e.isPlaying=!1,t.isPlaying=!0):n.play():e.id==t.id&&t.isPlaying?n.pause():e.id!=t.id||t.isPlaying?(n.src=i,n.play(),e.isPlaying=!1,t.isPlaying=!0):n.play()}return{link:e}}).filter("maxLength",function(){return function(e,t){return e?e.length<=t?e:e.substr(0,t)+"…":void 0}}),angular.module("scene.create.console.cropSound",["services.file"]).controller("soundCropCtrl",["$rootScope","$scope","uploaderService","obj","soundService","sound","fileService","$timeout","$rootScope","ModalService",function(e,t,n,i,a,s,o,r,e,l){function c(t){if(t.data.success)if(0!==t.data.map.code)if(""+t.data.map.code=="3"||""+t.data.map.code=="4")o.saveFileInfo(s),e.$broadcast("edit.load");else{if(Date.now()-p>6e4)return void alert("裁切失败，请重新裁切！");r(function(){a.pollingStatus(d).then(c)},1e3)}else s.path=t.data.map.path,o.saveFileInfo(s),e.$broadcast("edit.load");else o.saveFileInfo(s),e.$broadcast("edit.load")}t.startTime=0,t.endTime=0,t.currentTime=0,t.minuteS=0,t.secondS=0,t.soundSrc=PREFIX_FILE_HOST+s.path,t.title=s.name,t.cropLen="0:00",t.resourceType="mp3",t.type=2;var d,p;t.ok=function(){var n=t.startTime,i=t.endTime-t.startTime;return 0>=i?void l.openMsgDialog({msg:"裁切长度不能为0。"}):(e.$broadcast("edit.load","show"),i>=t.duration&&(n=null,i=null),p=Date.now(),void a.soundCrop(s.path,n,i).then(function(e){e.data.success&&(d=e.data.obj,a.pollingStatus(d).then(c))}))},t.$on("get.file.list",function(){t.$close(s)}),t.play=function(){"start"!==t.state?t.state="start":t.state="pause"},t.$watch("startTime",function(e,n){e!==n&&(t.minuteS=Math.floor(e/60),t.secondS=Math.round(e%60),t.cropLen=a.getMiuteByTime(Math.abs(t.endTime-t.startTime)))}),t.$watch("endTime",function(e,n){e!==n&&(t.minuteE=Math.floor(e/60),t.secondE=Math.round(e%60),t.cropLen=a.getMiuteByTime(Math.abs(t.endTime-t.startTime)))}),t.changeStartTime=function(){t.secondS||(t.secondS=0),t.secondS=Math.floor(t.secondS),t.startTime=60*t.minuteS+t.secondS,t.startTime>t.endTime&&(t.minuteS=Math.floor(t.endTime/60),t.secondS=Math.round(t.endTime%60),t.startTime=t.endTime)},t.changeEndTime=function(){t.secondE||(t.secondE=0),t.secondE=Math.floor(t.secondE),t.endTime=60*t.minuteE+t.secondE,t.endTime>t.duration?(t.minuteE=Math.floor(t.duration/60),t.secondE=Math.round(t.duration%60),t.endTime=t.duration):t.endTime<t.startTime&&(t.minuteE=Math.floor(t.startTime/60),t.secondE=Math.round(t.startTime%60),t.endTime=t.startTime)},t.setStartTime=function(){t.startTime=t.currentTime},t.setEndTime=function(){t.endTime=t.currentTime},e.$on("upload.success",function(e,n){s=n,t.$apply(function(){t.title=s.name,t.soundSrc=PREFIX_FILE_HOST+s.path})})}]).directive("soundCropPanel",["$interval","soundService",function(e,t){return{scope:{startTime:"=",endTime:"=",currentTime:"=",soundSrc:"@",state:"=",duration:"="},restrict:"A",templateUrl:"scene/console/soundCropPanel.tpl.html",link:function(e,n){function i(e){o=e.target.dataset.state,v=n.offset().left}function a(t){if(o){var n=t.clientX-v;"s"===o?(n>=h?n=h:0>=n&&(n=0),e.startTime=Math.round(n/850*e.duration)):"e"===o?(m>=n?n=m:n>=850&&(n=850),e.endTime=Math.round(n/850*e.duration)):(m>=n?n=m:n>=h&&(n=h),e.currentTime=Math.round(n/850*e.duration)),e.$apply()}}function s(t){o&&("s"===o?(m=t.clientX-v,m>=h?m=h:0>=m&&(m=0),e.startTime=Math.round(m/850*e.duration)):"e"===o?(h=t.clientX-v,m>=h?h=m:h>=850&&(h=850),e.endTime=Math.round(h/850*e.duration)):(f=t.clientX-v,m>f?f=m:f>h&&(h=h),l.currentTime=e.currentTime),o=null)}var o,r=n.find("audio"),l=r.get(0),c=n.find(".bar-s"),d=n.find(".bar-e"),p=n.find(".bar-c"),u=n.find(".left-dis"),g=n.find(".right-dis"),m=0,h=850,f=0,v=0;e.curT="0:00",$("#loading").show(),r.attr("src",e.soundSrc),p.hide(),c.on("mousedown",i),d.on("mousedown",i),p.on("mousedown",i),n.on("mousemove",a),n.on("mouseup mouseleave",s),r.on("loadedmetadata",function(){if(!isNaN(l.duration)){e.startTime=0,e.currentTime=0,e.endTime=e.duration=Math.floor(l.duration),n.find(".dur").html(t.getMiuteByTime(e.endTime));for(var i=850/e.duration,a=e.duration/6+1,s=[],o=1;a>=o;o++)s.push(t.getMiuteByTime(6*o));e.scales=s,e.liW=6*i+"px",e.endLi=850-6*i*(Math.floor(a)-1)+"px",$("#loading").hide(),e.$apply()}}),r.on("timeupdate",function(){"c"!==o&&(e.currentTime=l.currentTime,e.$apply())}),e.$watch("state",function(t,n){t!==n&&("start"===t?(e.currentTime>=e.endTime&&(l.currentTime=e.startTime),l.currentTime<e.startTime&&(l.currentTime=e.startTime),p.show(),l.play()):"pause"===t&&l.pause())}),e.$watch("endTime",function(t,n){t!==n&&(h=t/e.duration*850,h=h>850?850:h,d.css("left",h-5+"px"),g.css("width",850-h+"px"),f>h&&(e.currentTime=t,l.currentTime=t))}),e.$watch("startTime",function(t,n){t!==n&&(m=t/e.duration*850,m=m>850?850:m,c.css("left",m-5+"px"),u.css("width",m+"px"),m>f&&(e.currentTime=t,l.currentTime=t))}),e.$watch("currentTime",function(n,i){n!==i&&(e.curT=t.getMiuteByTime(n),f=Math.round(n/e.duration*850),f>=h&&(f=h,e.state="pause"),p.css("left",f-5+"px"))}),e.$watch("soundSrc",function(t,n){t!==n&&($("#loading").show(),p.hide(),r.attr("src",t),e.state="pause")})}}}]),angular.module("soundLink",["soundLink"]),angular.module("soundLink").controller("SoundLinkCtrl",["$rootScope","$scope","sceneService","obj",function(e,t,n,i){t.authError="",t.soundLink={src:""},t.selectLink=function(){t.sound={}},t.confirm=function(){var e=t.soundLink.src;if(e.length&&e.lastIndexOf(".mp3")!==e.length-4)return void(t.authError="请输入mp3格式的音乐链接");if(0===e.length)return t.authError="链接地址不能为空",void $(".link").focus();var a;e&&(a={name:"外链音乐",src:e}),n.soundLink(e,i).then(function(e){200===e.data.code?t.$close(a):(t.authError=e.data.msg,$(".link").focus())})},t.cancel=function(){t.$dismiss()}}]),angular.module("scene.create.console.statistics",[]),angular.module("scene.create.console.statistics").controller("StatisticsConsoleCtrl",["$scope","obj",function(e,t){e.model={title:t.title,properties:{layout:t.properties.layout,size:t.properties.size,color:t.properties.color,icon:t.properties.icon,imgSrc:t.properties.imgSrc}},e.authError="",e.confirm=function(){angular.extend(t,e.model);var n=parseInt(t.css.height,10)||0;e.model.properties.imgSrc&&115>n&&(e.model.btnStyle={width:"320px",height:"115px",lineHeight:"115px",backgroundColor:"transparent"}),"counter-tb"===e.model.properties.layout&&(!e.model.properties.imgSrc&&80>n&&(e.model.btnStyle={height:"80px",lineHeight:"80px"}),e.model.properties.imgSrc&&155>n&&(e.model.btnStyle=e.model.btnStyle||{},e.model.btnStyle.height=e.model.btnStyle.lineHeight="155px")),e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseEqfont=function(t){e.model.properties.icon=t,e.model.properties.imgSrc=null}}]),angular.module("scene.create.console.setting.style",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput","services.history","scene.create.console.map","chart.style","comp.style"]),angular.module("scene.create.console.setting.style").controller("StyleConsoleCtrl",["$scope","sceneService","historyService","$modal","$rootScope","setCompService","security",function(e,t,n,i,a,s,o){function r(t){for(var n=0;n<e.adSizes.length;n++)if(e.adSizes[n].value===t)return e.adSizes[n]}e.isEditor=o.isTplEditor();var l=e.elemDef=t.currentElemDef||{css:{}};e.longPage=t.longPage,delete l.css.borderTopLeftRadius,delete l.css.borderTopRightRadius,delete l.css.borderBottomLeftRadius,delete l.css.borderBottomRightRadius,delete l.css.border;var c,d,p,u=l.css,g=$("#nr #inside_"+e.elemDef.id+" > .element-box"),m=l.type+"";if(o.isAllowToAccess(o.accessDef.ACCESS_COMP_MANAGE)&&(e.setModel=s.initModel(e.elemDef)),e.$on("adjust.line.height",function(){u.lineHeight&&"string"==typeof u.lineHeight&&-1===u.lineHeight.indexOf("px")&&(e.model.lineHeight=Math.abs(u.lineHeight))}),e.model={backgroundColor:u.backgroundColor||"",opacity:100-100*u.opacity||0,color:u.color||"#676767",borderWidth:parseInt(u.borderWidth,10)||0,borderStyle:u.borderStyle||"solid",borderColor:u.borderColor||"rgba(0,0,0,1)",paddingBottom:parseInt(u.paddingBottom,10)||0,paddingTop:parseInt(u.paddingTop,10)||0,borderRadius:parseInt(u.borderRadius,10)||0,transform:u.transform&&parseInt(u.transform.replace("rotateZ(","").replace("deg)",""),10)||0,textAlign:u.textAlign||"left",lock:l.properties.lock},e.proModel={},e.adSizes=[{name:"大矩形",value:1,width:336,height:280},{name:"大型移动横幅",value:2,width:320,height:100},{name:"大型摩天大楼",value:3,width:300,height:600},{name:"中等矩形",value:4,width:300,height:250}],0===u.lineHeight||u.lineHeight?e.model.lineHeight=u.lineHeight:e.model.lineHeight=1,e.lineHeightEmpty=function(){0===e.model.lineHeight||e.model.lineHeight||(g[0].style.lineHeight=1,e.model.lineHeight=1)},u.lineHeight&&"string"==typeof u.lineHeight&&-1===u.lineHeight.indexOf("px")&&(e.model.lineHeight=Math.abs(u.lineHeight)),"m"===m)e.model.content=l.content,e.model.address=l.properties.address;else if("g"===m)e.proModel.content=l.content,e.proModel.size=l.properties.size;else if("h"===m)e.shapeAttrs=l.properties.items,e.scrollShow=!1,e.changePos=function(t){e.scrollTop=t.y,e.$apply()},e.shapeAttrs&&e.shapeAttrs.length>6&&(e.scrollShow=!0),e.$watch("shapeAttrs",function(e,t){if(e&&e!==t){var n=e.length;if(l.properties.src){if(!n)return;var i=g.find("[fill], [style*='fill']");$.each(i,function(t){for(var a=0;n>a;a++)for(var s=e[a].elements,o=0;o<s.length;o++)t===s[o]&&i.eq(t).css({fill:jQuery.Color(e[a].fill).toString()})})}}},!0);else if(l.type+""=="201"){for(c=t.getElements(),p=0;p<c.length;p++)c[p].id===l.properties.comid&&(d=c[p]);e.model.fontSize=l.css.fontSize,e.model.niketype=l.properties.type,e.model.content=l.content}else if(l.type+""=="2"&&l.css.fontSize)e.model.fontSize=parseInt($("#"+l.id)[0].style.fontSize,10)||l.css.fontSize;else if(l.type+""=="401"){for(c=t.getElements(),p=0;p<c.length;p++)if(c[p].id===l.properties.comid){d=c[p],e.model.fontSize=d.css.fontSize,e.model.backgroundColor=d.css.backgroundColor;var h=$("#inside_"+d.id+" > .element-box");e.model.content=d.content,e.model.color=d.css.color}e.model.niketype=l.properties.type}else l.type+""=="b"&&(e.boardsModel={style:l.properties.style,meslabel:l.properties.meslabel,morelabel:l.properties.morelabel});if(e.setPosition=function(){i.open({windowClass:"img_console",templateUrl:"scene/console/map.tpl.html",controller:"MapCtrl",resolve:{elemDef:function(){return l}}}).result.then(function(t){l.properties.zoom=t.zoom,l.properties.lat=t.center.lat,l.properties.lng=t.center.lng,t.label&&(l.content=t.label,l.properties.address=t.label);var n=$("#"+l.id).data("map");if(n.panTo(t.center),n.setZoom(t.zoom),$("#"+l.id).data("label")){$("#"+l.id).data("label").setPosition(t.center)}$("#"+l.id).data("marker").setPosition(t.center),t.label&&(e.model.content=t.label,e.model.address=t.label)})},e.maxRadius=Math.min(g.outerWidth(),g.outerHeight())/2+10,u.borderRadiusPerc?e.model.borderRadiusPerc=parseInt(u.borderRadiusPerc,10):u.borderRadius?"999px"===u.borderRadius?e.model.borderRadiusPerc=100:(e.model.borderRadiusPerc=parseInt(100*parseInt(u.borderRadius,10)*2/Math.min(g.outerWidth(),g.outerHeight()),10),e.model.borderRadiusPerc>100&&(e.model.borderRadiusPerc=100)):e.model.borderRadiusPerc=0,e.tmpModel={boxShadowDirection:0,boxShadowX:0,boxShadowY:0,boxShadowBlur:0,boxShadowSize:0,boxShadowColor:"rgba(0,0,0,0.5)"},u.boxShadow){var f=u.boxShadow.split(" ");e.tmpModel.boxShadowX=parseInt(f[0],10),e.tmpModel.boxShadowY=parseInt(f[1],10),e.tmpModel.boxShadowDirection=parseInt(u.boxShadowDirection,10)||0,e.tmpModel.boxShadowBlur=parseInt(f[2],10),e.tmpModel.boxShadowColor=f[3],e.tmpModel.boxShadowSize=parseInt(u.boxShadowSize,10)||0}e.clear=function(){e.model={backgroundColor:"",opacity:0,color:"#676767",borderWidth:0,borderStyle:"solid",borderColor:"rgba(0,0,0,1)",paddingBottom:0,paddingTop:0,lineHeight:1,borderRadius:0,transform:0,fontSize:12,textAlign:"left"},e.tmpModel={boxShadowDirection:0,boxShadowX:0,boxShadowY:0,boxShadowBlur:0,boxShadowSize:0,boxShadowColor:(u.boxShadowSize,"rgba(0,0,0,0.5)")}},e.$watch("tmpModel",function(){var t={};$.extend(!0,t,e.model),t.borderRadius+="px",t.borderTopLeftRadius=t.borderTopRightRadius=t.borderBottomLeftRadius=t.borderBottomRightRadius=t.borderRadius,t.opacity=(100-e.model.opacity)/100,t.boxShadow=Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor,t.boxShadowDirection=e.tmpModel.boxShadowDirection,t.boxShadowSize=e.tmpModel.boxShadowSize,t.transform="rotateZ("+e.model.transform+"deg)",$.extend(!0,l.css,t)},!0),e.$watch("model",function(){var t={};if($.extend(!0,t,e.model),t.borderRadius+="px",t.borderTopLeftRadius=t.borderTopRightRadius=t.borderBottomLeftRadius=t.borderBottomRightRadius=t.borderRadius,t.opacity=(100-e.model.opacity)/100,t.boxShadow=Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor,t.boxShadowDirection=e.tmpModel.boxShadowDirection,t.boxShadowSize=e.tmpModel.boxShadowSize,t.transform="rotateZ("+e.model.transform+"deg)",$.extend(!0,l.css,t),l.properties.lock=t.lock,"m"===l.type){var n=$("#"+l.id).data("label");if(t.content){var i=$("#"+l.id).data("map");n?(n.setContent(t.content),n.getMap()||n.setMap(i),$("#"+l.id).data("label",n)):(n=new qq.maps.Label({position:i.getCenter(),map:i,content:t.content}),$("#"+l.id).data("label",n))}else n&&n.setMap(null);l.content=t.content}else l.type+""=="201"?(l.content!==t.content&&(l.content=t.content,$("#"+l.id).html(l.content)),l.properties.type=t.niketype,d&&(d.properties.type=t.niketype),l.css.fontSize=t.fontSize,$("#"+l.id).css("fontSize",t.fontSize+"px")):l.type+""=="2"&&t.fontSize?(l.css.fontSize=t.fontSize,$("#"+l.id).css("fontSize",t.fontSize+"px")):l.type+""=="401"&&(d&&(d.content!==t.content&&(d.content=t.content,$("#"+d.id).html(t.content)),d.css.fontSize=t.fontSize,$("#"+d.id).css("fontSize",t.fontSize+"px"),d.properties.type=t.niketype,d.css.backgroundColor=t.backgroundColor,d.css.color=t.color,h.css({color:t.color,backgroundColor:t.backgroundColor})),l.properties.type=t.niketype)},!0),e.$watch("proModel",function(){var t={};if($.extend(!0,t,e.proModel),"g"===m){if(t.size&&t.size!==l.properties.size){var n=r(t.size);e.model.width=n.width,e.model.height=n.height}l.content=e.proModel.content,l.properties.size=e.proModel.size}},!0),e.$watch("boardsModel",function(){var t={};$.extend(!0,t,e.boardsModel),l.properties.style!==t.style&&(e.model.backgroundColor="pink"===t.style?"#F6DCF0":"black"===t.style?"#252525":"#F0F3F4",g.css("backgroundColor",e.model.backgroundColor),g.find(".boards-"+l.properties.style).removeClass("boards-"+l.properties.style).addClass("boards-"+t.style),l.properties.style=t.style),l.properties.meslabel!==t.meslabel&&(l.properties.meslabel=t.meslabel,g.find(".replay").html(t.meslabel)),l.properties.morelabel!==t.morelabel&&(l.properties.morelabel=t.morelabel,g.find(".more").html(t.morelabel))},!0),e.openExpore=function(t){var n=!e.$eval(t);e.showShadow=!1,e.showBasic=!1,e.showBorder=!1,e.showSetting=!1,e[t]=n}}]).directive("styleInput",["multiCompResize","$rootScope",function(e,t){return{restrict:"AE",link:function(e,n,i){var a=$("#nr #inside_"+e.elemDef.id),s=a.find(".element-box"),o=a.find(".element");e.$watch(function(){return $(n).val()},function(n,r){if(n!==r)if("borderWidth"===i.cssItem){s.css({borderStyle:e.model.borderStyle,borderWidth:n});var l={width:s.width(),height:s.height()};if(""+e.elemDef.type=="4"){var c=s.find("img"),d=c.width()/c.height(),p=l.width/l.height;d>=p?(c.outerHeight(l.height),c.outerWidth(l.height*d),c.css("marginLeft",-(c.outerWidth()-l.width)/2),c.css("marginTop",0)):(c.outerWidth(l.width),c.outerHeight(l.width/d),c.css("marginTop",-(c.outerHeight()-l.height)/2),c.css("marginLeft",0)),e.elemDef.properties.imgStyle.marginTop=c.css("marginTop"),e.elemDef.properties.imgStyle.marginLeft=c.css("marginLeft"),e.elemDef.properties.imgStyle.width=c.outerWidth(),e.elemDef.properties.imgStyle.height=c.outerHeight()}}else if("borderRadius"===i.cssItem)s.css({borderRadius:e.model.borderRadius});else if("opacity"===i.cssItem)s.css({opacity:(100-n)/100});else if("backgroundColor"===i.cssItem)s.css({backgroundColor:n});else if("color"===i.cssItem){if(s.css({color:n}),"h"===e.elemDef.type){var u=s.find("svg");u.find("g").length?u.find("g").attr("fill",n):u.children().attr("fill",n)}}else"borderStyle"===i.cssItem?s.css({borderStyle:e.model.borderStyle}):"textAlign"===i.cssItem?s.css({textAlign:e.model.textAlign}):"borderColor"===i.cssItem?s.css({borderColor:e.model.borderColor}):"padding"===i.cssItem?s.css({paddingTop:e.model.paddingTop,marginTop:-e.model.paddingBottom}):"lineHeight"===i.cssItem?s.css({lineHeight:e.model.lineHeight}):"transform"===i.cssItem?(s.parents("li").css({transform:"rotateZ("+e.model.transform+"deg)"}),t.$broadcast("boxOuter")):"boxShadow"===i.cssItem?(e.tmpModel.boxShadowX=-Math.sin(e.tmpModel.boxShadowDirection*Math.PI/180)*e.tmpModel.boxShadowSize,e.tmpModel.boxShadowY=Math.cos(e.tmpModel.boxShadowDirection*Math.PI/180)*e.tmpModel.boxShadowSize,s.css({boxShadow:Math.round(e.tmpModel.boxShadowX)+"px "+Math.round(e.tmpModel.boxShadowY)+"px "+e.tmpModel.boxShadowBlur+"px "+e.tmpModel.boxShadowColor})):"width"===i.cssItem?(o.css("width",n),a.css("width",n)):"height"===i.cssItem&&(o.css("height",n),a.css("height",n))})}}}]).directive("angleKnob",function(){return{restrict:"AE",templateUrl:"scene/console/angle-knob.tpl.html",link:function(e,t){function n(e,t){var n=Math.sqrt((e-28)*(e-28)+(t-28)*(t-28))/28,i=28+(e-28)/n,a=28+(t-28)/n;s.css({top:Math.round(a),left:Math.round(i)})}function i(e,t){var n=e-28,i=28-t,a=180*Math.atan(n/i)/Math.PI;return t>28&&(a+=180),28>=t&&28>e&&(a+=360),Math.round(a)}var a=$(t).find(".sliderContainer"),s=$(t).find(".sliderKnob");e.$watch(function(){return e.tmpModel.boxShadowDirection},function(e){s.css({top:28-28*Math.cos(e*Math.PI/180),left:28+28*Math.sin(e*Math.PI/180)})}),0!==e.tmpModel.boxShadowDirection&&s.css({top:28-28*Math.cos(e.tmpModel.boxShadowDirection*Math.PI/180),left:28+28*Math.sin(e.tmpModel.boxShadowDirection*Math.PI/180)}),a.bind("mousedown",function(t){t.stopPropagation();var s=a.offset().left,o=a.offset().top;n(t.pageX-s,t.pageY-o);var r=i(t.pageX-s,t.pageY-o);e.tmpModel.boxShadowDirection=r,e.$apply(),$(this).bind("mousemove",function(t){t.stopPropagation(),n(t.pageX-s,t.pageY-o);var a=i(t.pageX-s,t.pageY-o);e.tmpModel.boxShadowDirection=a,e.$apply()}),$(this).bind("mouseup mouseleave",function(){$(this).unbind("mousemove"),$(this).unbind("mouseup mouseleave")})})}}}).controller("MapCtrl",["$scope","elemDef",function(e,t){e.elemDef=t,e.zoom=t.properties.zoom?t.properties.zoom:11,e.center=t.properties.lat?{lat:t.properties.lat,lng:t.properties.lng}:{lat:39.916527,lng:116.397128},"设置位置"!==t.properties.address&&(e.address=t.properties.address,e.markerP=new qq.maps.LatLng(e.center.lat,e.center.lng));var n=new qq.maps.SearchService({complete:function(t){var n=t.detail.pois;e.searchEnd(n)}});e.searchEnd=function(t){e.pois=t,e.choosePosition(t[0]),e.choosePoi=t[0],e.$apply()},e.choosePosition=function(t){e.center=t.latLng,e.choosePoi=t,e.markerP=e.center},e.cancel=function(){e.$dismiss()},e.ok=function(){e.$close({zoom:e.zoom,center:e.center,label:e.choosePoi?e.choosePoi.name:null})},e.searchAddress=function(e){e&&(n.setPageIndex(0),n.setPageCapacity(10),n.search(e))},e.change=function(t){e.zoom=t.zoom,e.bounds=t.bounds,e.center=t.center}}]).directive("strlen",[function(){function e(e,t,n){t||(t=""),e.html(eqShow.getCharactersLen(t)+"/"+n)}return{scope:{str:"="},restrict:"A",link:function(t,n,i){e(n,t.str,i.max),t.$watch("str",function(a,s){a!==s&&(t.str=eqShow.substtrCharacters(a,i.max),e(n,t.str,i.max))})}}}]).directive("insertHtml",[function(){return{scope:{target:"@",content:"@"},restrict:"A",link:function(e){var t=$(e.target);e.$watch("content",function(e,n){e!==n&&(t.empty(),t.append($(e)))})}}}]),angular.module("scene.create.console.tel",["app.directives.addelement"]),angular.module("scene.create.console.tel").controller("TelConsoleCtrl",["$scope","$timeout","localizedMessages","obj","$modal",function(e,t,n,i,a){e.model={title:i.properties.title,number:i.properties.number,imgSrc:i.properties.imgSrc},e.authError="",e.buttons=[{id:1,text:"一键拨号",btnStyle:{width:"100px",backgroundColor:"rgb(244, 113, 31)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:2,text:"热线电话",btnStyle:{width:"100px",backgroundColor:"rgb(253, 175, 7)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:3,text:"拨打电话",btnStyle:{width:"100px",backgroundColor:"rgb(121, 196, 80)",height:"30px","text-align":"center","line-height":"30px",color:"rgb(255, 255, 255)"}},{id:4,text:"一键拨号",btnStyle:{width:"100px",height:"30px",backgroundColor:"#fff","text-align":"center",border:"1px solid #3FB816","line-height":"30px",color:"rgb(0, 0, 0)"}}],e.openImageModal=function(){a.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(t){e.model.title="",e.btnIndex=-1,e.model.btnStyle={width:"115px",height:"115px","line-height":"1",backgroundColor:"transparent"},e.model.imgSrc=i.properties.imgSrc=t.data},function(){})},angular.forEach(e.buttons,function(t,n){""!==e.model.title&&i.css.backgroundColor&&i.css.backgroundColor===t.btnStyle.backgroundColor&&(e.btnIndex=n)}),e.butName=!1,e.butInput=!1,e.confirm=function(){if(null===e.model.imgSrc&&(!e.model.title||0===e.model.title.length))return e.authError="按钮名称不能为空",void(e.butName=!0);if(e.butName=!1,!e.model.number||0===e.model.title.number)return e.authError="电话号码不能为空",void(e.butInput=!0);if(e.butInput=!1,e.model.number){if(!/^\d{3,15}$/.test(e.model.number))return e.authError="电话输入有误，请输入3-15位数字",void(e.butInput=!0);e.butInput=!1}e.$close(e.model)},e.cancel=function(){e.$dismiss()},e.chooseTabButton=function(t,n){e.model.title=t.text,e.model.btnStyle=t.btnStyle,e.btnIndex=n,e.model.imgSrc=i.properties.imgSrc=null}}]),angular.module("scene.create.console.setting.trigger",["colorpicker.module","app.directives.style","app.directives.uislider","app.directives.limitInput","scene.edit.trigger"]),angular.module("scene.create.console.setting.trigger").controller("TriggerConsoleCtrl",["$scope","$rootScope","sceneService","triggerService","$modal","ModalService","i18nNotifications","security",function(e,t,n,i,a,s,o){function r(){var t=i.getTrigger(p.id);if(t&&t.sends.length){c(t.sends);for(var n=0;n<t.sends.length&&e.triggerEvents[n];n++)t.sends[n].delay=n>0?t.sends[n-1].delay+e.triggerEvents[n].delay:e.triggerEvents[n].delay}var a;$.each(u,function(e,t){i.clearTrigger(e),a=i.getTrigger(e),a&&a.sends.length&&c(a.sends),a?t.trigger=a:delete t.trigger}),2===e.sendType.value&&(a=i.getTrigger(e.elemDef.id),a&&a.sends.length&&c(a.sends),e.elemDef.properties||(e.elemDef.properties={}),e.elemDef.properties.trigger=a)}function l(){if(!p)return void(e.triggerEvents=[]);var t=i.getTrigger(p.id);if(t&&t.sends.length){c(t.sends),e.triggerEvents=[];var n=angular.copy(t.sends);angular.forEach(n,function(t,i){if(e.triggerEvents.push({}),angular.forEach(t.handles,function(t){1!==t.type&&2!==t.type||!t.ids.length?3===t.type&&t.ids.length&&(e.triggerEvents[i]=angular.copy(e.eventTypes[1]),e.triggerEvents[i].type=2):(e.triggerEvents[i]=angular.copy(e.eventTypes[0]),e.triggerEvents[i].type=1)}),i>0)for(var a=0;i>a;a++)t.delay-=n[a].delay;e.triggerEvents[i].handles=t.handles,t.delay?e.triggerEvents[i].delay=t.delay:e.triggerEvents[i].delay=0})}e.triggerEvents.length&&$.each(e.triggerEvents,function(e,t){t.triggerElements=[],t.handles&&t.handles.length&&$.each(t.handles,function(e,n){n.ids.length&&$.each(n.ids,function(e,i){t.triggerElements.push({id:i,handleType:n})})})})}function c(e){for(var t=0;t<e.length;t++)void 0===e[t].sendIndex&&e[t].hasOwnProperty("sendIndex")&&(e.splice(t,1),t--)}var d=utilTrigger.getSendType();e.sendTypes=d,e.sendType=e.sendTypes.CLICK;var p=e.elemDef=n.currentElemDef,u=n.getElementsMap(),g=(utilTrigger.getHandleType(),n.getSceneObj().obj);if(g&&g.elements.length){e.triggerSources=[];var m=angular.copy(g.elements);$.each(m,function(t,n){-1!==["2","4","x","h"].indexOf(""+n.type)&&(""+n.type=="2"?n.name="文字":""+n.type=="4"?n.name="图片":""+n.type=="h"?n.name="形状":""+n.type=="x"&&(n.name="秀字体"),e.triggerSources.push(n))}),$.each(e.triggerSources,function(e,t){t.name+=e+1})}e.$watch("elemDef",function(t){t&&(p=t,$.each(e.triggerSources,function(n,i){i.id===t.id&&(e.sourceElem=i)}))},!0),e.$watch("sendType",function(t){e.triggerEvents=[],1===t.value?p=e.elemDef=n.currentElemDef:2===t.value&&(p=e.elemDef=g),l()},!0),e.eventTypes=[{name:"existElement",value:1,title:"选择界面已有元素",children:[{type:"SHOW",title:"显示"},{type:"HIDE",title:"隐藏"}]},{name:"randomEvent",value:2,title:"随机图片"}],p&&1===e.sendType.value&&(""+p.type===4?e.triggerOriginal="图片1":""+p.type=="2"?e.triggerOriginal="文字1":""+p.type=="h"?e.triggerOriginal="形状1":""+p.type=="x"&&(e.triggerOriginal="秀字体1")),e.selectTriggerOriginal=function(){t.$broadcast("select.trigger.original")},e.triggerEvents=[],e.addTriggerEvent=function(t,n){if(!e.sourceElem&&1===e.sendType.value)return void o.pushForCurrentRoute("select.trigger.source","notify.success");if(e.triggerEvents.length)for(var i=0;i<e.triggerEvents.length;i++){var a=!0;if(e.triggerEvents[i].handles)for(var s=0;s<e.triggerEvents[i].handles.length;s++)e.triggerEvents[i].handles[s].ids.length&&(a=!1);a&&(e.triggerEvents.splice(i,1),i--)}0===e.triggerEvents.length&&(n=0),e.triggerEvents.push({title:t.title,value:t.value,delay:0}),e.triggerEvents.length,1===t.value?e.addTriggerItem(e.triggerEvents[n],n):2===t.value&&e.addRandomImg(e.triggerEvents[n],n)},e.addTriggerItem=function(n,i){e.currentTriggerEvent=n,i>=e.triggerEvents.length&&(i=e.triggerEvents.length-1),e.currentIndex=i,t.$broadcast("element.triggered.add",n,i)},e.addRandomImg=function(t,i){e.currentTriggerEvent=t,e.currentIndex=i,n.createComp("n")},e.$on("create.randomevent.trigger",function(n,i){t.$broadcast("show.random.trigger",p,i,e.currentIndex)}),e.$on("receive.element.update",function(t,n,a,s,o){e.triggeredElements=[],e.currentTriggerEvent?e.currentTriggerEvent.handles=[]:e.triggerEvents&&(e.triggerEvents[o].handles=[]);var d=i.getTrigger(p.id).sends;d.length&&c(d),angular.forEach(d,function(t){e.triggerEvents[o].handles=t.handles}),r(),l()}),e.switchShow=function(e,n){var i,a;e.triggerType?1===e.triggerType?(a=e.triggerType=2,i=!1):(a=e.triggerType=1,i=!0):1===e.handleType.type?(a=e.handleType.type=2,i=!1):(a=e.handleType.type=1,i=!0),t.$broadcast("switch.triggered.state",i,a,e.id,n)},e.removeTrigger=function(t){var n=p.id,a=i.getTrigger(n);if(a&&a.sends){if(c(a.sends),!a.sends[t])return void e.triggerEvents.splice(t,1);i.deleteTriggerBySendIndex(t,n),$.each(a.sends,function(e,t){t.sendIndex=e})}e.triggerEvents.splice(t,1)},e.getTriggerSources=function(t){e.triggerEvents=[],t&&($("#nr").find("#inside_"+t.id).trigger("mousedown"),p=e.elemDef=u[t.id],l())},l(),e.confirm=function(){r(),t.$broadcast("close.style.panel")},e.cancelTriggerElem=function(e,n){var i=p.id;t.$broadcast("cancel.element.trigger",e,i,n),l()},e.clear=function(){i.resetTrigger(p.id),e.triggerEvents=[]}}]).directive("eqxTrigger",["$compile","sceneService","triggerService",function(e,t,n){function i(e){var i=t.currentElemDef;e.$watch("sendType",function(n){1===n.value?i=e.elemDef=t.currentElemDef:2===n.value&&(i=e.elemDef=t.getSceneObj().obj)},!0);var g,m=$("#nr");m.find(".edit_area").find("li"),e.$on("element.triggered.add",function(t,n,i){$(".switch-original").remove(),g=$("#inside_"+e.elemDef.id);var s=$('<div class="switch-original">');g.append(s).children(".bar").hide(),a(e,e.elemDef,n,i)}),e.$on("create.trigger.menu",function(t,n,i){d(s(e,n,!!n.find(".switch-original").length),"triggerMenu",i)}),e.$on("switch.triggered.state",function(t,n,a,s,l){var c=$("#inside_"+s);a.type,n?o(c,e.sendType,p,i.id,s,l):r(c,e.sendType,p,i.id,s,l)}),e.$on("show.random.trigger",function(t,i,a,s){n.getSendIds(p.RANDOMEVENT.value,i.id);var o=utilTrigger.getHandleType().RANDOMEVENT.value;c(e.sendType,o,i.id,a.id,s)}),e.$on("cancel.element.trigger",function(n,i,a,s){if(g=$("#inside_"+i),l(g,e.sendType,p,a,i,s),"n"===u[i].type&&($("#nr").find("#inside_"+i).remove(),t.deleteElement(i)),e.triggerEvents.length)for(var o=0;o<e.triggerEvents.length;o++){var r=!0;if(e.triggerEvents[o].handles)for(var c=0;c<e.triggerEvents[o].handles.length;c++)e.triggerEvents[o].handles[c].ids.length&&(r=!1);r&&(e.triggerEvents.splice(o,1),o--)}}),e.$on("select.trigger.original",function(){var n=m.find(".edit_area").children("li");$('<div class="mask-trigger">').insertAfter(".edit_area").click(function(){$(this).remove(),n.each(function(){var e=$(this),t=e.attr("ctype"),n=parseInt(e.attr("id").replace("inside_",""),10);-1!==["2","4","h","x"].indexOf(""+t)&&e.css({"background-color":"","z-index":u[n].css.zIndex})});var a=parseInt($(".switch-original").parent().attr("id").replace("inside_",""),10);i=e.elemDef=t.currentElemDef=u[a],""+i.type=="4"?$scope.triggerOriginal="图片1":""+i.type=="2"?$scope.triggerOriginal="文字1":""+i.type=="h"?$scope.triggerOriginal="形状1":""+i.type=="x"&&($scope.triggerOriginal="秀字体1"),e.$apply()}),n.each(function(){var e=$(this);-1!==["2","4","h","x"].indexOf(""+e.attr("ctype"))&&e.css({"background-color":"rgba(255,255,255,0.9)","z-index":10001})})})}function a(t,i,a,s){var o=$("#nr"),r=o.find(".edit_area").children("li");o.find(".mask-trigger").remove(),e('<div class="trigger-elem-list" trigger-elem-list panel-draggable></div>')(t).appendTo(".content"),$('<div class="mask-trigger">').insertAfter("#nr .edit_area");var l;if(n.getTrigger(i.id)&&(l=n.getTrigger(i.id).sends),r.each(function(){var e=$(this);-1!==["2","4","h","x"].indexOf(""+e.attr("ctype"))&&(e.css({"background-color":"rgba(255,255,255,0.9)","z-index":10001}),l&&l.length&&$.each(l,function(t,n){t!==s&&$.each(n.handles,function(t,n){n.ids.length&&$.each(n.ids,function(t,n){e.attr("id")==="inside_"+n&&e.css({"background-color":"","z-index":""})})})}))}),i){var c=[];$.each(p,function(e,t){if(2!==t.value){var a=n.getSendIds(t.value,i.id);$.each(a,function(e,t){c.push(t)})}}),$.each(c,function(e,t){o.find("#inside_"+t).css({"background-color":"","z-index":""})}),$("#comp_setting").css({zIndex:""})}}function s(e,t,n){var i=e.currentIndex,a=n?"":'<li class="trigger-show" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-dengpao1"></div>显示</a></li>',s=$('<ul id="triggerMenu" class="dropdown-menu" style="min-width: 100px; display: block;" role="menu" aria-labelledby="dropdownMenu1">'+a+'<li class="trigger-hide" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-dengpao1" style="color: #5F5F5F;"></div>隐藏</a></li><li class="trigger-none" role="presentation"><a role="menuitem" tabindex="-1"><div style="width: 21px;"></div>取消</a></li></ul>').css({position:"absolute","user-select":"none"}),c=$(".edit_area").find(".switch-original"),d=parseInt(c.parent().attr("id").replace("inside_",""),10),u=parseInt(t.attr("id").replace("inside_",""),10);return s.children(".trigger-show").click(function(){o(t,e.sendType,p,d,u,i),s.hide(),e.$apply()}),s.children(".trigger-hide").click(function(){r(t,e.sendType,p,d,u,i),s.hide(),e.$apply()}),s.children(".trigger-none").click(function(){l(t,e.sendType,p,d,u,i),s.hide(),$.each(e.triggerElements,function(e,t){u===t.id&&(t.checked=!1,t.triggerType="")}),e.$apply()}),s}function o(e,t,i,a,s,o){e.children(".boom").length||(e.children(".boom1").remove(),$('<div class="boom">').appendTo(e),n.deleteTrigger(t.value,i.HIDE.value,a,s,o),n.addTrigger(t.value,i.SHOW.value,a,s,o))}function r(e,t,i,a,s,o){e.children(".boom1").length||(e.children(".boom").remove(),$('<div class="boom1">').appendTo(e),n.deleteTrigger(t.value,i.SHOW.value,a,s,o),n.addTrigger(t.value,i.HIDE.value,a,s,o))}function l(e,t,i,a,s,o){e.children(".boom, .boom1").remove(),n.deleteTrigger(t.value,i.SHOW.value,a,s,o),n.deleteTrigger(t.value,i.HIDE.value,a,s,o),n.deleteTrigger(t.value,i.RANDOMEVENT.value,a,s,o)}function c(e,t,i,a,s){n.deleteTrigger(e.value,t,i,a,s),n.addTrigger(e.value,t,i,a,s)}function d(e,t,n){var i=$("#eq_main");$("#"+t).remove(),e.css({left:n.pageX+i.scrollLeft()+15,top:n.pageY+i.scrollTop(),zIndex:10001}).appendTo(i),i.mousemove(function(n){e=$("#"+t),(n.pageX<e.offset().left-20||n.pageX>e.offset().left+e.width()+20||n.pageY<e.offset().top-20||n.pageY>e.offset().top+e.height()+20)&&(e.hide(),$(this).unbind("mousemove"))})}var p=(utilTrigger.getSendType(),utilTrigger.getHandleType()),u=t.getElementsMap();return{restrict:"EA",link:i}}]).directive("leavePanel",function(){function e(e,t){t.hover(function(){},function(){e.obj={showTriggerPanel:!1},e.$apply()})}return{restrict:"EA",link:e}}).directive("triggerElemList",["sceneService","triggerService",function(e,t){function n(n){var a=angular.copy(e.getSceneObj().obj.elements),s=e.getElementsMap(),o={};n.triggerElements=[];var r;1===n.sendType.value?r=n.elemDef.trigger:2===n.sendType.value&&(n.elemDef.properties||(n.elemDef.properties={}),r=n.elemDef.properties.trigger);var l=$("#nr").find(".edit_area").children("li");$.each(a,function(e,t){-1!==["2","4","x","h"].indexOf(""+t.type)&&(o[t.type]||(o[t.type]=[]),o[t.type].push(t))}),$.each(o,function(e,t){$.each(t,function(e,t){""+t.type=="4"?t.name="图片":""+t.type=="2"?t.name="文字":""+t.type=="h"?t.name="形状":""+t.type=="x"&&(t.name="秀字体"),t.name+=e+1,t.id,n.elemDef.id,n.triggerElements.push(t)})}),r&&r.sends&&$.each(r.sends,function(e,t){e!==n.currentIndex&&$.each(t.handles,function(e,t){t.ids.length&&$.each(t.ids,function(e,t){for(var i=0;i<n.triggerElements.length;i++)n.triggerElements[i].id===t&&(n.triggerElements.splice(i,1),i--)})})}),n.changed=function(e,a){var s=$("#inside_"+e.id);return a?void(e.checked?($('<div class="boom1">').appendTo(s),t.deleteTrigger(n.sendType.value,i.HIDE.value,n.elemDef.id,e.id,n.currentIndex),t.addTrigger(n.sendType.value,i.HIDE.value,n.elemDef.id,e.id,n.currentIndex)):(s.children(".boom1").remove(),t.deleteTrigger(n.sendType.value,i.HIDE.value,n.elemDef.id,e.id,n.currentIndex))):void(e.checked?(s.children(".boom1").remove(),$('<div class="boom">').appendTo(s),t.deleteTrigger(n.sendType.value,i.HIDE.value,n.elemDef.id,e.id,n.currentIndex),t.addTrigger(n.sendType.value,i.SHOW.value,n.elemDef.id,e.id,n.currentIndex)):(s.children(".boom1").remove(),s.children(".boom").remove(),t.deleteTrigger(n.sendType.value,i.SHOW.value,n.elemDef.id,e.id,n.currentIndex),t.deleteTrigger(n.sendType.value,i.HIDE.value,n.elemDef.id,e.id,n.currentIndex)))},n.confirmList=function(){$(".mask-trigger").remove(),$(".trigger-list").remove(),n.elemDef&&($(".switch-original").remove(),$("#triggerMenu").hide(),$(".edit_area").find(".boom, .boom1").remove()),l.each(function(){var e=$(this),t=e.attr("ctype"),n=parseInt(e.attr("id").replace("inside_",""),10);-1!==["2","4","x","h"].indexOf(""+t)&&e.css({"background-color":"","z-index":s[n].css.zIndex})});var e,t=!1;1===n.sendType.value?e=n.elemDef.trigger:2===n.sendType.value&&(n.elemDef.properties||(n.elemDef.properties={}),e=n.elemDef.properties.trigger),e&&e.sends&&e.sends[n.currentIndex]?($.each(e.sends[n.currentIndex].handles,function(e,n){n.ids.length&&(t=!0)}),t||n.triggerEvents.splice(n.currentIndex,1)):n.triggerEvents.splice(n.currentIndex,1)},n.$watch("elemDef",function(e){var t;1===n.sendType.value?t=e.trigger:2===n.sendType.value&&(e.properties||(e.properties={}),t=e.properties.trigger),t&&t.sends&&$.each(t.sends,function(e,t){$.each(t.handles,function(e,t){$.each(t.ids,function(e,i){$.each(n.triggerElements,function(e,n){n.id===i&&(n.checked=!0,n.triggerType=t.type)})})})})},!0)}var i=(utilTrigger.getSendType(),utilTrigger.getHandleType());return{restrict:"EA",templateUrl:"scene/console/triggerelemlist.tpl.html",replace:!1,link:n}}]).directive("highlightElement",function(){function e(e,t){var n,i=$("#nr").find("li");setTimeout(function(){t.find(".trigger-elem").hover(function(){n=$(this).attr("id").substring(8),$.each(i,function(t,n){"inside_"+e.elemDef.id!==$(n).attr("id")&&$(n).css({zIndex:"","background-color":""})}),$("#inside_"+n).css({"z-index":10001,"background-color":"rgba(255,255,255,0.9)"})},function(){$.each(e.triggerElements,function(e,t){$("#inside_"+t.id).css({"z-index":10001,"background-color":"rgba(255,255,255,0.9)"})})})},0)}return{restrict:"EA",link:e}}),angular.module("scene.create.console.video",[]),angular.module("scene.create.console.video").controller("VideoCtrl",["$scope","$timeout","obj",function(e,t,n){function i(e){var t=e.substring(e.indexOf("src=")+4),n=t.substring(t.indexOf("://")+3),i=n.substring(0,n.indexOf("/"));return i.indexOf("v.qq")>=0||i.indexOf("tudou")>=0||i.indexOf("youku")>=0}e.model||(e.model={}),e.authError="",e.model.src=n.properties.src,e.confirm=function(){return e.model.src?i(e.model.src)?void e.$close(e.model.src):($("textarea").addClass("error"),$("textarea").change(function(){$(this).removeClass("error")}),void(e.authError="暂不支持添加此视频！")):($("textarea").focus(),void(e.authError="请输入视频地址"))},e.cancel=function(){e.$dismiss()}}]),angular.module("scene.create",["app.directives.editor","services.scene","confirm-dialog","services.modal","app.directives.component","services.pagetpl","save.template","scene.create.console","app.directives.comp.editor","app.directives.addelement","services.i18nNotifications","services.history","security.service","scene.edit.select","scene.edit.common","scene.edit.keymap","scene.edit.bg","services.staticRes","scene.create.pageTpl","scene.create.hoverElement","scene.preview","services.file","scene.edit.workspace","scene.create.console.font","services.editor","services.psdUpload","scene.create.compsManage"]),angular.module("scene.create").controller("CreateSceneCtrl",["$timeout","$compile","$rootScope","$scope","$routeParams","$route","$location","sceneService","pageTplService","$modal","ModalService","security","$window","i18nNotifications","historyService","panStateTracker","selectService","continueUrl","triggerService","staticResService","dataCacheService","storageService","gridGuide","editService","setCompService","fileService",function(e,t,n,a,s,o,r,l,c,d,p,u,g,m,h,f,v,b,y,w,x,S,T,C,k,E){function P(){var e=!1;return angular.forEach(a.tpl.obj.elements,function(t){"6"===(""+t.type).charAt(0)&&(e=!0)}),e}function I(e){a.scale=C.currentScale=X[e],C.scaleIndex=e+1,$("#nr").empty(),a.tpl.obj.properties?a.tpl.obj.properties.scale=!0:a.tpl.obj.properties={scale:!0},l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed"),n.$broadcast("refreshPageBg")}function _(e,t,i,s,o){a.loading=!0,a.pageId=a.pages[e-1].id,l.getSceneByPage(a.pageId,t,i,o).then(function(s){a.loading=!1,a.tpl=s.data,a.isLong=!1,W=a.tpl.obj.properties,W&&W.trigger&&y.setTrigger(a.tpl.obj.id,W.trigger),W&&W.longPage?(a.isLong=!0,a.pageLength=W.longPage,a.switchPhone(!0)):o?(a.pageLength=o,a.isLong=!0,a.switchPhone(!0)):(a.isLong=!1,a.pageLength=1,a.showPhone="false"!==S.get("create.phoneView"),n.$broadcast("switchBox",a.showPhone)),l.longPage=a.isLong,T.grid.refreshGrid(a.pageLength),delete a.tpl.obj.scene,a.sceneId=a.tpl.obj.sceneId,a.controlView.showBgTag=!1,angular.forEach(a.tpl.obj.elements,function(e){e.type+""=="3"&&(a.controlView.showBgTag=!0,a.currentBgDef=e)}),W&&(W.image||W.scratch)&&(a.effectName="涂抹"),W&&W.finger&&(a.effectName="指纹"),W&&W.effect&&("money"===W.effect.name?a.effectName="数钱":"snowFly"===W.effect.name?a.effectName="飘雪":"fireWorks"===W.effect.name?a.effectName="烟花":"none"===W.effect.name&&(a.effectName="无")),W&&W.fallingObject&&(a.effectName="环境"),(t||i)&&(r.$$search={},r.search("pageId",++e),a.getPageNames()),a.pageNum=e,$("#nr").empty();var c=angular.copy(a.tpl.obj);c.elements=h.addPage(c.id,c.elements),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,y.clear(),l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),a.originData=JSON.stringify(a.tpl),n.$broadcast("dom.changed"),n.$broadcast("refreshPageBg"),a.isCompMange&&(a.setComps=k.init(a.tpl.obj.elements))},function(){a.loading=!1})}function L(){m.pushForCurrentRoute("scene.save.success.nopublish","notify.success")}a.loading=!1,a.PREFIX_FILE_HOST=PREFIX_FILE_HOST,a.tpl={},a.originData="";var R,M="",q=1,A=0,z=!1;a.templateType=1,a.controlView={},a.showSearch=!0,a.completeHtml2Canvas=null;var D,F=[],N=[],H=[],O=[],U=[],j=[];a.lastPageTypes=[{name:your_webname+"尾页",value:"eqFree"},{name:your_webname+"秀底标",value:"eqLink"},{name:"去掉"+your_webname+"展示",value:"eqHide"}],a.pageTpl={},a.isAppEditor=!1,a.tabid="template",a.psdUpload={total:0,currentNum:0,showPsdWarn:!1,openPsdFileChooseBox:null},a.$watch("user",function(e){if(e)for(var t=0;t<e.roleIdList.length;t++)13===e.roleIdList[t]&&(a.isAppEditor=!0),(4===e.roleIdList[t]||12===e.roleIdList[t]||13===e.roleIdList[t])&&(a.isTplEditor=!0)},!0),S.push("shoppingFontFamily1",JSON.stringify({})),S.push("shoppingFontFamily",JSON.stringify({})),sessionStorage.setItem("fontface",JSON.stringify([])),a.refreshTpl=function(){A>q&&!z&&(z=!0,a.getPageTpls(++q))},a.showPhoneTip="false"!==S.get("create.showPhoneTip"),a.showAddPageTip="false"!==S.get("create.showAddPageTip"),a.showAddFormTip="false"!==S.get("showAddFormTip"),a.wechatWTip="false"!==S.get("wechatWTip"),a.scaleTip="false"!==S.get("scaleTip"),a.switchPhone=function(e){e?a.showPhone=!1:(a.showPhone=!a.showPhone,S.push("create.phoneView",a.showPhone)),n.$broadcast("switchBox",a.showPhone),S.get("create.showPhoneTip")||(S.push("create.showPhoneTip",!1),a.showPhoneTip=!1),a.showPhone||n.$broadcast("boxOuter",!0)};var B=["l","s"];if(a.createComp=function(e,t,n){return a.sceneSetting.showFlag=!1,"6"===e&&P()?void p.openMsgDialog({msg:"当前页面的提交按钮已经存在，请不要重复添加。"}):!a.isInteractionAccessable&&-1!==B.indexOf(e)||!a.isInteractionCounterAccessable&&"i"===e?void p.openConfirmDialog({msg:"免费升级企业账号即可使用该功能",confirmName:"免费升级",cancelName:"我知道了"},function(){window.open("/#/privilege")}):void l.createComp(e,n,t,a.pageLength)},a.$on("hisChange",function(){h.addPageHistory(a.tpl.obj.id,a.tpl.obj.elements)}),c.getPageTagLabel(11001).then(function(e){a.tplFormatList=e.data.list}),c.getPageTagLabel(11003).then(function(e){a.tplInteractionList=e.data.list}),c.getPageTagLabel(11002).then(function(e){a.tplStyleList=e.data.list}),a.getPageTplTypestemp=function(e,t,n,i){c.getPageTplTypestemp(e,t,n,i).then(function(e){if(z=!1,e.data.list&&e.data.list.length>0){a.pageTpls=q>1?a.pageTpls.concat(e.data.list):e.data.list,A=Math.ceil(e.data.map.count/21);var t=e.config.url.split("&time")[0];x.contains(t)||(x.push("pageTpl",x.getAsyncUrl(),e),x.setAsyncUrl())}else a.pageTpls=[],A=0})},a.enterPress=function(e){13===(e||window.event).keyCode&&a.getPageTpls()},a.getPageTpls=function(e){var t="";e||(e=q=1);for(var n in a.pageTpl)"name"!==n&&a.pageTpl[n]&&(t+=a.pageTpl[n]+",");""!==t&&(t=t.substr(0,t.length-1)),a.pageTpl.name&&""!==a.pageTpl.name&&(a.showSearch=!1),a.getPageTplTypestemp(t,a.pageTpl.name,21,e)},a.getPageTpls(),a.resetTplFilter=function(){a.pageTpl.name=null,a.showSearch=!0,a.getPageTpls()},a.support=function(){return(!window.sessionStorage||"false"!==sessionStorage.getItem("checkSuport"))&&(!(navigator.userAgent.match(/Trident/)&&navigator.userAgent.match(/rv:11/)||navigator.userAgent.match(/Chrome/))&&((!navigator.userAgent.match(/iPad/)||!navigator.userAgent.match(/CriOS/))&&(b.setUrl(r.path()),r.path("scene/support"),!0)))},!a.support()){a.createCompGroup=function(e,t){a.sceneSetting.showFlag=!1,"g101"===e&&P()&&(p.openMsgDialog({msg:"当前页面的提交按钮已经存在，本操作将会删除已添加的按钮。"}),angular.forEach(a.tpl.obj.elements,function(e){"6"===(""+e.type).charAt(0)&&($("#nr").find("#inside_"+e.id).remove(),v.deleteElement(e.id),l.deleteElement(e.id),k.removeElemDef(e.id+""))})),l.createCompGroup(e,null,t)},a.isRadioCheckboxRatingAccessable=u.isAllowToAccess(u.accessDef.RADIO_CHECKBOX_RATING),a.isInteractionAccessable=u.isAllowToAccess(u.accessDef.INTERACTION),a.isInteractionCounterAccessable=u.isAllowToAccess(u.accessDef.INTERACTION_COUNTER),a.isInteractionAccessableWechat=u.isAllowToAccess(u.accessDef.ACCESS_WX_AUTH),a.isPsdUploadAccessable=u.isAllowToAccess(u.accessDef.ACCESS_PSD_UPLOAD),a.isCompMange=u.isAllowToAccess(u.accessDef.ACCESS_COMP_MANAGE),a.updateCompPosition=l.updateCompPosition,a.updateCompAngle=l.updateCompAngle,a.updateCompSize=l.updateCompSize,a.openAudioModal=l.openAudioModal,a.openTriggerMode=function(){return a.sceneSetting.showFlag=!1,a.isInteractionAccessable||-1===B.indexOf(type)?void l.openTriggerMode():void p.openConfirmDialog({msg:"免费升级企业账号即可使用该功能",confirmName:"免费升级",cancelName:"我知道了"},function(){window.open("/#/privilege")})},a.$on("dom.changed",function(){t($("#nr"))(a),n.$broadcast("boxOuter")}),a.scale=1;var X=[.5,.75,1,1.25,1.5,2,3,4],V=2;C.scaleIndex=3,C.currentScale=1,a.zoom=function(e){if(e){if(4===a.scale)return void n.$broadcast("outScale");V++}else{if(.5===a.scale)return void n.$broadcast("outScale");V--}I(V)},a.$on("comps.delete",function(){if(a.isCompMange)for(var e=v.getElements(),t=0;t<e.length;t++)k.removeElemDef(e[t])}),a.recovery=function(){2!==V&&(V=2,I(V),n.$broadcast("recoveryScale"))},a.$on("boxOuter",function(e,t){"rotateEnd"===t&&a.scale>1&&($("#nr").empty(),a.tpl.obj.properties?a.tpl.obj.properties.scale=!0:a.tpl.obj.properties={scale:!0},l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed"),n.$broadcast("refreshPageBg"))});var G=null;a.$on("showCropPanel",function(e,i){var s=$(".content").eq(0);G?(n.$broadcast("changeElemDef",i),G.show()):G=t("<div crop-image></div>")(a),s.append(G)}),a.openPageEffectModal=function(e){a.sceneSetting.showFlag=!1;var t=angular.copy(e);d.open({windowClass:"console six-contain effect-console",templateUrl:"scene/pageeffect/pageeffect.tpl.html",controller:"pageEffectCtrl",resolve:{properties:function(){return t}}}).result.then(function(e){a.tpl.obj.properties||(a.tpl.obj.properties={}),a.tpl.obj.properties.scratch=null,a.tpl.obj.properties.finger=null,a.tpl.obj.properties.fallingObject=null,a.tpl.obj.properties.effect=null,"无"!==e.name&&(a.tpl.obj.properties[e.value]=e.properties[e.value]),a.effectName=e.name},function(){n.$broadcast("clear.scratch.interval")})};var W,Q=null;a.$on("showStylePanel",function(e,n){var i=$(".content").eq(0);Q?Q.show():"style"===n.activeTab?Q=t('<div style-modal active-tab="style"></div>')(a):"anim"===n.activeTab?Q=t('<div style-modal active-tab="anim"></div>')(a):"trigger"===n.activeTab?Q=t('<div style-modal active-tab="trigger"></div>')(a):"dropdown"===n.activeTab&&(Q=t('<div style-modal active-tab="dropdown"></div>')(a)),i.append(Q)}),a.$on("hideStylePanel",function(){Q&&Q.hide()}),a.refreshPage=function(e,t){return a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.refreshPage(e,t)}):(l.resetCss(),$("#nr").empty(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed"),void n.$broadcast("refreshPageBg"))},a.navTo=function(e,t){a.controlView.pageList=!0,l.comPosition={top:0},a.isTplEditor&&(a.pageLabelAll.length=0,a.pageIdTag=e.id,a.getPageTagLabel()),e.id!==a.tpl.obj.id&&(a.setEditableStatus(),a.controlView.showBgTag=!1,a.saveUsedFiles(function(){a.saveScene(null,function(){_(t+1),r.$$search={},r.search("pageId",e.num)})}),f.clear())},a.saveUsedFiles=function(e){x.clearUsedFiles(),x.clear("fileService1"),e&&e(),R=JSON.parse(S.get("tplUse-"+a.user.id))||[];var t=[];if(D="",R.length>0){for(var n=0;n<R.length;n++)t.push(R[n].id);D=t.toString(),l.recordTplUsage(D).then(function(e){e.data.success&&localStorage.removeItem("tplUse-"+a.user.id)})}var i=JSON.parse(S.get("bgPUse-"+a.user.id))||[];if(F=[],N=[],o="",r="",i.length>0){for(var s=0;s<i.length;s++)F.push(i[s].id),N.push(i[s].fileType);var o=F.toString(),r=N.toString();E.saveFilesHistory(o,r).then(function(e){e.data.success&&localStorage.removeItem("bgPUse-"+a.user.id)})}var c=JSON.parse(S.get("audioPUse-"+a.user.id))||[];if(H=[],O=[],p="",u="",c.length>0){for(var d=0;d<c.length;d++)H.push(c[d].id),O.push(c[d].fileType);var p=H.toString(),u=O.toString();E.saveFilesHistory(p,u).then(function(e){e.data.success&&localStorage.removeItem("audioPUse-"+a.user.id)})}var g=JSON.parse(S.get("shapeUse-"+a.user.id))||[];if(U=[],j=[],h="",f="",g.length>0){for(var m=0;m<g.length;m++)U.push(g[m].id),j.push(g[m].fileType);var h=U.toString(),f=j.toString();E.saveFilesHistory(h,f).then(function(e){e.data.success&&localStorage.removeItem("shapeUse-"+a.user.id)})}},a.stopCopy=function(){copied=!1},a.getOriginPageName=function(e){M=e.name};var Y=[];a.getPageNames=function(){var e=s.sceneId;l.getPageNames(e).then(function(e){a.pages=e.data.list,angular.forEach(a.pages,function(e,t){e.name||(e.name="第"+(t+1)+"页")}),$.extend(!0,Y,e.data.list),_(r.search().pageId?r.search().pageId:a.pages[0].num)})},a.scene=null,l.getSceneDetail(s.sceneId,n.branchid).then(function(){a.scene=l.getCurrentScene(),a.sceneSetting.oldBgAudio=a.scene.bgAudio,a.getPageNames()}),a.editableStatus=[],a.setEditableStatus=function(e,t){if(e!==undefined)a.editableStatus[e]=t;else for(var n=0;n<a.editableStatus.length;n++)a.editableStatus[n]=!1},a.savePageNames=function(e,t){e.name||(e.name="第"+(t+1)+"页"),a.tpl.obj.name=e.name,M!==e.name&&l.savePageNames(a.tpl.obj).then(function(){m.pushForCurrentRoute("page.change.success","notify.success")})},a.removeScratch=function(e){e.stopPropagation(),a.tpl.obj.properties.scratch=null,a.tpl.obj.properties.finger=null,a.tpl.obj.properties.fallingObject=null,a.tpl.obj.properties.effect=null},a.$on("text.click",function(n,i,s){$("#btn-toolbar").remove(),$("body").append(t("<toolbar></toolbar>")(a));var o=$(i).offset().top;e(function(){$("#btn-toolbar").css("top",o-50),$("#btn-toolbar").show(),$("#btn-toolbar").bind("click mousedown",function(e){e.stopPropagation()}),$(i).wysiwyg_destroy(),$(i).wysiwyg(),i.focus(),setTimeout(function(){if(window.getSelection){var e=window.getSelection();e.modify("move","left","documentboundary"),e.modify("extend","right","documentboundary")}s&&document.execCommand("fontName",0,"defaultFont")})})}),a.updatePosition=function(e){for(var t=a.tpl.obj.elements,n=[],i=0;i<t.length;i++)if(t[i].type+""=="3"){t[i].num=0,n.push(t[i]),t.splice(i,1);break}for(var s=0;s<e.length;s++)for(i=0;i<t.length;i++)if(t[i].num===e[s]){t[i].num=s+1,n.push(t[i]),t.splice(i,1);break}a.tpl.obj.elements=n},a.updateEditor=function(){var e=$("#nr");e.empty(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),t(e)(a)};var Z=!1;a.openSetting=function(){a.sceneSetting.showFlag=!a.sceneSetting.showFlag},a.setOriginData=function(e){a.originData=e},a.$on("changeCss",function(e,t){a.changeCssIndex=t.changZindex,l.resetCss()}),a.saveScene=function(e,t){if(!a.scene.name&&e&&!a.sceneSetting.showFlag)return void p.openMsgDialog({msg:"尚未设置标题，请设置后再执行此操作",btn:"去设置"},function(){a.sceneSetting.showFlag=!0});if(!Z){if(a.sceneSetting.showFlag)return void a.sceneSetting.saveSceneSetting().then(function(){a.saveScene(e,t)});if(a.completeHtml2Canvas)return void a.completeHtml2Canvas.then(function(){a.saveScene(e,t)});if(Z=!0,a.changeCssIndex&&l.resetCss(),a.originData===JSON.stringify(a.tpl))return t&&t(),x.clear("sceneList"),e&&(!a.scene.publishTime||a.scene.updateTime>a.scene.publishTime?L():m.pushForCurrentRoute("scene.save.success.published","notify.success"),a.saveUsedFiles()),void(Z=!1);if(delete a.tpl.obj.scene,a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,a.tpl.obj.elements.length>0){for(var n=JSON.parse(S.get("editTextId"))||[],i=0;i<a.tpl.obj.elements.length;i++)if(a.tpl.obj.elements[i].type+""=="2"&&-1!==$.inArray(a.tpl.obj.elements[i].id,n)){for(var s=a.tpl.obj.elements[i].content,o=/font-family:(.*?);/g,r=[],c=[];null!==(r=o.exec(s));)c.push(r[1].trim());var d=a.tpl.obj.elements[i].fonts,u=a.tpl.obj.elements[i].css.fontFamily||a.tpl.obj.elements[i].fontFamily;a.tpl.obj.elements[i].preWoffPath&&(d[u]=a.tpl.obj.elements[i].preWoffPath);for(var g in d)-1===c.indexOf(g)&&delete d[g];a.tpl.obj.elements[i].fonts=d;var h=$.inArray(a.tpl.obj.elements[i].id,n);n.splice(h,1)}S.push("editTextId",JSON.stringify(n))}l.saveScene(a.tpl.obj).then(function(n){return x.clear("sceneList"),e&&a.saveUsedFiles(),Z=!1,n.data.success?(a.scene.updateTime=(new Date).getTime(),a.originData=JSON.stringify(a.tpl),t&&t(),void(e&&L())):void alert("保存失败，服务器忙碌请稍后再试。")},function(){Z=!1,alert("保存失败，服务器忙碌请稍后再试。")})}},a.publishScene=function(e){return a.scene.name||a.sceneSetting.showFlag?"2"===e&&a.scene.publishTime&&a.scene.updateTime<=a.scene.publishTime&&!a.allowPublish?void p.openConfirmDialog({msg:"您未对已驳回场景做任何修改，请查看驳回消息，如不修改继续审核，还是不会被通过",confirmName:"坚持审核",cancelName:"退出"},function(){a.allowPublish=!0,a.publishScene(e)}):2!==a.scene.status||a.allowPublish?a.sceneSetting.showFlag?void a.sceneSetting.saveSceneSetting().then(function(){a.publishScene()}):a.sceneSetting.oldBgAudio!==a.scene.bgAudio?void l.saveSceneSettings(a.scene).then(function(){a.scene.bgAudio?E.saveFilesHistory(a.scene.bgAudio.id,2).then(function(){x.clear("fileService1"),a.sceneSetting.oldBgAudio=a.scene.bgAudio,a.publishScene()}):(a.sceneSetting.oldBgAudio=a.scene.bgAudio,a.publishScene())}):a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.publishScene()}):!e&&!a.allowPublish&&a.scene.publishTime&&a.scene.updateTime<=a.scene.publishTime&&a.originData===JSON.stringify(a.tpl)?($(window).unbind("beforeunload"),void window.open("promotion/share/"+a.sceneId+"/socialShare","_self")):(a.publishSceneInter=function(){l.publishScene(a.tpl.obj.sceneId,e).then(function(t){t.data.success?(x.clear("sceneList"),e?p.openMsgDialog({msg:'该场景已经提交审核，系统会尽快给出审核结果并已经系统消息形式给出，请耐心等待<a style="color:#08a1ef;" href="" target="_blank">了解审核规则</a>',confirmName:"确定"},function(){$(window).unbind("beforeunload"),window.open("promotion/share/"+a.sceneId+"/socialShare","_self")}):(m.pushForNextRoute("scene.publish.success","notify.success"),$(window).unbind("beforeunload"),window.open("promotion/share/"+a.sceneId+"/socialShare","_self"))):e&&p.openMsgDialog({msg:t.data.msg})})},void a.saveUsedFiles(function(){a.saveScene(null,function(){1===a.scene.staticStatus?p.openConfirmDialog({msg:"场景已经静态化,设置更改后不能及时更新,确定更改吗",confirmName:"确定",cancelName:"取消"},function(){a.publishSceneInter()}):a.publishSceneInter()})})):void p.openConfirmDialog({msg:"当前场景为不允许访问状态，发布场景将重新对外开放访问 ",confirmName:"坚持发布",cancelName:"保存退出"},function(){a.allowPublish=!0,e?a.publishScene(e):a.publishScene()},function(){a.saveScene(null,function(){$(window).unbind("beforeunload"),window.open("promotion/share/"+a.sceneId+"/socialShare","_self")})}):void p.openMsgDialog({msg:"尚未设置标题，请设置后再执行此操作",btn:"去设置"},function(){a.sceneSetting.showFlag=!0})},a.exitScene=function(){r.$$search={},a.originData===JSON.stringify(a.tpl)?r.path("main"):p.openConfirmDialog({msg:"是否保存更改内容？",confirmName:"保存",cancelName:"不保存"},function(){a.saveScene(),r.path("main")},function(){r.path("main")})},a.duplicatePage=function(){a.saveScene(null,function(){_(a.pageNum,!1,!0)})},a.longAction=function(){if(a.addLong=!0,window.localStorage){var e=localStorage.getItem("setLongAction");e&&e.indexOf(n.user.id)>-1&&(a.addLong=!1,a.insertPage())}},a.insertPage=function(t){return t&&1===a.user.type?void p.openConfirmDialog({msg:"免费升级企业账号即可使用该功能",confirmName:"免费升级",cancelName:"我知道了"},function(){window.open("/#/privilege")}):(a.saveUsedFiles(function(){a.saveScene(null,function(){_(a.pageNum,!0,!1,null,t)})}),void($("#pageList").height()>=360&&e(function(){var e=document.getElementById("pageList");e.scrollTop=e.scrollHeight},200)))},a.selectPageLength=function(){a.showPageSet=!1,a.insertPage(a.newPageLength)},a.deletePage=function(e){if(e.stopPropagation(),1!==a.pages.length&&!a.loading){a.loading=!0,a.action=!1,n.insistDelete=!0,n.cancelDelete=!0;for(var t=0;t<a.tpl.obj.elements.length;t++){"5"===a.tpl.obj.elements[t].type.toString()[0]&&(a.action=!0)}p.openConfirmDialog({msg:"页面删除后无法还原",confirmName:"坚持删除",cancelName:"稍后决定"},function(){n.insistDelete=!1,n.cancelDelete=!1,!0===a.action?p.openConfirmDialog({msg:"确定删除此页，将同时删除该场景已收集的数据?"},function(){J()},function(){a.loading=!1}):J()},function(){n.insistDelete=!1,n.cancelDelete=!1,a.loading=!1})}};var J=function(){l.deletePage(a.tpl.obj.id).then(function(e){a.loading=!1,e.data.success?(r.$$search={},a.pages.length===a.pageNum?(a.pages.pop(),r.search("pageId",--a.pageNum),_(a.pageNum,!1,!1)):(a.pages.splice(a.pageNum-1,1),r.search("pageId",a.pageNum),_(a.pageNum,!1,!1))):alert(e.data.msg)},function(){a.loading=!1})};a.removeBG=function(){for(var e=a.tpl.obj.elements,t=0;t<e.length;t++)if(e[t].type+""=="3"){e.splice(t,1);var i;for(i=t;i<e.length;i++)e[i].num--;break}n.$broadcast("remove.scene.bg")},a.removeBGAudio=function(e){e.stopPropagation(),a.scene.bgAudio=null},$(".scene_title").on("paste",function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain")||prompt("Paste something..");document.execCommand("insertText",!1,t)}),a.myName=[{name:"我的"}],a.myCompany=[{name:"企业"}],a.creatCompanyTemplate=function(){var e=$.extend(!0,{},a.tpl.obj);if(delete e.scene,n.user){var t=parseInt(n.user.companyTplId,10);t?e.sceneId=t:n.companySceneId?e.sceneId=n.companySceneId:e.sceneId=null,l.saveCompanyTpl(e).then(function(e){e.data.success&&(m.pushForCurrentRoute("companytpl.setting.success","notify.success"),n.companySceneId=e.data.obj,a.getPageTplsByCompanyType())})}else a.myCompanyTpls=[]},n.$on("saveCompanyTemplate",function(){a.creatCompanyTemplate()});var K=null;a.getPageTplsByCompanyType=function(){if(a.myCompanyTpls=[],a.myCompany[0].active=!0,!K)if(n.companySceneId)K=n.companySceneId;else{var e=parseInt(n.user.companyTplId,10);e&&(K=n.companySceneId=e)}K?l.previewScene(K).then(function(e){a.myCompanyTpls=e.data.list,a.tabid="company"}):a.tabid="company"},a.getRecentlyUsedTpls=function(){a.tabid="recentlyUsed",R=JSON.parse(S.get("tplUse-"+a.user.id))||[],l.recentlyUsedTpls().then(function(e){a.myRecentlyTpls=e.data.list;for(var t=0;t<R.length;t++)for(var n=0;n<e.data.list.length;n++)e.data.list[n].id===R[t].id&&(a.myRecentlyTpls.splice(n,1),n--);for(var i=0;i<R.length;i++)a.myRecentlyTpls.unshift(R[i]);a.myRecentlyTpls.length>18&&(a.myRecentlyTpls=a.myRecentlyTpls.slice(0,18))})},a.setTplTab=function(){a.tabid="template"},a.creatMyTemplate=function(){var e=$.extend(!0,{},a.tpl.obj);if(delete e.scene,n.user){var t=JSON.parse(n.user.property);t&&t.myTplId?e.sceneId=t.myTplId:n.mySceneId?e.sceneId=n.mySceneId:e.sceneId=null,l.saveMyTpl(e).then(function(e){m.pushForCurrentRoute("mytpl.setting.success","notify.success"),n.mySceneId=e.data.obj,a.getPageTplsByMyType()})}else a.myPageTpls=[]},a.$on("saveMyTemplate",function(){a.creatMyTemplate()});var ee=null;a.getPageTplsByMyType=function(){if(a.myPageTpls=[],a.myName[0].active=!0,!ee)if(n.mySceneId)ee=n.mySceneId;else{var e=JSON.parse(n.user.property);e&&e.myTplId&&(ee=n.mySceneId=e.myTplId)}ee?l.previewScene(ee).then(function(e){a.myPageTpls=e.data.list,a.tabid="myCollection"}):a.tabid="myCollection"},a.$on("myPageList.update",function(e,t,n,s){if("my-tpl"===t)for(i=0;i<a.myPageTpls.length;i++)a.myPageTpls[i].id===s&&a.myPageTpls.splice(i,1);if("company-tpl"===t)for(i=0;i<a.myCompanyTpls.length;i++)a.myCompanyTpls[i].id===s&&a.myCompanyTpls.splice(i,1)}),a.$on("myPageList.delete",function(e,t,i){"company-tpl"===t&&21===n.user.type&&(i.context.firstElementChild.outerHTML="")});var te={};a.getPageTplsByType=function(e){te[e]?(a.childCatrgoryList=te[e],a.getPageTplTypestemp(a.childCatrgoryList[0].id),childTagCut()):(a.childCatrgoryList=te[e]=w.getPageTpls(e),a.getPageTplTypestemp(a.childCatrgoryList[0].id),childTagCut())};var ne={};a.getPageTagLabel=function(e){ne[e]?(a.pageLabel=ne[e],ae()):a.scene&&a.isAppEditor?c.getPageTagLabel(1601).then(function(e){a.pageLabel=ne[1601]=e.data.list,ae()}):(a.pageLabel=ne[e]=w.getPageTpls(e),ae())},a.pageLabelAll=[];var ie,ae=function(){c.getPageTagLabelCheck(a.pageIdTag).then(function(e){ie=e.data.list;for(var t=0;t<a.pageLabel.length;t++){for(var n={id:a.pageLabel[t].id,name:a.pageLabel[t].name},i=0;i<ie.length;i++){if(ie[i].id===a.pageLabel[t].id){n.ischecked=!0;break}n.ischecked=!1}a.pageLabelAll.push(n)}})};a.exitPageTplPreview=function(){$("#nr").empty(),l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),n.$broadcast("dom.changed")},a.insertPageTpl=function(e){a.loading=!0;var t=function(e){l.getSceneTpl(e).then(function(e){if(a.controlView.showBgTag=!1,a.loading=!1,"template"===a.tabid||"recentlyUsed"===a.tabid){R=JSON.parse(S.get("tplUse-"+a.user.id))||[];for(var t=0;t<R.length;t++)R[t].id===e.data.obj.id&&R.splice(t,1);var i={id:e.data.obj.id,properties:{thumbSrc:e.data.obj.properties.thumbSrc,longPage:e.data.obj.properties.longPage}};R.push(i),S.push("tplUse-"+a.user.id,JSON.stringify(R))}if(a.tpl.obj.elements=l.getElements(),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,1===a.pageLength&&a.tpl.obj.elements)for(var s=0;s<a.tpl.obj.elements.length;s++)if(a.tpl.obj.elements[s].type+""=="3"){delete a.tpl.obj.elements[s].properties.croptype,delete a.tpl.obj.elements[s].properties.pageLength;break}$("#nr").empty(),h.addPageHistory(a.tpl.obj.id,a.tpl.obj.elements),a.tpl.obj.properties&&delete a.tpl.obj.properties.scale,l.templateEditor.parse({def:a.tpl.obj,appendTo:"#nr",mode:"edit"}),angular.forEach(a.tpl.obj.elements,function(e){e.type+""=="3"&&(a.controlView.showBgTag=!0,a.currentBgDef=e)}),n.$broadcast("dom.changed")},function(){a.loading=!1})};a.tpl.obj.elements&&a.tpl.obj.elements.length>0?p.openConfirmDialog({msg:"页面模板会覆盖编辑区域已有组件，是否继续？",confirmName:"是",cancelName:"取消"},function(){t(e)}):t(e)},a.chooseThumb=function(){d.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:"0"}}}}).result.then(function(e){a.tpl.obj.properties||(a.tpl.obj.properties={}),a.tpl.obj.properties.thumbSrc=e.data},function(){a.tpl.obj.properties.thumbSrc=null})},$(window).bind("beforeunload",function(){return"请确认您的场景已保存"}),a.$on("$destroy",function(){$(window).unbind("beforeunload"),h.clearHistory(),l.setCopy(!1),utilPictures.clearInterval()}),a.sortableOptions={placeholder:"ui-state-highlight ui-sort-position",containment:"#containment",update:function(e,t){var n=t.item.sortable.dropindex+1,i=a.pages[t.item.sortable.index].id;a.saveScene(null,function(){l.changePageSort(n,i).then(function(e){e.data.success?(_(n,!1,!1,!0),r.$$search={},r.search("pageId",n),a.pageNum=n,$.extend(!0,Y,a.pages)):($.extend(!0,a.pages,Y),alert(e.data.msg))})})}},a.$on("history.changed",function(){a.canBack=h.canBack(a.tpl.obj.id),a.canForward=h.canForward(a.tpl.obj.id)}),a.back=function(){return a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.back()}):(a.controlView.showBgTag=!1,void l.historyBack())},a.$on("refreshSetComps",function(){a.setComps=k.init(a.tpl.obj.elements)}),a.forward=function(){return a.completeHtml2Canvas?void a.completeHtml2Canvas.then(function(){a.forward()}):void l.historyForward()},a.openEffects=function(){a.tpl.obj.properties&&(a.tpl.obj.properties.scratch||a.tpl.obj.properties.finger||a.tpl.obj.properties.fallingObject||a.tpl.obj.properties.effect)||a.openPageEffectModal(a.tpl.obj.properties)},a.openBgPanel=function(){a.controlView.showBgTag||a.createComp("3",a.longPage)},a.openAudioPanel=function(){a.scene.bgAudio||a.openAudioModal()},a.closeOtherPanel=function(e){var t=!a.$eval(e);a.showBackgroundPanel=!1,a.showMusicPanel=!1,a.showEffectsPanel=!1,a.gridGuideSetting.showFlag=!1,a.showZoomPanel=!1,a.$broadcast("hideBgOption"),a.showBgOptionPanel=!1,a.$eval(e+"="+t)},a.removeAudio=function(){a.scene.bgAudio=null},a.sceneSetting={showFlag:!1,oldBgAudio:null},a.settingScene=function(){a.sceneSetting.showFlag=!0},"show"===r.search().openSetting&&e(function(){a.sceneSetting.showFlag=!0},100),a.$on("show.edit.bg",function(e,t){a.controlView.showBgTag=!0,a.currBgSrc=t}),a.gridGuideSetting={showFlag:!1},a.replaceBg=function(e){l.openBgModal(e,a.pageLength),$("#nr").find(".wrapper-background").css({animation:"","animation-fill-mode":""})};var se=[],oe=[],re=[],le=[];a.showFirstTimeTip=function(e){if(a.sceneSetting.showFlag=!1,"w"===e){if(a.showHeadTip=!0,window.localStorage){var t=localStorage.getItem("setHeadAction");t&&(se=t.split(","),se.indexOf(n.user.id)>-1&&(a.showHeadTip=!1,l.createComp("w")))}}else if("wp"===e){if(a.showImageTip=!0,window.localStorage){var i=localStorage.getItem("setImageAction");i&&(oe=i.split(","),oe.indexOf(n.user.id)>-1&&(a.showImageTip=!1,l.createComp("wp")))}}else if("wr"===e&&(a.showVoiceTip=!0,window.localStorage)){var s=localStorage.getItem("setVoiceAction");s&&(re=s.split(","),re.indexOf(n.user.id)>-1&&(a.showVoiceTip=!1,l.createComp("wr")))}},a.switchShowFontTip=function(e,t){"w"===t?e&&(se.push(n.user.id),localStorage.setItem("setHeadAction",se.join(","))):"wp"===t?e&&(oe.push(n.user.id),localStorage.setItem("setImageAction",oe.join(","))):"wr"===t?e&&(re.push(n.user.id),localStorage.setItem("setVoiceAction",re.join(","))):"long"===t&&e&&(le.push(n.user.id),localStorage.setItem("setLongAction",le.join(",")))},a.addLongPage=function(){a.showPage=!1,d.open({windowClass:"login-container six-contain",templateUrl:"scene/newLongPage.tpl.html",controller:"PageNewCtrl"}).result.then(function(e){a.insertPage(e)})},a.hidePageTip=function(){S.get("create.showAddPageTip")||(S.push("create.showAddPageTip",!1),a.showAddPageTip=!1)},a.hideEffTip=function(){S.get("create.showAddEffTip")||(S.push("create.showAddEffTip",!1),a.showAddEffTip=!1)},a.hideHeartTip=function(e){S.get(e)||(S.push(e,!1),a[e]=!1)},a.customerService=n.customerService}}]).directive("changeColor",function(){return{link:function(e,t){t.bind("click",function(){$(t).addClass("current")})}}}).directive("thumbTpl",["sceneService","ModalService",function(e,t){return{scope:{myTpl:"="},replace:!1,template:'<span class="bFlag_longPage" ng-if="myTpl.properties.longPage">长<i>{{myTpl.properties.longPage}}</i></span><div class="delete-element hint--bottom hint--rounded" ng-click="deleteMyTpl($event)" data-hint="删除此模板"><span class="eqf-scene-delete"></span></div>',link:function(n,i,a){n.$emit("myPageList.delete",a.id,i),a.noDel&&i.empty(),n.deleteMyTpl=function(s){s.stopPropagation(),t.openConfirmDialog({msg:"确定删除此模板?"},function(){e.deletePage(n.myTpl.id).then(function(){n.$emit("myPageList.update",a.id,i,n.myTpl.id)},function(){alert("服务器异常!")})})},$('<div class = "tmp-bg"></div>').appendTo(i),n.myTpl.istpl=!0,e.templateEditor.parse({def:n.myTpl,appendTo:i,mode:"view",disEvent:!0});var s=$(".edit_area",i).height();486!==s?$(".edit_area",i).css("transform","scale(0.25) translateX(-480px) translateY(-"+(729+729*(s/486-1))+"px)"):$(".edit_area",i).css("transform","scale(0.25) translateX(-480px) translateY(-729px)")}}}]).directive("gridGuideSetting",["gridGuide",function(e){return{scope:!0,template:'<div class="grid-guide-setting"><div class="setting-group"><span>网格开关</span><div class="setting-choice"><switch-btn ng-model="config.gridState"></switch-btn></div></div><div class="setting-group" style="height:60px;"><span style="height:24px;">网格颜色</span><div class="color-contain"><input class="color-picker-input" ng-model="grid.color" type="text" /><a class="color-picker" ng-style="{backgroundColor: grid.color}" ng-model="grid.color" colorpicker="rgba" disable="{{gridGuideSetting.showFlag}}"></a></div></div><div class="setting-group"><span>智能参考</span><div class="setting-choice"><switch-btn ng-model="config.guideState"></switch-btn></div></div><div class="setting-group"><span>吸附效果</span><div class="setting-choice"><switch-btn ng-model="config.snapState"></switch-btn></div></div></div>',link:function(e,t){function n(){e.$apply(function(){e.gridGuideSetting.showFlag=!1})}var i=$(document);t.on("$destroy",function(){i.unbind("click",n)}),i.click(n)},controller:["$scope",function(t){t.grid=e.grid,t.guide=e.guide,t.config={gridState:t.grid.getVisable()||"enable",guideState:"false"===t.grid.getGuideState()?"disable":"enable",snapState:"false"===t.grid.getSnapState()?"disable":"enable"},t.$watch("config.gridState",function(e){"enable"===e?(t.$parent.gridGuideSetting.isGridEnabled=!0,t.grid.show()):"disable"===e&&(t.$parent.gridGuideSetting.isGridEnabled=!1,t.grid.hide()),t.grid.setVisable(e)}),t.$watch("grid.color",function(e){e&&(t.grid.paint(),t.grid.setColor(e))}),t.$watch("config.guideState",function(e){"enable"===e?(t.guide.options.enabled=!0,t.grid.setGuideState(!0)):"disable"===e&&(t.guide.options.enabled=!1,t.grid.setGuideState(!1))}),t.$watch("config.snapState",function(e){"enable"===e?(t.guide.options.snap=!0,t.grid.setSnapState(!0)):"disable"===e&&(t.guide.options.snap=!1,t.grid.setSnapState(!1))})}]}}]).directive("converToImage",["selectService",function(){function e(e,t){t.mousedown(function(){$(".content").trigger("mousedown")})}return{restrict:"EA",link:e}}]).directive("switchBtn",[function(){return{require:"ngModel",restrict:"AE",template:'<div class="switch" ng-click="switch()"><div class="circle-con"><i class="circle"></i></div></div>',link:function(e,t,n,i){var a=t.find(".switch");i.$render=function(){a.toggleClass("switch-open",angular.equals(i.$modelValue,"enable")),a.toggleClass("switch-close",angular.equals(i.$modelValue,"disable"))},a.bind("click",function(){var t=a.hasClass("switch-open");e.$apply(function(){i.$setViewValue(t?"disable":"enable"),i.$render()})})}}}]).directive("pageTplColor",[function(){return{require:"ngModel",restrict:"AE",template:'<em value="1" style="background-color:#ff5448"></em><em value="2" style="background-color:#f2a653"></em><em value="3" style="background-color:#f9ce49"></em><em value=4"" style="background-color:#44cb83"></em><em value="5" style="background-color:#56c6ff"></em><em value="6" style="background-color:#08a1ef"></em><em value="7" style="background-color:#7171ef"></em><em value="8" style="background-color:#cc62c7"></em><em value="9" style="background-color:#7c4611"></em><em value="10" style="background-color:#000000"></em><em value="124" style="border:1px solid #ccd5db;color:#000000;"></em><em style="position:relative;"><em style="background-color:#ff5448;top:0;left:0;"></em><em style="background-color:#f2a653;top:0;left:9px;"></em><em style="background-color:#08a1ef;top:9px;left:0;"></em><em style="background-color:#44cb83;top:9px;left:9px;"></em></em>',link:function(e,t,n,i){function a(){s.unbind("click",a),e.$apply(function(){e.pageTpl.showColorPanel=!1})}for(var s=$(document),o=t.find("> em"),r=0;r<o.length;r++)e.pageTpl.color===$(o[r]).attr("value")&&$(o[r]).addClass("eqf-yes2");t.on("$destroy",function(){s.unbind("click",a),o.unbind("click")}),s.click(a),o.bind("click",function(){a(),i.$setViewValue($(this).attr("value"));var e=$(".select-color .tpl-color");$(this).attr("value")+""=="124"?e.css("border","1px solid #ccd5db"):e.css("border","none"),e.css("background-color",$(this).css("background-color"))})}}}]).directive("loadErr",[function(){return{restrict:"A",link:function(e,t,n){t.bind("error",function(){n.$set("src","assets/images/create/pic.svg"),t.addClass("load-err")})}}}]).directive("closePanel",[function(){return{scope:{pause:"@",model:"@"},restrict:"A",templateUrl:"",link:function(e,t){function n(t){"false"===e.pause&&t.stopPropagation()}function i(){e.$apply(function(){e.$eval("$parent."+e.model+"=false")})}var a=$(document);t.click(n),a.click(i),t.on("$destroy",function(){a.unbind("click",i),t.unbind("click")})}}}]).directive("pageScroll",["sceneService","editService",function(e,t){return{scope:{pageH:"@"},restrict:"A",link:function(n,i){i.on("mousewheel",function(a){var s=i.height(),o=(s/2-260)*t.currentScale,r=this.scrollTop+a.originalEvent.deltaY,l=486*n.pageH*t.currentScale-s+o;.5===t.currentScale&&(n.pageH>=4?l+=100:n.pageH>1&&(l+=100)),0>=r&&(r=0),r>l&&(r>=l+o/2+100&&(i.scrollTop(l+o/2+100),a.preventDefault()),r=this.scrollTop);var c=r/t.currentScale-(t.currentScale>=3?100:0);c+400-o>486*n.pageH?c=486*n.pageH-200:0>c&&(c=0),i.find(".history").css("top",c),r/t.currentScale+100>486*n.pageH?r=486*n.pageH-130:t.currentScale>=1?r=(r-100)/t.currentScale:r/=t.currentScale,e.comPosition={top:r}}),n.$watch("pageH",function(e,t){e!==t&&(i.find(".history").css("top",0),i.scrollTop(0))}),n.$on("recoveryScale",function(){var a=i.height(),s=(a/2-260)*t.currentScale,o=486*n.pageH*t.currentScale-a+s;i.scrollTop()>o&&(s=o/t.currentScale-(t.currentScale>=3?50:0),s>0?(i.scrollTop(o+50),i.find(".history").css("top",s),e.comPosition={top:o}):(i.scrollTop(0),i.find(".history").css("top",0),e.comPosition={top:0}))})}}}]).controller("PageNewCtrl",["$scope",function(e){e.newPageLength=2,e.pageLengths=[{name:"2页",value:2},{name:"3页",value:3},{name:"4页",value:4},{name:"5页",value:5}],e.cancel=function(){e.$dismiss()},e.create=function(){e.$close(e.newPageLength)},e.changePageLength=function(t){e.newPageLength=t}}]).directive("psdUpload",["psdUploadService","ModalService",function(e,t){return{restrict:"A",template:'<div ng-click="openFileChooseBox()" id="psdUploadDivId"><em class="imp heart" ng-if="showPhoneTip"></em><i class="eqf-ps" style="font-size:15px;"></i></div>',scope:{psdUpload:"="},link:function(n){function i(n,i){function a(){n[0].size>31457280?t.openMsgDialog({msg:"psd文件大小超过30M了，上传文件不可以超过30M。"}):($("#psdLoading").show(),$.when(e.psdDecompose(n,i)).done(function(e){if($("#psdLoading").hide(),e.length>0){var n=e.join(",");t.openMsgDialog({msg:'图层 "'+n+'" 超过5M，我们已经屏蔽掉了！'})}}))}for(var s=!1,o="http://cdn.bootcss.com/psd.js/3.1.0/psd.min.js",r=document.getElementsByTagName("script"),l=0;l<r.length;l++)r[l].src===o&&(s=!0);if(s)a();else{eqShow.delayLoadJSAndCSS(o,"js").onload=function(){a()}}}n.openFileChooseBox=function(){n.psdUpload.showPsdWarn=!0,n.psdUpload.currentNum=0,n.psdUpload.total=0},n.psdUpload.openPsdFileChooseBox=function(){$("#psdUploadDivId").append($('<input type="file" id="psdUploadId" style="display:none;" accept=".psd"/>'));var t=$("#psdUploadId");t.trigger("click"),t.change(function(){t.remove(),e.validationPSDFile(this.files)&&i(this.files,n.psdUpload)}),n.psdUpload.showPsdWarn=!1}}}}]),angular.module("scene.create.new",["services.scene","services.staticRes"]),angular.module("scene.create.new").controller("SceneNewCtrl",["$scope","$rootScope","$location","sceneService","items","ModalService","staticResService","dataCacheService","groupCom",function(e,t,n,i,a,s,o,r,l){e.scene={name:""};var c=!0;if(e.scene.types=o.getSceneType(),a){var d=!0;angular.forEach(e.scene.types,function(t){if(d){var n=""+a.type;t.value===n?(e.scene.type=t,d=!1):e.scene.type=e.scene.types[0]}})}else e.scene.type=e.scene.types[0];var p=!1,u=0;e.create=function(){if(c)if(c=!1,a){var o={};o={id:a.id,type:e.scene.type.value,pageMode:e.scene.pageMode.id,expdType:l,price:a.price},1!==l&&(o.price=a.disCountPrice?a.disCountPrice:a.price,o.expdType=l||0),p&&(o.price=u),i.createByTpl(o).then(function(i){200===i.data.code?(c=!0,r.clear("sceneList"),a.fillScene?n.path("fillscene/"+i.data.obj):(n.path("scene/create/"+i.data.obj),n.search("pageId",1)),t.$broadcast("userXd"),e.$close()):130006===i.data.code?(u=i.data.obj,s.openConfirmDialog({msg:'当前样例价格有变动，新价格为<font color="#ff6e6e">'+i.data.obj+"</font>秀点，是否继续购买？",confirmName:"购买",cancelName:"取消"},function(){p=!0,e.create()})):(s.openMsgDialog({msg:i.data.msg}),e.$close())})}else i.createBlankScene(null,e.scene.type.value,e.scene.pageMode.id).then(function(e){c=!0,r.clear("sceneList"),n.path("scene/create/"+e.data.obj),n.search("pageId",1)}),e.$close()},e.cancel=function(){e.$dismiss()},e.pagemodes=[{id:2,name:"上下翻页"},{id:1,name:"左右翻页"}],e.scene.pageMode=e.pagemodes[0]}]),function(){angular.module("create.userGuide",[]).controller("CreateUserGuideCtrl",["$rootScope","$scope",function(e,t){if(window.localStorage){var n=JSON.parse(localStorage.getItem("createUserGuide"));n&&n[e.user.id]?t.firstLogin=!1:(t.firstLogin=!0,n=n||{},n[e.user.id]=1,localStorage.setItem("createUserGuide",JSON.stringify(n)))}t.myInterval=-1,t.userGuideSlides=[{image:CLIENT_CDN+"assets/images/scene/user-guide1.png"},{image:CLIENT_CDN+"assets/images/scene/user-guide2.png"},{image:CLIENT_CDN+"assets/images/scene/user-guide3.png"},{image:CLIENT_CDN+"assets/images/scene/user-guide4.png"},{image:CLIENT_CDN+"assets/images/scene/user-guide5.png"},{image:CLIENT_CDN+"assets/images/scene/user-guide6.png"}],t.close=function(){t.firstLogin=!1},t.currentIndex=0;var i=t.$watch("userGuideSlides",function(){angular.forEach(t.userGuideSlides,function(e,n){e.active&&(t.currentIndex=n)})},!0);t.$on("$destroy",i)}])}(),angular.module("scene.edit.bg",["services.scene","services.history"]),angular.module("scene.edit.bg").controller("editBgCtrl",["$scope","$rootScope","sceneService","historyService",function(e,t,n,i){e.cropBg=function(a){e.$broadcast("hide.editbg.panel");var s,o;a.properties.originSrc&&(s=a.properties.originSrc,o=a.properties.cropSize);var r={type:3,properties:{src:a.properties.imgSrc,pageLength:e.pageLength,originSrc:s,cropSize:o}};n.openCropModal(r,function(n){n.id&&(a.properties.id=n.id),1!==e.pageLength&&(a.properties.pageLength=e.pageLength,a.properties.croptype=n.type),n.cropSize&&(a.properties.cropSize=n.cropSize),n.originSrc&&(a.properties.originSrc=n.originSrc),t.$broadcast("scene.bg.replace",{type:"imgSrc",src:n.src,id:a.properties.id},a),a.properties.imgSrc=n.src,i.addPageHistory(a.pageId,e.tpl.obj.elements)})},e.scaleUpBg=function(e){e||(e={}),e.effect={type:"scaleUp",duration:1,blurSize:5}},e.scaleDownBg=function(e){e||(e={}),e.effect={type:"scaleDown",duration:1,blurSize:5}},e.blurBg=function(e){e||(e={}),e.effect={type:"blur",duration:1,blurSize:5}},e.sharpBg=function(e){e||(e={}),e.effect={type:"sharp",duration:1,sharpSize:5}},e.removeBgEffect=function(){e.currentBgDef.effect=null},e.$on("hideBgOption",function(){e.showBgOptionPanel=!1}),e.switchBgOption=function(t){e.showBgOptionPanel=t}}]),function(){function e(e,t,n,i,a,s,o,r,l,c){function d(e){function n(){u(m)}e.$on("element.delete",function(){m=a.getElements();for(var e=0,t=m.length;t>e;e++){var i=$("#nr").find("#inside_"+m[e]).attr("ctype");if(-1!==["a","r","c","z"].indexOf(""+i)||"5"===i.charAt(0))return void o.openConfirmDialog({msg:"将删除已收集的数据",confirmName:"确定",cancelName:"取消"},n)}u(m)}),e.$on("element.selectall",function(){g()}),e.$on("element.selectComp",function(e,t){$("#nr").find("ul").find(".bar").hide();var n=$("#nr").find("#inside_"+t);if($("#comp_setting").length){"none"===$("#comp_setting").css("display")&&$("#comp_setting").show(),n.trigger("mousedown")}else n.children(".bar").show(),n.trigger("click")});var s=/\?imageMogr2/;e.$on("scene.bg.replace",function(n,i,a){var o=$("#nr .edit_area").parent();e.currentBgDef=a;var r=$(".wrapper-background").get(0),l="100%";if((""+a.properties.croptype=="2"||"backgroundColor"===i.type&&""+a.properties.croptype===1)&&(l=486*e.pageLength+"px"),r||(r=document.createElement("div"),$(r).prependTo(o).addClass("wrapper-background").css({position:"absolute",width:"100%",height:l,backgroundSize:"cover",backgroundPosition:"50% 50%"}).attr("id",a.id)),"imgSrc"===i.type){var c=i.src,d=c;/.svg/.test(d)||(d+=(s.test(d),"")),r.style.backgroundImage="url("+PREFIX_FILE_HOST+d+")",a.properties.bgColor=null,a.properties.imgSrc=c,a.properties.id=i.id,i.originSrc&&(a.properties.originSrc=i.originSrc,a.properties.cropSize=i.cropSize),t.$broadcast("show.edit.bg",c),""+a.properties.croptype=="2"?($(r).css({backgroundSize:"cover",backgroundPosition:"50% 50%",height:l}),$(r).parent().css("overflow","visible")):($(r).css({backgroundSize:"cover",backgroundPosition:"50% 50%",height:"100%"}),$(r).parent().css("overflow","hidden"))}else"backgroundColor"===i.type&&(r.style.backgroundImage="none",r.style.backgroundColor=i.color,a.properties.imgSrc=null,a.properties.bgColor=i.color,$(r).css("height",l),t.$broadcast("show.edit.bg"),$(r).parent().css("overflow","visible"))}),e.$on("remove.scene.bg",function(){$(".wrapper-background").css({backgroundColor:"transparent",backgroundImage:"none"}).removeAttr("id"),e.controlView.showBgTag=!1}),e.$on("delete.random.elem",function(e,t){""+h[t].type=="n"&&($("#nr").find("#inside_"+t).remove(),i.deleteElement(t))}),e.$on("convert.html.canvas",function(){}),e.$on("select.less.id",function(t,n){h[n]&&p(e,h[n],$("#nr #"+n).get(0))}),e.$on("select.less",function(t,n){n&&n.length&&$.each(n,function(t,n){h[n]&&p(e,h[n],$("#nr #"+n).get(0))})})}function p(t,n,i){if(""+n.type=="x"||n.fonts){var a=e.defer();t.completeHtml2Canvas=a.promise;var s=$(i).closest("li").clone();s.appendTo("#nr .edit_area").css({position:"absolute",zIndex:2,opacity:0,transform:""});var o=518===$(".box").height()?$(document).height():$(".workspace").height()/2-260+50+$(".box").height()+50;setTimeout(function(){var e=s.find(".element-box").get(0),i=s.width(),r=s.height();$(e).attr("style","").css({color:n.css.color,width:i+"px",height:r+"px"}),s.css({transform:""}),html2canvas(e,{width:i,height:r,innerHeight:o,onrendered:function(e){s.remove();var i=e.toDataURL();n.properties.dataUrl=i,a.resolve(),t.completeHtml2Canvas=null}})},0)}}function u(e){var n=i.getSceneObj(),o=i.getElementsMap();utilTrigger.getHandleType(),s.addPageHistory(n.obj.id,n.obj.elements),$.each(e,function(e,t){r.resetTrigger(parseInt(t,10)),$("#nr").find("#inside_"+t).remove(),i.deleteElement(t)}),$.each(o,function(e,t){r.clearTrigger(e);var n=r.getTrigger(e);n?t.trigger=n:delete t.trigger}),s.addPageHistory(n.obj.id,n.obj.elements),t.$broadcast("comps.delete"),a.clearElements(),t.$broadcast("hideStylePanel"),t.$broadcast("boxOuter"),$("#popMenu").hide()}function g(){a.clearElements();var e=$("#nr").find("ul").find("li.inside");e.children(".bar").show(),e.each(function(e,t){a.addElement($(t).attr("id").split("_")[1])})}var m,h=i.getElementsMap();return{restrict:"EA",link:d}}angular.module("scene.edit.common",["services.scene","services.select","services.history"]).directive("editCommon",["$q","$rootScope","$location","sceneService","selectService","historyService","ModalService","triggerService","dataCacheService","fileService",e])}(),function(){function e(e,t,n,i,a){function s(n,s,o,r){var l=$(document);n.$on("$destroy",function(){l.unbind("keydown")});var c,d={deltaX:0,deltaY:0};l.unbind("keydown").keydown(function(s){if(""+s.keyCode=="8"||""+s.keyCode=="46"){if($(".modal-dialog").length||$("#pageList").find("input").is(":focus"))return;i.getElements().length&&(s.preventDefault(),e.$broadcast("element.delete"))}if(-1!==["37","38","39","40"].indexOf(""+s.keyCode)){i.getElements().length&&s.preventDefault(),c||(c=!0,r.compDragStart(d));var o=a.currentScale>1?a.currentScale:1;""+s.keyCode=="37"?(d.deltaX-=o,r.compDragMove(d)):""+s.keyCode=="38"?(d.deltaY-=o,r.compDragMove(d)):""+s.keyCode=="39"?(d.deltaX+=o,r.compDragMove(d)):""+s.keyCode=="40"&&(d.deltaY+=o,r.compDragMove(d))}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="65"){if($(".modal-dialog").length)return;if(s.preventDefault(),c)return;c=!0,e.$broadcast("element.selectall")}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="90"&&t.historyBack(),(s.ctrlKey||s.metaKey)&&""+s.keyCode=="89"&&t.historyForward(),(s.ctrlKey||s.metaKey)&&""+s.keyCode=="67"){if($(".modal-dialog").length)return;t.copyElement()}if((s.ctrlKey||s.metaKey)&&""+s.keyCode=="86"){if($(".modal-dialog").length)return;t.getCopy()&&t.pasteElement()}n.$apply()}).unbind("keyup").keyup(function(){c=!1,(d.deltaX||d.deltaY)&&r.compDragEnd(d),d.deltaX=0,d.deltaY=0,n.$apply()})}return{restrict:"A",link:s,require:"^multiCompDrag"}}angular.module("scene.edit.keymap",["services.scene","services.history","services.select"]).directive("editKeymap",["$rootScope","sceneService","historyService","selectService","editService",e])}(),angular.module("scene.edit.select",["services.history","services.scene"]).controller("selectCtrl",["$scope",function(e){e.pasteOpacity=.3,e.$on("select.more",function(){e.safeApply(function(){e.showSelectPanel=!0})}),e.$on("select.less",function(){e.safeApply(function(){e.showSelectPanel=!1})}),e.$on("copyState.update",function(t,n){e.safeApply(function(){e.pasteOpacity=n?1:.3})})}]).directive("eqxAlignLeft",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=i.bigDetectionBoxPointA.x;angular.forEach(i.editArea.detectionBoxs,function(n){var i=e-n.startPointA.x;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:n.startPosition.top,left:n.startPosition.left+i};n.element.css("left",a.left),t.updateCompPosition(n.element.attr("id"),a,!0)});var s=t.getSceneObj();n.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignHorizontalCenter",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=i.bigDetectionBoxPointO.x;angular.forEach(i.editArea.detectionBoxs,function(n){var i=e-n.startPointO.x;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:n.startPosition.top,left:n.startPosition.left+i};n.element.css("left",a.left),t.updateCompPosition(n.element.attr("id"),a,!0)});var s=t.getSceneObj();n.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignRight",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=i.bigDetectionBoxPointB.x;angular.forEach(i.editArea.detectionBoxs,function(n){var i=e-n.startPointB.x;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:n.startPosition.top,left:n.startPosition.left+i};n.element.css("left",a.left),t.updateCompPosition(n.element.attr("id"),a,!0)});var s=t.getSceneObj();n.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignTop",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=i.bigDetectionBoxPointA.y;angular.forEach(i.editArea.detectionBoxs,function(n){var i=e-n.startPointA.y;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:n.startPosition.top+i,left:n.startPosition.left};n.element.css("top",a.top),t.updateCompPosition(n.element.attr("id"),a,!0)});var s=t.getSceneObj();n.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignVerticalCenter",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=i.bigDetectionBoxPointO.y;angular.forEach(i.editArea.detectionBoxs,function(n){var i=e-n.startPointO.y;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:n.startPosition.top+i,left:n.startPosition.left};n.element.css("top",a.top),t.updateCompPosition(n.element.attr("id"),a,!0)});var s=t.getSceneObj();n.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxAlignBottom",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return{link:function(e,s){s.click(function(){e.$apply(function(){a.initCollisionDetectorWithElements();var e=i.bigDetectionBoxPointB.y;angular.forEach(i.editArea.detectionBoxs,function(n){var i=e-n.startPointB.y;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:n.startPosition.top+i,left:n.startPosition.left};n.element.css("top",a.top),t.updateCompPosition(n.element.attr("id"),a,!0)});var s=t.getSceneObj();n.addPageHistory(s.obj.id,s.obj.elements)})})}}}]).directive("eqxVerticalAverage",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return function(s,o){o.click(function(){var o=e.getElements(),r=o.length;2>r||s.$apply(function(){a.initCollisionDetectorWithElements();var e=i.editArea.detectionBoxs;e.sort(function(e,t){return e.startPointO.y>t.startPointO.y});var s=e[0].startPointO.y,o=e[r-1].startPointO.y,l=(o-s)/(r-1);angular.forEach(e,function(e,n){if(0!==n&&n!==r){var i=s+n*l-e.startPointO.y;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:e.startPosition.top+i,left:e.startPosition.left};e.element.css("top",a.top),t.updateCompPosition(e.element.attr("id"),a,!0)}});var c=t.getSceneObj();n.addPageHistory(c.obj.id,c.obj.elements)})})}}]).directive("eqxHorizontalAverage",["selectService","sceneService","historyService","editAreaBorderCollisionDetector","multiCompResize",function(e,t,n,i,a){return function(s,o){o.click(function(){var o=e.getElements(),r=o.length;2>r||s.$apply(function(){a.initCollisionDetectorWithElements();var e=i.editArea.detectionBoxs;e.sort(function(e,t){return e.startPointO.x>t.startPointO.x});var s=e[0].startPointO.x,o=e[r-1].startPointO.x,l=(o-s)/(r-1);angular.forEach(e,function(e,n){if(0!==n&&n!==r){var i=s+n*l-e.startPointO.x;i=i===Math.abs(i)?Math.floor(i):Math.ceil(i);var a={top:e.startPosition.top,left:e.startPosition.left+i};e.element.css("left",a.left),t.updateCompPosition(e.element.attr("id"),a,!0)}});var c=t.getSceneObj();n.addPageHistory(c.obj.id,c.obj.elements)})})}}]).directive("eqxCopy",["selectService","sceneService",function(e,t){return{link:function(e,n){$(n).click(function(){t.copyElement()})}}}]).directive("eqxPaste",["sceneService","historyService",function(e,t){return{link:function(n,i){$(i).click(function(){if(e.getCopy()){e.pasteElement();var i=e.getSceneObj();t.addPageHistory(i.obj.id,i.obj.elements),n.$apply()}})}}}]).directive("eqxDeleteMore",["$rootScope",function(e){return{link:function(t,n){$(n).click(function(){e.$broadcast("element.delete")})}}}]),angular.module("services.editor",[]),angular.module("services.editor").factory("setCompService",["$http","$rootScope",function(e,t){function n(){for(var e=a.length,t=0;e>t;t++){for(var n=0;e-1-t>n;n++)if(a[n].setsort<a[n+1].setsort){var i=a[n];a[n]=a[n+1],a[n+1]=i}a[a.length-t-1].num=a.length-t}}var i={},a=[],s={2:{des:"文本",num:0},x:{des:"秀字体",num:0},4:{des:"图片",num:0},h:{des:"图形",num:0},5:{des:"输入框",num:0},r:{des:"单选框",num:0},c:{des:"复选框",num:0},p:{des:"图集",num:0},6:{des:"按钮",num:0},i:{des:"计数器",num:0},d:{des:"统计组件",num:0},m:{des:"地图",num:0},w:{des:"微信音频",num:0},t:{des:"图表",num:0},z:{des:"下拉列表",num:0},b:{des:"留言板",num:0},v:{des:"视频",num:0},a:{des:"评分",num:0},p:{des:"图集",num:0},n:{des:"随机图片",num:0},8:{des:"电话",num:0},l:{des:"链接",num:0},s:{des:"音效",num:0},i:{des:"计数器",num:0},d:{des:"阅读量",num:0}};return i.init=function(e){this.clear(),setElems=e;for(var t=0,i=e.length;i>t;t++){var o=e[t],r=(""+o.type).charAt(0);if("3"!==r&&"g"!==r){var l={id:e[t].id,setstatus:o.properties.setstatus||4,setremark:o.properties.setremark||"",setsort:o.css.zIndex||t,isnew:!o.properties.setstatus};o.name?l.setlabel=o.name:l.setlabel=s[r].des+(s[r].num+1),s[r].num++,a.push(l)}}return n(),a},i.initModel=function(e){return this.getElemDefById(e.id)},i.addModel=function(e){var t=(""+e.type).charAt(0);if("3"!==t&&"g"!==t){var n={id:e.id,setlabel:s[t].des+(s[t].num+1),settype:"",setstatus:4,setremark:"",setsort:e.css.zIndex,isnew:!0};s[t].num++,a.unshift(n)}},i.getElemDefs=function(){return a},i.getElemDefById=function(e){for(var t,n=0;n<a.length;n++)if(a[n].id===e){t=a[n];break}return t},i.removeElemDef=function(e){for(var t=0,n=a.length;n>t;t++)if(a[t].id+""===e){for(var i=a[t].setsort,s=i;n>s;s++)a[s].setsort=a[t].setsort++;a.splice(t,1);break}},i.clear=function(){a=[],$.each(s,function(e,t){t.num=0})},i.getSortNum=function(){return a.length},i}]),angular.module("scene.edit.trigger",[]).factory("triggerService",["$rootScope",function(e){function t(e,t,n,i,a){var o=s(e,t,n,a).ids;o.indexOf(i)>=0||o.push(i)}function n(e,t,n,i,a){var o=u[n];if(o&&o.sends.length){var r=s(e,t,n,a).ids,l=r.indexOf(i);0>l||r.splice(l,1)}}function i(t,n,i,a){var s=l(t,i).ids;s.indexOf(n)>=0||(s.push(n),e.$broadcast("receive.element.update",t,n,i,a))}function a(t,n,i,a){var s=l(t,i).ids,o=s.indexOf(n);0>o||(s.splice(o,1),e.$broadcast("receive.element.update",t,n,i,a))}function s(e,t,n,i){var a=o(e,n,i).handles,s=c(a,t);if(s)return s;var r={type:t,ids:[]};return a.push(r),r}function o(e,t,n){var i=r(t),a=i.sends,s=d(a,n);if(s)return s;var o={sendIndex:n,delay:0,type:e,handles:[]};return a.push(o),o}function r(e){return u[e]||(u[e]={sends:[],receives:[]}),u[e]}function l(e,t){var n=r(t),i=n.receives,a=c(i,e);if(a)return a;var s={type:e,ids:[]};return i.push(s),s}function c(e,t){for(var n=0;n<e.length;n++)if(t===e[n].type)return e[n];return null}function d(e,t){for(var n=0;n<e.length;n++)if(t===e[n].sendIndex)return e[n];return null}var p={},u={};return p.clear=function(){u={}},p.getTrigger=function(e){return u[e]},p.getReceiveIds=function(e,t,n){if("number"!=typeof e||"number"!=typeof t||"number"!=typeof n)return[];var i=s(e,t,n).ids;return angular.copy(i)},p.getSendIds=function(e,t){if("number"!=typeof e||"number"!=typeof t)return[];var n=l(e,t).ids;return angular.copy(n)},p.setTrigger=function(e,t){"number"==typeof e&&"object"==typeof t&&(u[e]=t)},p.addTrigger=function(e,n,a,s,r){"number"==typeof e&&"number"==typeof n&&"number"==typeof a&&"number"==typeof s&&(u[a]&&u[a].sends[r]||o(e,a,r),t(e,n,a,s,u[a].sends[r].sendIndex),i(n,a,s,r))},p.deleteTrigger=function(e,t,i,s,o){"number"==typeof e&&"number"==typeof t&&"number"==typeof i&&"number"==typeof s&&u[i]&&u[i].sends[o]&&(n(e,t,i,s,u[i].sends[o].sendIndex),a(t,i,s,o))},p.clearTrigger=function(e){var t=u[e];if(t){for(var n=!1,i=!1,a=0;a<t.sends.length;a++){if("number"==typeof t.sends[a].sendIndex)for(var s=0;s<t.sends[a].handles.length;s++)if(t.sends[a].handles[s].ids.length){n=!0;break}if(n)break}for(var o=0;o<t.receives.length;o++)if(t.receives[o].ids.length){i=!0;break}n||i||delete u[e]}},p.resetTrigger=function(e){if("number"==typeof e){var t=utilTrigger.getSendType(),n=utilTrigger.getHandleType();for(var i in t)for(var a in n){var s=t[i].value,o=n[a].value,r=l(o,e).ids;r.length&&$.each(r,function(t,n){if(p.getTrigger(n)){for(var i=p.getTrigger(n).sends,a=0;a<i.length;a++)void 0===i[a].sendIndex&&i[a].hasOwnProperty("sendIndex")&&(i.splice(a,1),a--);var r=n;$.each(i,function(t,n){var i=t;$.each(n.handles,function(t,n){if(n.value,n.ids.length){var l=n.ids;for(a=0;a<l.length;a++)l[a]===e&&p.deleteTrigger(s,o,r,e,i)}})})}});var c=p.getTrigger(e);if(c&&c.sends&&c.sends.length)for(var d=0;d<c.sends.length;d++)void 0===c.sends[d].sendIndex&&triggerSends[d].hasOwnProperty("sendIndex")?(c.sends.splice(d,1),d--):p.deleteTriggerBySendIndex(d,e)}}},p.deleteTriggerBySendIndex=function(t,n){var i=u[n];if(i&&i.sends.length){for(var a=0;a<i.sends.length;a++)void 0===i.sends[a].sendIndex&&triggerSends[a].hasOwnProperty("sendIndex")&&(i.sends.splice(a,1),a--);var s=i.sends[t].type;$.each(i.sends[t].handles,function(i,a){var o=a.type;if(a.ids.length)for(var r=0;r<a.ids.length;r++)e.$broadcast("delete.random.elem",a.ids[r]),p.deleteTrigger(s,o,n,a.ids[r],t),r--}),i.sends.splice(t,1)}},p.getSend=o,p}]),angular.module("scene.create.compsManage",[]),angular.module("scene.create.compsManage").controller("CompsManageCtrl",["$scope","setCompService","selectService","$rootScope","sceneService",function(e,t,n,i,a){function s(e){var n=a.getComponent(e);elemDef=t.getElemDefById(e),n.name=elemDef.setlabel}function o(e,t,n){var a=e[t].setsort;if(t>n)for(var s=t;s>n;s--)e[s].setsort=e[s-1].setsort,r(e[s]);else for(var o=t;n>o;o++)e[o].setsort=e[o+1].setsort,r(e[o]);e[n].setsort=a,r(e[n]),i.$broadcast("zindex.change")}function r(e){a.getComponent(e.id).css.zIndex=e.setsort}e.compEditStatus=[],e.setCompEditStatus=function(t,n,a){if(n&&e.curCompId!==a+""&&i.$broadcast("element.selectComp",a),!e.isTplEditor)return void(e.compEditStatus[t]=n);if(t!==undefined)e.compEditStatus[t]=n,n||s(a);else for(var o=0;o<e.compEditStatus.length;o++)e.compEditStatus[o]=!1},e.$on("refreshSetComps",function(){e.curCompId=""}),e.$on("comps.select",function(t,n){e.curCompId=n||""}),e.compSortOption={placeholder:"ui-state-highlight ui-sort-position",containment:"#containment",update:function(e,t){o(t.item.sortable.sourceModel,t.item.sortable.dropindex,t.item.sortable.index)}}}]),angular.module("scene.edit.workspace",[]),angular.module("scene.edit.workspace").directive("editWorkspace",["$rootScope","selectService","$compile","sceneService","gridGuide","security",function(e,t,n,i,a,s){function o(e){4===e?d.html("最大值："+parseInt(100*e,10)+"%"):"0.5"===e?d.html("最小值："+parseInt(100*e,10)+"%"):d.html(parseInt(100*e,10)+"%"),d.fadeIn(800),r&&clearTimeout(r),r=setTimeout(function(){d.fadeOut(800)},2500)}var r,l=1,c=$(".workspace"),d=c.find(".scaleTips");return{scope:{scale:"@"},restrict:"A",link:function(e,t){if(""+s.currentUser.type!="4")t.css({height:"100%",width:"100%",overflow:"hidden"});else{e.scale&&t.css("transform","scale("+e.scale+")");var n=$(document).height()-50,r=$(document).width()-184-288;t.css({width:r,height:n});var c=t.parent().get(0);e.$watch("scale",function(i,s){if(i!==s){if((l=e.scale)>1)var d=r/2+c.scrollLeft,p=n/2+c.scrollTop,u=d/s*i-r/2,g=p/s*i-n/2;t.css("transform","scale("+e.scale+")"),o(e.scale),u&&(c.scrollLeft=u,c.scrollTop=g),t.find(".history").css("transform","scale("+1/e.scale+")"),1>i?(t.css({width:r/e.scale}),t.find(".box").css("borderWidth","2px"),t.find(".internal-box").css("borderWidth","2px")):(t.css({width:r,height:n}),t.find(".box").css("borderWidth","1px"),t.find(".internal-box").css("borderWidth","1px")),a.grid.paint()}}),e.$on("outScale",function(){o(e.scale)})}e.$on("zindex.change",function(){var e=i.getElementsMap();$.each(e,function(e,t){$("#inside_"+e).css("zIndex",t.css.zIndex)})}),e.$on("edit.load",function(e,t){"show"===t?$("#loading").show():$("#loading").hide()}),e.$on("zindex.change",function(){var e=i.getElementsMap();$.each(e,function(e,t){$("#inside_"+e).css("zIndex",t.css.zIndex)})})}}}]).factory("editService",[function(){return{currentScale:1,scaleIndex:3}}]),angular.module("scene.create.console.font",[]),angular.module("scene.create.console.font").controller("fontShoppingCtrl",["$rootScope","$scope","$timeout","fontService","ModalService","usercenterService","storageService","$modal",function(e,t,n,i,a,s,o,r){function l(){0!==t.currentTypeFontLists.length&&0!==t.fontMyLists.length&&angular.forEach(t.currentTypeFontLists,function(e){angular.forEach(t.fontMyLists,function(t){e.id===t.id&&(e.license=t.license,1===t.license&&(e.status=3))})})}t.modal={},t.openCloseFont=!0,t.fontMyLists=[],t.currentTypeFontLists=[],t.user=e.user,t.getFontType=function(e){if(t.modal.fontType!==e){t.modal.fontType=e;var n;1===e?n="YYXFont":2===e?n="FZFont":3===e&&(n="HYFont"),t.currentTypeFontLists=JSON.parse(sessionStorage.getItem(n))||[],0===t.currentTypeFontLists.length?i.getFontType(e).then(function(e){if(e.data.success){if(t.currentTypeFontLists=e.data.list,sessionStorage.setItem(n,JSON.stringify(t.currentTypeFontLists)),l(),0===t.currentTypeFontLists.length)return;t.tabViewFont(t.currentTypeFontLists[0],0)}}):(l(),t.tabViewFont(t.currentTypeFontLists[0],0))}},t.getMyFontFamily=function(){t.openCloseFont&&"my"===t.modal.fontType||(t.currentTypeFontLists=JSON.parse(sessionStorage.getItem("toolbarFonts"))||[],0===t.currentTypeFontLists.length?i.getMyFontFamily().then(function(e){if(e.data.success){if(t.currentTypeFontLists=e.data.list,t.fontMyLists=angular.copy(t.currentTypeFontLists),sessionStorage.setItem("toolbarFonts",JSON.stringify(t.fontMyLists)),t.modal.fontType="my",0===t.fontMyLists.length)return;t.tabViewFont(t.currentTypeFontLists[0],0)}else a.openMsgDialog({msg:e.data.msg})}):(t.modal.fontType="my",t.fontMyLists=angular.copy(t.currentTypeFontLists),t.tabViewFont(t.currentTypeFontLists[0],0)))},t.tabViewFont=function(e,n){t.fontIndex=n;var i;i="my"===t.modal.fontType?e.woffPath:e.preWoffPath;var a,s=JSON.parse(o.get("shoppingFontFamily1"))||{},r=JSON.parse(sessionStorage.getItem("fontface"))||[];s[e.fontFamily]||(a="@font-face{font-family:"+e.fontFamily+";src: url("+PREFIX_FILE_HOST+i+") format(woff);}",t.fontFaceStr=a,r.push(a),s[e.fontFamily]=!0,o.push("shoppingFontFamily1",JSON.stringify(s)),sessionStorage.setItem("fontface",JSON.stringify(r))),t.modal.fontFamily=e.fontFamily,t.currentViewObj=e,t.modal.license=e.license},t.openCloseFontStatus=function(e){var n;n=1===e.status?0:1,i.openCloseFontStatus(e.id,n).then(function(n){n.data.success?(a.openMsgDialog({msg:"操作成功"}),t.openCloseFont=!1,angular.forEach(t.currentTypeFontLists,function(t,n){t.id===e.id&&(t.status=1===e.status?0:1)}),sessionStorage.setItem("toolbarFonts",JSON.stringify(t.currentTypeFontLists))):a.openMsgDialog({msg:"网络繁忙,请稍后再试"})})},t.buyFont=function(e){(e.price===undefined||null===e.price)&&(e.price=0),(e.companyPrice===undefined||null===e.companyPrice)&&(e.companyPrice=0),r.open({templateUrl:"scene/font/fontPurpose.tpl.html",controller:"fontPurposeCtrl",resolve:{font:function(){return{id:e.id,license:e.license,personal:{type:"personal",price:e.price},business:{type:"personal",price:e.companyPrice}}}}}).result.then(function(n){t.openCloseFont=!1,e.license=n,e.status=1;var i=0,a=angular.copy(e);angular.forEach(t.fontMyLists,function(n,s){n.id===e.id&&(t.fontMyLists[s]=a,i++)}),0===i&&t.fontMyLists.unshift(a),sessionStorage.setItem("toolbarFonts",JSON.stringify(t.fontMyLists)),l()})},t.cancel=function(){t.$dismiss()},t.getMyFontFamily()}]).directive("fontFace",function(){return{restrict:"E",scope:{fontface:"@"},link:function(e){function t(e){if($(".font-style").length>0){var t,n=document.createTextNode(e);if($(".font-style style").length>0)t=$(".font-style style")[0];else{var i=$(".font-style")[0];t=document.createElement("style"),i.appendChild(t)}t.appendChild(n)}}var n=JSON.parse(sessionStorage.getItem("fontface"))||[];if(n.length>0)for(var i=0;i<n.length;i++)t(n[i]);e.$watch("fontface",function(e,i){e&&e!==n[0]&&t(e)})}}}),angular.module("scene.create.console.font").controller("fontPurposeCtrl",["$scope","usercenterService","ModalService","fontService","$rootScope","font",function(e,t,n,i,a,s){e.font=s,e.usage={},e.userType=a.user.type,e.ok=function(){e.$close(e.usage.license)},e.cancel=function(){e.$dismiss()},e.confirmBuyFont=function(){e.usage.type||(21!==e.userType&&51!==e.userType?e.usage.type="business":e.usage.type="personal"),"personal"===e.usage.type?(e.usage.price=e.font.personal.price,e.usage.license=0):(e.usage.price=e.font.business.price,e.usage.license=1),t.getUserXd().then(function(t){var o=t.data.obj||0;e.usage.price>o?n.openConfirmDialog({msg:'当前选择需要消耗秀点<font color="#ff6e6e">'+e.usage.price+'</font>个<br/>秀点余额不足(<font color="#ff6e6e">'+(o||0)+"</font>个)",confirmName:"立即购买",cancelName:"取消"},function(){a.buyXdQ(),e.cancel()}):n.openConfirmDialog({msg:'当前选择需要消耗秀点<font color="#ff6e6e">'+e.usage.price+'</font>个<br/>秀点余额为<font color="#ff6e6e">'+(o||0)+"</font>个",confirmName:"确定",cancelName:"取消"},function(){i.buyFont(s.id,e.usage.license).then(function(t){t.data.success?(alert("购买成功"),e.ok()):alert("网络繁忙,请稍后再试")})})})}}]),angular.module("scene.create.console.font").service("fontService",["$http","$modal",function(e,t){function n(t){var n=PREFIX_URL+"m/scene/toll/font",i=new Date;return e({method:"GET",url:n,withCredentials:!0,params:{id:t,time:i.getTime()}})}function i(t,n){var i=PREFIX_URL+"m/font/buy/"+t;return e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({license:n})})}function a(t,n){var i=PREFIX_URL+"m/font/update/"+t+"/"+n,a=new Date;return e({withCredentials:!0,method:"GET",url:i,params:{time:a.getTime()}})}function s(t){var n=PREFIX_URL+"m/font/"+t,i=new Date;return e({withCredentials:!0,method:"GET",url:n,params:{time:i.getTime()}})}function o(){var t=PREFIX_URL+"index.php?c=fonts&a=myfonts",n=new Date;return e({withCredentials:!0,method:"GET",url:t,params:{time:n.getTime()}})}function r(){t.open({windowClass:"console img_console",templateUrl:"scene/font/font-shopping.tpl.html",controller:"fontShoppingCtrl"})}function l(){var t=PREFIX_URL+"index=upfile&a=systag&type.php?c=fonts&a=myfonts",n=new Date;return t+=(/\?/.test(t),"&time="+n.getTime()),e({withCredentials:!0,method:"GET",url:t})}function c(t){var n=PREFIX_URL+"m/font/info",i=$.param({fontFamilies:t});return e({withCredentials:!0,method:"POST",url:n,data:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}return{buyFont:i,openCloseFontStatus:a,getFontType:s,getMyFontFamily:o,getMyFontList:l,getFontNames:c,checkBoughtFonts:n,openFontShopping:r}}]),angular.module("scene.create.pageTpl",[]),angular.module("scene.create.pageTpl").controller("PageTplController",["$scope","pageTplService",function(e,t){e.$watch("tpl",function(t){if(e.tplElements=[],e.textElements=[],t&&t.obj&&t.obj.elements){var n=angular.copy(t.obj.elements);$.each(n,function(t,n){""+n.type=="4"?(n.isEditable||(n.isEditable=1),e.tplElements.push(n)):""+n.type=="2"&&e.textElements.push(n)})}},!0),e.pageChildLabel=function(){var n,i=[];for(n=0;n<e.pageLabelAll.length;n++)e.pageLabelAll[n].ischecked&&i.push(e.pageLabelAll[n].id);e.tpl.obj.elements&&($.each(e.tplElements,function(t,n){$.each(e.tpl.obj.elements,function(e,t){n.id===t.id&&(n.isEditable+""=="-1"?t.isEditable=-1:delete t.isEditable)})}),$.each(e.textElements,function(t,n){$.each(e.tpl.obj.elements,function(e,t){n.id===t.id&&(n.properties.type&&"0"!==n.properties.type?t.properties.type=n.properties.type:delete t.properties.type)})})),i.length&&t.updataChildLabel(i,e.pageIdTag).then(function(){alert("分配成功！"),e.controlView.pageList=!1})}}]),angular.module("scene.pageeffect.fall",[]),angular.module("scene.pageeffect.fall").controller("fallEffectCtrl",["$scope",function(e){var t=e.properties;e.fallings=[{name:"圣诞节",path:CLIENT_CDN+"assets/images/create/fallings/wazi.png",rotate:180,vy:4,bgpath:CLIENT_CDN+"assets/images/create/fallings/christmas.png"},{name:"礼物",path:CLIENT_CDN+"assets/images/create/fallings/gift.png",rotate:180,vy:4,bgpath:CLIENT_CDN+"assets/images/create/fallings/gift_1.png"},{name:"春节",path:CLIENT_CDN+"assets/images/create/fallings/denglongcj.png",rotate:60,vy:1,bgpath:CLIENT_CDN+"assets/images/create/fallings/lantern.png"},{name:"福字",path:CLIENT_CDN+"assets/images/create/fallings/fuzi1.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/blessing.png"},{name:"红包",path:CLIENT_CDN+"assets/images/create/fallings/hongbao2.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/red_packet.png"},{name:"绿枫叶",path:CLIENT_CDN+"assets/images/create/fallings/lvfengye.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/greenery.png"},{name:"星星",path:CLIENT_CDN+"assets/images/create/fallings/xing.png",rotate:180,vy:3,bgpath:CLIENT_CDN+"assets/images/create/fallings/star.png"},{name:"雪花",path:CLIENT_CDN+"assets/images/create/fallings/snow.png",rotate:0,vy:1,bgpath:CLIENT_CDN+"assets/images/create/fallings/snow_1.png"}],t&&t.fallingObject?(e.controlView.effectType="fallingObject",e.falling=t.fallingObject,angular.forEach(e.fallings,function(t){t.path===e.falling.src.path&&(e.falling.src=t)})):e.falling={src:e.fallings[0],density:2},e.$on("save.falling.effect",function(){t={},t.fallingObject=e.falling,angular.forEach(e.fallings,function(e){e.bgpath&&delete e.bgpath}),e.$close({properties:t,name:"落物",value:"fallingObject"})})}]),angular.module("scene.pageeffect.finger",[]),angular.module("scene.pageeffect.finger").controller("fingerEffectCtrl",["$scope",function(e){var t,n=e.properties;e.fingerZws=[{name:"粉色指纹",path:CLIENT_CDN+"assets/images/create/fingers/zhiwen1.png"},{name:"白色指纹",path:CLIENT_CDN+"assets/images/create/fingers/zhiwen2.png"},{name:"蓝色指纹",path:CLIENT_CDN+"assets/images/create/fingers/zhiwen3.png"}],e.fingerBackgrounds=[{name:"粉红回忆",path:CLIENT_CDN+"assets/images/create/fingers/bg1.jpg"},{name:"深蓝花纹",path:CLIENT_CDN+"assets/images/create/fingers/bg2.jpg"},{name:"淡绿清新",path:CLIENT_CDN+"assets/images/create/fingers/bg3.jpg"},{name:"深紫典雅",path:CLIENT_CDN+"assets/images/create/fingers/bg4.jpg"},{name:"淡紫水滴",path:CLIENT_CDN+"assets/images/create/fingers/bg5.jpg"},{name:"蓝白晶格",path:CLIENT_CDN+"assets/images/create/fingers/bg6.jpg"},{name:"蓝色水滴",path:CLIENT_CDN+"assets/images/create/fingers/bg7.jpg"},{name:"朦胧绿光",path:CLIENT_CDN+"assets/images/create/fingers/bg8.jpg"},{name:"灰色金属",path:CLIENT_CDN+"assets/images/create/fingers/bg9.jpg"}],n&&n.finger?(e.controlView.effectType="finger",e.finger=n.finger,angular.forEach(e.fingerZws,function(t){t.path===e.finger.zwImage.path&&(e.finger.zwImage=t)}),angular.forEach(e.fingerBackgrounds,function(t){t.path===e.finger.bgImage.path&&(e.finger.bgImage=t)})):e.finger={zwImage:e.fingerZws[0],bgImage:e.fingerBackgrounds[0]},t=angular.copy(e.finger.bgImage),e.replaceImg=function(n){return n.bgImage?void(t=angular.copy(e.finger.bgImage)):void e.$emit("select.effect.image","finger")},e.$on("replace.effect.image",function(n,i,a){"finger"===a&&(e.finger.bgImage||(e.finger.bgImage={}),e.finger.bgImage.path=PREFIX_FILE_HOST+i.data,e.fingerBackgrounds[0].name||e.fingerBackgrounds.shift(),e.fingerBackgrounds.unshift(e.finger.bgImage),t=angular.copy(e.finger.bgImage))}),e.$on("cancel.effect.replace",function(n,i){"finger"===i&&angular.forEach(e.fingerBackgrounds,function(n){t.name?t.name===n.name&&(e.finger.bgImage=n):n.name||(e.finger.bgImage=n)})}),e.$on("save.finger.effect",function(){n={},n.finger=e.finger,e.$close({properties:n,name:"指纹",value:"finger"})})}]).directive("fingerMove",function(){function e(e,t){t.css({animation:"move 2s ease 0","animation-iteration-count":"infinite"})}return{restrict:"EA",link:e}}),angular.module("scene.pageeffect.fireworks",[]),angular.module("scene.pageeffect.fireworks").controller("fireWorksCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"fireWorks"===t.effect.name&&(e.controlView.effectType="fireWorks"),e.$on("save.fireworks.effect",function(){t={},t.effect={name:"fireWorks"},e.$close({properties:t,name:"烟花",value:"effect"})})}]),angular.module("common.directives.inputNumber",[]).directive("eqdInputNumber",function(){function e(e,c,d,p){c.on("$destroy",function(){c.unbind("mousedown")});var u="string"==typeof d.min?d.min:-Number.MAX_VALUE,g="string"==typeof d.max?d.max:Number.MAX_VALUE,m="string"==typeof d.unit?d.unit:"px",h="string"==typeof d.step?d.step:"1",f=0;h.indexOf(".")>-1&&(f=h.split(".")[1].length),"px"===m?(p.$parsers.push(t),p.$formatters.push(n)):"deg"===m?(m="",p.$parsers.push(i),p.$formatters.push(a)):"%"===m?(p.$parsers.push(s),p.$formatters.push(o)):p.$parsers.push(r),c.mousedown(function(t){function n(t){t.preventDefault(),a=t.pageX-o;var n=Math.abs((s+a*h).toFixed(f));n>=u&&g>=n?n+=m:u>n?n=u+m:n>g&&(n=g+m),p.$viewValue!==n&&(p.$setViewValue(n),p.$render(),e.$apply())}function i(){l.unbind("mousemove",n),l.unbind("mouseup",i)}var a,s=parseFloat(c.val())||0,o=t.pageX;l.mousemove(n),l.mouseup(i)}).keydown(function(e){var t=""+e.keyCode;return!!(t>=48&&57>=t||t>=96&&105>=t||36===t||35===t||37===t||39===t||8===t||46===t)})}function t(e){return e=/-?\d+/.exec(e),e?parseFloat(e)+"px":"0"}function n(e){return/-?\d+/.exec(e)+"px"}function i(e){return e=/\d+/.exec(e),e?"rotateZ("+parseFloat(e)+"deg)":"rotateZ(0)"}function a(e){return/\d+/.exec(e)}function s(e){return e=/\d+/.exec(e),e?e/100+"":"0"}function o(e){return 100*e+"%"}function r(e){return""===e&&(e="0"),parseFloat(e)+""}var l=$(document);return{restrict:"E",require:"ngModel",template:'<input class="eqc-input-number"/>',replace:!0,link:e}}),angular.module("scene.pageeffect.money",[]),angular.module("scene.pageeffect.money").controller("moneyEffectCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"money"===t.effect.name?(e.controlView.effectType="money",e.money={tip:t.effect.tip}):e.money={tip:"握紧钱币，数到手抽筋吧"},e.checkCharLength=function(){return e.tipError="",!(countCharacters(e.money.tip)>28)||(e.tipError="提示文字不能超过14个中文或28个英文字母",!1)},e.$on("save.money.effect",function(){e.checkCharLength()&&(t={},t.effect={name:"money",tip:e.money.tip},e.$close({properties:t,name:"数钱",value:"effect"}))})}]),angular.module("scene.pageeffect.none",[]),angular.module("scene.pageeffect.none").controller("noneEffectCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"none"===t.effect.name&&(e.controlView.effectType="none"),e.$on("save.none.effect",function(){t={},t.effect={name:"none"},e.$close({name:"无"})})}]),angular.module("scene.pageeffect.console",["scene.pageeffect.scratch","scene.pageeffect.finger","scene.pageeffect.money","scene.pageeffect.fall","scene.pageeffect.snow","scene.pageeffect.fireworks","scene.pageeffect.none"]),angular.module("scene.pageeffect.console").controller("pageEffectCtrl",["$scope","$rootScope","$modal","properties","sceneService","storageService",function(e,t,n,i,a,s){e.properties=i,e.controlView={},e.effectList=[{type:"scratch",name:"涂抹",src:CLIENT_CDN+"assets/images/create/waterdrop.jpg"},{type:"finger",name:"指纹",src:CLIENT_CDN+"assets/images/create/fingers/zhiwen1.png"},{type:"fallingObject",name:"环境",src:CLIENT_CDN+"assets/images/create/falling.png"},{type:"snowFly",name:"飘雪",src:CLIENT_CDN+"assets/images/create/snowfly.png"},{type:"fireWorks",name:"烟花",src:CLIENT_CDN+"assets/images/create/fireworks.jpg"},{type:"none",name:"无",src:""}],i&&(!i||i.scratch||i.finger||i.fallingObject||i.effect)||(i={},e.controlView.effectType="scratch",e.controlView.effectIndex=0),s.get("create.showAddEffTip")||(s.push("create.showAddEffTip",!1),e.controlView.effectType="fallingObject",e.controlView.effectIndex=3),e.selectEffect=function(t,n){e.controlView.effectType=t.type,e.controlView.effectIndex=n},e.confirm=function(){"scratch"===e.controlView.effectType?e.$broadcast("save.scratch.effect"):"finger"===e.controlView.effectType?e.$broadcast("save.finger.effect"):"money"===e.controlView.effectType?e.$broadcast("save.money.effect"):"fallingObject"===e.controlView.effectType?e.$broadcast("save.falling.effect"):"snowFly"===e.controlView.effectType?e.$broadcast("save.snow.effect"):"fireWorks"===e.controlView.effectType?e.$broadcast("save.fireworks.effect"):"none"===e.controlView.effectType&&e.$broadcast("save.none.effect")},e.$on("select.effect.image",function(e,i){n.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:0}}}}).result.then(function(e){var n={type:3,properties:{src:e.data}};e.height/e.width>=1008/642&&e.height/e.width<=1.578125?t.$broadcast("replace.effect.image",e,i):a.openCropModal(n,function(e){var n={data:e.src};t.$broadcast("replace.effect.image",n,i)},function(){t.$broadcast("cancel.effect.replace",i)})},function(){t.$broadcast("cancel.effect.replace",i)})}),e.cancel=function(){t.$broadcast("clear.scratch.interval"),e.$dismiss()}}]),angular.module("scene.pageeffect.scratch",["common.directives.inputNumber"]),angular.module("scene.pageeffect.scratch").controller("scratchEffectCtrl",["$scope","$rootScope","i18nNotifications",function(e,t,n){var i,a=e.properties;e.scratches=[{name:"水滴",path:CLIENT_CDN+"assets/images/create/waterdrop.jpg"},{name:"细沙",path:CLIENT_CDN+"assets/images/create/sand.jpg"},{name:"花瓣",path:CLIENT_CDN+"assets/images/create/flowers.jpg"},{name:"金沙",path:CLIENT_CDN+"assets/images/create/goldsand.jpg"},{name:"白雪",path:CLIENT_CDN+"assets/images/create/snowground.jpg"},{name:"模糊",path:CLIENT_CDN+"assets/images/create/mohu.jpg"},{name:"落叶",path:CLIENT_CDN+"assets/images/create/leaves.jpg"},{name:"薄雾",path:CLIENT_CDN+"assets/images/create/smoke.png"}],a&&(a.image||a.scratch)?(e.controlView.effectType="scratch",(a.image||a.scratch)&&(a.scratch?(e.scratch=a.scratch,a.scratch.percentage.value&&(e.scratch.percentage=a.scratch.percentage.value),a.scratch.opacity||(e.scratch.opacity=.2)):a.image&&(e.scratch={image:a.image,percentage:a.percentage.value},a.tip&&(e.scratch.tip=a.tip),e.scratch.opacity=.2),angular.forEach(e.scratches,function(t){e.scratch.image.name===t.name&&(e.scratch.image=t)}),e.scratch.image.name||e.scratches.unshift(e.scratch.image))):e.scratch={image:e.scratches[0],percentage:.15,opacity:.2};var s=e.$watch("scratch.opacity",function(){t.$broadcast("show.scratch.draw",e.scratch)},!0);setTimeout(function(){i=angular.copy(e.scratch.image),t.$broadcast("show.scratch.draw",e.scratch,!1)},0),e.$on("$destroy",function(){s()}),e.replaceImage=function(n){return n.image?(i=angular.copy(e.scratch.image),void t.$broadcast("show.scratch.draw",n,!1)):void e.$emit("select.effect.image","scratch")},e.$on("replace.effect.image",function(n,a,s){"scratch"===s&&(e.scratch.image||(e.scratch.image={}),e.scratch.image.path=PREFIX_FILE_HOST+a.data,e.scratches[0].name||e.scratches.shift(),e.scratches.unshift(e.scratch.image),i=angular.copy(e.scratch.image),t.$broadcast("show.scratch.draw",e.scratch,!1))}),e.$on("cancel.effect.replace",function(t,n){"scratch"===n&&angular.forEach(e.scratches,function(t){i.name?i.name===t.name&&(e.scratch.image=t):t.name||(e.scratch.image=t)})}),e.$on("save.scratch.effect",function(){return a={},a.scratch=e.scratch,a.scratch.percentage>1?void n.pushForCurrentRoute("scratch.percentage.overflow","notify.success"):(t.$broadcast("clear.scratch.interval"),void e.$close({properties:a,name:"涂抹",value:"scratch"}))})}]).directive("scratchEffect",function(){function e(e){var i=new Image;e.$on("show.scratch.draw",function(e,n){i.onload=function(){t(this,n)},i.src=n.image.path}),e.$on("change.scratch.opacity",function(e,t){$(".scratch-img").css({opacity:1-parseFloat(t).toFixed(2)})}),e.$on("clear.scratch.interval",function(){clearInterval(n)})}function t(e,s){n&&clearInterval(n);var o=$(".scratch-img");if(o.empty(),o.append('<canvas class="scratchCanvas" style="position:absolute; top: 0; left: 0;" width="196" height="308"></canvas>'),i=o.find("canvas").get(0)){a=i.getContext("2d"),a.lineCap="round",a.lineJoin="round",a.lineWidth=20,a.globalAlpha=1-parseFloat(s.opacity).toFixed(2),a.drawImage(e,0,0,i.width,i.height),a.globalCompositeOperation="destination-out";var r=130,l=80;n=setInterval(function(){a.moveTo(r,l),r>=70&&140>=l?(a.lineTo(r-2,l+2),a.stroke(),r-=2,l+=2):120>=r&&165>=l?(a.lineTo(r+2,l+1),a.stroke(),r+=2,l+=1):r>=70&&215>=l?(a.lineTo(r-2,l+2),a.stroke(),r-=2,l+=2):(clearInterval(n),t(e,s))},50)}}var n,i,a;return{restrict:"EA",link:e}}),angular.module("scene.pageeffect.snow",[]),angular.module("scene.pageeffect.snow").controller("snowEffectCtrl",["$scope",function(e){var t=e.properties;t&&t.effect&&"snowFly"===t.effect.name&&(e.controlView.effectType="snowFly"),e.$on("save.snow.effect",function(){t={},t.effect={name:"snowFly"},e.$close({properties:t,name:"飘雪",value:"effect"})})}]),angular.module("save.template",[]),angular.module("save.template").controller("saveTemplateCtrl",["$scope","$rootScope","security",function(e,t,n){e.btnGroup={selectItem:1,caretSwitch:!1};var i;window.localStorage&&(i=JSON.parse(localStorage.getItem("templateInfo")),i&&i[n.currentUser.id]?e.btnGroup.selectItem=i[n.currentUser.id]:(i=i||{},i[n.currentUser.id]=1,localStorage.setItem("templateInfo",JSON.stringify(i)))),e.btnGroup={selectItem:i[n.currentUser.id],caretSwitch:!1},e.selectedTemplate=function(t){"myTemplate"===t?e.btnGroup.selectItem=2:"companyTemplate"===t&&(e.btnGroup.selectItem=1),window.localStorage&&(i[n.currentUser.id]=e.btnGroup.selectItem,localStorage.setItem("templateInfo",JSON.stringify(i)))},e.openMenu=function(){e.btnGroup.caretSwitch=!e.btnGroup.caretSwitch}}]),angular.module("scene",["scene.create","scene.support","services.scene","services.staticRes","scene.create.new","app.directives.addelement","scene.custom.activities","scene.buy.sample"]),angular.module("scene").controller("SceneCtrl",["$window","$scope","$rootScope","$location","sceneService","$modal","ModalService","usercenterService","staticResService","customActivitiesService","security","$http",function(e,t,n,i,a,s,o,r,l,c,d,p){t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.user=d.currentUser,99===t.user.type||3===t.user.type||4===t.user.type?t.fillSceneAuth=!0:t.fillSceneAuth=!1,t.childAllList=[];var u=!1;t.scene={type:null},t.totalItems=0,t.currentPage=1,t.toPage="",t.pageSizeList=11,t.childcat=0;t.blankSample=!0;var g;g=window.location.search.split("=")[1],g&&i.search("useTplId",null),t.currentTpl={exemplarPreview:!1};var m={sceneType:null,tagId:"",order:"",pageNo:"0",targetPage:"",name:""};t.aa=function(){return p({withCredentials:!0,method:"GET",url:PREFIX_URL+"index.php?c=statics&a=typelist"})},t.pageTplTypesLista=t.aa().success(function(e){t.pageTplTypesList=e.list}),t.fillTypeList=[{type:"111",name:"行业"},{type:"112",name:"个人"},{type:"110",name:"企业"},{type:"113",name:"节假"},{type:"114",name:"风格"},{type:"115",name:"品牌"}],t.switchSample=function(e){t.isActive=e,"scene"===e?(n.isFillScene=u=!1,t.allpage(null)):(n.isFillScene=u=!0,t.getPageTplsByType(t.fillTypeList[0].type))};t.allpage=function(e){m.sceneType=e,t.childcat=0,t.getPageTpls(1,null,null,1,11,m.order),t.newArrayGroupCat=[],t.blankSample=!0},t.canvasUrl=PREFIX_SHOW_HOST,t.getCompanyTpl=function(e,n){t.childcat=1,t.childCatrgoryList=[],t.newArrayGroupCat=[],t.blankSample=12!==n,a.getCompanyTpls(e,n,m.order).then(function(e){e.data.list&&e.data.list.length>0?(t.tpls=e.data.list,t.totalItems=e.data.map.count+1,t.currentPage=e.data.map.pageNo,t.allPageCount=e.data.map.count,t.toPage=""):(t.tpls=[],t.blankSample=!1)})},t.pageChanged=function(e){return m.targetPage=e,t.toPage=e,u||e>1?(t.pageSizeList=12,t.blankSample=!1):(t.pageSizeList=11,t.blankSample=!0),1>e||e>t.totalItems/11+1?void alert("此页超出范围"):void(""+t.childcat=="1"?t.getCompanyTpl(e,t.pageSizeList,m.order):t.getPageTpls(1,m.sceneType,m.tagId,e,t.pageSizeList,m.order,null,m.name))},t.preview=function(e){var t=PREFIX_HOST+"/view.html?sceneId="+e;window.open(t,"_blank")},t.getStyle=function(e){return{"background-image":"url("+PREFIX_FILE_HOST+e+")","background-size":"cover"}},c.getActivite().then(function(e){e.data.obj&&(t.activityObj=e.data.obj)}),t.openCustomActive=function(){return""+t.user.checkPhone!="1"?void o.openMsgDialog({msg:"请先绑定手机!"}):t.user.memberType?void s.open({windowClass:"seven-contain",templateUrl:"scene/console/customActivities.tpl.html",controller:"CustomActivitiesCtrl",resolve:{activityInfo:function(){return t.activityObj},userXd:function(){return t.userXd}}}).result.then(function(e){t.activityObj=e}):void o.openConfirmDialog({msg:"请升级会员类型以使用该功能",confirmName:"立即升级",cancelName:"我知道了"},function(){window.open("/#/privilege")})},t.previewScene=function(e){n.tplObj=e,i.path("/v/"+e.code)},t.createScene=function(e){if(u&&(e.fillScene=!0),e&&1===t.user.type&&""+e.isCompanyTemp=="1")return void o.openConfirmDialog({msg:"免费升级企业会员可使用 会员专属场景",confirmName:"免费升级",cancelName:"再看看"},function(){window.open("/#/privilege")});if(e&&e.price){var n=e.disCountPrice||parseFloat(e.price)||0,i={tplPrice:n,userXd:t.userXd,scene:e};-1!==[7,8,9].indexOf(t.user.memberType)&&-1!==[2,21].indexOf(t.user.type)?i.bFlagMember=!0:i.bFlagMember=!1,s.open({windowClass:"login-container six-contain",templateUrl:"scene/buySample.tpl.html",controller:"SceneBuySample",resolve:{buySampleObject:function(){return i}}}).result.then(function(t){s.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return t}}})})}else s.open({windowClass:"login-container six-contain",templateUrl:"scene/createNew.tpl.html",controller:"SceneNewCtrl",resolve:{items:function(){return e},groupCom:function(){return null}}})},n.tplId&&r.getUserXd().then(function(e){t.userXd=e.data.obj||0}).then(function(){t.createScene(n.tplId)}).then(function(){n.tplId=null}),g&&r.getUserXd().then(function(e){t.userXd=e.data.obj||0}).then(function(){a.getSceneById(g).then(function(e){e.data.success?t.createScene(e.data.obj):o.openMsgDialog({msg:e.data.msg})})}).then(function(){g=null}),t.getStyle=function(e){return{"background-image":"url("+PREFIX_FILE_HOST+e+")"}},t.show=function(e){console.log(e.target),$(e.target).children(".cc").css("display","block")},t.filterTpl=function(e,n){"default"===n?(t.selete=!1,m.order=null):(t.selete=!0,m.order=e?1:2),""+t.childcat=="1"?t.getCompanyTpl(1,t.pageSizeList,m.order):t.getPageTpls(null,m.sceneType,m.tagId,0,11,m.order)};var h={},f=[];t.getPageTplsByType=function(e){m.sceneType=e,t.childcat=e,t.categoryId=0,t.pageSizeList=u?12:11,h[e]?(f=h[e],f.length?(v(),t.getPageTpls(1,m.sceneType,f[0].id,0,t.pageSizeList,m.order)):(t.newArrayGroupCat=[],t.getPageTpls(1,m.sceneType,null,0,t.pageSizeList,m.order))):a.getPageTplTypesTwo(e,e).then(function(n){f=h[e]=n.data.list,f.length?(v(),t.getPageTpls(1,m.sceneType,f[0].id,0,t.pageSizeList,m.order)):(t.newArrayGroupCat=[],t.getPageTpls(1,m.sceneType,null,0,t.pageSizeList,m.order))})};var v=function(){var e=null,n=[],i=[];for(var a in f)f[a].groupId!==e&&(i=[],e=f[a].groupId,n.push(i)),i.push(f[a]);n.splice(4,n.length),n.length?t.newArrayGroupCat=n:t.newArrayGroupCat=[]};(0===t.childcat||"0"===t.childcat)&&function(e){a.getPageTplByAll().then(function(e){t.childAllList=e.data.list})}(),t.freeTplChoice="",t.freeTpl=function(e){t.freeTplChoice=e,t.tplnew("new")},t.getPageTpls=function(e,n,i,s,o){u?(t.blankSample=!1,o=12):t.blankSample=11===o,t.categoryId=i,m.tagId=i;var r=t.freeTplChoice?t.freeTplChoice+"=1":"";a.getPageTpls(e,n,i,s,o,m.order,r,m.name)},t.$on("getSampleList",function(){var e=a.scenes;if(e.list&&e.list.length>0){t.tpls=e.list,t.totalItems=e.map.count,t.currentPage=e.map.pageNo,t.allPageCount=e.map.count,t.toPage=e.map.pageNo;for(var n=0;n<t.tpls.length;n++)t.tpls[n].avatar&&(0===t.tpls[n].avatar.indexOf("http://")?t.tpls[n].avatar=t.tpls[n].avatar:t.tpls[n].avatar=PREFIX_FILE_HOST+t.tpls[n].avatar)}else t.tpls=[],t.totalItems=0,t.blankSample=!1}),t.name=null,t.EnterPress=function(e,n){13===(e||window.event).keyCode&&t.submit(n)},t.searchButton=!0;var b={},y=11,w=function(){u?y=12:t.blankSample=!0};t.submit=function(e){m.name=e,t.name=e,w(),a.getPageTpls(1,m.sceneType,m.tagId,0,y,m.order,null,e),t.searchButton=!1,b.refresh=!0},t.changeName=function(e){t.searchButton=!0,""===e&&b.refresh&&(m.name="",w(),a.getPageTpls(1,m.sceneType,m.tagId,0,y,m.order,null,e))},t.clearSearch=function(){t.searchButton=!0,t.name="",m.name="",w(),a.getPageTpls(1,m.sceneType,m.tagId,0,y,m.order,null)},t.userScene=function(e){a.getPageTpls(1,null,null,0,t.pageSizeList,m.order,null,null,e)},t.openPreview=function(e){t.currentTpl.exemplarPreview=!0,t.currentTpl.tpl=e},n.isFillScene?t.switchSample("fill"):t.switchSample("scene")}]),angular.module("scene.preview",["services.scene"]),angular.module("scene.preview").directive("sceneView",["sceneService","sceneViewService","sceneDataParseService",function(e,t,n){return{scope:{sceneId:"@",sceneName:"@",sceneCover:"@",sceneDescription:"@"},restrict:"A",templateUrl:"scene/preview.tpl.html",link:function(e,i,a){function s(i,s){t.getSceneData(a.sceneId).then(function(a){if(a.data.success){var o=a.data;$.extend(!0,o.obj,e.$parent.scene),i&&(i=parseInt(i,10)-1,o.list[i].elements=s.obj.elements,o.list[i].properties=s.obj.properties),e.$parent.scene.property.activityPageId?t.getActivityPage(e.$parent.scene.property.activityPageId).then(function(e){o.list.push(e.data.obj),n.parse(o)}):n.parse(o)}})}function o(){c(),i.find(".password-numbers>span").click(l),i.find(".password-operation>span").click(c),i.find(".verifyCode").show()}function r(){i.find(".password-numbers>span").unbind("click"),i.find(".password-operation>span").unbind("click"),i.find(".verifyCode").hide()}function l(t){c($(t.target).text()),4===d.pass.length&&(e.$parent.scene.accessCode===d.pass?r():c())}function c(e){e&&"object"!=typeof e?d.pass+=e:d.pass="",i.find(".password-indicator li").each(function(e,t){e<d.pass.length?$(t).addClass("active"):$(t).removeClass("active")})}var d={play:!1};e.sceneId&&(e.$parent.mginData===angular.toJson(e.$parent.tpl)?s():s(e.$parent.pageNum,$.extend(!0,{},e.$parent.tpl))),e.$watch("sceneId",function(e,t){e!==t&&s()}),i.on("$destroy",function(){utilSound.pause(),$(document).unbind("flipend")}),e.$on("changeView",function(e,t){t?i.find(".wechat-share").show():i.find(".wechat-share").hide(),i.find(".loading").hide(),r()}),e.$on("showLoading",function(e,t,n){t?(n?(i.find(".loadbg").css({background:"url("+PREFIX_FILE_HOST+n+")",backgroundSize:"118px 118px"}).show(),i.find(".loadlogo").hide()):(i.find(".loadbg").css("background","").hide(),i.find(".loadlogo").show()),i.find(".loading").show(),i.find(".wechat-share").hide()):i.find(".loading").hide(),r()}),e.$on("processBar",function(e,t){t?i.find(".progress").show():i.find(".progress").hide()}),e.$on("passPanelSwitch",function(e,t){t?o():r()}),i.on("$destroy",function(){clearInterval(eqShow.progressInterval),n.app.pauseAutoFlip()})}}}]).factory("sceneViewService",["$http",function(e){var t={};return t.getSceneData=function(t){var n="index.php?c=scene&a=view&id="+t+"&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},t.getSelfLastPage=function(t){var n="index.php?c=scene&a=getlastpagebg&id="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_S1_URL+n})},t.getActivityPage=function(t){var n="eqs/trailer/"+t;return e({method:"GET",url:PREFIX_S2_URL+n})},t}]).factory("sceneDataParseService",["sceneViewService","sceneService",function(e,t){function n(t,n){t.obj.property.lastPageId?e.getSelfLastPage(t.obj.property.lastPageId).then(function(e){e.data.obj?(a(t.obj,e.data),t.list.push(e.data.obj),f.lastPage=n[n.length-1],l(n,t)):(i(t.obj),f.lastPage=n[n.length-1],l(n,t))}):(i(t.obj,n),f.lastPage=n[n.length-1],l(n,t))}function i(e,t){var n='{"id":"","sceneId":"","num":2,"name":null,"properties":null,"elements":[{"id":439880,"pageId":129810,"sceneId":16060,"num":0,"type":"3","isInput":0,"title":null,"content":null,"status":1,"css":{},"properties":{"bgColor":"#E6E9EE"}},{"id":439881,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;\\"><span style=\\"line-height: 1; background-color: initial;\\"><font size=\\"4\\" color=\\"#888888\\"><b>场景名称</b></font></span></div>","status":1,"css":{"height":"65","zIndex":"10","width":"320","left":"0px","top":"77px"},"properties":{}},{"id":439882,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div class=\\"bottom-logo\\" style=\\"text-align: center;cursor:pointer;height:142px;width:142px;border-radius:10px;\\"><em style=\\"color:white;line-height:142px;font-size:30px;\\" class=\\"eqf-love\\"></em></div>","status":1,"css":{"height":"157","width":"172","left":"77px","top":"170px"},"properties":{}},{"id":439883,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;\\"></div>","status":1,"css":{"height":"24","width":"280","left":"21px","top":"122px"},"properties":{}},{"id":439885,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;padding-top: 0;\\"><span style=\\"font-size: small; line-height: 1; background-color: initial;\\"><a href=\\"'+PREFIX_S1_URL+"index.php?c=scene&a=link&id=16060&amp;url="+encodeURIComponent(lastpagelink)+'\\" target=\\"_blank\\"><font color=\\"#888888\\">创建一个场景？→</font><font color=\\"'+lastpagetext_color+'\\">'+lastpagetext+'</font></a></span></div>","status":1,"css":{"borderRadius":"0px","borderStyle":"solid","height":"30","paddingTop":"0px","borderColor":"rgba(222,220,227,1)","zIndex":"12","boxShadow":"0px 0px 0px rgba(200,200,200,0.6)","color":"","backgroundColor":"rgba(255,255,255,0)","borderWidth":"0px","width":"320","left":"1px","paddingBottom":"20px","top":"420px"},"properties":{"anim":{"type":1,"direction":3,"duration":"1","delay":"0.6"}}}]}';n=n.replace(/id=16060/,"id="+e.id);var i=JSON.parse(n);i.num=t.length+1,e.cover&&"group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==e.cover&&(i.elements[2]=JSON.parse('{"id":439882,"pageId":129810,"sceneId":16060,"num":1,"type":"4","isInput":0,"title":null,"content":null,"status":1,"css":{"borderRadius":"10px","borderStyle":"solid","zIndex":"9","borderColor":"rgba(0,0,0,1)","paddingTop":"0px","height":"141","backgroundColor":"","color":"","boxShadow":"0px 0px 0px #333333","borderWidth":"0px","width":"142.13709677419354","left":"92px","paddingBottom":"0px","top":"177px"},"properties":{"height":"100px","imgStyle":{"width":142,"height":142,"marginTop":"-0.5px","marginLeft":"0px"},"width":"100px","src":"group1/M00/BA/DA/yq0KA1Rq8COAAYRjAAKU4OVYum0889.jpg"}}'),i.elements[2].properties.src=e.cover),i.elements[1].content=i.elements[1].content.replace(/场景名称/,e.name?e.name:""),t.push(i)}function a(e,t){var n='{"id":81395,"pageId":"","sceneId":"","num":1,"type":"4","isInput":0,"title":null,"content":null,"status":1,"css":{"borderRadius":"%","borderStyle":"solid","height":"158","zIndex":"1000","paddingTop":"0px","borderColor":"rgba(0,0,0,1)","boxShadow":"0 0px 0px #333333","color":"#000000","backgroundColor":"white","borderWidth":"0px","width":"158","left":"84px","paddingTop":"11px","paddingLeft":"10px","top":"170px"},"properties":{"height":"100px","imgStyle":{"width":139,"height":136,"marginTop":"0px","marginLeft":"0px"},"width":"100px","src":"group1/M00/01/30/yq0JCFQpOR-AOULFAAFBPO1yzBQ984.jpg","originSrc":"'+lastpagelogo+'"}}';t.obj.sceneId=e.id;for(var i,a=0;a<t.obj.elements.length;a++)""+t.obj.elements[a].type!="4"||"group1/M00/A5/5E/yq0KA1QmePmAKr7yAAEByp5jyLc752.jpg"!==t.obj.elements[a].properties.src&&"group1/M00/C5/9D/yq0KA1SH1zuAFgkLAAAFgBR8hJs456.png"!==t.obj.elements[a].properties.src&&"group1/M00/C5/3F/yq0KA1SHp-2AQZZZAAB-7rIaK6I743.png"!==t.obj.elements[a].properties.src&&"group1/M00/C5/9D/yq0KA1SH1zuAeQuFAAAFfUkeXDc110.png"!==t.obj.elements[a].properties.src?"2"===t.obj.elements[a].type&&(t.obj.elements.splice(a,1),a--):(t.obj.elements.splice(a,1),a--);"group1/M00/61/8A/yq0KA1T2vYSAEgo7AACovQVgHxk048.jpg"!==e.cover?(i=JSON.parse(n),i.properties.src=e.cover):i=JSON.parse('{"id":439882,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div class=\\"bottom-logo\\" style=\\"text-align: center;cursor:pointer;height:136px;width:139px;\\"><em style=\\"color:white;line-height:136px;font-size:120px;\\" class=\\"eqf-eqxiu\\"></em></div>","status":1,"css":{"height":"158","width":"158","left":"84px","top":"170px","backgroundColor":"white"},"properties":{}}'),t.obj.elements.push(i),t.obj.elements.push(JSON.parse('{"id":2557867,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div class=\\"logo-shadow1\\" style=\\"text-align: center;cursor:pointer;height:127px;width:220px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);position:absolute;left:20px;top:56px;\\"></div>","status":1,"css":{"height":"257","width":"257","left":"78px","top":"175px"},"properties":{}}')),t.obj.elements.push(JSON.parse('{"id":439883,"pageId":129810,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"width:280px;height:1px;background-color:rgba(60,60,60,0.4);cursor:pointer;position:absolute;left:0;-webkit-filter:drop-shadow(0px 1px 0px rgba(60,60,60,0.4));top:12px;\\"></div>","status":1,"css":{"height":"24","width":"280","left":"21px","top":"122px"},"properties":{}}'));var s=JSON.parse('{"id":81465,"pageId":"","sceneId":"","num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;\\"><font color=\\"#ffffff\\" size=\\"3\\">击此处进行编辑</font></div>","status":1,"css":{"zIndex":"102","height":"65","width":"320","left":"0px","top":"70px"},"properties":{}}');s.content=s.content.replace(/击此处进行编辑/,e.name),t.obj.elements.push(s);for(var o=0;o<t.obj.elements.length;o++)""+t.obj.elements[o].type=="2"&&/http:\/\/service.eqxiu.com\/eqs\/link/.test(t.obj.elements[o].content)&&(t.obj.elements[o].content=t.obj.elements[o].content.replace(/;url=.*com"/,";url="+encodeURIComponent(redirectUrl)+'"'))}function s(t,n){e.getSelfLastPage(t.obj.property.bottomLabel.id).then(function(e){if(e.data.success){var i=n[n.length-1];i.elements||(i.elements=[]);var a=e.data.obj.elements;if(i.properties&&i.properties.longPage)for(var s=i.properties.longPage-1,o=0;o<a.length;o++)a[o].css.top+=486*s;i.elements=i.elements.concat(a),l(n,t)}})}function o(e,t){r(e,t),l(t,e)}function r(e,t){var n='{"id":480292,"pageId":136042,"sceneId":16060,"num":1,"type":"2","isInput":0,"title":null,"content":"<div style=\\"text-align: center;transform: none;-webkit-animation: fadeIn 2s ease 1s both;-webkit-animation-play-state: initial;\\"><a href=\\"'+PREFIX_S1_URL+"eqs/link?id=16060&amp;url="+encodeURIComponent("http://eqxiu.com")+'\\" target=\\"_blank\\" style=\\"font-size: x-small;display:block;line-height: 10px;\\"><font color=\\"#ffffff\\">易企秀技术支持</font></a></div>","status":1,"css":{"zIndex":"1000","height":"20","width":"129","left":"97px","top":"418px","backgroundColor":"rgba(0,0,0,0.6)","borderRadius":"20px"},"properties":{"anim":{"type":0,"direction":0,"duration":2,"delay":"0"}}}',i=t[t.length-1].elements;t[t.length-1].properties&&t[t.length-1].properties.longPage&&(n=n.replace("418px",486*t[t.length-1].properties.longPage-68+"px")),n=n.replace(/id=16060/,"id="+e.id),t[t.length-1].elements||(i=t[t.length-1].elements=[]),i.push(JSON.parse(n))}function l(e,t){var n=t.obj.pageMode;t.obj.property.slideNumber?t.obj.property.slideDisplay="block":t.obj.property.slideDisplay="none",t.obj.property.slideNumber=!0;for(var i={bgAudio:t.obj.bgAudio},a=1;a<=e.length;a++){$('<section class="main-page"><div class="m-img" id="page'+a+'"></div></section>').appendTo(".phone-view"),e.length>1&&($('<section class="u-arrow-bottom"><div class="pre-wrap"><div class="pre-box1"><div class="pre1"></div></div><div class="pre-box2"><div class="pre2"></div></div></div></section>').appendTo("#page"+a),$('<section class="u-arrow-right"><div class="pre-wrap-right"><div class="pre-box3"><div class="pre3"></div></div><div class="pre-box4"><div class="pre4"></div></div></div></section>').appendTo("#page"+a)),1===a&&$(".phone-view .main-page").eq(0).addClass("z-current");var s=a;e[s-1].properties&&!$.isEmptyObject(e[s-1].properties)?e[s-1].properties.image||e[s-1].properties.scratch?addScratchEffect(i,e,s):e[s-1].properties.finger?(b=[],b.push({num:s,finger:e[s-1].properties.finger}),lockEffect(i,e,b,$(".m-img").width(),$(".m-img").height())):e[s-1].properties.fallingObject?e[s-1].effObj=fallingObject(e,s):e[s-1].properties.effect?function(t){e[t-1].effObj=window[e[t-1].properties.effect.name].doEffect(i,t,e,renderPage)}(s):renderPage(eqShow,s,e,!0):(renderPage(eqShow,s,e,!0),1===s&&eqShow.playVideo(i)),a===e.length&&eqxiu.app($(".phone-view"),t.obj.pageMode,e,t)}0===n||1===n||2===n||6===n||7===n||8===n||11===n||12===n||13===n?$(".phone-view .u-arrow-right").hide():(3===n||4===n||5===n||9===n||10===n)&&$(".phone-view .u-arrow-bottom").hide()}function c(t){var n=[];$.extend(!0,n,m._pages),f.activePage&&n.push(f.activePage);var s=n.length+1;if(!t){i({name:f.sceneName},n),f.lastPage=n[n.length-1];var o=n[n.length-1];return f.haseLastPage?d(f.lastPageNum,o):($(".phone-view .main-page").last().after('<section class="main-page"><div class="m-img" id="page'+s+'"></div></section>'),f.lastPageNum=s,renderPage(eqShow,f.lastPageNum,n,!0),f.haseLastPage=!0),m.app.changeAppPage(),void m.app.setPageData(n)}e.getSelfLastPage(t).then(function(e){if(e.data.success){if(f.lastPage=e.data.obj,f.haseLastPage){a({id:"1",name:f.sceneName,cover:f.sceneCover},e.data),d(f.lastPageNum,e.data.obj)}else $(".phone-view .main-page").last().after('<section class="main-page"><div class="m-img" id="page'+s+'"></div></section>'),f.lastPageNum=s,renderPage(eqShow,f.lastPageNum,n.concat([e.data.obj]),!0),f.haseLastPage=!0;m.app.changeAppPage(),m.app.setPageData(n)}})}function d(e,n){$("#page"+e).empty(),t.templateEditor.parse({def:n,appendTo:"#page"+e,mode:"view",disEvent:!0})}function p(e,t,n,i){t.elements||(t.elements=[]);var a=[];if($.extend(!0,a,e),u(a,t,n,i),t.properties&&t.properties.longPage){longPage=t.properties.longPage-1;for(var s=0;s<a.length;s++)a[s].css.top+=486*longPage}t.elements=t.elements.concat(a),d(m._pages.length,t)}function u(e,t,n,i){for(var a=0,s=e.length;s>a;a++){var o=e[a];if(o.pageId=t.id,n.name&&n.url&&"http://"!==n.url)""+o.type=="2"&&o.content.indexOf("EQXIU.COM科技公司")>0&&(o.content=o.content.replace(/EQXIU.COM科技公司/,'<a href="'+PREFIX_S1_URL+"eqs/link?id="+i+"&amp;url="+encodeURIComponent(n.url)+'" target=_blank>'+n.name+"</a>"));else if(n.name)""+o.type=="2"&&o.content.indexOf("EQXIU.COM科技公司")>0&&(o.content=o.content.replace(/EQXIU.COM科技公司/,n.name));else if(/易企秀技术支持/.test(o.content)){o.content='<div style="text-align: center;">'+o.content+"</div>";var r={zIndex:"1000",height:"33",width:"129",left:"97px"};$.extend(o.css,r)}else""+o.type=="2"&&o.content&&(o.content="");o.css.zIndex=200}}function g(){m.app.removeLastPage(),m.app.changeAppPage(),f.haseLastPage=!1}var m={};m.app=eqxiu;var h,f={haseLastPage:!1,sceneName:"",sceneCover:"",lastPage:null,activePage:null,activePageNum:null,lastPageNum:null},v=[];m._pages=[],m.parse=function(e){f.activePage=null,e.obj.property?"string"==typeof e.obj.property&&(e.obj.property=JSON.parse(e.obj.property)):e.obj.property={},e.obj.name&&(f.sceneName=e.obj.name),e.obj.cover&&(f.sceneCover=e.obj.cover),e.obj.bgAudio&&"string"==typeof e.obj.bgAudio?e.obj.bgAudio=JSON.parse(e.obj.bgAudio):$("#audio_btn").hide();var t=e.list;if($.extend(!0,m._pages,e.list),e.obj.property.hideEqAd)l(t,e);else switch(e.obj.property.eqAdType){case 1:f.haseLastPage=!0,f.lastPageNum=t.length+1,n(e,t);break;case 2:o(e,t);break;case 3:s(e,t);break;default:f.haseLastPage=!0,n(e,t)}};var b=[];return m.changeBottomType=function(t,n,i,a){if("eqFree"===t)c(n),m.app.lastPage();else if("eqLink"===t){if(f.lastPageNum=null,f.haseLastPage&&(g(),f.lastPage=null),m.app.lastPage(!!f.activePage),2===a){var s=[];$.extend(!0,s,m._pages);var o=s[s.length-1];return o.elements||(o.elements=[]),r(o,s),void d(m._pages.length,o)}if(!i||!i.id)return;var o={};if($.extend(!0,o,m._pages[m._pages.length-1]),v&&h===i.id)return o.elements||(o.elements=[]),void p(v,o,i,m._pages[0].sceneId);h=i.id,e.getSelfLastPage(i.id).then(function(e){e.data.success&&($.extend(!0,v,e.data.obj.elements),o.elements||(o.elements=[]),p(e.data.obj.elements,o,i,m._pages[0].sceneId))})}else f.lastPageNum=null,f.haseLastPage?(g(),f.lastPage=null):d(m._pages.length,m._pages[m._pages.length-1]),m.app.lastPage()},m.removeActivePage=function(){m.app.removeLastPage(f.haseLastPage),m.app.changeAppPage(),m.app.lastPage(),f.activePageNum=null},m.playVideo=function(e){var t={bgAudio:e};e||(t.bgAudio={url:""}),eqShow.playVideo(t),e||$("#audio_btn").hide()},m.changeScrollMode=function(e){m.app.changeScrollMode(e),0===e||1===e||2===e||6===e||7===e||8===e||11===e||12===e||13===e||14===e?($(".phone-view .u-arrow-right").hide(),$(".phone-view .u-arrow-bottom").show()):3===e||4===e||5===e||9===e||10===e?($(".phone-view .u-arrow-bottom").hide(),$(".phone-view .u-arrow-right").show()):($(".phone-view .u-arrow-bottom").hide(),$(".phone-view .u-arrow-right").hide())},m.changeSceneName=function(e){f.sceneName=e},m.changeSceneCover=function(e){f.sceneCover=e},m.replaceActivePage=function(t){e.getActivityPage(t).then(function(e){var t,n=[];f.haseLastPage?($.extend(!0,n,m._pages),f.lastPage&&n.push(f.lastPage),n.push(e.data.obj),t=n.length,f.activePage?d(f.activePageNum,e.data.obj):($(".phone-view .main-page").last().prev().after('<section class="main-page"><div class="m-img" id="page'+t+'"></div></section>'),f.activePageNum=t,renderPage(eqShow,f.activePageNum,n,!0)),m.app.setPageData(n),m.app.changeAppPage()):($.extend(!0,n,m._pages),n.push(e.data.obj),t=n.length,f.activePage?d(f.activePageNum,e.data.obj,!0):($(".phone-view .main-page").last().after('<section class="main-page"><div class="m-img" id="page'+t+'"></div></section>'),f.activePageNum=t,renderPage(eqShow,f.activePageNum,n,!0)),m.app.changeAppPage(),m.app.setPageData(n)),f.activePage=e.data.obj})},m}]),angular.module("scene").directive("previewExemplar",["$timeout","pageTplService","$sce",function(e,t,n){return{restrict:"A",scope:{currentTpl:"=",createScene:"&"},templateUrl:"scene/scenePreviewExemplar.tpl.html",link:function(i,a,s){function o(){null!==i.currentTpl.tpl.avatar&&i.currentTpl.tpl.avatar!==undefined&&(i.avatar=/^http.*/.test(i.currentTpl.tpl.avatar)?i.currentTpl.tpl.avatar:PREFIX_FILE_HOST+i.currentTpl.tpl.avatar),i.reviewUrl=i.canvasUrl+"/v/"+i.currentTpl.tpl.code,i.reviewForIframe=n.trustAsResourceUrl(i.canvasUrl+"/v/"+i.currentTpl.tpl.code+"?exemplarReview=true"),t.getExemplarTags(i.currentTpl.tpl.id).then(function(e){i.tags=e.data.list,u()})}function r(){i.currentTpl.exemplarPreview=!1}function l(e,t){var n=e.target,i=t?n.value.length:0;n.setSelectionRange(0,i)}function c(e){i.openDescription=e}function d(t){i.copySuccess=!0,eqShow.copyToClipboard(t.previousElementSibling),e(function(){i.copySuccess=!1},1e3)}function p(){var e=angular.copy(i.currentTpl);delete e.exemplarPreview,i.currentTpl.exemplarPreview=!1,i.createScene(e)}function u(){var e=Math.floor(Math.random()*i.tags.length);(!i.tagId&&!i.bizType||""===i.tagId&&"0"===i.bizType)&&(i.tagId=i.tags[e].id),t.getSimilarTagExemplar(i.tagId?i.tagId:i.bizType).then(function(e){i.similarExemplars=e.data.list})}function g(e,t){var n=angular.element(e.parentElement);t?n.addClass("nameActive"):n.removeClass("nameActive")}function m(e){i.currentTpl.tpl=e,o()}angular.extend(i,i,{canvasUrl:PREFIX_SHOW_HOST,reviewUrl:null,reviewForIframe:null,bizType:s.biztype,tagId:s.tagid,fileDomain:PREFIX_FILE_HOST,tags:[],qrCodeShow:!1,exemplarNameShow:!1,openDescription:!1,copySuccess:!1,similarExemplars:[],cancel:r,inputSelected:l,showMoreDescription:c,copy:d,newScene:p,changeAnotherExemplars:u,showAnotherExemplar:m,showName:g}),o()}}}]),angular.module("scene.support",[]),angular.module("scene.support").controller("SupportCtrl",["$location","$scope","continueUrl",function(e,t,n){t.continue=function(){window.sessionStorage&&sessionStorage.setItem("checkSuport",!1),e.path(n.getUrl())},t.setLinkUrl=function(){navigator.language?navigator.language.toLowerCase():navigator.systemLanguage.toLowerCase(),t.download_Chorme="https://www.baidu.com/s?wd=Chrome",t.download_IE="https://www.baidu.com/s?wd=ie11",t.download_360fast="http://chrome.360.cn/",t.download_360="http://se.360.cn/"},t.setLinkUrl()}]).factory("continueUrl",function(){function e(e){n=e}function t(){return n}var n="";return{setUrl:e,getUrl:t}}),angular.module("active1",["services.show","services.activity","app.directives.addBanner"]),angular.module("active1").controller("Active1Ctrl",["$rootScope","$http","$scope","showService","activityService","$location","configSerService",function(e,t,n,i,a,s,o){n.pageNo=1,n.pageSize=10,n.childCat="active",n.join=function(e){s.path("/show/active/"+e)},n.attend=function(t){e.user?""+t=="1"?s.path("/main"):""+t=="3"&&s.path("/main/print/create"):n.openLogin()};var r=function(e){a.getActiveList(1,null,e,n.pageSize),n.$on("activeList",function(e,t){n.activeList=t.data.list;for(var i=Date.parse(new Date),a=0;a<n.activeList.length;a++)n.activeList[a].endDate>i?n.activeList[a].join=!0:n.activeList[a].join=!1;n.totalItems=t.data.map.count,n.currentPage=t.data.map.pageNo,n.allPageCount=t.data.map.count,n.toPage=t.data.map.pageNo})};r(n.pageNo),n.pageChanged=function(e){return 1>e||e>n.totalItems/10+1?void alert("此页超出范围"):void r(e)},n.pageCode="active",o.getFriendLinks(n.pageCode).then(function(e){n.friendLinks=e.data.list,n.friendLinks.length>16&&(n.friendLinks.length=16)})}]),angular.module("activeXq",["services.show","services.activity","app.directives.addBanner"]),angular.module("activeXq").controller("ActiveXqCtrl",["$rootScope","$http","$scope","showService","activityService","$location","$routeParams","configSerService",function(e,t,n,i,a,s,o,r){n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.PREFIX_SERVER_HOST=PREFIX_URL,n.pageNo=1,n.pageSize=16,n.activeId=o.id,n.childCat="active",n.totalItems=0,n.join=function(e){s.path("/show/active/"+e)},n.attend=function(){e.user?s.path("/main"):n.openLogin()};!function(){a.activitySceneList(n.activeId,1,n.pageNo,4).then(function(e){if(n.recSceneList=e.data.list,e.data.list)for(var t=0;t<n.recSceneList.length;t++)n.recSceneList[t].headImg?0===n.recSceneList[t].headImg.indexOf("http://")?n.recSceneList[t].headImg=n.recSceneList[t].headImg:n.recSceneList[t].headImg=PREFIX_FILE_HOST+n.recSceneList[t].headImg:n.recSceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})}(n.activeId,n.pageNo);var l=function(){a.activitySceneList(n.activeId,null,n.pageNo,n.pageSize).then(function(e){if(n.sceneList=e.data.list,n.totalItems=e.data.map.count,n.currentPage=e.data.map.pageNo,n.toPage=e.data.map.pageNo,e.data.list)for(var t=0;t<n.sceneList.length;t++)n.sceneList[t].headImg?0===n.sceneList[t].headImg.indexOf("http://")?n.sceneList[t].headImg=n.sceneList[t].headImg:n.sceneList[t].headImg=PREFIX_FILE_HOST+n.sceneList[t].headImg:n.sceneList[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};l(n.activeId,n.pageNo,n.pageSize),a.activityMes(n.activeId),n.$on("activeMes",function(e,t){n.activeMes=t.data.obj}),n.pageChanged=function(e){return n.pageNo=e,1>e||e>n.totalItems/16+1?void alert("此页超出范围"):void l(n.activeId,n.pageSize)},n.pageCode="pro_"+n.activeId,r.getFriendLinks(n.pageCode).then(function(e){n.friendLinks=e.data.list,n.friendLinks.length>16&&(n.friendLinks.length=16)})}]),angular.module("category",["services.show","services.activity","app.directives.addBanner"]),angular.module("category").controller("CategoryCtrl",["$rootScope","$http","$scope","showService","activityService","$location","$routeParams","security",function(e,t,n,i,a,s,o,r){n.recommend=1,n.pageSize=16,a.getActiveList(null,n.recommend,n.pageNo,3),n.$on("activeList",function(e,t){n.activeList=t.data.list}),n.join=function(e){s.path("/show/active/"+e)};var l=o.id;n.bizType=l;var c={};n.getCategoryTpl=function(e){n.childCat=e,c[e]?(n.childCatrgoryList=c[e],n.childCatrgoryList.length&&(d.tagId=n.categoryId=n.childCatrgoryList[0].id,n.getPageTpls(null,n.childCatrgoryList[0].id))):i.getPageTagLabel(e).then(function(t){n.childCatrgoryList=c[e]=t.data.list,n.childCatrgoryList.length&&(d.tagId=n.categoryId=n.childCatrgoryList[0].id,n.getPageTpls(null,n.childCatrgoryList[0].id))})},n.getCategoryTpl(l);var d={sceneType:"",tagId:"",orderBy:null,bizType:"",template:"",pageNo:"1",targetPage:""};n.tplNew=function(e){n.order=e,d.orderBy=e,n.getPageTpls(e,null,d.tagId,d.pageNo,n.pageSize)},n.getPageTpls=function(e,t){t&&(d.tagId=t),n.categoryId=d.tagId,i.getSceneList(d.orderBy,null,d.tagId,d.pageNo,n.pageSize),n.$on("sceneList",function(e,t){n.tpls=t.list,n.totalItems=t.map.total,n.currentPage=t.map.pageNo,n.allPageCount=t.map.count,n.toPage=t.map.pageNo;for(var i=0;i<n.tpls.length;i++)n.tpls[i].headImg?0===n.tpls[i].headImg.indexOf("http://")?n.tpls[i].headImg=n.tpls[i].headImg:n.tpls[i].headImg=PREFIX_FILE_HOST+n.tpls[i].headImg:n.tpls[i].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})},n.userTpl=function(t){s.path("/scene"),e.tplId=t},n.pageChanged=function(e){return 1>e||e>n.totalItems/16+1?void alert("此页超出范围"):(d.pageNo=e,void n.getPageTpls(d.orderBy,null,d.tagId,e,n.pageSize))}}]),angular.module("nav",["services.show","services.staticRes"]),angular.module("nav").controller("NavCtrl",["$rootScope","$http","$scope","showService","$location","$routeParams","staticResService",function(e,t,n,i,a,s,o){n.isActive="show",o.getSceneTypea().then(function(e){e.data.list&&e.data.list.length>0&&(n.sceneType=e.data.list),angular.forEach(n.sceneType,function(e){e.value===s.id&&(n.$parent.catName=e.name)})}),n.getCategoryPage=function(e){a.path("show/category/"+e)};var r=null;n.search=function(e){r=e},n.submit=function(){r?a.path("show/search/"+r):a.path("show")},n.EnterPress=function(e,t){13===(e||window.event).keyCode&&n.submit(t)}}]),angular.module("app.directives.addBanner",[]).directive("slides2",["configSerService",function(e){return{restrict:"EA",link:function(t,n,i){var a=$(n).find(".slides_container");e.getActivityBanner(i.id).then(function(e){for(var t=e.data.list,s=0;s<t.length;s++){var o=$('<a href="'+t[s].url+'" style="display:block;" target="'+t[s].target+'" data-bid="'+t[s].id+'"></a>');"index"===i.id?o.attr("data-banner","4201"):"active"===i.id?o.attr("data-banner","4202"):"st_101"===i.id?o.attr("data-banner","4203"):"st_102"===i.id?o.attr("data-banner","4204"):"st_103"===i.id?o.attr("data-banner","4205"):"st_104"===i.id?o.attr("data-banner","4206"):"st_105"===i.id?o.attr("data-banner","4207"):"st_106"===i.id&&o.attr("data-banner","4208"),o.append('<img src="'+t[s].path+'" width="'+i.width+'" height="'+i.height+'" alt="'+t[s].title+'" title="'+t[s].title+'" > '),a.append(o)}$(n).slides({preload:!0,play:5e3,pause:2500,hoverPause:!0})})}}}]),angular.module("show",["services.show","services.activity","app.directives.addBanner"]),angular.module("show").controller("ShowCtrl",["$rootScope","$http","$scope","showService","activityService","$location","configSerService","security",function(e,t,n,i,a,s,o,r){n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.PREFIX_SERVER_HOST=PREFIX_URL,n.PREFIX_SHOW_HOST=PREFIX_SHOW_HOST,n.recommend=1,n.childCat="index",n.category="h5",a.getActiveList(null,n.recommend,n.pageNo,3),n.$on("activeList",function(e,t){n.activeList=t.data.list}),n.join=function(e){s.path("/show/active/"+e)},n.pageCode="index",o.getFriendLinks(n.pageCode).then(function(e){n.friendLinks=e.data.list,n.friendLinks.length>16&&(n.friendLinks.length=16)})}]),angular.module("commonRecommend",["services.show"]),angular.module("commonRecommend").controller("CommonRecommendCtrl",["$rootScope","$http","$scope","showService","security","$location","ModalService",function(e,t,n,i,a,s){var o=n.recommendType,r="";n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.PREFIX_SERVER_HOST=PREFIX_URL,n.PREFIX_SHOW_HOST=PREFIX_SHOW_HOST,n.pageNo=1,n.pageSize=16,n.childCat="recommend",n.order=null;var l=function(e){i.getSceneList(n.order,1,null,e,n.pageSize),n.$on("sceneList",function(e,t){n.recommendList=t.list,n.totalItems=t.map.total,n.currentPage=t.map.pageNo,n.allPageCount=t.map.total,n.toPage=t.map.pageNo;for(var i=0;i<n.recommendList.length;i++)n.recommendList[i].headImg?0===n.recommendList[i].headImg.indexOf("http://")?n.recommendList[i].headImg=n.recommendList[i].headImg:n.recommendList[i].headImg=PREFIX_FILE_HOST+n.recommendList[i].headImg:n.recommendList[i].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};"print"===n.recommendType?i.getPrintRecommend(n.pageNo,n.pageSize):"h5"===n.recommendType&&l(n.pageNo),n.tplNew=function(e){n.order=e,l(e,n.pageNo,n.pageSize)},n.userTpl=function(t){"h5"===o?(s.path("/scene"),e.tplId=t):"print"===o&&(window.sessionStorage.setItem("copyPrintId",t.id),window.open("print/copyTpl","_blank"),window.sessionStorage.removeItem("copyPrintId"))},n.recommend=function(e){if(o=n.recommendType=e,n.pageNo=1,"h5"===e){if("h5"===r)return;n.changeLocation&&s.path("show/recommend/h5",!1),l(n.pageNo),r="h5"}else if("print"===e){if("print"===r)return;n.changeLocation&&s.path("show/recommend/print",!1),i.getPrintRecommend(n.pageNo,n.pageSize),r="print"}},n.$on("printRecommend.print",function(e,t){n.recommendList=t.list,n.totalItems=t.map.total,n.currentPage=t.map.pageNo,n.allPageCount=t.map.total,n.toPage=t.map.pageNo;for(var i=0;i<n.recommendList.length;i++)n.recommendList[i].headImg?0===n.recommendList[i].headImg.indexOf("http://")?n.recommendList[i].headImg=n.recommendList[i].headImg:n.recommendList[i].headImg=PREFIX_FILE_HOST+n.recommendList[i].headImg:n.recommendList[i].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"}),n.preview=function(e){if("h5"===o)window.open(PREFIX_SHOW_HOST+"/v/"+e,"_blank");else if("print"===o){var t=$("#preview_wrap"),n=$("#pc_preview");n.attr("src",PREFIX_HOST+"/print/share.html?code="+e),t.show(),t.find("span").click(function(){t.hide(),n.attr("src",""),$(this).unbind("click")})}},n.pageChanged=function(e){return 1>e||e>n.totalItems/16+1?void alert("此页超出范围"):void("h5"===o?l(e):"print"===o&&i.getPrintRecommend(e,n.pageSize))}}]).directive("eqdCommonRecommend",[function(){function e(e,t,n){}return{restrict:"E",templateUrl:"show/recommend/commonRecommend.tpl.html",controller:"CommonRecommendCtrl",scope:{filter:"=",recommendType:"@category",changeLocation:"="},link:e}}]),angular.module("recommend",["commonRecommend"]).controller("RecommendCtrl",["$scope","$routeParams",function(e,t){e.category=t.category||"h5"}]),angular.module("search",["services.show","services.activity","app.directives.addBanner"]),angular.module("search").controller("SearchCtrl",["$rootScope","$http","$scope","showService","activityService","$location","$routeParams","security",function(e,t,n,i,a,s,o,r){var l={name:"",pageNo:1,pageSize:16};n.name=o.name,n.pageNo=1,n.pageSize=16,n.val=n.name,l.name=n.name,n.EnterPress=function(e,t){13===(e||window.event).keyCode&&n.submit(t)},n.submit=function(e){n.name=e,e?s.path("show/search/"+n.name):s.path("show")};var c=function(e){i.search(e),n.$on("searchList",function(e,t){n.searchList=t.list,n.totalItems=t.map.total,n.currentPage=t.map.pageNo,n.toPage=t.map.pageNo;for(var i=0;i<n.searchList.length;i++)n.searchList[i].headImg?0===n.searchList[i].headImg.indexOf("http://")?n.searchList[i].headImg=n.searchList[i].headImg:n.searchList[i].headImg=PREFIX_FILE_HOST+n.searchList[i].headImg:n.searchList[i].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})};c(l),n.pageChanged=function(e){return 1>e||e>n.totalItems/16+1?void alert("此页超出范围"):(l.pageNo=e,void c(l))},n.userTpl=function(t){s.path("/scene"),e.tplId=t}}]),angular.module("services.activity",[]).factory("activityService",["$rootScope","$http",function(e,t){var n={};return n.getActiveList=function(n,i,a,s){var o=PREFIX_S2_URL+"index.php?c=eqs&a=activity_info";return n&&(o+=/\?/.test(o)?"&":"?",o+="joinNum="+n),i&&(o+=/\?/.test(o)?"&":"?",o+="recommend="+i),a&&(o+=/\?/.test(o)?"&":"?",o+="pageNo="+a),s&&(o+=/\?/.test(o)?"&":"?",o+="pageSize="+s),t({method:"GET",url:o}).then(function(t){if(t.data.success){var n=t;e.$broadcast("activeList",n)}})},n.activitySceneList=function(e,n,i,a){var s=PREFIX_S2_URL+"index.php?c=eqs&a=activity_info/scene?promId="+e;return n&&(s+=/\?/.test(s)?"&":"?",s+="recommend="+n),i&&(s+=/\?/.test(s)?"&":"?",s+="pageNo="+i),a&&(s+=/\?/.test(s)?"&":"?",s+="pageSize="+a),t({method:"GET",url:s})},n.activityMes=function(n){var i=PREFIX_S2_URL+"index.php?c=eqs&a=activity_info/info?id="+n;return t({method:"GET",url:i}).then(function(t){if(t.data.success){var n=t;e.$broadcast("activeMes",n)}})},n}]),angular.module("services.configSer",[]).factory("configSerService",["$http",function(e){return{getFriendLinks:function(t){var n=PREFIX_S2_URL+"index.php?c=ad&a=friendlinks?pageCode="+t;return e({method:"GET",url:n})},getActivityBanner:function(t,n){var i=PREFIX_S2_URL+"index.php?c=ad&a=banners&pageCode="+t;return n&&(i+="&userType="+n),new Date,e({method:"GET",url:i})}}}]),angular.module("services.show",[]).factory("showService",["$rootScope","$q","$http",function(e,t,n){var i={};return i.getPageTagLabel=function(e){var t="index.php?c=upfile&a=systag&type=2";return null!==e&&(t+=(/\?/.test(t)?"&":"?")+"bizType="+e),new Date,n({method:"GET",url:PREFIX_S2_URL+t})},i.getSceneList=function(t,i,a,s,o){var r=PREFIX_S2_URL+"index.php?c=eqs&a=promotion";return t&&(r+=/\?/.test(r)?"&":"?",r+="template="+t),i&&(r+=/\?/.test(r)?"&":"?",r+="recommend="+i),a&&(r+=/\?/.test(r)?"&":"?",r+="tagId="+a),s&&(r+=/\?/.test(r)?"&":"?",r+="pageNo="+s),o&&(r+=/\?/.test(r)?"&":"?",r+="pageSize="+o),n({method:"GET",url:r}).then(function(t){if(t.data.success){var n=t.data;e.$broadcast("sceneList",n)}})},i.getPrintRecommend=function(i,a){var s=PREFIX_S2_URL+"eqs/show/print/list";return i&&(s+=/\?/.test(s)?"&":"?",s+="pageNo="+i),a&&(s+=/\?/.test(s)?"&":"?",s+="pageSize="+a),n({method:"GET",url:s}).then(function(t){var n=t.data;return e.$broadcast("printRecommend.print",n),n}).catch(function(e){t.reject(e)})},i.search=function(t){return n({method:"POST",url:PREFIX_S2_URL+"index.php?c=eqs&a=search",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)}).then(function(t){if(t.data.success){var n=t.data;e.$broadcast("searchList",n)}})},i}]),angular.module("services.visitor",[]).factory("visitorService",["$rootScope","$http",function(e,t){var n={};return n.getRecommendVisitor=function(){return t({method:"GET",url:PREFIX_S2_URL+"showker/recommend"})},n.getVisitorMsg=function(e){var n="showker/detail?userId="+e;return t({method:"GET",url:PREFIX_S2_URL+n})},n.getVisitorList=function(e,n,i,a,s){var o="showker/list";return e&&(o+=/\?/.test(o)?"&":"?",o+="addr="+e),n&&(o+=/\?/.test(o)?"&":"?",o+="pay="+n),i&&(o+=/\?/.test(o)?"&":"?",o+="good="+i),a&&(o+=/\?/.test(o)?"&":"?",o+="pageNo="+a),s&&(o+=/\?/.test(o)?"&":"?",o+="pageSize="+s),t({method:"GET",url:PREFIX_S2_URL+o})},n.getVisitorMesList=function(e,n,i){var a="showker/represent?userId="+e;return n&&(a+=/\?/.test(a)?"&":"?",a+="pageNo="+n),i&&(a+=/\?/.test(a)?"&":"?",a+="pageSize="+i),t({method:"GET",url:PREFIX_S2_URL+a})},n}]),angular.module("visitorXq",["services.visitor"]),angular.module("visitorXq").controller("VisitorXqCtrl",["$rootScope","$http","$scope","showService","$location","$routeParams","visitorService",function(e,t,n,i,a,s,o){n.childCat="visitor",n.pageNo=1,n.pageSize=16,n.serverTag=[],n.cateTag=[],n.payTag=[],n.userId=s.id,n.qqAction="QQ号：",n.getUserDetail=function(){o.getVisitorMsg(n.userId).then(function(e){n.visitorMsg=e.data.obj,null===n.visitorMsg.tel&&n.visitorMsg.phone?n.visitorMsg.tel=n.visitorMsg.phone:n.visitorMsg.tel&&n.visitorMsg.phone&&(n.visitorMsg.tel=n.visitorMsg.phone);var t=e.data.obj.tagList;if(t)for(var i=0;i<t.length;i++)"province"===t[i].type?n.serverTag.push({tagId:t[i].tagId,name:t[i].name}):"company_industry"===t[i].type?n.cateTag.push({tagId:t[i].tagId,name:t[i].name}):"payType"===t[i].type&&n.payTag.push({tagId:t[i].tagId,name:t[i].name});n.visitorMsg.headImg&&(0===n.visitorMsg.headImg.indexOf("http://")?n.visitorMsg.headImg=n.visitorMsg.headImg:n.visitorMsg.headImg=PREFIX_FILE_HOST+n.visitorMsg.headImg),null===n.visitorMsg.qq&&(n.qqAction="",$(".qq").addClass("hui"),n.visitorMsg.qq="该秀客没有留下QQ号"),null===n.visitorMsg.tel&&($(".phone").addClass("hui"),n.visitorMsg.tel="该秀客没有留下电话号码"),null===n.visitorMsg.wechat&&($(".weixin").addClass("hui"),n.visitorMsg.wechat="该秀客没有留下微信号")})},n.getUserDetail(),n.totalItems=0,n.currentPage=1,n.getUserWorks=function(){o.getVisitorMesList(n.userId,n.pageNo,n.pageSize).then(function(e){n.visitorWorks=e.data.list,n.totalItems=e.data.map.count,n.toPage=e.data.map.pageNo;for(var t=0;t<n.visitorWorks.length;t++)n.visitorWorks[t].headImg?0===n.visitorWorks[t].headImg.indexOf("http://")?n.visitorWorks[t].headImg=n.visitorWorks[t].headImg:n.visitorWorks[t].headImg=PREFIX_FILE_HOST+n.visitorWorks[t].headImg:n.visitorWorks[t].headImg=CLIENT_CDN+"assets/images/xiaotouxiang.png"})},n.getUserWorks(),n.pageChanged=function(e){return n.pageNo=e,1>e||e>n.totalItems/16+1?void alert("此页超出范围"):void n.getUserWorks(n.userId,e,n.pageSize)}}]),angular.module("visitor",["services.visitor"]),angular.module("visitor").controller("VisitorCtrl",["$rootScope","$http","$scope","showService","$location","usercenterService","visitorService",function(e,t,n,i,a,s,o){n.childCat="visitor",n.visitorId="12",n.pageNo=1,n.pageSize=12,n.visitorXq=function(e){a.path("/show/visitor/"+e)};var r=function(e){s.getAPPlyMessage(e).then(function(t){"province"===e?n.serverLabel=t.data.list:"company_industry"===e?n.cateLabel=t.data.list:"payType"===e&&(n.payLabel=t.data.list)})};r("province"),r("company_industry"),r("payType"),n.getLimitedServeRegion=function(e){return n.serverLabel.indexOf(e)<8},n.getOtherServeRegion=function(e){return n.serverLabel.indexOf(e)>=8&&(n.moreArea=!0),n.serverLabel.indexOf(e)>=8},n.getLimitedCateRegion=function(e){return n.cateLabel.indexOf(e)<11},n.getOtherCateRegion=function(e){return n.cateLabel.indexOf(e)>=11&&(n.moreLabel=!0),n.cateLabel.indexOf(e)>=11},o.getRecommendVisitor().then(function(e){if(n.recommendVisitor=e.data.obj,n.recommendVisitor.represent1){var t=n.recommendVisitor.represent1,i=t.substring(0,t.indexOf("_")),a=t.substring(t.indexOf("_")+1,t.length);n.work1Code=i,n.work1Name=a}if(n.recommendVisitor.represent2){var s=n.recommendVisitor.represent2,o=s.substring(0,s.indexOf("_")),r=s.substring(s.indexOf("_")+1,s.length);n.work2Code=o,n.work2Name=r}if(n.recommendVisitor.represent3){var l=n.recommendVisitor.represent3,c=l.substring(0,l.indexOf("_")),d=l.substring(l.indexOf("_")+1,l.length);n.work3Code=c,n.work3Name=d}n.recommendVisitor.headImg&&(0===n.recommendVisitor.headImg.indexOf("http://")?n.recommendVisitor.headImg=n.recommendVisitor.headImg:n.recommendVisitor.headImg=PREFIX_FILE_HOST+n.recommendVisitor.headImg)});var l={pay:null,addr:null,good:null};n.serverAll="all",n.cateAll="all",n.payAll="all",n.serverWu=function(e,t){n[t]="all","province"===e?(l.addr=null,n.currentServer=null):"company_industry"===e?(l.good=null,n.currentCate=null):"payType"===e&&(l.pay=null,n.currentPay=null),c(l.addr,l.pay,l.good,n.pageNo,n.pageSize)},n.subServer=function(e){n.currentServer=e,n.serverAll=null,l.addr=e.id,c(l.addr,l.pay,l.good,n.pageNo,n.pageSize)},n.subLabel=function(e){n.currentCate=e,n.cateAll=null,l.good=e.id,c(l.addr,l.pay,l.good,n.pageNo,n.pageSize)},n.subPay=function(e){n.currentPay=e,n.payAll=null,l.pay=e.id,c(l.addr,l.pay,l.good,n.pageNo,n.pageSize)},n.totalItems=0;var c=function(){o.getVisitorList(l.addr,l.pay,l.good,n.pageNo,n.pageSize).then(function(e){n.visitorList=e.data.list,n.totalItems=e.data.map.count,n.currentPage=e.data.map.pageNo,n.toPage=e.data.map.pageNo;for(var t=0;t<n.visitorList.length;t++){if(n.visitorList[t].represent1){var i=n.visitorList[t].represent1,a=i.substring(0,i.indexOf("_")),s=i.substring(i.indexOf("_")+1,i.length);n.visitorList[t].represent1Code=a,n.visitorList[t].represent1Name=s}if(n.visitorList[t].represent2){var o=n.visitorList[t].represent2,r=o.substring(0,o.indexOf("_")),l=o.substring(o.indexOf("_")+1,o.length);n.visitorList[t].represent2Code=r,n.visitorList[t].represent2Name=l}if(n.visitorList[t].represent3){var c=n.visitorList[t].represent3,d=c.substring(0,c.indexOf("_")),p=c.substring(c.indexOf("_")+1,c.length);n.visitorList[t].represent3Code=d,n.visitorList[t].represent3Name=p}n.visitorList[t].headImg&&(0===n.visitorList[t].headImg.indexOf("http://")?n.visitorList[t].headImg=n.visitorList[t].headImg:n.visitorList[t].headImg=PREFIX_FILE_HOST+n.visitorList[t].headImg)}})};c(),n.pageChanged=function(e){return n.pageNo=e,1>e||e>n.totalItems/12+1?void alert("此页超出范围"):void c(l,e,n.pageSize)}}]),angular.module("app.upgrade",["service.upgradeAccount","angularEffects","services.usercenter"]),angular.module("app.upgrade").controller("upgradeController",["$scope","$modal","$location","security","usercenterService","upgradeAccountService","ModalService","$rootScope","$routeParams",function(e,t,n,i,a,s,o,r,l){e.versionType=l.versionType;var c=["basis","standard","advanced"],d=-1===c.indexOf(e.versionType)?0:c.indexOf(e.versionType);e.upgradeFlag=!0,e.title="企业版本升级","/xdBuy"===n.path()&&(e.upgradeFlag=!1,e.XDCount=500,e.XDPayMoney=500,e.buyBtnValue="立即购买",e.title="购买秀点");var p=function(t){e.currentUser=i.currentUser,e.nickname=i.currentUser.nick,e.username=i.currentUser.loginName,e.loginFlag=!0,e.upgradeFlag&&s.buyBtnValueFunc(e)},u=function(){e.nickname="您当前处于未登录状态，赶快去登录吧！",e.buyBtnValue="立即购买",e.username="",e.loginFlag=!1,e.disBuyTip="",e.disBuyFlag=!1};e.showChangVersionFlag=!1,e.versionList=[{version:"企业基础版",money:"3000",memberType:7},{version:"企业标准版",money:"6800",memberType:8},{version:"企业高级版",money:"15600",memberType:9}],e.infoList={7:{title:"企业基础版版本优势",infoDetail:[{title:"海量企业专属样例",image:"advantage",info:"分类更全面<br />定位更准确<br />设计更专业<br />效果更炫酷"},{title:"价值4100元基础特权",image:"4100",info:"赠送10个企业子账号<br />赠送10次去Logo底标（之后8折）<br />赠送100次场景保障服务<br />免费场景域名绑定"},{title:"企业专属CDN加速",image:"CDN",info:"CDN加速，让场景浏览更畅快"},{title:"精准访问数据分析",image:"visit",info:"获取访客来源数据，指导精准锁定投放渠道<br />实时监控访客数量，随时了解H5页面的曝光率和<br />点击量，锁定最佳投放时间"}]},8:{title:"企业标准版版本优势",infoDetail:[{title:"海量企业专属样例",image:"advantage",info:"分类更全面<br />定位更准确<br />设计更专业<br />效果更炫酷"},{title:"价值12700元标准特权",image:"12700",info:"赠送50个子账号<br />赠送50次去Logo底标（之后8折）<br />赠送200次场景保障服务<br />免费场景域名绑定"},{title:"企业专属CDN加速",image:"CDN",info:"CDN加速，让场景浏览更畅快"},{title:"深度访问及分享数据分析",image:"visit",info:"访问深度分析，掌控用户浏览习惯，直观H5页面引爆点<br />访客画像分析，协助优化营销设计，并制定推广策略<br />分享去向分析，有效评估用户体验，监控转发习惯<br />"}]},9:{title:"企业高级版版本优势",infoDetail:[{title:"海量企业专属样例",image:"advantage",info:"分类更全面<br />定位更准确<br />设计更专业<br />效果更炫酷"},{title:"价值39000元高级特权",image:"39000",info:"赠送100个企业子账号<br />赠送200次去Logo底标（之后8折）<br />赠送300次场景保障服务<br />免费场景域名绑定"},{title:"企业专属CDN加速",image:"CDN",info:"CDN加速，让场景浏览更畅快"},{title:"高级访问及分享数据分析",image:"visit",info:"传播层级分析，让传播路径和传播深度一目了然<br />访客行为分析，支持深度的用户洞察，有效触达目标群体"}]}},function(t){e.version=t.version,e.payMoney=t.money,e.memberType=t.memberType}(e.versionList[d]),i.currentUser?p(i.currentUser):u(),e.changeAccount=function(){t.open({windowClass:"console accountDlg",templateUrl:"upgrade/accountDlg.tpl.html",controller:"accountDlgCtrl"})},e.toLogin=function(){i.showLogin(n.path())},e.buy=function(){return e.loginFlag?e.upgradeFlag?1===e.currentUser.type?void t.open({windowClass:"console updateDlg",templateUrl:"upgrade/updateDlg.tpl.html",controller:"updateDlgCtrl"}):void s.upgradeAccountFunc(e.memberType):(e.userXd=0,e.getUserXd=function(){a.getUserXd().then(function(t){e.userXd=t.data.obj||0})},void t.open({windowClass:"console",templateUrl:"?c=pay",controller:"BuyXdController",resolve:{getUserXd:function(){return function(){e.getUserXd(),r.$broadcast("buyXd")}}}})):void i.showLogin(n.path())},e.changeVersion=function(){e.showChangVersionFlag=!e.showChangVersionFlag},e.selectVersion=function(t,i){e.version=i.version,e.payMoney=i.money,e.memberType=i.memberType,s.buyBtnValueFunc(e),e.changeVersion(),n.path("/upgrade/"+c[i.memberType-7])},e.$on("toAppUpgrade",function(e,t){p()}),e.$on("toAppUpgradeLogout",function(){u()})}]).controller("accountDlgCtrl",["$scope","$location","security",function(e,t,n){e.cancel=function(){e.$dismiss()},e.confirm=function(){e.$close(),n.logout(null,!0)}}]).controller("updateDlgCtrl",["$scope","$location","$modal","security","upgradeAccountService",function(e,t,n,i,a){e.cancel=function(){e.$dismiss()},e.confirm=function(){e.$close(),a.upgradeAccountFunc()}}]).controller("buyRefuseDlgCtrl",["$scope","$location","$modal","security","upgradeAccountService","usercenterService","$rootScope","type",function(e,t,n,i,a,s,o,r){e.memberType=r,i.currentUser.nick&&i.currentUser.loginName?e.infoName=i.currentUser.nick+"("+i.currentUser.loginName+")":e.infoName=i.currentUser.nick||i.currentUser.loginName,e.memberType&&a.buyBtnValueFunc(e),e.cancel=function(){e.$dismiss()},e.changeAccount=function(){e.$close(),i.logout(null,!0)},e.continueBuy=function(){if(e.memberType)s.upgradeVersionService(e,e.memberType,!0);else{var t=function(){return function(){s.getUserXd().then(function(t){e.userXd=t.data.obj||0}),o.$broadcast("buyXd")}};s.xdBuyService(e,t,!0)}}}]),angular.module("usercenter.branch",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.branch").controller("BranchCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","branch","diaTitle","i18nNotifications","validateService",function(e,t,n,i,a,s,o,r,l,c,d,p,u){t.originData=t.branch=angular.copy(c),t.diaTitle=angular.copy(d),t.dept={},t.depts=[],t.resetDefalt=!1,c?t.resetDefalt=!0:(t.resetDefalt=!1,setTimeout(function(){$("button").css("background-color","#ccc")},0),t.branch={}),t.openResetModal=function(e){o.open({windowClass:"console six-contain",templateUrl:"usercenter/console/resetbranchpass.tpl.html",controller:"ResetBranchPassCtrl",resolve:{branch:function(){return e}}}).result.then(function(){t.resetDefalt=!1,p.pushForCurrentRoute("branch.reset.success","notify.success")})},t.getDepts=function(){a.getDepts().then(function(e){if(t.depts=e.data.list,t.branch.deptName||t.branch.deptId)for(var n=0;n<t.depts.length;n++)if(t.depts[n].id===t.branch.deptId)return void(t.branch.dept=t.depts[n])},function(){})},t.getDepts(),t.authError="",t.checkDeptFormat=function(e){var n=function(e){return t.deptFormatError=e,$(".dept-name").focus(),deptF={},!1},i=t.depts.some(function(e,n,i){return e.name===t.dept.name});return e.name?i?n("部门名称重复，请重新输入！"):countCharacters(e.name)>30?($(".dept-name").addClass("error"),$(".dept-name").change(function(){$(this).removeClass("error")}),t.deptFormatError="部门名称不能超过30个字符！",!1):(t.deptFormatError="",!0):n("请输入部门名称！")},t.addDept=function(){t.checkDeptFormat(t.dept)&&a.addDept(t.dept).then(function(e){e.data.success&&(t.showAddSec=!1,t.depts.unshift({id:e.data.obj,name:t.dept.name}),p.pushForCurrentRoute("dept.create.success","notify.success"),t.dept={})},function(){t.authError="服务器异常"})},t.scenePermi=[{name:"新建场景",permit:1201,check:!0},{name:"复制场景",permit:1203,check:!0},{name:"删除场景",permit:1204,check:!0},{name:"赠予场景",permit:1205,check:!0}],t.spreadPermi=[{name:"分享推广",permit:1301,check:!0},{name:"效果统计",permit:1302,check:!0},{name:"数据查看",permit:1303,check:!0},{name:"数据下载",permit:1304,check:!0},{name:"数据删除",permit:1305,check:!0}],t.customerPermi=[{name:"查看客户",permit:1101,check:!0},{name:"添加客户",permit:1102,check:!0},{name:"删除客户",permit:2,check:!0},{name:"编辑客户",permit:1,check:!0},{name:"下载客户",permit:3,check:!0}],t.userPermi=[{name:"购买秀点",permit:1401,check:!0},{name:"赠送秀点",permit:1402,check:!0},{name:"开具发票",permit:1403,check:!0},{name:"绑定账号",permit:1404,check:!0},{name:"查看部门内其他账号内容",permit:1405,check:!0},{name:"编辑基本信息",permit:1406,check:!0}],t.sceneAllPro={check:!0},t.spreadAllPro={check:!0},t.customerAllPro={check:!0},t.userAllPro={check:!0},t.productSelect=function(e,n){""+e.permit=="1203"&&e.check&&(t.scenePermi[0].check=!0),e.check||("1201"===e.permit&&(t.scenePermi[1].check=!1),t[n+"AllPro"].check=!1)},t.produceAll=function(e,n){for(var i=t[n+"Permi"],a=0;a<i.length;a++)i[a].check=e.check};var g,m=[];if(m=t.scenePermi.concat(t.spreadPermi).concat(t.customerPermi).concat(t.userPermi),c)if(t.branch.extPermi){g=t.branch.extPermi.split(",");for(var h=0;h<m.length;h++)m[h].check=!1,$.each(g,function(e,t){""+t==""+m[h].permit&&(m[h].check=!0)});$.each(t.scenePermi,function(e,n){return n.check?void 0:(t.sceneAllPro.check=!1,!1)}),$.each(t.spreadPermi,function(e,n){return n.check?void 0:(t.spreadAllPro.check=!1,!1)}),$.each(t.customerPermi,function(e,n){return n.check?void 0:(t.customerAllPro.check=!1,!1)}),$.each(t.userPermi,function(e,n){return n.check?void 0:(t.userAllPro.check=!1,!1)})}else t.sceneAllPro.check=!1,t.spreadAllPro.check=!1,t.customerAllPro.check=!1,t.userAllPro.check=!1,$.each(m,function(e,t){t.check=!1});t.checkBranchName=function(){var e=u.checkAccountName(t.branch.loginName);return t.branchNameError=e,!e},t.checkPassword=function(){var e=u.checkPassword(t.branch.password);return t.passFormatError=e,!e},t.checkNameFormat=function(){var e=u.checkName(t.branch.name);return t.nameFormatErr=e,!e},t.confirm=function(){if(t.checkBranchName()&&t.checkNameFormat()){var e={};t.branch.dept&&(t.branch.deptName=t.branch.dept.name,t.branch.dept.id&&(e.deptId=t.branch.deptId=t.branch.dept.id));var n=[];$.each(m,function(e,t){t.check&&n.push(t.permit)}),t.branch.extPermi=n.join(","),c?($.extend(e,{id:t.branch.id,name:t.branch.name,extPermi:t.branch.extPermi}),a.updateBranch(e).then(function(e){e.data.success&&(t.$close(t.branch),p.pushForCurrentRoute("branch.update.success","notify.success"))},function(){t.serverError="服务器异常！"})):($.extend(e,{loginName:t.branch.loginName,name:t.branch.name,extPermi:t.branch.extPermi}),a.createBranch(e).then(function(e){e.data.success?(t.branch.id=e.data.obj.id,p.pushForCurrentRoute("branch.create.success","notify.success"),t.$close(t.branch)):1006===e.data.code?r.openMsgDialog({msg:"该账号已存在，请重新录入！",btn:"返回"}):t.$dismiss(e.data)},function(){t.serverError="服务器异常"}))}},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.checkMobil",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.checkMobil").controller("CheckMobileCtrl",["$rootScope","$scope","$window","usercenterService","$modal","ModalService","$location","$timeout","userinfo","i18nNotifications",function(e,t,n,i,a,s,o,r,l,c){function d(){0===p?(t.isCodeAccessiable=!1,t.codeTip="获取验证码",p=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+p+")",r(function(){p--,d()},1e3))}switch(config.product="popup",t.title=l.title,t.userinfo=l,t.userinfo.code="",t.title){case"绑定手机":t.dec="绑定手机，确保账号安全";break;case"手机验证":t.dec="正确验证手机号";break;case"修改手机号":t.dec="修改为常用手机号，保证账号安全"}t.checkMobile=function(){return/^1\d{10}$/.test(t.userinfo.phone)?(t.mobileError="",!0):($(".mobile").focus(),t.mobileError="请填写正确的手机号",!1)},t.checkCode=function(){return t.userinfo.code?(t.codeError="",!0):($(".code").focus(),t.codeError="验证码不能为空",!1)},t.showImageCode=function(){challenge&&validate&&seccode&&t.getCode()},t.getCode=function(){if(t.userinfo.phone){t.mobileError="";var e={phone:t.userinfo.phone,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};i.relMobileCode(e).then(function(e){challenge="",validate="",seccode="",e.data.success?d():t.codeError=e.data.msg})}else t.mobileError="请先输入手机号码才能验证！",$(".mobile").focus()};var p=60;t.relAccount=function(){t.checkMobile()&&t.checkCode()&&(t.mobileError="",t.codeError="",i.relMobile(t.userinfo.phone,t.userinfo.password,t.userinfo.code).then(function(e){e.data.success?s.openMsgDialog({msg:e.data.msg},function(){t.$close(t.userinfo.phone)}):t.relErr=e.data.msg}))},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.companyinfo",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.companyinfo").controller("companyInfoCtrl",["$scope","$modal","userinfo","usercenterService","i18nNotifications",function(e,t,n,i,a){e.companyUserInfo={},e.companyUserInfo.nick=n.nick,e.companyUserInfo.name=n.name,e.type=n.type,2===n.type?e.contactName="企业名称":5===n.type?e.contactName="组织名称":e.contactName="昵称";var s=function(){i.getCompanyInfo().then(function(t){e.companyUserInfo=t.data.obj,!e.companyUserInfo.name&&e.companyUserInfo.nick&&(e.companyUserInfo.name=e.companyUserInfo.nick)})};e.checkEmail=function(t){var n=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return t.email&&!n.test(t.email)?(e.authError="请正确填写邮箱",!1):(e.authError="",!0)},e.checkAdress=function(t){return countCharacters(t.address)>50?(e.authError="联系地址不能超过50个字符",!1):(e.authError="",!0)};var o=function(t){return t.name?(e.authError="",!0):(e.authError="请填写昵称",!1)};2===e.type&&(s(),e.title="企业会员基本信息"),1===e.type&&(e.title="个人用户基本信息"),3===e.type&&(e.title="高级用户基本信息"),21===e.type&&(e.title="子账号基本信息"),5===e.type&&(s(),e.title="公共账号基本信息"),e.saveUserInfo=function(t){t.id=n.id,t.nick=t.name,i.saveUserInfo(t).then(function(n){n.data.success&&(e.$close(t),a.pushForCurrentRoute("save.success","notify.success"))})},e.saveCompanyInfo=function(t){return!!(e.checkEmail(t)&&e.checkAdress(t)&&o(t))&&(t.id=n.id,t.nick=t.name,void(5===e.type?i.savePublicInfo(t).then(function(n){n.data.success?(a.pushForCurrentRoute("account.success","notify.success"),e.$close(t)):e.codeError=n.data.msg}):i.saveCompanyInfo(t,!1).then(function(n){n.data.success?(a.pushForCurrentRoute("account.success","notify.success"),e.$close(t)):e.codeError=n.data.msg})))},e.cancel=function(){e.$close()},e.invoice=function(){t.open({windowClass:"six-contain",templateUrl:"usercenter/console/invoice.tpl.html",controller:"InvoiceCtrl",scope:e,resolve:{userinfo:function(){return{}}}})}}]),angular.module("invitation",["app.directives.copyButton"]),angular.module("invitation").controller("InvitationCtrl",["security","$scope","usercenterService","$timeout","ModalService","i18nNotifications",function(e,t,n,i,a,s){t.tabid="email",t.showUrl=PREFIX_HOST+"/#/home/register?u="+e.currentUser.id,t.url="我做的企业秀，用的是易企秀，免费好用，你试试吧：\r\n"+PREFIX_HOST+"/#/home/register?u="+e.currentUser.id,t.sendEmail=function(e){!t.emailFormatErr&&e&&n.sendEmail({email:e}).then(function(e){e.data.success?s.pushForCurrentRoute("invitation.sendemail.success","notify.success"):s.pushForCurrentRoute("invitation.sendemail.error","notify.warning")})},t.checkEmailFormat=function(e){/^([a-zA-Z0-9]+[_|\_|\.|-]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[\.|-]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)?t.emailFormatErr="":t.emailFormatErr="邮件格式不正确"}}]),angular.module("usercenter.invoicelist",[]).controller("GetInvoiceListCtrl",["$scope","usercenterService","$modal","ModalService","$location",function(e,t,n,i,a){e.pageNo=1,e.pageSize=5,e.obj={};var s=[],o=function(e,n){t.getInvoiceList(e,n)};o(1,5),e.$on("get.invoice.list",function(t,n){e.invoiceList=n.list||[];for(var i=0;i<n.list.length;i++)e.invoiceList[i].totalFee=e.invoiceList[i].totalFee/100,n.list[i].payType?1===n.list[i].payType?e.invoiceList[i].payType="支付宝支付":2===n.list[i].payType?e.invoiceList[i].payType="银联支付":3===n.list[i].payType&&(e.invoiceList[i].payType="其他"):e.invoiceList[i].payType="微信支付";e.totalItems=n.map.count,e.currentPage=e.obj.toPage=n.map.pageNo}),e.pageChanged=function(n){return 1>n||n>e.totalItems/5+1?void alert("此页超出范围"):(t.getInvoiceList(n,e.pageSize),e.selectAll.selected=!1,void e.switchSelectAll())},e.cancel=function(){e.$dismiss(),"/upgrade/"===a.path().substring(0,9)&&a.path("/usercenter/member")},e.view=!0,e.ok=function(){var t=angular.copy(s);t.length>0?n.open({windowClass:"six-contain",templateUrl:"usercenter/console/invoice.tpl.html",controller:"InvoiceCtrl",scope:e,resolve:{userinfo:function(){return{view:e.view,orderIds:t}}}}).result.then(function(t){t&&(o(1,5),e.selectAll.selected=!1,s=[])}):i.openMsgDialog({msg:"请选择需要开发票的订单列表",btn:"去选择"},function(){})},e.selectAll={selected:!1},e.switchSelectAll=function(){s=[];for(var t=0;t<e.invoiceList.length;t++)e.invoiceList[t].selected=e.selectAll.selected,e.selectAll.selected&&s.push(e.invoiceList[t].id)},e.switchSelect=function(t){t.selected?s.push(t.id):(e.selectAll.selected=!1,$.each(s,function(e,n){n===t.id&&s.splice(e,1)}))}}]),angular.module("usercenter.invoice",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.invoice").controller("InvoiceCtrl",["$scope","$rootScope","usercenterService","$modal","i18nNotifications","userinfo","ModalService",function(e,t,n,i,a,s,o){e.invoiceStatus="",e.changeType=function(t){e.invoiceStatus=t},e.editInfo={isEditable:!0},s.view&&(e.view=s.view,e.editInfo.isEditable=!1,s.orderIds=s.orderIds.join(","));var r=[];e.authError="",e.picture={},e.puPicture={},e.invoice={receiver:"",phone:"",address:""},e.reset=function(){e.editInfo.isEditable=!0},e.invoiceListPu={invoiceType:1},e.invoiceListzhuan={invoiceType:2};(function(){n.getUserInvoice().then(function(t){if(200===t.data.code){t.data.obj&&(e.invoice=t.data.obj),t.data.map.invoiceType?e.invoiceStatus=t.data.map.invoiceType:e.invoiceStatus=1;for(var n=t.data.list,i=0;i<n.length;i++)1===n[i].invoiceType?(e.invoiceListPu=n[i],e.puPicture={tax:n[i].licenseImgsJson}):2===n[i].invoiceType&&(e.invoiceListzhuan=n[i],r=n[i].licenseImgsJson.split(","),e.picture={tax:r[0],bank:r[1],people:r[2],mes:r[3]})}})})(),e.addPictures=function(t){i.open({windowClass:"console img_console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1,count:1}}}}).result.then(function(n){"tax"===t?e.picture.tax=n.data:"bank"===t?e.picture.bank=n.data:"people"===t?e.picture.people=n.data:"mes"===t?e.picture.mes=n.data:"puTax"===t&&(e.puPicture.tax=n.data),a.pushForCurrentRoute("upload.success","notify.success")})};var l=function(){return e.picture.tax?e.picture.bank?e.picture.people?e.picture.mes?void 0:(t.$broadcast("error","请上传开票信息加盖公章"),!1):(t.$broadcast("error","请上传一般纳税人资质证明"),!1):(t.$broadcast("error","请上传银行许可证"),!1):(t.$broadcast("error","根据最新税务部门规定，开具增值税专票需要开票方的税务登记证信息，请更新发票信息"),!1)};e.$on("error",function(t,n){o.openConfirmDialog({msg:n,confirmName:"立即更新",cancelName:"取消"},function(){e.reset()})}),e.$on("error2",function(e,t){o.openMsgDialog({msg:t})}),e.submit=function(i){if(!e.invoice.receiver)return void t.$broadcast("error","请填写收件人");if(!e.invoice.phone)return void t.$broadcast("error","请填写联系电话");if(!e.invoice.address)return void t.$broadcast("error","请填写收货地址");if(i={orderIds:s.orderIds,receiver:e.invoice.receiver,address:e.invoice.address,phone:e.invoice.phone},1===e.invoiceStatus){if(i.invoiceType=1,i.title=e.invoiceListPu.title,i.taxId=e.invoiceListPu.taxId,i.licenseImgsJson=e.puPicture.tax,!i.taxId)return void t.$broadcast("error","根据最新税务部门规定，开具增值税普票需要开票方的税务登记号信息，请更新发票信息");if(!e.puPicture.tax)return void t.$broadcast("error","根据最新税务部门规定，开具增值税普票需要开票方的税务登记证信息，请更新发票信息");i.licenseImgsJson=e.puPicture.tax}else if(2===e.invoiceStatus){if(!l())return!1;if(!e.invoiceListzhuan.taxId)return void t.$broadcast("error","根据最新税务部门规定，开具增值税专票需要开票方的税务登记号信息，请更新发票信息");i.invoiceType=2,i.title=e.invoiceListzhuan.title,i.taxId=e.invoiceListzhuan.taxId,i.licenseImgsJson=e.picture.tax+","+e.picture.bank+","+e.picture.people+","+e.picture.mes}else 3===e.invoiceStatus&&(i.invoiceType=3);n.saveOrderInvoice(i).then(function(n){n.data.success?(e.$close(i),a.pushForCurrentRoute("save.success","notify.success")):t.$broadcast("error",n.data.msg)})},e.saveUserInvoice=function(i){if(!e.invoice.receiver)return void t.$broadcast("error2","请填写收件人");if(!e.invoice.phone)return void t.$broadcast("error2","请填写联系电话");if(!e.invoice.address)return void t.$broadcast("error2","请填写收货地址");if(i={},i.invoiceDeliver={receiver:e.invoice.receiver,address:e.invoice.address,phone:e.invoice.phone},i.invoiceList=[],e.invoiceListPu.title){if(!e.invoiceListPu.taxId)return void t.$broadcast("error2","根据最新税务部门规定，开具增值税普票需要开票方的税务登记号信息，请更新发票信息");if(!e.puPicture.tax)return void t.$broadcast("error2","根据最新税务部门规定，开具增值税普票需要开票方的税务登记证信息，请更新发票信息");var o={invoiceType:e.invoiceListPu.invoiceType,title:e.invoiceListPu.title,taxId:e.invoiceListPu.taxId,licenseImgsJson:e.puPicture.tax};i.invoiceList.push(o)}if(e.invoiceListzhuan.title){if(!e.invoiceListzhuan.taxId)return void t.$broadcast("error2","根据最新税务部门规定，开具增值税专票需要开票方的税务登记号信息，请更新发票信息");if(!e.picture.tax)return void t.$broadcast("error2","根据最新税务部门规定，开具增值税专票需要开票方的税务登记证信息，请更新发票信息");if(!e.picture.bank)return void t.$broadcast("error2","请上传银行许可证");if(!e.picture.people)return void t.$broadcast("error2","请上传一般纳税人资质证明");if(!e.picture.mes)return void t.$broadcast("error2","请上传开票信息加盖公章");var r={invoiceType:e.invoiceListzhuan.invoiceType,title:e.invoiceListzhuan.title,taxId:e.invoiceListzhuan.taxId,licenseImgsJson:e.picture.tax+","+e.picture.bank+","+e.picture.people+","+e.picture.mes};i.invoiceList.push(r)}n.saveUserInvoice(i).then(function(t){t.data.success&&(e.authError="",s.view?e.editInfo.isEditable=!1:e.$close(i),a.pushForCurrentRoute("save.success","notify.success"))})},e.cancel=function(){e.$close()}}]),angular.module("usercenter.relAccount",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relAccount").controller("RelAccountCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications",function(e,t,n,i,a,s,o,r,l,c,d){t.user=c,t.bindAccount=function(){return t.user.email?t.user.password?void a.relAccount(c.id,t.user.email,t.user.password).then(function(e){if(200===e.data.code){d.pushForCurrentRoute("email.save.success","notify.success"),/qq/gi.test(t.user.loginName)&&(t.relType="qq"),/weixin/gi.test(t.user.loginName)&&(t.relType="weixin"),/weibo/gi.test(t.user.loginName)&&(t.relType="weibo");var n={type:t.relType,email:angular.copy(t.user.email)};t.$close(n)}else t.relErr=e.data.msg},function(){t.$dismiss()}):(t.relErr="密码不能为空！",void $(".third-pwd").focus()):(t.relErr="登录账号不能为空",void $(".third-name").focus())},t.checkUpperCase=function(){/[A-Z]/g.test(t.user.email)&&(t.user.email=t.user.email.toLowerCase(),t.relErr="请用小写字母邮箱注册，已将邮箱中的大写字母自动转换成小写")},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.relEmail",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relEmail").controller("RelEmailCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications",function(e,t,n,i,a,s,o,r,l,c){switch(t.title=c.title,t.userinfo=c,t.title){case"绑定邮箱":t.dec="绑定保密邮箱";break;case"验证邮箱":t.dec="验证已有账户邮箱";break;case"修改邮箱":t.dec="修改邮箱"}t.checkEmailFormat=function(){return/^([a-zA-Z0-9]+[_|\_|\.|-]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[\.|-]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t.userinfo.email)?(t.emailFormatErr="",!0):(t.emailFormatErr="请输入正确的邮箱格式",!1)},t.checkPassFormat=function(e){return e.password?(t.passFormatErr="",!0):(t.passFormatErr="密码不能为空！",$(".email-pwd").focus(),!1)},t.relEmail=function(e){t.checkEmailFormat(e)&&t.checkPassFormat(e)&&(null===t.userinfo.checkEmail?t.firstRel=!1:t.firstRel=!0,a.relEmail(t.userinfo.email,t.userinfo.password,t.firstRel).then(function(e){200===e.data.code?(t.relErr="",r.openMsgDialog({msg:"申请绑定成功,已向您的邮箱发送验证邮件,请注意查收。"},function(){t.$dismiss()})):(t.firstRel=!0,t.relErr=e.data.msg)}))},t.checkUpperCase=function(){/[A-Z]/g.test(t.userinfo.email)&&(t.userinfo.email=t.userinfo.email.toLowerCase(),t.relErr="请用小写字母邮箱注册，已将邮箱中的大写字母自动转换成小写")},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.relForum",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relForum").controller("relForumCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications",function(e,t,n,i,a,s,o,r,l,c,d){t.userinfo.bbsId=c.bbsName,t.userinfo.bbsPwd="",t.userinfo.eqxiuPwd="",t.checkBbsName=function(){return t.BbsNameError="",!!t.userinfo.bbsId||(t.BbsNameError="论坛账号不能为空!",!1)},t.checkBbsPassword=function(){return t.bbsPwdError="",!!t.userinfo.bbsPwd||(t.bbsPwdError="论坛密码不能为空！",!1)},t.checkEqxiuPassword=function(){return t.eqxiuPwdError="",!!t.userinfo.eqxiuPwd||(t.eqxiuPwdError="易企秀密码不能为空！",!1)},t.relForum=function(){t.checkBbsName()&&t.checkBbsPassword()&&t.checkEqxiuPassword()&&a.relForum(t.userinfo.bbsId,t.userinfo.bbsPwd,t.userinfo.eqxiuPwd).then(function(e){t.BbsNameError="",t.bbsPwdError="",t.eqxiuPwdError="",200===e.data.code?(d.pushForCurrentRoute("bbs.save.success","notify.success"),t.$close(t.userinfo.bbsId)):1003===e.data.code?t.BbsNameError="论坛账号不存在":1004===e.data.code?t.eqxiuPwdError="易企秀密码错误":110002===e.data.code?t.bbsPwdError="论坛密码不能为空":110203===e.data.code?t.BbsNameError="无效的论坛账号":110205===e.data.code?t.bbsPwdError="论坛账号与论坛密码不匹配":110210===e.data.code?t.eqxiuPwdError="绑定第三方账号失败，请稍候再试！":110306===e.data.code?t.eqxiuPwdError="域名不合法或者IP地址没有绑定！":110229===e.data.code?t.BbsNameError="此论坛账号已被其他用户绑定":t.eqxiuPwdError=e.data.msg})},t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.relRegisterAccount",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.relRegisterAccount").controller("RelRegisterAccountCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","userinfo","i18nNotifications","localizedMessages",function(e,t,n,i,a,s,o,r,l,c,d,p){t.thirdUser={agreement:!0,id:c.id,loginName:c.thirdLogName};var u=!1;t.cancel=function(){t.$dismiss("cancel")},t.registerAccount=function(){if(t.userNotExist&&t.checkUsername()&&t.checkPassword()&&t.checkRepeatPassword())if(t.thirdUser.password===t.thirdUser.repeatPassword&&t.thirdUser.agreement){if(u)return;u=!0,a.thirdSettingLogName(t.thirdUser.loginName,t.thirdUser.password).then(function(e){u=!1,e.data.success?(d.pushForCurrentRoute("rel.register.account.success","notify.success"),t.$close()):t.relErr=e.data.msg},function(){u=!1,t.regErr=p.get("register.error.serverError",{exception:x}),t.$dismiss()})}else t.thirdUser.password!==t.thirdUser.repeatPassword?t.regErr=p.get("register.error.match"):t.regErr=p.get("register.error.agreement")},t.checkUsername=function(){return/^(?!(?:\d+|\.|@|_|-)$)[\da-zA-Z\.@_-]{6,40}$/.test(t.thirdUser.loginName)?(t.checkUniqueness(t.thirdUser.loginName),!0):(t.usernameError="账号为6-40个字符(英文字母或数字，只支持小写)以及-_@.的组合",!1)},t.checkUniqueness=function(e){s.checkUniquenessNew(e).success(function(e){t.userNotExist=e.success,t.userNotExist?t.usernameError=null:t.usernameError=e.msg})},t.checkPassword=function(){if(t.thirdUser.password){if(/^[a-zA-Z0-9]{6,16}$/g.test(t.thirdUser.password))return t.passError=null,!0;t.passError="密码为6~16个字符(英文字母或数字，区分大小写)"}else t.passError="密码不能为空";return!1},t.checkRepeatPassword=function(){if(t.thirdUser.repeatPassword){if(t.thirdUser.repeatPassword===t.thirdUser.password)return t.rPassError="",!0;t.rPassError="两次密码输入不一致，请重新输入"}else t.rPassError="确认密码不能为空";return!1}}]),angular.module("usercenter.branch.reset",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.branch.reset").controller("ResetBranchPassCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","branch","i18nNotifications",function(e,t,n,i,a,s,o,r,l,c){t.branch=c,t.reset=function(){a.resetBranchPass(c.id)},t.cancel=function(){t.$dismiss()},t.$on("reset.branch.success",function(){t.$close()})}]),angular.module("usercenter.apply",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.apply").controller("ApplyCtrl",["$rootScope","$scope","usercenterService","$modal","ModalService","i18nNotifications","MineService","userinfo","$timeout","security","dataCacheService","$sce","validateService",function(e,t,n,a,s,o,r,l,c,d,p,u,g){function m(){0===R?(t.isCodeAccessiable=!1,t.codeTip="获取验证码",R=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+R+")",c(function(){R--,m()},1e3))}config.product="popup";var h="https://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime();t.validateCodeUrl=u.trustAsResourceUrl(h),t.applyInfo={},t.applyInfo.nick=l.nick,t.invoiceStat=l.invoice,t.actionerror="",t.serverLabel=[],t.cateLabel=[],t.payLabel=[];var f;t.applyXiuke=!0,t.title=l.title,0===l.status||3===l.status?(f=0,t.applyXiuke=!0):(f=1,t.applyXiuke=!1);var v=function(e){n.getAPPlyMessage(e).then(function(n){"province"===e?(t.serverLabel=n.data.list,n.data.list.length>0&&(t.moreArea=!0)):"company_industry"===e?(t.cateLabel=n.data.list,n.data.list.length>0&&(t.moreLabel=!0)):"payType"===e&&(t.payLabel=n.data.list)})};v("province"),v("company_industry"),v("payType"),t.cancel=function(){t.$dismiss()},t.cate_cancel=function(e){for(var n=0;n<t.cateLabel.length;n++)if(t.cateLabel[n].ischecked=!1,t.cateSelected.length>0)for(var i=0;i<t.cateSelected.length;i++)t.cateLabel[n].id===t.cateSelected[i].id&&(t.cateLabel[n].ischecked=!0);t.cateError="",setTimeout(function(){$(e.target).parents(".dropdown.open").trigger("click")})},t.server_cancel=function(e){for(i=0;i<t.serverLabel.length;i++)if(t.serverLabel[i].ischecked=!1,t.serverSelected.length>0)for(k=0;k<t.serverSelected.length;k++)t.serverLabel[i].id===t.serverSelected[k].id&&(t.serverLabel[i].ischecked=!0);setTimeout(function(){$(e.target).parents(".dropdown.open").trigger("click")}),t.serverError=""},t.scene_cancel=function(e){for(i=0;i<t.myShowScene.length;i++)if(t.myShowScene[i].ischecked=!1,t.sceneSelected.length>0)for(k=0;k<t.sceneSelected.length;k++)t.myShowScene[i].id===t.sceneSelected[k].id&&(t.myShowScene[i].ischecked=!0);setTimeout(function(){$(e.target).parents(".dropdown.open").trigger("click")}),t.sceneError=""},t.checkIntroFormat=function(e){return e.shortIntroduction?countCharacters(e.shortIntroduction)>30?(t.introError="简短介绍不能超过30个字符",!1):(t.introError="",!0):(t.introError="请填写简短介绍",!1)},t.checkIntroFormat1=function(e){return e.introduction?countCharacters(e.introduction)>400?(t.introError1="秀客介绍不能超过400个字符",!1):(t.introError1="",!0):(t.introError1="请填写秀客介绍",!1)},n.getUserScene().then(function(e){e.data.list.length>0?t.myShowScene=e.data.list:t.myShowScene=null});var b=[];t.sceneSelected=[],t.sceneSelect=function(e,n,i){return b=[],angular.forEach(t.myShowScene,function(e){e.ischecked&&b.push({code:e.code,name:e.name})}),3!==b.length?(t.sceneError="请选择三个代表作品",!1):(t.sceneSelected=b,t.sceneNull="",void(i&&(setTimeout(function(){$(n.target).parents(".dropdown.open").trigger("click")}),t.sceneError="")))};var y=function(){return 3!==t.sceneSelected.length?(t.sceneNull="请选择三个代表作品",!1):(t.sceneNull="",!0)},w=[],x=[];t.serverSelected=[],t.serverSubmit=function(e,n,i){return w=[],angular.forEach(t.serverLabel,function(e){e.ischecked&&w.push({name:e.name,id:e.id})}),w.length<=0?void(t.serverError="请选择服务地域"):w.length>3?void(t.serverError="服务地域不能超过3个"):(t.serverSelected=w,void(i&&(setTimeout(function(){$(n.target).parents(".dropdown.open").trigger("click")}),t.serverError="",t.serverNull="")))};var S=function(){return t.serverSelected.length<=0||t.serverSelected.length>3?(t.serverNull="请选择1-3个服务地域",!1):(t.serverNull="",!0)},T=[],C=[];t.cateSelected=[],t.queren=function(e,n,i){return T=[],angular.forEach(t.cateLabel,function(e){e.ischecked&&T.push({name:e.name,id:e.id})}),T.length<=0?void(t.cateError="请选择擅长领域"):T.length>3?void(t.cateError="擅长领域不能超过3个"):(t.cateSelected=T,t.cateNull="",void(i&&(setTimeout(function(){$(n.target).parents(".dropdown.open").trigger("click")}),t.cateError="")))};var E=function(){return t.cateSelected.length<=0||t.cateSelected.length>3?(t.cateNull="请选择1-3个擅长领域",!1):(t.cateNull="",!0)},P=[],I=function(){P=[];var e=!1;return angular.forEach(t.payLabel,function(t){t.ischecked&&(P.push(t.id),e=!0)}),P=P.join(","),e?(t.payError="",!0):(t.payError="请选择支付方式",!1)},_=/^[0-9]*$/;t.checkQQFormat=function(e){return e.qq&&!_.test(e.qq)?(t.qqError="qq填写格式错误",!1):e.qq?(t.qqError="",!0):(t.qqError="请填写QQ号码",!1)};var L=function(e){return e.wechat?(t.wechatError="",!0):(t.wechatError="请填写微信号",!1)};t.checkEmailFormat=function(e){var n=g.checkEmail(e.email);return t.emailError=n,!n},t.checkCode=function(e){return e.code?(t.codeError="",!0):(t.codeError="请输入手机验证码",!1)},t.showPhone=!0,d.currentUser&&1===d.currentUser.checkPhone&&(t.showPhone=!1),t.getImageCode=function(e,n){challenge&&validate&&seccode&&t.getCode(e,n)},t.getCode=function(e,i){if(!e.phone)return t.telError="请填写手机号码",!1;t.telError="";var a={phone:e.phone,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};n.relMobileCode(a,i).then(function(e){challenge="",validate="",seccode="",e.data.success?m():t.telError=e.data.msg})};var R=60;t.checkFormFormat=function(e){return!!(t.checkIntroFormat(e)&&t.checkIntroFormat1(e)&&y()&&S()&&E()&&I()&&t.checkQQFormat(e)&&L(e)&&t.checkEmailFormat(e))},t.submit=function(e){if(t.checkFormFormat(e)){if(!e.phone)return void(t.telError="请填写手机号码");if(t.telError="",d.currentUser&&1!==d.currentUser.checkPhone){if(!e.phone)return void(t.telError="请填写手机号码");if(!e.code)return void(t.codeError="请填写验证码")}for(x=[],C=[],k=0;k<t.cateSelected.length;k++)C.push(t.cateSelected[k].id);for(_cateSelected2=C.join(","),i=0;i<t.serverSelected.length;i++)x.push(t.serverSelected[i].id);_serverSelected2=x.join(",");var a={shortIntroduction:e.shortIntroduction,introduction:e.introduction,represent1:t.sceneSelected[0].code+"_"+t.sceneSelected[0].name,represent2:t.sceneSelected[1].code+"_"+t.sceneSelected[1].name,represent3:t.sceneSelected[2].code+"_"+t.sceneSelected[2].name,qq:e.qq,wechat:e.wechat,phone:e.phone,email:e.email,addr:_serverSelected2||"",pay:P||"",good:_cateSelected2||"",code:e.code,type:f};n.saveApplyInfo(a).then(function(e){e.data.success?(t.applyInfo=e.data.map.status,o.pushForCurrentRoute("visitor.apply","notify.success"),t.$close(t.applyInfo)):t.authError=e.data.msg})}},t.checkFormFormat2=function(e){return!!(t.checkIntroFormat(e)&&t.checkIntroFormat1(e)&&y()&&S()&&E()&&I()&&t.checkQQFormat(e)&&L(e)&&t.checkEmailFormat(e))},t.reset=function(e){if(t.sceneSelect(),t.serverSubmit(),t.queren(),t.checkFormFormat2(e)){if(!e.phone)return void(t.telError="请填写手机号码");if(t.telError="",d.currentUser&&1!==d.currentUser.checkPhone){if(!e.phone)return void(t.telError="请填写手机号码");if(!e.code)return void(t.codeError="请填写验证码")}for(C=[],k=0;k<t.cateSelected.length;k++)C.push(t.cateSelected[k].id);for(_cateSelected2=C.join(","),x=[],i=0;i<t.serverSelected.length;i++)x.push(t.serverSelected[i].id);_serverSelected2=x.join(",");var a={nick:t.applyInfo.nick,shortIntroduction:e.shortIntroduction,introduction:e.introduction,represent1:t.sceneSelected[0].code+"_"+t.sceneSelected[0].name,represent2:t.sceneSelected[1].code+"_"+t.sceneSelected[1].name,represent3:t.sceneSelected[2].code+"_"+t.sceneSelected[2].name,qq:e.qq,wechat:e.wechat,email:e.email,addr:_serverSelected2||"",pay:P||"",good:_cateSelected2||"",type:f,phone:e.phone,code:e.code};n.resetApplyInfo(a).then(function(e){e.data.success?(o.pushForCurrentRoute("visitor.apply","notify.success"),t.$close({applyInfoNew:a,status:e.data.map.status})):t.authError=e.data.msg})}};var M;0!==l.status&&c(function(){n.getVisitorMsg().then(function(e){if(e.data.obj){M=t.applyInfo=e.data.obj;for(var n=M.represent1,i=n.substr(0,n.indexOf("_")),a=M.represent2,s=a.substr(0,a.indexOf("_")),o=M.represent3,r=o.substr(0,o.indexOf("_")),l=0;l<t.myShowScene.length;l++)(t.myShowScene[l].code===i||t.myShowScene[l].code===s||t.myShowScene[l].code===r)&&(t.myShowScene[l].ischecked=!0,t.sceneSelected.push(t.myShowScene[l]));var c=M.tagList;for(l=0;l<c.length;l++){for(var d=0;d<t.serverLabel.length;d++)c[l].tagId===t.serverLabel[d].id&&(t.serverLabel[d].ischecked=!0,t.serverSelected.push({name:c[l].name,id:c[l].tagId}));for(var p=0;p<t.payLabel.length;p++)c[l].tagId===t.payLabel[p].id&&(t.payLabel[p].ischecked=!0);for(var u=0;u<t.cateLabel.length;u++)c[l].tagId===t.cateLabel[u].id&&(t.cateLabel[u].ischecked=!0,t.cateSelected.push({name:c[l].name,id:c[l].tagId}))}}})},1e3),t.invoice=function(){a.open({windowClass:"six-contain",templateUrl:"usercenter/console/invoice.tpl.html",controller:"InvoiceCtrl",scope:t,resolve:{userinfo:function(){return{}}}})}}]),angular.module("usercenter.upgrade",["services.usercenter","services.i18nNotifications"]),angular.module("usercenter.upgrade").controller("UsercenterupgradeCtrl",["$rootScope","$scope",function(e,t){t.quXiao=function(){t.$dismiss()},t.$on("upgrade",function(e){t.$close(e)})}]),angular.module("message",[]),angular.module("message").controller("MessageCtrl",["$scope","$rootScope","usercenterService",function(e,t,n){e.pageSize=10,e.currentPage={msgCurrentPage:1,branchCurrentPage:1},e.getUserMsg=function(t){var i=t;n.getNewMessage(i,e.pageSize).then(function(t){angular.forEach(t.data.list,function(e){1===e.bizType?e.type="系统通知":2===e.bizType?e.type="审核通知":3===e.bizType&&(e.type="活动通知")}),e.Msgs=t.data.list,e.msgCount=t.data.map.count,e.toPage=t.data.map.pageNo,e.msgNumPages=Math.ceil(e.msgCount/e.pageSize)})},e.getUserMsg(1),e.$watch("currentPage.msgCurrentPage",function(t,n){t!==n&&(e.getUserMsg(t),e.toPage=t)}),e.pageChanged=function(t,n){return 1>t||t>e.msgNumPages?void alert("此页超出范围"):void(e.currentPage[n]=t)},e.setRead=function(i){var a;if(i){if(1!==i.status)return;a=i.id}n.setRead(a).then(function(n){200===n.data.code&&(t.$broadcast("minusCount"),a?i.status=2:angular.forEach(e.Msgs,function(e){1===e.status&&(e.status=2)}))})}}]),angular.module("usercenter.request",["services.usercenter","app.directives.qrcode"]),angular.module("usercenter.request").controller("UsercenterrequestCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location",function(e,t,n,i,a,s){t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.currentUser=s.currentUser,t.cancel=function(){t.$dismiss()}}]),angular.module("usercenter.account",["usercenter.relEmail","usercenter.relForum"]),angular.module("usercenter.account").controller("UsercenterAccountCtrl",["$location","$rootScope","$scope","$window","usercenterService","$modal","ModalService","i18nNotifications","security","thirdpartyService","$timeout","dataCacheService",function(e,t,n,i,a,s,o,r,l,c,d,p){function u(){n.progress="0",1===n.userinfo.checkEmail&&1===n.userinfo.checkPhone&&(n.redColor=!1,d(function(){n.progress="90"},100)),1!==n.userinfo.checkEmail&&1!==n.userinfo.checkPhone&&(d(function(){n.progress="20"},100),n.redColor=!0),(1!==n.userinfo.checkEmail&&1===n.userinfo.checkPhone||1===n.userinfo.checkEmail&&1!==n.userinfo.checkPhone)&&(n.redColor=!1,d(function(){n.progress="60"},100))}function g(e){e&&(e.state&&/WECHAT_STATE/.test(e.state)?(v={code:e.code,type:"weixin"},c.bindAccountCommon(v)):c.qqBindAccount(e))}n.PREFIX_CLIENT_HOST=PREFIX_HOST,n.$watch("userinfo",function(e){e&&u()});var m=/^EQS.*qq$/,h=/^EQS.*weixin$/;n.qqShow=!0,n.weixinShow=!0,m.test(l.currentUser.loginName)&&(n.qqShow=!1),h.test(l.currentUser.loginName)&&(n.weixinShow=!1);var f=null;n.goReset=function(){return 1===n.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){n.createAccount()}):void(f=s.open({windowClass:"six-contain",templateUrl:"usercenter/tab/reset.tpl.html",controller:"UsercenterAccountCtrl",scope:n}).result.then(function(){f=null},function(){f=null}))},n.checkOldPassword=function(){return n.password.old?(n.oldPassError="",!0):(n.oldPassError="原始密码不能为空",!1)},n.checkPassword=function(){if(n.password.newPw){if(/^[a-zA-Z0-9]{6,16}$/g.test(n.password.newPw))return n.passError="",!0;n.passError="密码为6~16个字符(英文字母或数字，区分大小写)"}else n.passError="新密码不能为空";return!1},n.checkRepeatPassword=function(){if(n.password.confirm){if(n.password.confirm===n.password.newPw)return n.rPassError="",!0;n.rPassError="两次密码输入不一致，请重新输入"}else n.rPassError="确认密码不能为空";return!1},n.reset=function(){if(n.checkOldPassword()&&n.checkPassword()&&n.checkRepeatPassword()){if(angular.equals(n.master,n.password))return void(n.authError="请不要重复提交！");n.oldPassError="",n.passError="",n.rPassError="",l.resetPassword(n.password.old,n.password.newPw).then(function(e){e.data.success?(r.pushForCurrentRoute("reset.psw.success","notify.success"),n.master=angular.copy(n.password),n.$close(n.master)):n.oldPassError=e.data.msg})}},n.quXiao=function(){n.$dismiss()},n.$on("rel.success",function(e,t){r.pushForCurrentRoute("mail.rel.success","notify.success"),"weixin"===t?n.wxRel=!0:"qq"===t&&(n.qqRel=!0)}),n.checkMobile=function(e){return 1===n.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){n.createAccount()}):void s.open({windowClass:"six-contain mobile-contain",templateUrl:"usercenter/console/checkMobile.tpl.html",controller:"CheckMobileCtrl",scope:n,resolve:{userinfo:function(){return{title:e,phone:n.userinfo.phone}}}}).result.then(function(e){n.userinfo.phone=e,n.userinfo.checkPhone=1,l.currentUser.checkPhone=1})},n.createAccount=function(){n.emailAccount=!1,s.open({windowClass:"six-contain",templateUrl:"usercenter/console/register.tpl.html",controller:"RelRegisterAccountCtrl",scope:n,resolve:{userinfo:function(){return{id:n.userinfo.id,thirdLogName:n.userinfo.loginName}}}}).result.then(function(t){n.getUserInfo(),e.search("bindemail",null)},function(){e.search("bindemail",null)})},n.relAccount=function(){n.emailAccount=!1,s.open({windowClass:"six-contain",templateUrl:"usercenter/console/relAccount.tpl.html",controller:"RelAccountCtrl",scope:n,resolve:{userinfo:function(){return{id:n.userinfo.id}}}}).result.then(function(t){n.userinfo.noRel=null,n.userinfo.loginName=t.email,/qq/gi.test(t.type)&&(n.qqRel=!0),/weixin/gi.test(t.type)&&(n.wxRel=!0),/weibo/gi.test(t.type)&&(n.wbRel=!0),e.search("bindemail",null)},function(){e.search("bindemail",null)})},n.relEmail=function(e){return 1===n.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){n.createAccount()}):void s.open({windowClass:"six-contain",templateUrl:"usercenter/console/relEmail.tpl.html",controller:"RelEmailCtrl",scope:n,resolve:{userinfo:function(){return{id:n.userinfo.id,email:n.userinfo.email,checkEmail:n.userinfo.checkEmail,title:e}}}})},n.verifyEmail=function(){a.verifyEmail().then(function(e){200===e.data.code&&o.openMsgDialog({msg:"申请绑定成功,已向您的邮箱发送验证邮件,请注意查收。"})})},n.bindThirdAccount=function(e){return 1===n.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){n.createAccount()}):void c.openThirtyPartyWindow(e)},n.unbindRelation=function(e){return 1===n.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){n.createAccount()}):void c.unbindRelation(e)},n.$on("mail.unbind.success",function(e,t){r.pushForCurrentRoute("mail.unbind.success","notify.success"),"weixin"===t?n.wxRel=!1:"qq"===t&&(n.qqRel=!1)});var v;i.setValue=function(e){n.bindParam=e,g(n.bindParam),n.$apply()},n.emailAccount=!1,n.upgradeCompany=function(){s.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:n.userinfo.id}}}}).result.then(function(e){n.userinfo.phone=e,n.userinfo.checkPhone=1,l.currentUser.type=2},function(){})},n.companyMes=!0,n.$on("companyState",function(){n.companyInfo||(n.companyInfo={}),n.companyMes=!1,n.userinfo.type=2}),n.bbsShow=!0,n.relForum=function(){return 1===n.userinfo.thirdReg?void o.openConfirmDialog({msg:"请先设置登陆密码",confirmName:"确定",cancelName:"取消"},function(){n.createAccount()}):void s.open({windowClass:"six-contain",templateUrl:"usercenter/console/relForum.tpl.html",controller:"relForumCtrl",scope:n,resolve:{userinfo:function(){return{id:n.userinfo.id,bbsName:n.userinfo.bbsName}}}}).result.then(function(e){n.userinfo.bbsName=e})}}]),angular.module("usercenter.children",[]),angular.module("usercenter.children").controller("ChildrenCtrl",["$scope","$rootScope","$location","$modal","ModalService","i18nNotifications","security","usercenterService","dataCacheService",function(e,t,n,i,a,s,o,r,l){e.page={},e.XdpageSize=10,e.pageChanged=function(t){return 1>t||t>e.branchesCount/10+1?void alert("此页超出范围"):(e.currentPage=t,void e.getBranches(t))},e.showEdit=function(t,n){t.edit=!t.edit,$.each(e.branches,function(e,t){e!==n&&(t.edit=!1)})},e.manageBranch=function(t,n){var a=t;t&&n&&e.showEdit(t),i.open({windowClass:"console six-contain branch-contain",templateUrl:"usercenter/console/branch.tpl.html",controller:"BranchCtrl",resolve:{branch:function(){return t},diaTitle:function(){return n?"修改子账号":"添加子账号"}}}).result.then(function(n){t||(t={}),n.dept&&(t.deptId=n.dept.id,t.deptName=n.dept.name),t.name=n.name,t.id=n.id,t.extPermi=n.extPermi,a||(t.loginName=n.loginName,t.status=1,t.regTime=(new Date).getTime(),e.branches.unshift(t),e.branchesCount++,e.branches.length>10&&e.branches.splice(e.branches.length-1,1))},function(t){if(t&&110006===t.code){e.buyBranch("子账号数量已超过限制，")}})},e.openBranch=function(e,t,n){r.openBranch(e.id,t).then(function(n){n.data.success?t?(e.status=1,s.pushForCurrentRoute("branch.open.success","notify.success")):(e.status=2,s.pushForCurrentRoute("branch.close.success","notify.success")):a.openMsgDialog({msg:n.data.msg})},function(){alert("服务器异常")})},e.getBranches=function(t){r.getBranches(e.XdpageSize,t).then(function(t){t.data.success&&(e.branches=t.data.list,e.branchesCount=t.data.map.count,e.page.currentPage=t.data.map.pageNo,e.toPage=t.data.map.pageNo,e.branchesNumPages=Math.ceil(e.branchesCount/e.XdpageSize),c())})},(2===o.currentUser.type||5===o.currentUser.type||21===o.currentUser.type&&t.userPermit.indexOf(",1405,")>=0)&&e.getBranches(e.pageNo),e.branchName={};var c=function(){var i=n.search().branchid;if(i)for(var a=0;a<e.branches.length;a++)e.branches[a].id===i&&(e.branchName.name=e.branches[a].loginName);else t.branchid="",n.search("branchid",null)};e.$watch("branchid",function(e,t){e!==t&&c()}),e.changeCurrent=function(){l.clear("sceneList"),t.branchid="",n.search("branchid",null)},e.selectBranch=function(e){l.clear("sceneList"),t.branchid=e.id,n.path("main"),n.search({branchid:t.branchid})},e.$watch("currentPage.branchCurrentPage",function(t,n){t!==n&&(e.getBranches(t),e.branchToPage=t)}),e.buyBranch=function(n){var i,l,c=n||"",d=o.currentUser.xd||0;d>=500?(i=c+'即将消费500秀点获取10个子帐号永久使用权<div class="text-center pt20">当前秀点余额<span class="color-red">'+d+"</span>个</div>",l="购买"):(i=c+'当前选择需要消耗500秀点/10个子帐号永久使用权<div class="text-center pt20">当前秀点余额<span class="color-red">'+d+"</span>个</div>",l="充值"),a.openConfirmDialog({msg:i,confirmName:l,cancelName:"否"},function(){d>=500?r.buyBranch().then(function(n){if(n.data.success)s.pushForCurrentRoute("usercenter.buybranch.success","notify.success"),e.getUserXd(),t.$broadcast("buyXd");else if(150101===n.data.code){s.pushForCurrentRoute("usercenter.buybranch.notcompany","您不是企业会员,请先申请企业会员后再进行操作！")}}):e.buyXd()})}}]),angular.module("usercenter.member",[]),angular.module("usercenter.member").controller("MemberCtrl",["$scope","$modal","usercenterService","ModalService","$rootScope",function(e,t,n,i,a){e.pageNo=1,e.pageSize=10,e.setUserInfo=function(){if(1===e.currentUser.type)e.userType="个人用户";else if(2===e.currentUser.type?e.upgradeInfo="已升级":e.upgradeInfo="免费升级",3===e.currentUser.type)e.userType="高级用户";else if(21===e.currentUser.type)e.userType="企业子用户";else if(4===e.currentUser.type)e.userType="服务商用户";else if(5===e.currentUser.type)e.userType="公共账号";else if(51===e.currentUser.type)e.userType="公共子用户";else if(e.userType="企业用户",e.currentUser.memberType){if(e.currentUser.expiryTime){var t=(new Date).getTime();e.currentUser.expiryTime<=t&&(e.currentUser.memberType=null)}1===e.currentUser.memberType||6===e.currentUser.memberType?e.userPay="(体验版)":7===e.currentUser.memberType?e.userPay="(基础版)":8===e.currentUser.memberType?e.userPay="(标准版)":2===e.currentUser.memberType||9===e.currentUser.memberType?e.userPay="(高级版)":3===e.currentUser.memberType?e.userPay="(专业版)":4===e.currentUser.memberType&&(e.userPay="(畅享版)"),2!==e.currentUser.type||1!==e.currentUser.memberType&&2!==e.currentUser.memberType&&3!==e.currentUser.memberType&&4!==e.currentUser.memberType||(e.oldVersionUser=!0)}else e.userPay=""},e.setUserInfo(),e.memberPrivileges=["拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传","拥有编辑器组件，适用于个人企业用户，提供全面便捷的推广渠道助力企业自我营销和宣传"],e.getXdLog=function(t,i){e.xdType=t,e.currentPage=i,n.getXdlog(t,i,e.pageSize).then(function(t){if(t.data.success){e.xdLogs=t.data.list;for(var n=0;n<e.xdLogs.length;n++)2===e.xdLogs[n].type?e.xdLogs[n].xd="-"+e.xdLogs[n].xd:e.xdLogs[n].xd="+"+e.xdLogs[n].xd;e.totalItems=t.data.map.count,e.currentPage=t.data.map.pageNo,e.toPage=t.data.map.pageNo,e.numPages=Math.ceil(e.totalItems/e.pageSize)}})},e.getXdLog(null,1),e.$on("buyXd",function(){e.getXdLog(null,1)}),e.pageChanged=function(t,n){return 1>n||n>e.numPages&&1!==n?void alert("此页超出范围"):(e.currentPage=n,e.toPage=n,void e.getXdLog(t,n))},e.getXdStatNum=function(){n.getXdStat().then(function(t){e.getXdStat=t.data.map})},e.getXdStatNum(),e.transferXd=function(){t.open({windowClass:"six-contain",templateUrl:"usercenter/transfer.tpl.html",controller:"UsercentertransferCtrl",resolve:{username:function(){return e.userinfo.loginName}}}).result.then(function(){e.getUserXd(),a.$broadcast("buyXd"),e.getXdStatNum()},function(){})},e.openInvoice=function(){e.openInvoiceListModal()},e.openInvoiceListModal=function(){t.open({windowClass:"console seven-contain",templateUrl:"usercenter/console/invoice-list.tpl.html",controller:"GetInvoiceListCtrl"}).result.then(function(){})},e.renew=function(a){n.getCompanyQrCode(a,1).then(function(s){var o;if(1===a?o=[{name:"30天",value:1}]:2===a?o=[{name:"180天",value:1}]:3===a?o=[{name:"1年",value:1}]:4===a&&(o=[{name:"1年",value:1}]),s.data.success){var r=s.data.obj;t.open({windowClass:"console",templateUrl:"usercenter/payment.tpl.html",controller:"PayMentCtrl",resolve:{qrCodeUrl:function(){return r.url},type:function(){return a},money:function(){return r.price/100},oprice:function(){return r.oprice/100},method:function(){return"member"},counts:function(){return o}},size:"lg"}).result.then(function(){n.getUserInfo().then(function(e){e.data.success&&(security.currentUser=e.data.obj)}),i.openMsgDialog({msg:"因网络原因，部分用户开通会有延迟",btn:"确定"},function(){e.openInvoice()})})}else i.openMsgDialog({msg:s.data.msg})})}}]),angular.module("usercenter.privilege",[]),angular.module("usercenter.privilege").controller("PrivilegeCtrl",["$location","usercenterService","$scope","$modal","security","ModalService",function(e,t,n,i,a,s){n.tabid="corporateMember",n.isActive="privilege",n.$watch(function(){return a.currentUser},function(e){e&&(n.currentUser=e,n.changeMemberType(),2!==n.currentUser.type||1!==n.currentUser.memberType&&2!==n.currentUser.memberType&&3!==n.currentUser.memberType&&4!==n.currentUser.memberType||(n.oldVersonUser=!0))},!0),n.changeMemberType=function(){if(n.currentUser&&n.currentUser.expiryTime){var e=(new Date).getTime();n.currentUser.expiryTime<=e&&(n.currentUser.memberType=null)}},n.changeMemberType(),n.upgradeAccount=function(e){return 1!==n.currentUser.type||n.companyInfo&&0===n.companyInfo.status?1===n.currentUser.type&&n.companyInfo?void s.openMsgDialog({msg:"您不是企业会员,请先申请企业会员后再进行升级！"}):2!==n.currentUser.type?void s.openMsgDialog({msg:"尊敬的用户，您当前账号类型无法升级为企业用户！"}):void i.open({windowClass:"six-contain console",templateUrl:"usercenter/upgrade.tpl.html",controller:"UpgradeCtrl",resolve:{type:function(){return e}}}):void s.openMsgDialog({msg:"尊敬的用户，请您先申请免费企业用户，通过审核后再次升级",btn:"我知道了"},function(){i.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:n.user.id}}}}).result.then(function(){a.currentUser.type=2})})},n.cancel=function(){n.$close()},n.upgradeCompany=function(){i.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:n.user.id}}}})}}]).controller("UpgradeCtrl",["$modal","$scope","type","usercenterService","ModalService","security","$location","security",function(e,t,n,i,a,s,o,s){t.agents=[{area:"河南",address:"河南省郑州市管城回族区东明路商城路茂祥大厦八层：河南一百度电子技术有限公司",contact:"0371-63222282、13653855809",site:"http://www.hneqxiu.com/"},{area:"山西",address:"山西省晋中开发区汇通北路汇通财富中心15层：山西鼎轩网络传媒有限公司",contact:"13363548973、13935180000",site:"http://www.sxdxwl.com"},{area:"重庆",address:"重庆市渝中区上清寺9号环球广场10层：重庆蓝海基业信息技术有限公司",contact:"023-63306833、18883214705",site:"http://www.ilanhai.cn"},{area:"安徽",address:"合肥市金寨路329号国轩凯旋大厦11F  ：安徽网新科技有限公司",contact:"400-678-0888 、15505512251",site:"http://www.ibw.cn"},{area:"河北",address:"石家庄市中华北大街27号鑫明商务大厦1101：河北昀希科技有限公司",contact:"4000-636-222、13363876316",site:"http://www.hbeqxiu.com"},{area:"甘肃",address:"甘肃省兰州市城关区天庆国际商务大厦17层:甘肃启航网络科技有限公司 ",contact:"400-999-0931、13893244664",site:"http://www.lzqihang.com"},{area:"天津",address:"天津市和平区南马路创新大厦30层:天津星源科技有限公司",contact:"022_27256676、15822774513",site:"http://www.samyon.com"}],t.confirm=function(){i.upgradeVersionService(t,n,!1)},t.openAgentModal=function(e){a.openMsgDialog({title:"服务商详情",msg:'<div class="agent-detail"><div class="pb20"><label>名称：</label>&nbsp;<div class="content">易企秀'+e.area+'地区授权服务中心</div></div><div class="pb20"><label>地址：</label>&nbsp;<div class="content">'+e.address+'</div></div><div class="pb20"><label>联系方式：</label>&nbsp;<div class="content">'+e.contact+'</div></div><div><label>网址：</label>&nbsp;<div class="content"><a href="'+e.site+'" target="_blank">'+e.site+"</a></div></div></div>",btn:"确定"})},t.cancel=function(){t.$close()}}]).controller("PayMentCtrl",["$modal","$scope","qrCodeUrl","type","money","usercenterService","method","counts","oprice","ModalService","$location",function(e,t,n,i,a,s,o,r,l,c,d){console.log(i),t.qrCodeUrl=n;var p=a;t.money=a===l?p:l+"-"+(l-p)+"="+p,t.type=i,1===i?t.payUrl=CLIENT_CDN+"download/vip1-201512.pdf":2===i?t.payUrl=CLIENT_CDN+"download/vip2-201512.pdf":3===i?t.payUrl=CLIENT_CDN+"download/vip4-201512.pdf":4===i?t.payUrl=CLIENT_CDN+"download/vip3-201512.pdf":10===i&&(t.payUrl=CLIENT_CDN+"download/xd-201512.pdf"),t.counts=r,t.payWay="alipay",r&&r.length>0&&(t.curentCount=r[0].value);var u={},g={};u["alipay1"+t.curentCount]=n,g["alipay1"+t.curentCount]=t.money,t.paymented=function(){t.$close(),"/xdBuy"===d.path()&&d.path("/usercenter/member")},t.invoiceNotice=function(){e.open({windowClass:"six-contain",templateUrl:"usercenter/invoiceNotice.tpl.html",controller:"PrivilegeCtrl"})},t.cancel=function(){t.$dismiss()},t.goodsType="member"===o?0:1,t.getWeChatUrl=function(e){var n=t.payWay;t.payWay=e;var a=1;if("wechat"===t.payWay&&(a=0),u[t.payWay+""+a+t.curentCount])return t.qrCodeUrl=u[t.payWay+""+a+t.curentCount],void(t.money=g[t.payWay+""+a+t.curentCount]);if("member"===o){var r=i,l=t.curentCount;1===i&&6===t.curentCount&&(r=2,l=1),s.getCompanyQrCode(r,a,l).then(function(e){e.data.success?(u[t.payWay+""+a+t.curentCount]=t.qrCodeUrl=e.data.obj.url,e.data.obj.price===e.data.obj.oprice?t.money=g[t.payWay+""+a+t.curentCount]=e.data.obj.price/100:t.money=g[t.payWay+""+a+t.curentCount]=e.data.obj.oprice/100+"-"+(e.data.obj.oprice/100-e.data.obj.price/100)+"="+e.data.obj.price/100):(c.openMsgDialog({msg:e.data.msg}),t.payWay=n)})}else s.getPayXdQrCode(i,a).then(function(e){e.data.success?(u[t.payWay+""+a+t.curentCount]=t.qrCodeUrl=e.data.obj.url,e.data.obj.price===e.data.obj.oprice?t.money=g[t.payWay+""+a+t.curentCount]=e.data.obj.price/100:t.money=g[t.payWay+""+a+t.curentCount]=e.data.obj.oprice/100+"-"+(e.data.obj.oprice/100-e.data.obj.price/100)+"="+e.data.obj.price/100):(c.openMsgDialog({msg:e.data.msg}),t.payWay=n)})},t.setCount=function(e){var n=t.curentCount;t.curentCount=e;var a=1;if("wechat"===t.payWay&&(a=0),u[t.payWay+""+a+t.curentCount])return t.qrCodeUrl=u[t.payWay+""+a+t.curentCount],t.money=g[t.payWay+""+a+t.curentCount],void(t.curentCount=e);var o=i,r=e;1===i&&6===e&&(o=2,r=1),s.getCompanyQrCode(o,a,r).then(function(e){e.data.success?(u[t.payWay+""+a+t.curentCount]=t.qrCodeUrl=e.data.obj.url,e.data.obj.price===e.data.obj.oprice?t.money=g[t.payWay+""+a+t.curentCount]=e.data.obj.price/100:t.money=g[t.payWay+""+a+t.curentCount]=e.data.obj.oprice/100+"-"+(e.data.obj.oprice/100-e.data.obj.price/100)+"="+e.data.obj.price/100):(c.openMsgDialog({msg:e.data.msg}),t.curentCount=n)})}}]),angular.module("app.usercenter.tab",["usercenter.account","usercenter.member","usercenter.trash","usercenter.apply","usercenter.companyinfo","usercenter.invoice","usercenter.invoicelist","usercenter.children"]),angular.module("usercenter.trash",[]),angular.module("usercenter.trash").controller("TrashCtrl",["$location","$rootScope","$scope","usercenterService","ModalService","fileService","MineService","sceneService","dataCacheService",function(e,t,n,i,a,s,o,r,l){n.PREFIX_CLIENT_HOST=PREFIX_HOST;var c=t.branchid;n.scene={type:null},n.pageSize=12,n.sceneCurrent={page:"",total:""},n.imageCurrent={page:"",total:""},n.historyTab={page:{}};var d=function(e){n.sceneHistory=e,n.historyTab="scene"===e?{pages:{currentPage:n.sceneCurrent.page,totalItems:n.sceneCurrent.total,pageSize:12}}:{pages:{currentPage:n.imageCurrent.page,totalItems:n.imageCurrent.total,pageSize:24}}};n.getMyScenes=function(e,t){if(n.sceneHistory=t,1!==n.currentUser.type){var i=0;if(2===n.currentUser.type||21===n.currentUser.type)if(n.currentUser.memberType)switch(n.currentUser.memberType){case 1:case 2:case 3:case 4:i=3;break;case 6:case 7:i=7;break;case 8:case 9:i=15}else i=3;else i=5===n.currentUser.type||51===n.currentUser.type?15:3;o.getMyHistoryScenes(e,n.pageSize,c).then(function(e){if(e.data.list&&e.data.list.length>0){n.myScenes=e.data.list;for(var a=0;a<n.myScenes.length;a++)n.myScenes[a].time=new Date(n.myScenes[a].delTime).getTime()+24*i*60*60*1e3,n.myScenes[a].history=Math.round((n.myScenes[a].time-(new Date).getTime())/1e3/60/60/24),n.myScenes[a].history||(n.myScenes[a].history="不足1");n.sceneCurrent.total=e.data.map.count,n.sceneCurrent.page=e.data.map.pageNo}else n.sceneTotalItems=0,n.sceneCurrent.total=0,n.sceneCurrent.page>1?n.getMyScenes(--n.sceneCurrent.page,"scene"):n.myScenes=[];d(t)})}},n.getMyScenes(1,"scene"),n.deleteScene=function(e,t){a.openConfirmDialog({msg:"确定彻底删除此场景?"},function(){r.deleteSceneById(e,t).then(function(){n.getMyScenes(n.historyTab.pages.currentPage,"scene")})})},n.revoke=function(e){r.revoke(e).then(function(){l.clear("sceneList"),n.getMyScenes(n.historyTab.pages.currentPage,"scene")})},n.$on("images.update",function(e,t,i){var a,s=3;-1!==[2,21].indexOf(n.currentUser.type)&&-1!==[6,7,8,9].indexOf(n.currentUser.memberType)&&(a=n.currentUser.memberType,s=6===a||7===a?7:15),n.images=t.list;for(var o=0;o<n.images.length;o++)n.images[o].time=new Date(n.images[o].delTime).getTime()+24*s*60*60*1e3,n.images[o].history=Math.round((n.images[o].time-(new Date).getTime())/1e3/60/60/24);n.imageCurrent.total=t.map.count,n.imageCurrent.page=t.map.pageNo,d(i)}),n.getImages=function(e,i){n.sceneHistory=i,s.userRecycle(e,24).success(function(e){e.success?t.$broadcast("images.update",e,i):alert(e.msg)}).error(function(){alert("网络连接超时，请稍后重试")})},n.$on("file.delete",function(){n.getImages(n.historyTab.pages.currentPage,"image")}),n.deleteImg=function(e,t){a.openConfirmDialog({msg:"确定彻底删除此图片?"},function(){n.deleteFile(e,t)})},n.deleteFile=function(e,n){s.deleteFile1(e,n).success(function(e){e.success?t.$broadcast("file.delete"):alert(e.msg)}).error(function(){alert("网络连接超时，请稍后重试")})},n.imageRevoke=function(e){s.fileRevoke(e).success(function(e){e.success?(n.getImages(n.historyTab.pages.currentPage,"image"),l.clear("fileService")):alert(e.msg)}).error(function(){alert("网络连接超时，请稍后重试")})},n.pageChanged=function(e){return 1>e||e>n.historyTab.pages.totalItems/10+1?void alert("此页超出范围"):void("scene"===n.sceneHistory?n.getMyScenes(e,"scene"):n.getImages(e,"image"))}}]),angular.module("usercenter.transfer",["services.usercenter"]),angular.module("usercenter.transfer").controller("UsercentertransferCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","username",function(e,t,n,i,a,s,o,r,l,c){t.userXd={toUser:"",xdCount:""},t.getUserXd=function(){a.getUserXd().then(function(e){e.data.success&&(t.xdCount=e.data.obj)})},t.getUserXd(),t.checkEmailFormat=function(e){return e.toUser?e.toUser===c?(t.mailFormatErr="不能把秀点转送给自己",$(".username").addClass("error"),!1):(t.mailFormatErr="",!0):(t.mailFormatErr="账号不能为空",$(".username").focus(),!1)},t.checkXdFormat=function(e){return/^\+?[1-9][0-9]*$/.test(e.xdCount)?t.userXd.xdCount>t.xdCount?(t.xdFormatErr="秀点不足",!1):(t.xdFormatErr="",!0):(t.xdFormatErr="正确填写秀点数目",!1)};var d=!0;t.confirm=function(){t.checkEmailFormat(t.userXd)&&t.checkXdFormat(t.userXd)&&d&&(d=!1,a.getgiveXd(t.userXd).then(function(e){200===e.data.code?(d=!0,t.$close()):1003===e.data.code?t.mailFormatErr=e.data.msg:1010===e.data.code&&(t.xdFormatErr=e.data.msg)}))},t.cancel=function(){t.$close()}}]),function(){angular.module("userCenter.userGuide",[]).controller("userCenterGuideCtrl",["$rootScope","$scope","security","$routeParams","$location","$timeout",function(e,t,n,i,a,s){function o(e,n){var i=sessionStorage.getItem(d.id);e&&e[d.id]?e[d.id+"_isShow_"+d.type]?t.isFirstLogin=!1:(i||(t.isCompanyVip=n,t.isFirstLogin=!0,sessionStorage.setItem(d.id,!0)),n&&setTimeout(function(){t.isShow()},100)):(t.isFirstLogin=!0,t.isCompanyVip=n,c=c||{},c[d.id]=d.type,c[d.id+"_isShow_"+d.type]=2===d.type,l(p,c),sessionStorage.setItem(d.id,!0))}function r(e){return window.localStorage?(c=JSON.parse(localStorage.getItem(e)))||!1:null}function l(e,t){return window.localStorage?void localStorage.setItem(p,JSON.stringify(t)):null}var c,d=n.currentUser,p="userCenterGuide",u=null,g=a.path();if(1===d.type&&g.indexOf("/account")>=0&&(u=r(p),o(u,!1),$("#companyVip").css("background","rgba(0,0,0,0.8")),2===d.type){u=r(p),o(u,!0);JSON.parse(sessionStorage.getItem("emailGuide"))&&$("#companyVip").css("background","rgba(0,0,0,0.8")}t.showNextGuide=function(){t.isFirstLogin=!1,$("#companyVip").css("background","rgba(0,0,0,0"),s(function(){e.$broadcast("companyVip")})},t.isShow=function(){c=r(p),c[d.id+"_isShow_"+d.type]=!c[d.id+"_isShow_"+d.type],localStorage.setItem(p,JSON.stringify(c))}}])}(),angular.module("usercenter",["usercenter.transfer","usercenter.upgrade","usercenter.request","services.usercenter","services.localizedMessages","security.service","app.directives.addelement","services.modal","usercenter.relAccount","usercenter.branch","services.i18nNotifications","security.thirdparty","usercenter.branch.reset","usercenter.checkMobil","usercenter.relRegisterAccount","userCenter.userGuide","app.usercenter.tab","usercenter.privilege"]),angular.module("usercenter").controller("UserCenterCtrl",["$rootScope","$scope","$window","$routeParams","usercenterService","security","$modal","ModalService","$location","$filter","fixnumFilter","i18nNotifications","thirdpartyService","$timeout",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g){t.PREFIX_FILE_HOST=PREFIX_FILE_HOST,t.PREFIX_SERVER_HOST=PREFIX_URL,t.PREFIX_CLIENT_HOST=PREFIX_HOST,t.isActive="usercenter",t.isVendorUser=s.isVendorUser(),t.editInfo={isEditable:!1},t.password={},t.pageSize=5,t.XdpageNo=1,t.XdtoPage="",t.pageNo=1,t.toPage=t.XdcurrentPage=1,t.branchToPage=1,t.viewControl={tab:i.id},t.showTab=function(e){l.path("/usercenter/"+e,!1),t.viewControl.tab=e},t.currentUser=s.currentUser,t.getUserInfo=function(){a.getUserInfo().then(function(e){t.userinfo=e.data.obj,t.master=angular.copy(t.userinfo),t.url="我做的企业秀，用的是易企秀，免费好用，你试试吧：\r\n"+PREFIX_HOST+"/#/home/register?u="+t.userinfo.id,t.userinfo.headImg&&t.userinfo.headImg.indexOf("http://")>=0&&(t.thirdHead=!0),/qq/gi.test(t.userinfo.relType)&&(t.qqRel=!0),/weixin/gi.test(t.userinfo.relType)&&(t.wxRel=!0),/weibo/gi.test(t.userinfo.relType)&&(t.wbRel=!0),l.search().bindemail&&t.relAccount()})},t.getUserInfo(),t.getUserXd(),t.editMessage=function(){var e,n,i;4===t.userinfo.type?(e="usercenter/console/serverinfo.tpl.html",n="ApplyCtrl",i="服务会员基本信息"):(e="usercenter/console/companyinfo.tpl.html",n="companyInfoCtrl"),o.open({windowClass:"six-contain",templateUrl:e,controller:n,scope:t,resolve:{userinfo:function(){return{nick:t.userinfo.nick,type:t.userinfo.type,id:t.userinfo.id,title:i,name:t.userinfo.name}}}}).result.then(function(e){4===t.userinfo.type?(t.applyInfo=e.status,t.userinfo.nick=e.applyInfoNew.nick):e&&(t.userinfo.nick=e.nick)})},t.copyCode=function(){var e,t;e=$(".invitation-contain span"),t=e.html(),clipboard.setData("text/plain",t)},t.tabid=i.id,t.customerUpload=function(){o.open({windowClass:"img_console console",templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:1}}}}).result.then(function(n){if(n.width/n.height==1){t.userinfo.headImg=n.data;var i={headImg:n.data,id:t.userinfo.id};return void a.saveUserInfo(i).then(function(i){i.data.success&&(t.editInfo.isEditable=!1,e.$broadcast("headImg.change",n.data))})}o.open({windowClass:"console seven-contain",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return{type:"square",properties:{src:n.data}}}}}).result.then(function(n){t.userinfo.headImg=n.src;var i={headImg:n.src,id:t.userinfo.id};a.saveUserInfo(i).then(function(n){n.data.success&&(t.editInfo.isEditable=!1,e.$broadcast("headImg.change",n.data.obj.headImg))})})})},t.domain=function(){o.open({windowClass:"six-contain",templateUrl:"usercenter/tab/domain.tpl.html",controller:"UserCenterCtrl",resolve:{param:function(){return{value:t.domainMess}}}}).result.then(function(){getDomainMess()})},t.applyShow=function(){o.open({windowClass:"six-contain",templateUrl:"usercenter/console/serverinfo.tpl.html",controller:"ApplyCtrl",backdrop:"static",invoice:!0,resolve:{userinfo:function(){return{status:t.applyInfo,id:t.userinfo.id,title:"申请成为秀客获取服务商账号",invoice:!0}}}}).result.then(function(e){t.applyInfo=e})},g(function(){(4===s.currentUser.type||1===s.currentUser.type)&&a.getUserStatus().then(function(e){200===e.data.code&&(t.applyInfo=e.data.map.status)})},400),t.know=function(){t.xiudian=!1},t.buyXd=function(){o.open({windowClass:"console",templateUrl:"?c=pay",controller:"BuyXdController",resolve:{getUserXd:function(){return function(){t.getUserXd(),e.$broadcast("buyXd")}}}})}}]).controller("BuyXdController",["$scope","$modal","usercenterService","ModalService","getUserXd",function(e,t,n,i,a){e.confirm=function(){n.xdBuyService(e,a,!1)},e.cancel=function(){e.$close()}}]),angular.module("app.directives.addelement",[]).directive("addElement",["$compile",function(e){return{restrict:"EA",link:function(t,n){var i=$("#emailAddress"),a=$("#emailAddress").size()+1;n.bind("click",function(){var n=angular.element('<div><input type="text" id="p_scnt" style="width:100%; height: 30px; margin-top: 15px;" ng-model="attrs.addElement" name="p_scnt_'+a+'" placeholder="Input Value" /></div>');i.append(n);var s=n.find("input");e(s)(t),a++})}}}]).directive("showIcon",["$compile",function(e){return{restrict:"EA",require:"ngModel",scope:{check:"&callbackFn"},link:function(t,n,i,a){var s,o,r=e('<a><span class = "glyphicon glyphicon-ok-circle" ng-show="enabled" style = "margin-top: 8px; color: #9ad64b; font-size: 15px;"></span></a>')(t);t.update=function(){n[0].blur(),t.check({arg1:{name:a.$name}})},n.bind("focus",function(){s=a.$viewValue,n.parent().after(r),t.enabled=!0,("email"===i.name||"mobile"===i.name||"tel"===i.name)&&(t.enabled=!1),t.$apply()}).bind("blur",function(){t.enabled=!1,o=a.$viewValue;var e=new RegExp(/(\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$/g);if("mobile"===i.name&&o&&!e.test(n.val()))return alert("手机号码格式错误"),$('input[name="mobile"]').addClass("error"),void $('input[name="mobile"]').change(function(){$(this).removeClass("error")});if("email"===i.name&&o){if(!new RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/g).test(n.val()))return alert("邮箱格式错误！"),$('input[name="email"]').addClass("error"),void $('input[name="email"]').change(function(){$(this).removeClass("error")})}(o||s)&&s!==o&&t.update(),t.$apply()})}}}]).directive("ngHover",function(){return{restrict:"EA",scope:{resource:"="},link:function(e,t){t.hover(function(){e.$apply(function(){e.resource.show=!0})},function(){e.$apply(function(){e.resource.show=!1})})}}}).directive("imgClick",function(){return{restrict:"EA",link:function(e,t){$(t).bind("click",function(){$(t).find("img").css("border","4px solid #F60"),$(t).siblings().find("img").css("border",0)})}}}).directive("customFocus",function(){return{restrict:"EA",link:function(e,t){$(t).siblings().bind("click",function(){t[0].focus()})}}}).directive("blurChildren",function(){return{restrict:"EA",link:function(e,t){$(t).on("click",function(e){(e.target===t[0]||$(e.target).hasClass("badge"))&&$(".blurClass").find("input:visible").blur()})}}}).directive("forbiddenClose",function(){return{restrict:"EAC",link:function(e,t){$(t).on("click",function(e){e.stopPropagation()})}}}).directive("customeImage",function(){return{restrict:"EA",link:function(e,t){$(t).hover(function(){$("<div><a></a></div>")})}}}).directive("slides",["configSerService",function(e){return{restrict:"EA",link:function(t,n){var i=$(n).find(".slides_container");e.getActivityBanner("home").then(function(e){for(var t=e.data.list,a=0;a<t.length;a++)i.append('<div class="slides-content" style="width: '+document.documentElement.clientWidth+'px;"><a target="_blank" href="'+t[a].url+'" data-banner="9201" data-bid="'+t[a].id+'"><img id="banner'+a+'" src="'+t[a].path+'" width="100%" height="100%" alt="Slide 1"></a></div>');document.getElementById("banner0")&&(document.getElementById("banner0").onload=function(){i.find(".slides_control").height($(".slides-content").height())},$(window).on("resize",function(){i.find(".slides-content").css("width",document.documentElement.clientWidth),i.find(".slides_control").height($(".slides-content").height())})),$(n).slides({preload:!0,play:5e3,pause:2500,hoverPause:!0})})}}}]).directive("slides3",["configSerService",function(e){return{restrict:"EA",link:function(t,n,i){var a=$(n).find(".slides_container");e.getActivityBanner(i.id,t.userType).then(function(e){for(var t=e.data.list,s=0;s<t.length;s++){var o=$('<a href="'+t[s].url+'" data-banner="2205" data-bid="'+t[s].id+'" style="display:block;" target="'+t[s].target+'" ></a>');o.append('<img src="'+t[s].path+'" width="'+i.width+'" height="'+i.height+'" alt="'+t[s].title+'" title="'+t[s].title+'" > '),a.append(o)}$(n).slides({preload:!0,play:3e3,pause:2500,hoverPause:!0})})}}}]).directive("addClass",function(){return{restrict:"EA",link:function(e,t){$(t).closest(".textbox-wrap").find("[autofocus]").focus(),$(t).on("blur",function(){$(t).closest(".textbox-wrap").removeClass("focused")}).on("focus",function(){$(t).closest(".textbox-wrap").addClass("focused")})}}}).directive("loadScript",["$http","$timeout","$rootScope",function(e){return{link:function(t,n){var i=function(){t.captchaLoaded=!0};t.$watch(function(){return n[0].getAttribute("src")},function(t){t&&e.jsonp(n[0].getAttribute("src")).success(i).error(i)}),t.$on("$destroy",function(){angular.element(".gt_widget").remove()})}}}]),angular.module("angularEffects",[]).directive("slideToggle",function(){return{restrict:"A",link:function(e,t,n){var i=document.querySelector(n.slideToggle);$(i).hide(),t.bind("click",function(){$(i).slideToggle()})}}}),angular.module("app.directives.autoclose",[]).directive("autoClose",function(){return{restrict:"EA",link:function(e){$(document).click(function(t){return t.target.className,!$(event.target).closest(".drop-area").length&&(e.showObj={showGroup:!1},void e.$apply())})}}}),angular.module("colorpicker.module",[]).factory("Helper",function(){return{closestSlider:function(e){return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector).bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var n=0,i=0,a=0,s=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft,i+=e.offsetTop,t||"BODY"!==e.tagName?(a+=e.scrollLeft,s+=e.scrollTop):(a+=document.documentElement.scrollLeft||e.scrollLeft,s+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:i,left:n,scrollX:a,scrollY:s}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,n,i){e/=255,t/=255,n/=255;var a,s,o,r;return o=Math.max(e,t,n),r=o-Math.min(e,t,n),a=0===r?null:o===e?(t-n)/r:o===t?(n-e)/r+2:(e-t)/r+4,a=(a+360)%6*60/360,s=0===r?0:r/o,{h:a||1,s:s,b:o,a:i||1}},setColor:function(t){t=t.toLowerCase();for(var n in e.stringParsers)if(e.stringParsers.hasOwnProperty(n)){var i=e.stringParsers[n],a=i.re.exec(t),s=a&&i.parse(a);if(s)return this.value=this.RGBtoHSB.apply(null,s),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var a,s,o,r,l;return e=e%360/60,l=n*t,r=l*(1-Math.abs(e%2-1)),a=s=o=n-l,e=~~e,a+=[l,r,0,0,r,l][e],s+=[r,l,l,r,0,0][e],o+=[0,0,r,l,l,r][e],{r:Math.round(255*a),g:Math.round(255*s),b:Math.round(255*o),a:i||this.value.a}},toHex:function(e,t,n,i){var a=this.toRGB(e,t,n,i);return"#"+(1<<24|parseInt(a.r,10)<<16|parseInt(a.g,10)<<8|parseInt(a.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},n={};return{getSlider:function(){return t},getLeftPosition:function(e){return Math.max(0,Math.min(t.maxLeft,t.left+((e.pageX||n.left)-n.left)))},getTopPosition:function(e){return Math.max(0,Math.min(t.maxTop,t.top+((e.pageY||n.top)-n.top)))},setSlider:function(i,a){var s=e.closestSlider(i.target),o=e.getOffset(s,a);t.knob=s.children[0].style,t.left=i.pageX-o.left-window.pageXOffset+o.scrollX,t.top=i.pageY-o.top-window.pageYOffset+o.scrollY,n={left:i.pageX,top:i.pageY}},setSaturation:function(e,n){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,n)},setHue:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,n)},setAlpha:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,n)},setKnob:function(e,n){t.knob.top=e+"px",t.knob.left=n+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper","editService",function(e,t,n,i,a,s){return{scope:{disable:"@",y:"@"},require:"?ngModel",restrict:"A",link:function(s,o,r,l){var c,d={x:parseInt(r.x,10)||0,y:parseInt(s.y,10)||0},p=r.colorpicker?r.colorpicker:"hex",u=angular.isDefined(r.colorpickerPosition)?r.colorpickerPosition:"bottom",g=!!angular.isDefined(r.colorpickerInline)&&r.colorpickerInline,m=!!angular.isDefined(r.colorpickerFixedPosition)&&r.colorpickerFixedPosition,h=angular.isDefined(r.colorpickerParent)?o.parent():angular.element(document.body),f=!!angular.isDefined(r.colorpickerWithInput)&&r.colorpickerWithInput,v=f?'<input type="text" name="colorpicker-input">':"",b=g?"":'<button type="button" class="close close-colorpicker">&times;</button>',y='<div class="colorpicker dropdown" ng-click="$event.stopPropagation();"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+v+b+"</div></div>",w=angular.element(y),x=n,S=w.find("colorpicker-hue"),T=w.find("colorpicker-saturation"),C=w.find("colorpicker-preview"),k=w.find("i");if(t(w)(s),s.disable&&s.$watch("disable",function(e,t){e!==t&&"false"===e&&z()}),s.$watch("y",function(e,t){e&&e!==t&&(d.y=parseInt(e,10))}),f){var E=w.find("input");E.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(e){var t=this.value;o.val(t),l&&s.$apply(l.$setViewValue(t)),e.stopPropagation(),e.preventDefault()}),o.on("keyup",function(){E.val(o.val())})}var P=function(){e.on("mousemove",_),e.on("mouseup",L)};"rgba"===p&&(w.addClass("alpha"),c=w.find("colorpicker-alpha"),c.on("click",function(e){i.setAlpha(e,m),_(e)}).on("mousedown",function(e){i.setAlpha(e,m),P()})),S.on("click",function(e){i.setHue(e,m),_(e)}).on("mousedown",function(e){i.setHue(e,m),P()}),T.on("click",function(e){i.setSaturation(e,m),_(e)}).on("mousedown",function(e){i.setSaturation(e,m),P()}),m&&w.addClass("colorpicker-fixed-position"),w.addClass("colorpicker-position-"+u),"true"===g&&w.addClass("colorpicker-inline"),h.append(w),l&&(l.$render=function(){o.val(l.$viewValue)},s.$watch(r.ngModel,function(){R()})),o.on("$destroy",function(){w.remove()});var I=function(){try{C.css("backgroundColor",x[p]())}catch(e){C.css("backgroundColor",x.toHex())}T.css("backgroundColor",x.toHex(x.value.h,1,1,1)),"rgba"===p&&(c.css.backgroundColor=x.toHex())},_=function(e){var t=i.getLeftPosition(e),n=i.getTopPosition(e),a=i.getSlider();i.setKnob(n,t),a.callLeft&&x[a.callLeft].call(x,t/100),a.callTop&&x[a.callTop].call(x,n/100),I();var r=x[p]();return o.val(r),l&&s.$apply(l.$setViewValue(r)),f&&E.val(r),!1},L=function(){e.off("mousemove",_),e.off("mouseup",L)},R=function(){x.setColor(o.val()),k.eq(0).css({left:100*x.value.s+"px",top:100-100*x.value.b+"px"}),k.eq(1).css("top",100*(1-x.value.h)+"px"),k.eq(2).css("top",100*(1-x.value.a)+"px"),I()},M=function(){var e,t=a.getOffset(o[0]);return angular.isDefined(r.colorpickerParent)&&(t.left=0,t.top=0),"top"===u?e={top:t.top-147+d.y,left:t.left+d.x}:"right"===u?e={top:t.top+d.y,left:t.left+126+d.x}:"bottom"===u?(e={top:t.top+o[0].offsetHeight+2+d.y,left:t.left+d.x},"grid.color"===r.ngModel&&(e.top=$(o[0]).offset().top+30,e.left=$(o[0]).offset().left)):"left"===u?e={top:t.top+d.y,left:t.left-150+d.x}:"sceneToobar"===u&&(e={top:t.top+d.y-110,left:t.left-150+d.x+40}),{top:e.top+"px",left:e.left+"px"}},q=function(){z()};!1===g?o.on("click",function(){R(),w.addClass("colorpicker-visible").css(M()),e.on("mousedown",q)}):(R(),w.addClass("colorpicker-visible").css(M())),w.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()});var A=function(e){l&&s.$emit(e,{name:r.ngModel,value:l.$modelValue})},z=function(){w.hasClass("colorpicker-visible")&&(w.removeClass("colorpicker-visible"),A("colorpicker-closed"),e.off("mousedown",q))};w.find("button").on("click",function(){z()})}}}]),angular.module("app.directives.rightclick",[]).directive("rightClick",["$compile",function(e){return{restrict:"EA",link:function(t,n){var i;$(n).on("contextmenu",function(a){if(a.preventDefault(),i&&i[0]&&i.remove(),""+t.categoryId=="0"){i=$('<ul class="right-menu dropdown-menu"></ul>'),i.appendTo($(n)),i.css({left:a.pageX-$(n).offset().left,top:a.pageY-$(n).offset().top}).show();for(var s in t.myTags){var o='<li class="tag_list" ng-class="{selected: dropTagIndex == '+s+'}" ng-click="selectTag('+t.myTags[s].id+","+s+')">'+t.myTags[s].name+"</li>",r=e(o)(t);i.append(r)}var l=e('<li class="tag_list add_cate clearfix" style="border-top:1px solid #ccc;margin-bottom:0px;" ng-click="createCategory()"><em>+</em><span>创建分类</span></li>')(t);i.append(l);var c=e('<li class="btn-main" style="width:100%; padding:0px; border: 0;margin:0px;height:25px; line-height:25px;"><a style="height:25px;line-height:25px;text-indent:0;color:#FFF;padding:0px;text-align:center;" ng-click="setCategory('+t.dropTagIndex+","+t.img.id+')">确定</a></li>')(t);i.append(c),$(c).on("click",function(){i.hide()}),$(document).mousemove(function(e){(e.pageX<i.offset().left-20||e.pageX>i.offset().left+i.width()+20||e.pageY<i.offset().top-20||e.pageY>i.offset().top+i.height()+20)&&(i.hide(),$(this).unbind("mousemove"))})}})}}}]),angular.module("app.directives.copyButton",[]).directive("copyButton",[function(){return{restrict:"EA",scope:{url:"@"},link:function(e,t,n){var i=new ZeroClipboard(t);i.on("copy",function(e){e.clipboardData.setData("text/plain",n.url.replace(PREFIX_HOST,PREFIX_HOST_ARRAY[Math.floor(12*Math.random())%12]))}),i.on("ready",function(){i.on("aftercopy",function(){alert("复制成功")})})}}}]),angular.module("app.directives.customer",[]).directive("forbiddenListClose",function(){return{restrict:"A",link:function(e,t){$(t).click(function(){return!1})}}}),angular.module("app.directives.dataDraggable",[]).directive("itemDraggable",function(){return{restrict:"A",link:function(e,t){$(t).draggable({zIndex:2700,scroll:!1,iframeFix:!1,revert:!1,helper:"clone"})}}}).directive("itemDroppable",function(){return{restrict:"A",link:function(e,t){$(t).droppable({hoverClass:"active",out:function(){},drop:function(t,n){delete e.$parent.associateData[n.draggable.parent().attr("item-id")],e.$parent.associateData[$(t.target).attr("item-id")]=n.draggable.attr("item-id");var i=$(t.target).find(".list_darggable");i.length>0&&$(".item-remove-droppable").append(i),n.draggable.css({left:0,top:0}).prependTo(this)}})}}}).directive("itemRemoveDroppable",function(){return{restrict:"A",link:function(e,t){$(t).droppable({hoverClass:"active",drop:function(t,n){$(n.draggable).parents(".list-attribute").length>0&&delete e.associateData[$(n.draggable).parents(".list-attribute").attr("item-id")],n.draggable.css({left:0,top:0}).appendTo(this)}})}}}),angular.module("app.directives.disableKeydown",[]).directive("disableEdit",function(){function e(e,t){var n={37:"arrow-left",38:"arrow-up",39:"arrow-right",40:"arrow-down",9:"tab",27:"esc"};t.keydown(function(e){n[e.which]||e.preventDefault()})}return{restrice:"EA",link:e}}),angular.module("scene.create.hoverElement",[]).directive("hoverElement",[function(){function e(e,n){var i,a=$('<div class="blink-element"></div>'),s=$("#inside_"+e.id);""+s.attr("ctype")=="4"?$("#tip_"+e.id).html("图片"):""+s.attr("ctype")=="2"?$("#tip_"+e.id).html("文字"):""+s.attr("ctype")=="3"?$("#tip_"+e.id).html("随机图片"):""+s.attr("ctype")=="h"?$("#tip_"+e.id).html("形状"):""+s.attr("ctype")=="x"&&$("#tip_"+e.id).html("秀字体"),n.hover(function(){t=$("#inside_"+e.id),t.find(".blink-element").length||a.appendTo(t),i=setInterval(function(){a.toggleClass("red-border")},1e3)},function(){a.remove(),clearInterval(i)})}var t;return{restrict:"EA",scope:{id:"="},link:e}}]),angular.module("common.directives.inputColor",[]).controller("inputColorCtrl",["$scope","$attrs",function(e,t){e.x=t.x||151,e.y=t.y||-2,e.colorMode=t.colorMode||"rgba"}]).directive("eqdInputColor",function(){return{restrict:"E",templateUrl:"directives/inputColor.tpl.html",replace:!0,controller:"inputColorCtrl",scope:{selectColor:"=",defaultColor:"="}}}),angular.module("app.directives.keymap",["services.scene","services.history","services.select"]).directive("eqxKeymap",["sceneService","historyService","selectService",function(e){return{restrict:"A",link:function(t){var n=$(document);t.$on("$destroy",function(){n.unbind("keydown")}),n.unbind("keydown").keydown(function(n){if((n.ctrlKey||n.metaKey)&&90===n.keyCode&&e.historyBack(),(n.ctrlKey||n.metaKey)&&89===n.keyCode&&e.historyForward(),(n.ctrlKey||n.metaKey)&&86===n.keyCode){if($("#btn-toolbar").length||$(".modal-dialog").length)return;e.getCopy()&&e.pasteElement()}if((n.ctrlKey||n.metaKey)&&67===n.keyCode){if($("#btn-toolbar").length||$(".modal-dialog").length)return;e.copyElement()}t.$apply()})}}}]),angular.module("app.directives.limitInput",[]).directive("limitInput",function(){return{require:"ngModel",link:function(e,t,n,i){"transform"===n.cssItem&&e.$on("updateTransform",function(t,n,a){a===e.elemDef.id&&(i.$setViewValue(parseInt(n,10)),i.$render())}),"borderRadius"===n.cssItem&&e.$on("updateMaxRadius",function(t,n){e.maxRadius=parseInt(Math.min($(n).outerWidth(),$(n).outerHeight())/2+10,10),e.maxRadius<e.model.borderRadius&&(i.$setViewValue(e.maxRadius),i.$render()),e.$apply()}),e.$watch(function(){return $(t).val()},function(e){Math.abs(e)>n.max&&(i.$setViewValue(n.max),i.$render()),Math.abs(e)<n.min&&(i.$setViewValue(n.min),i.$render())})}}}),angular.module("app.directives.lineChart",[]).directive("lineChart",function(){return{restrict:"EA",link:function(e,t,n){var i,a;e.$watch(function(){return n.data},function(){n.data&&(i=JSON.parse(n.data)),a?(a.destroy(),a=new Chart(t[0].getContext("2d")).Line(i,{scaleFontColor:"#fff"})):a=new Chart(t[0].getContext("2d")).Line(i,{scaleFontColor:"#fff"})})}}}),angular.module("app.directives.loading",[]).directive("loginLoading",function(){return{restrict:"EA",link:function(e,t){e.$on("loginLoading",function(){$('<div class="homeMask" style="position: absolute;width: 100%;top:0;bottom:0;background-color:#ccc;opacity:0.8;">正在跳转，请稍后...</div>').appendTo($(t))})}}}),angular.module("app.directives.comp.editor",[]).directive("mapEditor",function(){return{restrict:"AE",templateUrl:"directives/mapeditor.tpl.html",link:function(e){var t=new BMap.Map("l-map");t.centerAndZoom(new BMap.Point(116.404,39.915),15);var n={onSearchComplete:function(e){if(i.getStatus()===BMAP_STATUS_SUCCESS){for(var t=[],n=0;n<e.getCurrentNumPois();n++)t.push(e.getPoi(n).title+", "+e.getPoi(n).address);document.getElementById("r-result").innerHTML=t.join("<br/>")}}},i=new BMap.LocalSearch(t,n);e.searchAddress=function(){i.search(e.address)}}}}),angular.module("app.directives.notification",[]).directive("notificationFadeout",["i18nNotifications",function(e){return{restrict:"EA",link:function(t,n){$(n).fadeOut(4e3,function(){e.remove(t.notification)})}}}]),angular.module("app.directives.pageTplTypes",[]).directive("pageTplTypes",["pageTplService",function(e){return{restrict:"EA",replace:!0,templateUrl:"directives/page-tpl-types.tpl.html",link:function(t){e.getPageTplTypes().then(function(e){e.data.list&&e.data.list.length>0?t.pageTplTypes=e.data.list:t.pageTplTypes=[]})}}}]),angular.module("app.directives.pieChart",[]).directive("pieChart",function(){return{restrict:"EA",link:function(e,t,n){var i,a;e.$watch(function(){return n.data},function(){n.data&&(a=JSON.parse(n.data)),i?(i.destroy(),i=new Chart(t[0].getContext("2d")).Pie(a)):i=new Chart(t[0].getContext("2d")).Pie(a)})}}}),angular.module("app.directives.qrcode",[]).directive("qrCode",function(){return{restrict:"A",scope:{qrUrl:"@"},link:function(e,t,n){var i=new RegExp("^"+PREFIX_HOST+"/v/");e.$watch("qrUrl",function(e){$("canvas",t).length>0&&$("canvas",t).remove(),e&&(i.test(e)&&(e=e.replace(PREFIX_HOST,PREFIX_HOST_ARRAY[Math.floor(12*Math.random())%12])),$(t).qrcode({render:"canvas",width:180,height:180,text:e+(/\?/.test(e)?"&":"?")+"eqrcode=1"}))})}}}).directive("qrCodeSize",function(){return{restrict:"A",scope:{qrUrl:"@"},link:function(e,t,n){var i=parseInt(n.qrCodeSize,10);e.$watch("qrUrl",function(e){$("canvas",t).length>0&&$("canvas",t).remove(),e&&$(t).qrcode({render:"canvas",width:i,height:i,text:e+(/\?/.test(e)?"&":"?")+"eqrcode=1"})})}}}).directive("downloadCanvas",function(){return{restrict:"EA",link:function(e,t){e.$on("download.canvas",function(n,i){var a;$.each($(t).find(".qr-size"),function(e,t){$(t).attr("qr-code-size")===i&&(a=$(t).find("canvas").get(0))}),i===$(t).find(".qr-size").attr("qrCodeSize")&&console.log(i);var s=document.createElement("a"),o=document.createEvent("MouseEvents"),r=a.toDataURL("image/png");r=r.replace(function(e){return e=e.toLowerCase().replace(/jpg/i,"jpeg"),"image/"+e.match(/png|jpeg|bmp|gif/)[0]}("png"),"image/octet-stream"),o.initEvent("click",!0,!0),s.download=e.scene.code+".png",s.href=r,s.dispatchEvent(o)})}}}),angular.module("app.directives.responsiveImage",[]).directive("responsiveImage",function(){return{restrict:"EA",scope:{file:"="},link:function(e,t){""+e.fileType!="0"&&(t.find("img").length?$element=t.find("img"):"IMG"===t.get(0).nodeName.toUpperCase()&&($element=t),$element.bind("load",function(){$(this).removeAttr("style");var t=$(this).parent("li").width(),n=$(this).parent("li").height();e.file&&(e.file.shape={width:$(this).width(),height:$(this).height()}),this.width<=t&&this.height<=n?(this.style.top="50%",this.style.marginTop="-"+this.height/2+"px",this.style.left="50%",this.style.marginLeft="-"+this.width/2+"px"):this.width>this.height?(this.style.width=t+"px",this.height=this.height*t/this.width,this.style.top="50%",this.style.marginTop="-"+this.height/2+"px"):(this.style.height=n+"px",this.width=this.width*n/this.height,this.style.left="50%",this.style.marginLeft="-"+this.width/2+"px")}))}}}),angular.module("common.directives.scroll",[]).directive("eqdScroll",function(){var e={mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,click:!0,bounce:!1};return function(t,n,i){n.css({position:"relative",overflow:"hidden"}),delete e.disableMouse,delete e.preventDefaultException,i.preventException&&(e.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|DIV|SPAN|EM|A|LI|B|IMG)$/}),"true"===i.disableMouse&&(e.disableMouse=!0);var a,s=new IScroll(n.get(0),e),o=t.$watch(function(){clearTimeout(a),a=setTimeout(function(){s.refresh()},100)});i.refresh&&(s.on("scrollStart",function(){n.children().on("mousewheel",function(){s.y<=s.maxScrollY+200&&t.$eval(i.refresh)})}),s.on("scrollEnd",function(){n.children().unbind("mousewheel")})),i.changePos&&s.on("scrollEnd",function(){t.pos={y:s.y},t.$eval(i.changePos)}),n.on("$destroy",function(){s.destroy(),s=null,o(),clearTimeout(a)}),t.$on("scroll.refresh."+i.scroll,function(){a=setTimeout(function(){s.refresh()},100)}),t.$on("scroll.scrollTo",function(e,t,n){s.scrollTo(t,n)})}}),angular.module("common.directives.dropDown",[]).directive("eqdSelect",["$rootScope",function(e){function t(t,n){function i(){s.unbind("click",i),o.removeClass("visible")}function a(e){index=e.index(),t.current=t.list[index],o.removeClass("visible")}var s=(tabletCheck(),$(document)),o=n.find(".eqc-drop-down-list"),r=o.find(".iScrollIndicator");n.on("$destroy",function(){s.unbind("click",i)}),t.showList=function(n){return $(".eqc-drop-down-list").removeClass("visible"),n.stopPropagation(),o.hasClass("visible")?void i():(e.$broadcast("iscroll.refresh."+t.scrollType),$(".eqc-drop-down-list").removeClass("visible"),o.addClass("visible"),s.click(i),void r.click(function(e){e.stopPropagation()}))},t.selectItem=function(e){e.stopPropagation();var t=e.target,n=t.tagName.toLowerCase(),i=$(t);"li"===n?a(i):"div"===n&&(i=i.closest("li"),a(i))}}return{restrict:"E",replace:!0,templateUrl:"directives/select.tpl.html",scope:{list:"=",current:"=",scrollType:"@",fontFamily:"=",isBorder:"@",x:"@"},link:t}}]).controller("SimpleSelectController",["$scope","$element","$attrs","$parse","$timeout",function(e,t,n,i,a){var s=this;e.list=[],e.current=null,s.addSelectChoice=function(t){e.list.push(t)},s.removeSelectChoice=function(t){var n=e.list.indexOf(t);-1!==n&&e.list.splice(n,1)};var o;s.setObjectConfig=function(e){o===undefined&&(o=e)},e.setDefaultSelectedValue=function(){angular.forEach(e.list,function(t){t.value==e.model&&(e.current=t)})};var r=e.$watchCollection("list",function(){e.setDefaultSelectedValue()}),l=e.$watch("current",function(t){t&&e.model!=t.value&&(e.model=t.value,a(function(){n.change&&e.$parent.$eval(n.change)},100))}),c=e.$watch("model",function(t){t&&e.setDefaultSelectedValue()});e.$on("$destroy",function(){r(),l(),c()}),e.$watch("model",function(t,n){t!=n&&angular.forEach(e.list,function(t){t.value==e.model&&(e.current=t)})})}]).directive("eqxSelect",["$compile",function(e){return{restrict:"E",scope:{model:"="},controller:"SimpleSelectController",compile:function(t,n){var i=n.class;return t.removeClass(i),function(t,n){n.append(e(angular.element('<eqd-select list="list" class="select-contain" current="current"></eqd-select>').addClass(i))(t))}}}}]).directive("eqxSelectOption",["$parse","$interpolate",function(e,t){return{restrict:"E",require:"^eqxSelect",compile:function(n,i){var a,s;return i.ngRepeat&&(a=e(i.value),s=t(n.html())),function(e,t,n,i){t.css("display","none");var o;if(a){var r=a(e);i.setObjectConfig(angular.isObject(r)),o={name:s(e),value:r}}else o={name:t.html(),value:e.$parent.$eval(n.value)};i.addSelectChoice(o),t.on("$destroy",function(){i.removeSelectChoice(o)})}}}}]),angular.module("app.directives.numChangeAnim",[]).directive("numChangeAnim",["$filter",function(e){return{restrict:"A",scope:{content:"@"},link:function(t,n){function i(e,t){return Math.floor(e+Math.random()*(t-e))}function a(e,t){e=e>0?e:1;for(var n=Math.floor(Math.log10(e)),a=Math.floor(e/Math.pow(10,n)),s=0,o=0;10>o;o++)!function(o){setTimeout(function(){var r=n>o?o:n,l=Math.pow(10,r)*a;l=l.toString().length==e.toString().length?e:l,s=i(s,l),t(s,9==o)},(o*o+o+2)/2*30)}(o)}function s(t,n){$(t).children("span").text(e("number")(n))}t.$watch("content",function(e){if(e){var t=parseInt(e,10);a(t,function(e,i){s(n,e),i&&(s(n,t),$(n).addClass("heartbeat").css({"animation-duration":"1s"}))})}})}}}]),angular.module("app.directives.style",[]).directive("panelDraggable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable(),$(window).bind("resize",function(){$(t).css({left:$(document).width()-444,top:50})})}}}),function(){var e={};angular.forEach(["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke"],function(t){e[t]=["$rootScope","$location","$interpolate","$sniffer","urlResolve","computeSVGAttrValue","svgAttrExpressions",function(e,n,i,a,s,o,r){return{restrict:"A",link:function(i,s,l){function c(){var e=o(d);e&&l[t]!==e&&l.$set(t,e)}var d;r.SVG_ELEMENT.test(s[0]&&s[0].toString())&&n.$$html5&&a.history&&(d=l[t],l.$observe(t,c),e.$on("$locationChangeSuccess",c))}}}]}),angular.module("ngSVGAttributes",[]).factory("urlResolve",[function(){var e=document.createElement("a");return function(t){return e.setAttribute("href",t),e}}]).value("svgAttrExpressions",{FUNC_URI:/^url\((.*)\)$/,SVG_ELEMENT:/SVG[a-zA-Z]*Element/,HASH_PART:/#.*/}).factory("computeSVGAttrValue",["$location","$sniffer","svgAttrExpressions","urlResolve",function(e,t,n,i){return function(t){var a,s;return(a=n.FUNC_URI.exec(t))&&(s=0===a[1].indexOf("#")?e.absUrl().replace(n.HASH_PART,"")+a[1]:i(a[1])),s?"url("+s+")":null}}]).directive(e).directive("use",["$rootScope",function(e){return{restrict:"E",link:function(t,n){function i(){var e=n.attr("xlink:href"),t=e.split("#")[1];t&&n.attr("xlink:href",document.location+"#"+t)}i(),e.$on("$locationChangeSuccess",i)}}}])}(),angular.module("app.directives.switchInput",[]).directive("switchInput",function(){function e(e,t){t.hover(function(){e.obj.showinput=!0;var n=t.find("input");setTimeout(function(){n.focus(),n.select()},0),e.$apply()},function(){e.obj.showinput=!1,e.$apply()})}return{restrict:"EA",scope:{obj:"="},link:e}}),angular.module("app.directives.component",["services.scene","services.select","scene.create.console.pictures","scene.edit.trigger"]).directive("compDraggable",function(){return{restrict:"A",link:function(e,t,n){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable({revert:!1,stack:".comp-draggable",helper:"panel"==n.compDraggable||"page"==n.compDraggable?"clone":"",appendTo:"parent",containment:"panel"==n.compDraggable||"page"==n.compDraggable?"":"parent",zIndex:1049,opacity:.35,stop:function(e){$(e.toElement).one("click",function(e){e.stopImmediatePropagation()})}})}}}).directive("compDroppable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),t.on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null});var n=t.height(),i=n/2-260+50,a=t.width(),s=a/2-187+288+27;$(t).droppable({accept:".comp-draggable",hoverClass:"drop-hover",drop:function(t,n){if(3!=n.draggable.attr("ctype")&&"trigger"!=n.draggable.attr("ctype")){var a={left:n.offset.left-s+"px",top:n.offset.top-i+"px"};"panel"==n.draggable.attr("comp-draggable")?e.createComp(n.draggable.attr("ctype"),n.draggable.attr("font"),a):e.updateCompPosition(n.draggable.attr("id"),null,a)}else"trigger"==n.draggable.attr("ctype")?e.openTriggerMode():e.createComp(3)}})}}}).directive("compSortable",function(){return{restrict:"A",link:function(e,t){$(t).sortable({axis:"y",update:function(){}})}}}).directive("compResizable",function(){return{restrict:"A",link:function(e,t){$(t).resizable({autoHide:!1,containment:"parent",stop:function(t,n){if("4"==$(n.element).attr("ctype").charAt(0)||"n"==$(n.element).attr("ctype").charAt(0)){var i={width:n.size.width,height:n.size.height,imgStyle:{width:n.element.find("img").width(),height:n.element.find("img").height(),marginTop:n.element.find("img").css("marginTop"),marginLeft:n.element.find("img").css("marginLeft")}};e.updateCompSize(n.element.attr("id"),i)}else e.updateCompSize(n.element.attr("id"),n.size);$(t.toElement).one("click",function(e){e.stopImmediatePropagation()})},resize:function(e,n){var i=$(t).find("img").width()/$(t).find("img").height();if("4"==$(n.element).attr("ctype").charAt(0)||"n"==$(n.element).attr("ctype").charAt(0)){var a=n.size.width/n.size.height,s=n.element.find("img");i>=a?(s.outerHeight(n.size.height),s.outerWidth(n.size.height*i),s.css("marginLeft",-(s.outerWidth()-n.size.width)/2),s.css("marginTop",0)):(s.outerWidth(n.size.width),s.outerHeight(n.size.width/i),s.css("marginTop",-(s.outerHeight()-n.size.height)/2),s.css("marginLeft",0))}else n.element.find(".element").outerWidth(n.size.width),n.element.find(".element").outerHeight(n.size.height)}})}}}).directive("photoDraggable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),t.on("$destroy",function(){$(t).draggable(),$(t).draggable("destroy"),t=null}),$(t).draggable({revert:!1,helper:"clone",appendTo:".img_list",zIndex:1049,opacity:.35,stop:function(e){$(e.toElement).one("click",function(e){e.stopImmediatePropagation()})}})}}}).directive("cropDroppable",function(){return{restrict:"A",link:function(e,t){e.$on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),t.on("$destroy",function(){$(t).droppable(),$(t).droppable("destroy"),t=null}),$(t).droppable({accept:"li",hoverClass:"drop-hover",drop:function(t,n){e.preSelectImage(n.draggable.attr("photo-draggable"))}})}}}).service("Point",function(){function e(e,t){this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e.prototype.middle=function(t){return new e((this.x+t.x)/2,(this.y+t.y)/2)},e.prototype.detectionPointA=function(e){this.x=e.x<this.x?e.x:this.x,this.y=e.y<this.y?e.y:this.y},e.prototype.detectionPointB=function(e){this.x=e.x>this.x?e.x:this.x,this.y=e.y>this.y?e.y:this.y},e}).factory("DetectionBox",["Point","editService",function(e,t){function n(e){this.element=e,this.init()}return n.prototype.init=function(){var n=this.element.position(),i=$("div[edit-workspace]").attr("scale");this.startPointA=new e(Math.ceil(n.left),Math.ceil(n.top)),this.originPointA=new e(Math.ceil(n.left/i),Math.ceil(n.top/i));var a=this.element.get(0);this.startPosition={top:parseInt(a.style.top,10)||0,left:parseInt(a.style.left,10)||0};var s=/[0-9]*[.]*[0-9]*deg/.exec(a.style.transform||a.style.webkitTransform||a.style.mozTransform||a.style.msTransform||a.style.oTransform||""),o=s&&s.length?s[0]:"0";this.angle=parseInt(o,10),this.radian=2*this.angle*Math.PI/360;var r=this.element.width()*t.currentScale,l=this.element.height()*t.currentScale;this.elementWidth=r,this.elementHeight=l,this.left=this.startPosition.left,this.top=this.startPosition.top,this.ratio=r/l,this.width=Math.abs(r*Math.cos(this.radian))+Math.abs(l*Math.sin(this.radian)),this.height=Math.abs(r*Math.sin(this.radian))+Math.abs(l*Math.cos(this.radian)),this.startPointB=this.startPointA.add(this.width,this.height),this.originPointB=this.originPointA.add(this.width/t.currentScale,this.height/t.currentScale),this.startPointO=this.startPointA.middle(this.startPointB)},n.prototype.getID=function(){return this.element.attr("id")},n.prototype.measure=function(){return{x:this.startPointA.x,y:this.startPointA.y,width:this.width,height:this.height}},n}]).service("panStateTracker",function(){var e={},t={};return e.clear=function(){t={}},e.register=function(e){t[e.attr("id")]=e},e.isElementHasBeenRegisted=function(e){return!!t[e.attr("id")]},e.remove=function(e){delete t[e.attr("id")]},e.forEach=function(e){angular.forEach(t,e)},e}).controller("MouseCompSelectController",["$scope","$element","Point","DetectionBox","panStateTracker","selectService","editService",function(e,t,n,i,a,s,o){function r(e,i,a,s,o){t.get(0).style.position="relative",this.startPositionX=e,this.startPositionY=i,this.width=a,this.height=s,this.selectAreaPointA=new n(e,i),this.selectAreaPointB=new n(e+a,i+s),this.startFlag=o,this.selectAreaTemplate=t.find(".edit-area-select-container"),this.selectAreaTemplate.length||(this.selectAreaTemplate=$('<div class="edit-area-select-container"></div>'),t.append(this.selectAreaTemplate));var r=t.offset(),l=$("#nr").offset();this.offset=r,this.containerOffset=l,$(window).resize(function(){angular.extend(r,t.offset()),angular.extend(l,$("#nr").offset())})}t.css("user-select","none");var l=this;l.allComponents=[],l.selectedComponents=[],r.prototype.selectStart=function(e,n){angular.extend(this.offset,t.offset()),angular.extend(this.containerOffset,$("#nr").offset()),l.allComponents=[],a.forEach(function(e){l.allComponents.push(e)}),this.startPositionX=e,this.startPositionY=n,this.startFlag=!0,this.updateSelectedElements()},r.prototype.isSelectStarted=function(){return this.startFlag},r.prototype.selectMove=function(e){this.width=e.clientX-this.startPositionX,this.height=e.clientY-this.startPositionY,this.updateCurrentPosition(),this.width>4&&this.height>4&&(this.updateSelectArea(),this.updateSelectedElements())},r.prototype.selectEnd=function(){this.startPositionX=this.startPositionY=this.width=this.height=0,this.startFlag=!1,this.updateCurrentPosition(),this.updateSelectArea()},r.prototype.getLocalPoint=function(e){return new n(e.x-this.offset.left,e.y-this.offset.top)},r.prototype.updateSelectArea=function(){var e=this.getLocalPoint(this.selectAreaPointA);this.selectAreaTemplate.css("left",e.x),this.selectAreaTemplate.css("top",e.y),this.selectAreaTemplate.height(this.height),this.selectAreaTemplate.width(this.width)},r.prototype.updateCurrentPosition=function(){this.selectAreaPointA.x=this.width>0?this.startPositionX:this.width+this.startPositionX,this.selectAreaPointA.y=this.height>0?this.startPositionY:this.height+this.startPositionY,this.width=Math.abs(this.width),this.height=Math.abs(this.height),this.selectAreaPointB.x=this.selectAreaPointA.x+this.width,this.selectAreaPointB.y=this.selectAreaPointA.y+this.height},r.prototype.updateSelectedElements=function(){l.selectedComponents=[];var e=this,t=s.getElements();angular.forEach(l.allComponents,function(n){var i=n.attr("id").split("_")[1];return e.contains(n)?(n.children(".bar").show(),void(-1===t.indexOf(i)&&s.addElement(i))):(-1!==t.indexOf(i)&&s.deleteElement(i),void n.children(".bar").hide())})},r.prototype.contains=function(e){var t=new i(e),a=new n(this.containerOffset.left+t.startPointO.x*o.currentScale,this.containerOffset.top+t.startPointO.y*o.currentScale);return a.x>=this.selectAreaPointA.x&&a.x<=this.selectAreaPointB.x&&a.y>=this.selectAreaPointA.y&&a.y<=this.selectAreaPointB.y};var c=new r(0,0,0,0,!1);t.bind("mousedown",function(e){var t=$(e.target);$("#nr").find(".mask-trigger").length||t.hasClass("comp-resize")||t.parents("li.comp-resize").length||t.hasClass("ui-draggable")||t.parents(".ui-draggable").length||t.parents("#containment").length||t.parents(".create_left").length||($("body").css({"user-select":"none",cursor:"default"}),c.selectStart(e.clientX,e.clientY))}),t.bind("mousemove",function(e){c.isSelectStarted()&&c.selectMove(e)}),t.bind("mouseup",function(){c.isSelectStarted()&&($("body").css({"user-select":"initial",cursor:"default"}),c.selectEnd())})}]).directive("mouseCompSelect",[function(){return{restrict:"A",controller:"MouseCompSelectController"}}]).factory("editAreaBorderCollisionDetector",["DetectionBox","Point","editService",function(e,t,n){function i(){this.editAreaWidth=320,this.editAreaHeight=486,this.detectionBoxs=[]}function a(){this.editArea=new i}return i.prototype.initDetectBoxWithElements=function(t){this.detectionBoxs=[];var n=this;angular.forEach(t,function(t){n.detectionBoxs.push(new e(t))})},a.prototype.initWithElements=function(e){this.editArea.initDetectBoxWithElements(e),this.initBigDetectionBoxPoints()},a.prototype.initBigDetectionBoxPoints=function(){this.bigDetectionBoxPointA=new t(this.editArea.editAreaWidth,this.editArea.editAreaHeight),this.bigDetectionBoxPointB=new t(0,0),this.minimumWidth=this.editArea.editAreaWidth,this.minimumHeight=this.editArea.editAreaHeight;var e=this;angular.forEach(this.editArea.detectionBoxs,function(t){e.bigDetectionBoxPointA.detectionPointA(t.startPointA),e.bigDetectionBoxPointB.detectionPointB(t.startPointB),e.minimumWidth=t.elementWidth,e.minimumHeight=t.elementHeight});var n=(this.bigDetectionBoxPointA.x+this.bigDetectionBoxPointB.x)/2,i=(this.bigDetectionBoxPointA.y+this.bigDetectionBoxPointB.y)/2;this.bigDetectionBoxPointO=new t(n,i)},a.prototype.refreshBoxInfo=function(){angular.forEach(this.editArea.detectionBoxs,function(e){e.init()}),this.initBigDetectionBoxPoints()},a.prototype.translateIntoProperMoveDelta=function(e){return{x:e.deltaX/n.currentScale,y:e.deltaY/n.currentScale}},a.prototype.compDragMoveDelta=function(e){return this.translateIntoProperMoveDelta(e)},new a}]).controller("MultiCompDragController",["selectService","$scope","$element","editAreaBorderCollisionDetector","panStateTracker","gridGuide","$rootScope",function(e,t,n,i,a,s,o){a.clear();var r=this;r.selectedComponents=[],r.initCollisionDetectorWithElements=function(){r.selectedComponents=[];var t=$("#nr");angular.forEach(e.getElements(),function(e){r.selectedComponents.push(t.find("#inside_"+e))}),i.initWithElements(r.selectedComponents)},r.isKeyboard=!1,r.compDragStart=function(t){e.getElements().length&&(r.initCollisionDetectorWithElements(),s.guide.start({action:"move"}),r.isKeyboard=!!t,r.isKeyboard||angular.forEach(r.selectedComponents,function(e){e.css("opacity",.35)}))},r.compDragMove=function(t){if(e.getElements().length){var n=i.compDragMoveDelta({deltaX:t.deltaX,deltaY:t.deltaY});!r.isKeyboard&&s.guide.options.snap&&s.guide.enforceGuides(n),angular.forEach(i.editArea.detectionBoxs,function(e){var t="translate3d("+n.x+"px, "+n.y+"px, 0) rotateZ("+e.angle+"deg)";e.element.css("transform",t)}),s.guide.sync(n),o.$broadcast("boxOuter")}},r.compDragEnd=function(n){if(e.getElements().length){angular.forEach(r.selectedComponents,function(e){e.css("opacity",1)});var a=i.compDragMoveDelta({deltaX:n.deltaX,deltaY:n.deltaY});!r.isKeyboard&&s.guide.options.snap&&s.guide.enforceGuides(a);var l=i.editArea.detectionBoxs.length;angular.forEach(i.editArea.detectionBoxs,function(e,n){var i="translate3d(0, 0, 0) rotateZ("+e.angle+"deg)";e.element.css("transform",i);var s={top:e.startPosition.top+a.y,left:e.startPosition.left+a.x};e.element.css("top",s.top),e.element.css("left",s.left),t.updateCompPosition(e.element.attr("id"),s,l-1>n)}),s.guide.stop(),o.$broadcast("boxOuter")}},s.grid.init(n),s.guide.init(n)}]).directive("multiCompDrag",function(){return{restrict:"A",controller:"MultiCompDragController"}}).directive("compDrag",["panStateTracker","$rootScope",function(e){return{require:"^multiCompDrag",restrict:"A",link:function(t,n,i,a){if(!e.isElementHasBeenRegisted(n)){if(e.register(n),n.on("$destroy",function(){e.remove(n)}),n.find("img").length){var s=$('<div class="dragTemplate" style="position: absolute;left: 0;top: 0;right: 0;bottom: 0;background-color: #fff;opacity: 0;"></div>');s.bind("dblclick",function(){s.siblings(".element").trigger("dblclick")}),n.find(".element-box-contents").append(s)}var o=new Hammer(n.find(".element-box").get(0));o.get("pan").set({threshold:0}),o.on("panstart",function(e){return!$(".edit_area").find(".switch").length&&(!n.hasClass("inside-active")&&(e.preventDefault(),e.srcEvent.preventDefault(),$("body").css({"user-select":"none",cursor:"default"}),void a.compDragStart()))}),o.on("panmove",function(e){return e.preventDefault(),!$(".edit_area").find(".switch").length&&(!n.hasClass("inside-active")&&void a.compDragMove(e))}),o.on("panend",function(e){return!$(".edit_area").find(".switch").length&&(!n.hasClass("inside-active")&&(a.compDragEnd(e),$("body").css({"user-select":"initial",cursor:"default"}),void $(e.srcEvent.target).one("click",function(e){return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1})))})}}}}]).directive("compRotate",["$rootScope","editService",function(e,t){return{restrict:"A",link:function(n,i){var a=$(i),s=$('<div class="bar bar-rotate bar-radius radius-s'+t.scaleIndex+" rotate"+t.scaleIndex+'">');a.append(s).append('<div class="bar bar-line">');var o,r={},l=new Hammer(s.get(0));l.get("pan").set({threshold:0}),l.on("panstart",function(){$("body").css({"user-select":"none",cursor:'url("/assets/images/mouserotate.ico"), default'}),a.parent(),r={x:a.offset().left+a.width()/2*t.currentScale,y:a.offset().top+a.height()/2*t.currentScale}}),l.on("panmove",function(t){var n=t.center,i=n.x-r.x,s=n.y-r.y,l=Math.abs(i/s);o=Math.atan(l)/(2*Math.PI)*360,i>0&&0>s?o=360+o:i>0&&s>0?o=180-o:0>i&&s>0?o=180+o:0>i&&0>s&&(o=360-o),o>360&&(o-=360),a.css({transform:"rotateZ("+o+"deg)"}),e.$broadcast("boxOuter")}),l.on("panend",function(){$("body").css({"user-select":"initial",cursor:"default"}),n.updateCompAngle(a.attr("id"),o),n.$broadcast("updateTransform",o,a.attr("id").split("_")[1]),e.$broadcast("boxOuter","rotateEnd")})}}}]).directive("compResize",["selectService","picturesService","triggerService","panStateTracker","multiCompResize","Cursor","gridGuide","$rootScope","sceneService","editService",function(e,t,n,i,a,s,o,r,l,c){function d(e,t,n,i,s,l){n.css("cursor",i);var c=new Hammer(n.get(0));c.get("pan").set({threshold:0,direction:Hammer.DIRECTION_ALL}),c.on("panstart",function(){$("body").css({"user-select":"none",cursor:"default"}),a.resizeStart(t),o.guide.start({action:"resize"})}),c.on("panmove",function(e){var n=a.resizeMove(t,i,e,s,l);o.guide.sync(n),r.$broadcast("boxOuter")}),c.on("panend",function(){$("body").css({"user-select":"initial",cursor:"default"}),a.resizeEnd(e,t),o.guide.stop(),r.$broadcast("boxOuter")})}return{restrict:"A",link:function(t,n,i){var a=i.minH,o=i.minW,p=c.scaleIndex,u=$('<div class="bar bar-n bar-n'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),g=$('<div class="bar bar-s bar-s'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),m=$('<div class="bar bar-e bar-e'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),h=$('<div class="bar bar-w bar-w'+p+'"><div class="bar-radius radius-s'+p+'"></div></div>'),f=$('<div class="bar bar-ne'+p+" bar-radius radius-s"+p+'">'),v=$('<div class="bar bar-nw'+p+" bar-radius radius-s"+p+'">'),b=$('<div class="bar bar-se'+p+" bar-radius radius-s"+p+'">'),y=$('<div class="bar bar-sw'+p+" bar-radius radius-s"+p+'">');n.append(u).append(g).append(m).append(h).append(v).append(b).append(y).append(f).unbind("mousedown").mousedown(function(n){if(!$("#nr").find(".mask-trigger").length){var i=$(this).attr("id").split("_")[1];if(l.currentElemDef=l.getElementsMap()[i],"p"!=l.currentElemDef.type){if($("#comp_setting").length&&"n"!=l.currentElemDef.type&&!n.ctrlKey&&!n.shiftKey){if("none"!=$(this).children(".bar").first().css("display"))return;r.$broadcast("showStylePanel")}}else $("#comp_setting").hide();if(n.ctrlKey||n.shiftKey)"none"!=$(this).children(".bar").first().css("display")?($(this).children(".bar").hide(),e.deleteElement(i)):($(this).children(".bar").show(),e.addElement(i)),1==e.getElements().length&&(l.currentElemDef=l.getElementsMap()[e.getElements()[0]],"z"==l.currentElemDef.type?r.$broadcast("showStylePanel",{activeTab:"dropdown"}):r.$broadcast("showStylePanel",{activeTab:"style"}));else{if("none"!=$(this).children(".bar").first().css("display"))return;$(this).children(".bar").show().end(),$.each(e.getElements(),function(e,t){$("#inside_"+t).children(".bar").hide()}),e.clearElements(),e.addElement(i)}t.safeApply(function(){})}}),n.find(".element-box").unbind("click").bind("click",function(e){(e.ctrlKey||e.shiftKey)&&e.stopPropagation()}),n.parent().unbind("mousedown").mousedown(function(n){$(n.target).closest("li").length||($(this).children("li").children(".bar").hide(),t.$emit("hideStylePanel"),e.clearElements(),t.safeApply(function(){}))}),d(t,n,m,s.RESIZE_E,a,o),d(t,n,h,s.RESIZE_W,a,o),d(t,n,u,s.RESIZE_N,a,o),d(t,n,g,s.RESIZE_S,a,o),d(t,n,f,s.RESIZE_NE,a,o),d(t,n,v,s.RESIZE_NW,a,o),d(t,n,b,s.RESIZE_SE,a,o),d(t,n,y,s.RESIZE_SW,a,o)}}}]).service("Cursor",function(){return{RESIZE_W:"w-resize",RESIZE_E:"e-resize",RESIZE_N:"n-resize",RESIZE_S:"s-resize",RESIZE_SE:"se-resize",RESIZE_SW:"sw-resize",RESIZE_NE:"ne-resize",RESIZE_NW:"nw-resize"}}).factory("multiCompResize",["selectService","picturesService","Cursor","editAreaBorderCollisionDetector","sceneService","editService",function(e,t,n,i,a,s){var o,r,l=(i.editArea.editAreaWidth,i.editArea.editAreaHeight,null),c=null,d={};return d.selectedComponents=[],d.initCollisionDetectorWithElements=function(){d.selectedComponents=[];var t=$("#nr");angular.forEach(e.getElements(),function(e){d.selectedComponents.push(t.find("#inside_"+e))}),i.initWithElements(d.selectedComponents)},d.resizeStart=function(){d.initCollisionDetectorWithElements(),l=i.bigDetectionBoxPointA,c=i.bigDetectionBoxPointB,o=i.minimumWidth,r=i.minimumHeight},d.checkTopBorder=function(){return this},d.checkRightBorder=function(){return this},d.checkLeftBorder=function(){return this},d.checkBottomBorder=function(){return this},d.checkMinHeight=function(e,t,n,i){var a=Math.floor(n-i);return e.deltaY*t>a&&(e.deltaY=a*t),this},d.checkMinWidth=function(e,t,n,i){var a=Math.floor(n-i);return e.deltaX*t>a&&(e.deltaX=a*t),this},d.compResizeWithRatio=function(e,t,a,s){switch(t){case n.RESIZE_SE:angular.forEach(i.editArea.detectionBoxs,function(t){var n=parseInt(e.deltaY*t.ratio,10),i=e.deltaY,o={deltaX:n,deltaY:i};d.checkMinHeight(o,-1,t.elementHeight,a||1).checkMinWidth(o,-1,t.elementWidth,s||1),n!==o.deltaX&&(i=o.deltaX/t.ratio,o.deltaY=Math.abs(i)<Math.abs(o.deltaY)?i:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX});break;case n.RESIZE_SW:angular.forEach(i.editArea.detectionBoxs,function(t){var n=parseInt(-e.deltaY*t.ratio,10),i=e.deltaY,o={deltaX:n,deltaY:i};d.checkMinHeight(o,-1,t.elementHeight,a||1).checkMinWidth(o,1,t.elementWidth,s||1),n!==o.deltaX&&(i=-o.deltaX/t.ratio,o.deltaY=Math.abs(i)<Math.abs(o.deltaY)?i:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX});break;case n.RESIZE_NE:angular.forEach(i.editArea.detectionBoxs,function(t){var n=parseInt(-e.deltaY*t.ratio,10),i=e.deltaY,o={deltaX:n,deltaY:i};d.checkMinHeight(o,1,t.elementHeight,a||1).checkMinWidth(o,-1,t.elementWidth,s||1),n!==o.deltaX&&(i=-o.deltaX/t.ratio,o.deltaY=Math.abs(i)<Math.abs(o.deltaY)?i:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX});break;case n.RESIZE_NW:angular.forEach(i.editArea.detectionBoxs,function(t){var n=parseInt(e.deltaY*t.ratio,10),i=e.deltaY,o={deltaX:n,deltaY:i};d.checkMinHeight(o,1,t.elementHeight,a||1).checkMinWidth(o,1,t.elementWidth,s||1),n!==o.deltaX&&(i=o.deltaX/t.ratio,o.deltaY=Math.abs(i)<Math.abs(o.deltaY)?i:o.deltaY),e.deltaY=o.deltaY,e.deltaX=o.deltaX})}return this},d.resizeMove=function(e,t,a,l,c){var p={deltaX:a.deltaX/s.currentScale,deltaY:a.deltaY/s.currentScale},u=null;switch(t){case n.RESIZE_W:d.checkMinWidth(p,1,o,c||1),u={x:p.deltaX,y:0,width:-p.deltaX,height:0},angular.forEach(i.editArea.detectionBoxs,function(e){e.element.css({left:e.left+p.deltaX,width:e.elementWidth-p.deltaX})});break;case n.RESIZE_E:d.checkMinWidth(p,-1,o,c||1),u={x:0,y:0,width:p.deltaX,height:0},angular.forEach(i.editArea.detectionBoxs,function(e){e.element.css("width",e.elementWidth+p.deltaX)});break;case n.RESIZE_N:d.checkMinHeight(p,1,r,l||1),u={x:0,y:p.deltaY,width:0,height:-p.deltaY},angular.forEach(i.editArea.detectionBoxs,function(e){e.element.css({top:e.top+p.deltaY,height:e.elementHeight-p.deltaY})});break;case n.RESIZE_S:d.checkMinHeight(p,-1,r,l||1),u={x:0,y:0,width:0,height:p.deltaY},angular.forEach(i.editArea.detectionBoxs,function(e){e.element.css("height",e.elementHeight+p.deltaY)});break;case n.RESIZE_SE:d.compResizeWithRatio(p,t,l,c),u={x:0,y:0,width:p.deltaX,height:p.deltaY},angular.forEach(i.editArea.detectionBoxs,function(e){var t=e.elementHeight+p.deltaY,n=t*e.ratio;e.element.css({height:t,width:n})});break;case n.RESIZE_SW:d.compResizeWithRatio(p,t,l,c),u={x:p.deltaX,y:0,width:-p.deltaX,height:p.deltaY},angular.forEach(i.editArea.detectionBoxs,function(e){var t=e.elementHeight+p.deltaY,n=t*e.ratio;e.element.css({left:e.left-(n-e.elementWidth),height:t,width:n})});break;case n.RESIZE_NE:d.compResizeWithRatio(p,t,l,c),u={x:0,y:p.deltaY,width:p.deltaX,height:-p.deltaY},angular.forEach(i.editArea.detectionBoxs,function(e){var t=e.elementHeight-p.deltaY,n=t*e.ratio;e.element.css({top:e.top+p.deltaY,height:t,width:n})});break;case n.RESIZE_NW:d.compResizeWithRatio(p,t,l,c),u={x:p.deltaX,y:p.deltaY,width:-p.deltaX,height:-p.deltaY},angular.forEach(i.editArea.detectionBoxs,function(e){var t=e.elementHeight-p.deltaY,n=t*e.ratio;e.element.css({top:e.top+p.deltaY,left:e.left-(n-e.elementWidth),height:t,width:n})})}return angular.forEach(d.selectedComponents,function(e){d.setChildrenSizeMove(e)}),u},d.setChildrenSizeMove=function(e){var t=e.children(".element-box"),n={width:t.width(),height:t.height()};if("4"==e.attr("ctype").charAt(0)||"n"==e.attr("ctype").charAt(0)){var i=e.find("img"),a=i.width()/i.height();a>=n.width/n.height?(i.outerHeight(n.height),i.outerWidth(n.height*a),i.css("marginLeft",-(i.outerWidth()-n.width)/2),i.css("marginTop",0)):(i.outerWidth(n.width),i.outerHeight(n.width/a),i.css("marginTop",-(i.outerHeight()-n.height)/2),i.css("marginLeft",0))}else"p"==e.attr("ctype").charAt(0)?e.find(".fluxslider, .images, .image1, .image2").css({width:n.width,height:n.height}):(e.find(".element").css({width:n.width,height:n.height}),"i"==e.attr("ctype")||"d"==e.attr("ctype")?e.find(".comp_counter").css({"line-height":n.height+"px"}):("w01"==e.attr("ctype")||"w02"==e.attr("ctype"))&&e.find(".element").css({"line-height":n.height+"px"}))},d.resizeEnd=function(e){angular.forEach(d.selectedComponents,function(t,n){d.setChildrenSizeEnd(e,t,n<d.selectedComponents.length-1),e.$broadcast("updateMaxRadius",t)})},d.setChildrenSizeEnd=function(e,n,i){var s=n.position(),o={width:n.width(),height:n.height(),left:s.left,top:s.top};if(("i"==n.attr("ctype")||"d"==n.attr("ctype")||"w01"==n.attr("ctype")||"w02"==n.attr("ctype"))&&(o.lineHeight=o.height+"px"),"4"==n.attr("ctype").charAt(0)||"n"==n.attr("ctype").charAt(0)){var r=n.find("img"),l={width:o.width,height:o.height,left:o.left,top:o.top,imgStyle:{width:r.width(),height:r.height(),marginTop:r.css("marginTop"),marginLeft:r.css("marginLeft")}};a.updateCompSize(n.attr("id"),l,i)}else if("p"==n.attr("ctype").charAt(0)){var c=t.getProperties();if(!c||!c.children)return;var d=n.find(".slider"),p=d.attr("id");d.empty();for(var u=0;u<c.children.length;u++)d.append('<img src="'+PREFIX_FILE_HOST+c.children[u].src+'">');utilPictures.deleteInterval(p),new flux.slider("#nr #"+p,{autoplay:c.autoPlay,delay:c.interval,pagination:!1,transitions:[utilPictures.getPicStyle(c.picStyle).name],width:o.width,height:o.height,bgColor:c.bgColor,onStartEnd:function(e){utilPictures.addInterval(p,e)}}),a.updateCompSize(n.attr("id"),o,i)}else a.updateCompSize(n.attr("id"),o,i)},d}]).factory("gridGuide",["panStateTracker","DetectionBox","selectService","editAreaBorderCollisionDetector","editService",function(e,t,n,i,a){var s={init:function(e){this.color=this.getColor()?this.getColor():"rgba(150, 150, 150, 0.2)",this.$container=e,this.render(),setTimeout(function(){"disable"!=s.getVisable()&&s.show()},1)},len:1,render:function(){this.domElement=$('<div class="eq-block-grid">'),this.canvasElement=$('<canvas class="eq-block-grid-inner">').appendTo(this.domElement)},show:function(){this.domElement.appendTo(this.$container),this.paint(),this.enabled=!0},hide:function(){this.domElement.remove(),this.enabled=!1},setVisable:function(e){window.localStorage&&localStorage.setItem("sceneGridVisable",e)},getVisable:function(){return window.localStorage?localStorage.getItem("sceneGridVisable"):void 0},setColor:function(e){window.localStorage&&localStorage.setItem("sceneGridColor",e)},getColor:function(){return window.localStorage?localStorage.getItem("sceneGridColor"):void 0},getGuideState:function(){return window.localStorage?localStorage.getItem("sceneGridState"):void 0},setGuideState:function(e){window.localStorage&&localStorage.setItem("sceneGridState",e)},getSnapState:function(){return window.localStorage?localStorage.getItem("sceneSnapState"):void 0},setSnapState:function(e){window.localStorage&&localStorage.setItem("sceneSnapState",e)},paint:function(){var e=320,t=Math.ceil(30/a.currentScale),n=this.len?486*this.len:486,i=Math.ceil(n/t),s=this.getCols(),o=Math.round(e/s);this.canvasElement.css({left:0,top:0}),this.canvasElement.attr({width:e,height:n});var r=this.canvasElement.get(0).getContext("2d");r.clearRect(0,0,e,n);for(var l=1;s>l;l++)r.fillStyle=this.color,r.fillRect(Math.floor(l*o),0,1,n);for(var c=1;i>=c;c++)r.fillStyle=this.color,r.fillRect(0,Math.floor(c*t)+0,e,1)},getRows:function(){return 16*this.len},getCols:function(){var e=10;switch(a.scaleIndex+""){case"1":e=5;break;case"2":e=8;break;case"3":e=10;break;case"4":e=12;break;case"5":e=16;break;case"6":e=20;break;case"7":e=30;break;case"8":e=40;break;default:e=10}return e},refreshGrid:function(e){e>1?(this.domElement.css("top",0),r.domElement.css("top",0)):(this.domElement.css("top","17px"),r.domElement.css("top","17px")),e!=this.len&&(this.len=e,r.slideBounds.height=486*e,this.paint())}},o={snap:!s.getSnapState()||s.getSnapState(),action:"move",threshold:1,enabled:!s.getGuideState()||s.getSnapState()},r={init:function(e){this.guides={h:[],v:[]},this.slideBounds={width:320,height:486,x:0,y:0},this.render(),e.append(this.domElement),this.options=o},render:function(){this.domElement=$('<div class="eq-block-guides">')},start:function(i){if(this.options.enabled){this.allBlocks=[],e.forEach(function(e){r.allBlocks.push(new t(e))}),this.targetBlocks=[],angular.forEach(n.getElements(),function(e){r.allBlocks.forEach(function(t){t.element.attr("id")=="inside_"+e&&r.targetBlocks.push(t)})}),this.gridLines=[];var l=Math.ceil(30/a.currentScale),c=s.getCols(),d=Math.round(this.slideBounds.height/l),p=Math.round(this.slideBounds.width/c);if(s.enabled){for(var u=1;c>u;u++)this.gridLines.push(this.getCenterEdge({x:u*p,y:0,width:0,height:this.slideBounds.height},"grid-col-"+u,"horizontal"));for(var g=1;d>g;g++)this.gridLines.push(this.getCenterEdge({x:0,y:g*l+0,width:this.slideBounds.width,height:0},"grid-row-"+g,"vertical"))}1==s.len?(this.gridLines.push(this.getCenterEdge({x:0,y:0,width:this.slideBounds.width,height:0},"grid-row-top","vertical")),this.gridLines.push(this.getCenterEdge({x:0,y:this.slideBounds.height,width:this.slideBounds.width,height:0},"grid-row-bottom","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:-17,width:this.slideBounds.width+54,height:0},"grid-row-top1","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:this.slideBounds.height+17,width:this.slideBounds.width+54,height:0},"grid-row-bottom1","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:-19,width:0,height:this.slideBounds.height+34},"grid-col-left1","horizontal")),this.gridLines.push(this.getCenterEdge({x:this.slideBounds.width+27,y:-19,width:0,height:this.slideBounds.height+34},"grid-col-right1","horizontal"))):(this.gridLines.push(this.getCenterEdge({x:-27,y:0,width:this.slideBounds.width+54,height:0},"grid-row-top1","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:this.slideBounds.height,width:this.slideBounds.width+54,height:0},"grid-row-bottom","vertical")),this.gridLines.push(this.getCenterEdge({x:-27,y:0,width:0,height:this.slideBounds.height},"grid-col-left1","horizontal")),this.gridLines.push(this.getCenterEdge({x:this.slideBounds.width+27,y:0,width:0,height:this.slideBounds.height},"grid-col-right1","horizontal"))),this.gridLines.push(this.getCenterEdge({x:-1,y:0,width:0,height:this.slideBounds.height},"grid-col-left","horizontal")),this.gridLines.push(this.getCenterEdge({x:this.slideBounds.width,y:0,width:0,height:this.slideBounds.height},"grid-col-right","horizontal")),this.options=$.extend(o,i)}},stop:function(){this.clearGuideElements()},sync:function(e){this.options.enabled&&(this.findGuides(e),this.renderGuides())},findGuides:function(e){e=angular.extend({x:0,y:0,width:0,height:0},e),this.guides.h.length=0,this.guides.v.length=0;var t={x:i.bigDetectionBoxPointA.x+e.x,y:i.bigDetectionBoxPointA.y+e.y,width:i.bigDetectionBoxPointB.x-i.bigDetectionBoxPointA.x+e.width,height:i.bigDetectionBoxPointB.y-i.bigDetectionBoxPointA.y+e.height},n=this.getEdges(t,"target-bounds","resize"===this.options.action);this.combinedBounds=t,this.allBlocks.forEach(function(e){-1===r.targetBlocks.indexOf(e)&&r.compageEdges(n,r.getEdges(e.measure(),e.getID()),r.options.threshold)}),this.gridLines.forEach(function(e){r.compageEdges(n,e,r.options.threshold)}),this.guides.h.sort(function(e,t){return e.distance-t.distance}),this.guides.v.sort(function(e,t){return e.distance-t.distance})},enforceGuides:function(e){if(this.options.enabled){var t=this.options.threshold;this.options.threshold=3,this.findGuides(e),this.options.threshold=t;var n,i=0,a=0;this.guides.h.length&&(n=this.guides.h[0],i=n.compareEdge.x-n.targetEdge.x),this.guides.v.length&&(n=this.guides.v[0],a=n.compareEdge.y-n.targetEdge.y),e.x+=i,e.y+=a}},compageEdges:function(e,t,n){var i;e.h.forEach(function(e){t.h.forEach(function(t){i=Math.abs(e.x-t.x),n>i&&r.guides.h.push({distance:i,targetEdge:e,compareEdge:t})})}),e.v.forEach(function(e){t.v.forEach(function(t){i=Math.abs(e.y-t.y),n>i&&r.guides.v.push({distance:i,targetEdge:e,compareEdge:t})})})},renderGuides:function(){var e=[];this.guides.h.forEach(function(t){e.push(r.renderGuide(t))}),this.guides.v.forEach(function(t){e.push(r.renderGuide(t))}),this.clearGuideElements(e)},renderGuide:function(e){var t=e.targetEdge,n=e.compareEdge,i=$('[data-guide-id="'+n.id+'"]');0===i.length&&(i=$('<div data-guide-id="'+n.id+'">').appendTo(this.domElement),setTimeout(function(){i.addClass("show")},1));var a={top:Math.min(n.bounds.y,this.combinedBounds.y),right:Math.max(n.bounds.x+n.bounds.width,this.combinedBounds.x+this.combinedBounds.width),bottom:Math.max(n.bounds.y+n.bounds.height,this.combinedBounds.y+this.combinedBounds.height),left:Math.min(n.bounds.x,this.combinedBounds.x)};if("number"==typeof n.y){var s="s"===t.direction?-1:0;i.addClass("guide-h"),i.css({top:Math.floor(n.y+s),left:a.left,width:a.right-a.left})}else{var o="e"===t.direction?-1:0;i.addClass("guide-v"),i.css({left:Math.floor(n.x+o),top:a.top,height:a.bottom-a.top})}return n.id},getEdges:function(e,t,n){var i={h:[{id:t+"-h1",bounds:e,x:e.x,offset:0,direction:"w"},{id:t+"-h2",bounds:e,x:e.x+e.width/2,offset:-e.width/2,direction:"hc"},{id:t+"-h3",bounds:e,x:e.x+e.width,offset:-e.width,direction:"e"}],v:[{id:t+"-v1",bounds:e,y:e.y,offset:0,direction:"n"},{id:t+"-v2",bounds:e,y:e.y+e.height/2,offset:-e.height/2,direction:"vc"},{id:t+"-v3",bounds:e,y:e.y+e.height,offset:-e.height,direction:"s"}]};return n&&(i.h.splice(1,1),i.v.splice(1,1)),i},getCenterEdge:function(e,t,n){var i={h:[],v:[]};return"vertical"===n?i.v.push({id:t+"-v2",bounds:e,y:e.y+e.height/2,offset:-e.height/2,direction:t}):i.h.push({id:t+"-h2",bounds:e,x:e.x+e.width/2,offset:-e.width/2,direction:t}),i},clearGuideElements:function(e){var t=this.domElement.find(".guide-v, .guide-h");e&&e.length&&(t=t.filter(function(t,n){return-1===e.indexOf(n.getAttribute("data-guide-id"))})),t.remove()}};return{grid:s,guide:r}}]).directive("pasteElement",["sceneService",function(e){function t(){var t=$('<ul id="pasteMenu" class="dropdown-menu" style="min-width: 100px; display: block;" role="menu" aria-labelledby="dropdownMenu1"><li class="paste" style="text-align:center;" role="presentation"><a role="menuitem" tabindex="-1"><div class="fa fa-paste"></div>&nbsp;&nbsp;粘贴</a></li></ul>').css({position:"absolute","user-select":"none"});return t.find(".paste").on("click",function(){e.pasteElement(),t.hide()}),t}return{restrict:"EA",link:function(n,i){$(i).on("contextmenu",function(n){if(e.getCopy()){var i=t(),a=$("#eq_main"),s=$("#pasteMenu");s.length>0&&s.remove(),a.append(i),i.css({left:n.pageX+a.scrollLeft()+15,top:n.pageY+a.scrollTop()}).show(),a.mousemove(function(e){var t=$("#pasteMenu");(e.pageX<t.offset().left-20||e.pageX>t.offset().left+t.width()+20||e.pageY<t.offset().top-20||e.pageY>t.offset().top+t.height()+20)&&(t.hide(),$(this).unbind("mousemove"))})}return!1})}}}]).directive("eqxEditDestroy",["selectService",function(e){return{link:function(t,n){n.on("$destroy",function(){e.clearElements(),utilPictures.clearInterval()})}}}]).directive("elementAnim",["selectService",function(){function e(t,n,i,a,s){if(n.length&&a<n.length)if(2==s.type&&"typer"==n[a].type)t=t=$("#inside_"+s.id+" .element"),t.typed({strings:[s.content],contentType:"html",showCursor:!1,typeSpeed:1e3*n[a].interval||0,startDelay:1e3*n[a].delay||0,callback:function(){clearInterval(t.data("typed").timeout),t.removeData("typed"),a++,e(t,n,i,a,s)}});else{t=t=$("#inside_"+s.id+" .element-box");var o=t.get(0);t.css("animation",""),o.offsetWidth=o.offsetWidth,t.css("animation",i[a]+" "+n[a].duration+"s ease 0s").css("animation-fill-mode","backwards"),t.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a++,e(t,n,i,a,s)})}}return{restrict:"EA",link:function(t){var n;t.$on("previewCurrentChange",function(e,t){var i=t.elemDef,a=t.anim;if(2==i.type&&"typer"==a.type)n=n=$("#inside_"+t.elemId+" .element"),n.typed({strings:[i.content],contentType:"html",showCursor:!1,typeSpeed:1e3*a.interval||0,startDelay:1e3*a.delay||0,callback:function(){clearInterval(n.data("typed").timeout),n.removeData("typed")}});else{n=n=$("#inside_"+t.elemId+" .element-box");var s=n.get(0);s.offsetWidth=s.offsetWidth,n.css("animation",t.animClasses[t.count]+" "+t.anim.duration+"s ease 0s").css("animation-fill-mode","backwards")}}),t.$on("previewAllChanges",function(t,i){n=n=$("#inside_"+i.elemId+" .element-box"),e(n,i.animations,i.animClasses,i.count,i.elemDef)})}}}]).directive("outerBox",["DetectionBox","i18nNotifications","storageService","selectService",function(e,t,n,i){return{restrict:"AE",link:function(i,a){function s(e){"red"==e?(o.show(),o.css("background-color","#ff5548"),a.find(".internal-box").toggleClass("out-warning",!1),isOuter=!0):"yellow"==e?(o.show(),isOuter=!1,o.css("background-color","#F2A653"),l&&a.find(".internal-box").toggleClass("out-warning",!0)):(isOuter=!1,a.find(".internal-box").toggleClass("out-warning",!1),o.hide()),l&&a.toggleClass("on",isOuter)}var o=$("#warn"),r="";o.click(function(){"red"==r?(t.removeAll(),t.pushForCurrentRoute("outbox.warning","notify.warning")):"yellow"==r&&(t.removeAll(),t.pushForCurrentRoute("outbox.tip","notify.warning"))});var l="false"==n.get("create.phoneView");l||(a.css("border-color","transparent"),a.find(".internal-box").css("border-color","transparent")),i.$on("switchBox",function(e,t){l=!t,t?(a.css("border-color","transparent"),a.find(".internal-box").css("border-color","transparent")):(a.css("border-color",""),a.find(".internal-box").css("border-color",""),s(r))}),i.$on("boxOuter",function(n,a){for(var o="",c=i.pageLength,d=i.tpl.obj.elements,p=0;p<d.length;p++)if(3!=d[p].type){var u=d[p].id,g=$("#inside_"+u);if(0!==g.length){var m=g.position(),h=new e(g);if(1!=c){if(m.left<-29||m.top<-1||h.originPointB.y>486*c||h.originPointB.x>345){o="red";break}(m.left<-1||h.originPointB.x>320)&&(o="yellow")}else{if(l&&(m.left<-29||m.top<-19||h.originPointB.y>501||h.originPointB.x>345)){o="red";break}(m.left<-1||m.top<-1||h.originPointB.y>486||h.originPointB.x>320)&&(o="yellow")}}}r==o||a||("red"==o?(t.removeAll(),t.pushForCurrentRoute("outbox.warning","notify.warning")):"yellow"==o?(t.removeAll(),t.pushForCurrentRoute("outbox.tip","notify.warning")):t.removeAll()),r=o,s(o)})}}}]),angular.module("app.directives.editor",["scene.create.console.font"]).directive("toolbar",["$rootScope","$modal","$compile","sceneService","$timeout","storageService","fontService",function(e,t,n,i,a,s,o){function r(t,s){function o(){a(function(){function e(){if(n){for(var a=0;a<i.length;a++)n.style&&n.style[i[a]]&&(t.selectStyle[i[a]]=n.style[i[a]],i.splice(a,1),a--);n.id!=="inside_"+r.id&&i.length>0&&(n=n.parentElement,e())}}if(0!==$("#"+r.id).find("div").length?0!==$("#"+r.id).find("div").length&&("left"===$("#"+r.id).find("div")[0].style.textAlign?t.classTextAlign="eqf-leftword":"center"===$("#"+r.id).find("div")[0].style.textAlign?t.classTextAlign="eqf-minddleword":"right"===$("#"+r.id).find("div")[0].style.textAlign&&(t.classTextAlign="eqf-rightword")):t.classTextAlign="eqf-leftword",document.getSelection().anchorNode){t.selectStyle={fontFamily:"",fontSize:"",color:"",backgroundColor:"",fontWeight:"",fontStyle:"",textDecoration:"",letterSpacing:""};var n=document.getSelection().anchorNode.parentElement,i=["fontFamily","fontSize","color","backgroundColor","fontWeight","fontStyle","textDecoration","letterSpacing"];e(),t.selectStyle.fontSize?t.defaultSize="-webkit-xxx-large"===t.selectStyle.fontSize?"48px":t.selectStyle.fontSize:t.defaultSize="24px",-1!==t.selectStyle.textDecoration.indexOf("line-through")?$(".strikeThrough").attr("style","color:#08a1ef !important"):$(".strikeThrough").removeAttr("style"),-1!==t.selectStyle.textDecoration.indexOf("underline")?$(".underline").attr("style","color:#08a1ef !important"):$(".underline").removeAttr("style"),"italic"===t.selectStyle.fontStyle?$(".italic").attr("style","color:#08a1ef !important"):$(".italic").removeAttr("style"),"bold"===t.selectStyle.fontWeight?$(".bolded").attr("style","color:#08a1ef !important"):$(".bolded").removeAttr("style"),"inherit"!==t.selectStyle.color&&$(".change-font-btn").attr("style","background:"+t.selectStyle.color),"initial"!==t.selectStyle.backgroundColor&&$(".text-btn-border-bg").attr("style","background:"+t.selectStyle.backgroundColor),$.each(t.fontNames,function(e,n){t.selectStyle.fontFamily===n.fontFamily&&(t.defaultFamily=n.name),t.selectStyle.fontFamily||(t.defaultFamily="默认字体")})}},0)}t.fontNames=[],t.selectStyle={};var r=i.currentElemDef;t.addLinkInputFn=function(){setTimeout(function(){$("#addLinkInputToggle").click(),$("body").off("mousemove",o),$("#btn-toolbar").off("mouseup",o)})},t.startMoveSelect=function(){$("#btn-toolbar").on("mouseup",o),$("body").on("mousemove",o)},"x"===r.type?t.showLinkOption=!1:t.showLinkOption=!0,d(t),s.bind("keydown",function(e){e.stopPropagation()}),t.internalLinks=angular.copy(t.pages),t.internalLink=t.internalLinks[0],a(function(){var e=$(getSelection().focusNode).parent();e.is("a")?e.attr("href")&&isNaN(e.attr("href"))?t.link="external":t.link="internal":t.link="external"},1e3);try{t.fontColor=$(r.content).css("color"),t.backgroundColor=$(r.content).css("background-color")}catch(e){console.log("error")}var l=["#000000","#7e2412","#ff5400","#225801","#0c529e","#333333","#b61b52","#f4711f","#3bbc1e","#23a3d3","#888888","#d34141","#f7951e","#29b16a","#97daf3","#cccccc","#ec7c7c","#fdea02","#79c450","#563679","#ffffff","#ffcccc","#d9ef7f","#c3f649"],c=$(".color-menu"),p=$(".bgcolor-menu");$.each(l,function(e,t){c.append($('<li><a dropdown-toggle class="btn" data-edit="foreColor '+t+'" style="background-color: '+t+'"></a></li>'))}),n(c.append($('<li style="position: relative;"><a ng-model="fontColor" ng-click="setSelection($event)" colorpicker-Position="sceneToobar" class="btn glyphicon glyphicon-remove" colorpicker="rgba" style="background-color: transparent"></a><em style="background-color:#ff5448;position:absolute;height:10px;width:10px;top:0;left:0;z-index:-1"></em><em style="background-color:#f2a653;position:absolute;height:10px;width:10px;top:0;left:10px;z-index:-1"></em><em style="background-color:#08a1ef;position:absolute;height:10px;width:10px;top:10px;left:0;z-index:-1"></em><em style="background-color:#44cb83;position:absolute;height:10px;width:10px;top:10px;left:10px;z-index:-1"></em></li>')))(t),t.$watch("fontColor",function(e,t){e&&e!==t&&document.execCommand("foreColor",0,e)}),$("body").on("mousemove",o),t.$on("cancelbind",function(){$("body").off("mousemove",o)}),$("#btn-toolbar").on("mousedown",function(){t.$broadcast("cancelbind")}),$("#btn-toolbar").on("mouseup",function(){$("body").on("mousemove",o)}),t.editLetter=function(){a(function(){document.getSelection().anchorNode.parentElement.tagName,t.selectStyle=document.getSelection().anchorNode.parentElement.style,"0px"===t.selectStyle.letterSpacing||""===t.selectStyle.letterSpacing?$(".wordLineList1").addClass("letter-edit"):$(".wordLineList1").removeClass("letter-edit");for(var e=1;e<t.wordLineLists.length;e++)t.selectStyle.letterSpacing===t.wordLineLists[e].scale?$("."+t.wordLineLists[e].value).addClass("letter-edit"):$("."+t.wordLineLists[e].value).removeClass("letter-edit")})},t.editLineHeight=function(){a(function(){var e=$("#nr #inside_"+r.id+" > .element-box"),n=e.get(0);if(n){n.style.lineHeight&&1!==n.style.lineHeight?$(".lineHeightList4").removeClass("letter-edit"):$(".lineHeightList4").addClass("letter-edit");for(var i=0;i<t.lineHeightLists.length;i++)3!==i&&(n.style.lineHeight===t.lineHeightLists[i].scale?$("."+t.lineHeightLists[i].value).addClass("letter-edit"):$("."+t.lineHeightLists[i].value).removeClass("letter-edit"))}})};var u=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null};t.clearStyle=function(){a(function(){var e=document.getSelection().anchorNode.parentElement,t=window.getSelection(),n=t.focusNode,i=$(n).parents(".element-box");i=$(i).get(0),"A"===e.tagName&&(e.style=""),i.style.letterSpacing="",i.style.lineHeight="",$("#"+r.id).get(0).style.fontFamily="",$("#"+r.id).get(0).style.fontSize="",$("#"+r.id).get(0).style.color="",$("#"+r.id).get(0).style.backgroundColor="",$("#"+r.id).get(0).style.fontStyle="",$("#"+r.id).get(0).style.textDecoration="",$("#"+r.id).get(0).style.textAlign="left",$("#"+r.id).get(0).style.letterSpacing="",$("#"+r.id).get(0).style.lineHeight="",r.css.lineHeight="",r.css.fontFamily="",r.css.backgroundColor="",r.css.letterSpacing="",r.css.textAlign="left",r.css.fontSize="24px"})},$.each(l,function(e,t){var n=u(t);p.append($('<li><a dropdown-toggle class="btn" data-edit="backColor rgba('+n.r+","+n.g+","+n.b+', 0.3)" style="background-color: rgba('+n.r+","+n.g+","+n.b+', 0.3)"></a></li>'))}),n(p.append($('<li style="position: relative;"><a ng-model="backgroundColor" ng-click="setSelection($event)" colorpicker="rgba" colorpicker-Position="sceneToobar" class="btn glyphicon glyphicon-remove" style="background-color: transparent"></a><em style="background-color:#ff5448;position:absolute;height:10px;width:10px;top:0;left:0;z-index:-1"></em><em style="background-color:#f2a653;position:absolute;height:10px;width:10px;top:0;left:10px;z-index:-1"></em><em style="background-color:#08a1ef;position:absolute;height:10px;width:10px;top:10px;left:0;z-index:-1"></em><em style="background-color:#44cb83;position:absolute;height:10px;width:10px;top:10px;left:10px;z-index:-1"></em></li>')))(t),t.$watch("backgroundColor",function(e){e&&document.execCommand("backColor",0,e)}),t.setSelection=function(){},r.css.lineHeight=(parseFloat(r.css.lineHeight)||1).toFixed(1),t.increaseLineHeight=function(){var e=window.getSelection(),t=e.focusNode,n=$(t).parents(".element-box");r.css.lineHeight=(parseFloat(r.css.lineHeight)+.1).toFixed(1),n.css("line-height",r.css.lineHeight),$(t.parentNode).focus()},t.decreaseLineHeight=function(){var e=window.getSelection(),t=e.focusNode,n=$(t).parents(".element-box");r.css.lineHeight>.1&&(r.css.lineHeight=(parseFloat(r.css.lineHeight)-.1).toFixed(1),n.css("line-height",r.css.lineHeight)),$(t.parentNode).focus()},t.adjustLineHeight=function(t){var n=window.getSelection(),i=n.focusNode,a=$(i).parents(".element-box");r.css.lineHeight=parseFloat(t).toFixed(2),a.css("line-height",r.css.lineHeight),$(i.parentNode).focus(),e.$broadcast("adjust.line.height")},t.increaseWordLine=function(e){var t=window.getSelection(),n=t.focusNode,i=$(n).parents(".element-box");r.css.letterSpacing=e,i.css("letter-spacing",r.css.letterSpacing),0===i.find("span").length&&$("#"+r.id).attr("style","letter-spacing:"+e);for(var a=0;a<i.find("span").length;a++)i.find("span")[a].style.letterSpacing=e},t.wordLineLists=[{value:"wordLineList1",name:"0%",scale:"0"},{value:"wordLineList2",name:"10%",scale:"0.1em"},{value:"wordLineList3",name:"25%",scale:"0.25em"},{value:"wordLineList4",name:"50%",scale:"0.5em"},{value:"wordLineList5",name:"75%",scale:"0.75em"},{value:"wordLineList6",name:"100%",scale:"1em"}],t.lineHeightLists=[{value:"lineHeightList1",name:"0.25",scale:.25},{value:"lineHeightList2",name:"0.50",scale:.5},{value:"lineHeightList3",name:"0.75",scale:.75},{value:"lineHeightList4",name:"1.00",scale:1},{value:"lineHeightList5",name:"1.50",scale:1.5},{value:"lineHeightList6",name:"1.75",scale:1.75},{value:"lineHeightList7",name:"2.00",scale:2},{value:"lineHeightList8",name:"2.50",scale:2.5},{value:"lineHeightList9",name:"3.00",scale:3}]}function l(e){var t=document.getElementsByTagName("style")[0],n=document.createTextNode(e);t.appendChild(n)}function c(e,t){var n=i.currentElemDef;e.unshift({fontFamily:"defaultFont",name:"默认字体",status:1}),e.reverse();var a=$(".fontname-menu");$.each(e,function(e,i){1===i.status&&("defaultFont"!==i.fontFamily?a.prepend($('<li class="'+i.fontFamily+'"><a dropdown-toggle class="btn" data-edit="fontName '+i.fontFamily+'">'+i.name+"</a></li>")):a.prepend($('<li class="'+i.fontFamily+'"><a dropdown-toggle class="btn" data-edit="fontName '+i.fontFamily+'">(&nbsp'+i.name+"&nbsp)</a></li>")));var o,r;"defaultFont"!==i.fontFamily?$("."+i.fontFamily).on("click",function(){r=JSON.parse(s.get("editTextId"))||[],-1===$.inArray(n.id,r)&&r.push(n.id),s.push("editTextId",JSON.stringify(r)),n.css.fontFamily=i.fontFamily,n.fonts=n.fonts||{},n.fonts[i.fontFamily]=i.woffPath;var e=JSON.parse(s.get("shoppingFontFamily"))||{};e[i.fontFamily]||(o="@font-face{font-family:"+i.fontFamily+";src: url("+PREFIX_FILE_HOST+i.woffPath+") format(woff);}",l(o),e[i.fontFamily]=!0,s.push("shoppingFontFamily",JSON.stringify(e)))}):$("."+i.fontFamily).on("click",function(){r=JSON.parse(s.get("editTextId"))||[],-1===$.inArray(n.id,r)&&r.push(n.id),s.push("editTextId",JSON.stringify(r))}),t.selectStyle.fontFamily?t.selectStyle.fontFamily===i.fontFamily&&(t.defaultFamily=i.name):t.defaultFamily="默认字体"})}function d(e){$(".moreFont").on("click",function(){o.openFontShopping()});var t=JSON.parse(sessionStorage.getItem("toolbarFonts"))||[];0===t.length?o.getMyFontFamily().then(function(n){n.data.success?(t=n.data.list,e.fontNames=n.data.list,sessionStorage.setItem("toolbarFonts",JSON.stringify(t)),c(t,e)):alert("网络加载失败,请稍后再试!")}):(e.fontNames=t,a(function(){c(t,e)}))}return{restrict:"EA",replace:!0,templateUrl:"directives/toolbar.tpl.html",link:r}}]),angular.module("app.directives.uislider",[]).value("uiSliderConfig",{}).directive("uiSlider",["uiSliderConfig","$timeout",function(e,t){return e=e||{},{require:"ngModel",compile:function(){return function(n,i,a,s){function o(e,t){return t?parseFloat(e):parseInt(e,10)}function r(){i.slider("destroy")}var l=angular.extend(n.$eval(a.uiSlider)||{},e),c={min:null,max:null},d=["min","max","step"],p=!angular.isUndefined(a.useDecimals),u=function(){angular.isArray(s.$viewValue)&&!0!==l.range&&(console.warn("Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true."),l.range=!0),angular.forEach(d,function(e){angular.isDefined(a[e])&&(l[e]=o(a[e],p))}),i.slider(l),u=angular.noop};angular.forEach(d,function(e){a.$observe(e,function(t){t&&(u(),l[e]=o(t,p),i.slider("option",e,o(t,p)),s.$render())})}),a.$observe("disabled",function(e){u(),i.slider("option","disabled",!!e)}),n.$watch(a.uiSlider,function(e){u(),e!==undefined&&i.slider("option",e)},!0),t(u,0,!0),i.bind("slide",function(e,t){s.$setViewValue(t.values||t.value),n.$apply()}),s.$render=function(){u();var e=!0===l.range?"values":"value";l.range||!isNaN(s.$viewValue)||s.$viewValue instanceof Array?l.range&&!angular.isDefined(s.$viewValue)&&(s.$viewValue=[0,0]):s.$viewValue=0,!0===l.range&&(angular.isDefined(l.min)&&l.min>s.$viewValue[0]&&(s.$viewValue[0]=l.min),angular.isDefined(l.max)&&l.max<s.$viewValue[1]&&(s.$viewValue[1]=l.max),s.$viewValue[0]>s.$viewValue[1]&&(c.min>=s.$viewValue[1]&&(s.$viewValue[0]=c.min),c.max<=s.$viewValue[0]&&(s.$viewValue[1]=c.max)),c.min=s.$viewValue[0],c.max=s.$viewValue[1]),i.slider(e,s.$viewValue)},n.$watch(a.ngModel,function(){!0===l.range&&s.$render()},!0),i.bind("$destroy",r);var g=$('<div class="ui-slider-progress-bar"></div>');i.append(g);var m=n.$watch(a.ngModel,function(){setTimeout(function(){g.css("width",$(".ui-slider-handle",i).css("left"))})},!0);i.bind("$destroy",function(){m()})}}}}]).directive("uiSliderT",["$rootScope",function(e){var t=$(document);return{require:"ngModel",template:'<div class="slider-con"></div>',link:function(n,i,a,s){i.on("$destroy",function(){i.unbind("mousedown")});var o="string"==typeof a.min?a.min:-Number.MAX_VALUE,r="string"==typeof a.max?a.max:Number.MAX_VALUE,l="string"==typeof a.step?a.step:1,c=r/100,d="string"==typeof a.max?a.fixed:0;s.$render=function(){i.find(".slider-con").css("width",100*(s.$modelValue||0)/r+"%")},i.mousedown(function(i){i.stopPropagation();var p,u=i.offsetX,g=i.pageX,m=function(e){e.stopPropagation(),p=e.pageX-g;var t=Math.abs(((u+p)*c/l).toFixed(d))*l;t>r?t=Math.abs(r):o>t&&(t=Math.abs(o)),s.$viewValue!==t&&(s.$setViewValue(t),s.$render(),n.$apply())},h=function(){t.unbind("mouseup",h),t.unbind("mousemove",m),a.hisRecords&&e.$broadcast("hisChange")};t.mousemove(m),t.mouseup(h)}),i.click(function(t){t.stopPropagation();var i=Math.abs(t.offsetX*r/100/l).toFixed(d)*l;i>r?i=Math.abs(r):o>i&&(i=Math.abs(o)),s.$setViewValue(i),s.$render(),n.$apply(),a.hisRecords&&e.$broadcast("hisChange")})}}}]),angular.module("common.resources.print",["common.services.print"]).factory("printResource",["$rootScope","printService","$q",function(e,t,n){function i(){return S}function a(){return T}function s(i){return i.type&&i.width&&i.height&&i.unit?t.addPrint(i).then(function(t){return e.$broadcast("print.add",t.data),t.data}).catch(function(e){n.reject(e)}):void 0}function o(n,i,a,s,o){t.getPrintList(n,i,a,s,o).success(function(t){t.success&&e.$broadcast("printList.get",t)})}function r(i){return t.getPrint(i).then(function(t){var n=t.data||{};return e.$broadcast("printBase.get",n.obj),n.obj}).catch(function(e){n.reject(e)})}function l(i,a){return t.getPrint(i,1).then(function(t){var n=t.data||{};return e.$broadcast("printDetail.get",n.obj),n.obj}).catch(function(t){e.$broadcast("printDetail.get.fail"),n.reject(t)})}function c(n){t.deletePrint(n).success(function(t){t.success&&e.$broadcast("print.delete")})}function d(n){t.copyPrint(n).success(function(t){t.success&&e.$broadcast("print.copy",t)})}function p(n,i){t.transferPrint(n,i).success(function(t){t.success?e.$broadcast("print.transfer","success",t):e.$broadcast("print.transfer","fail",t)})}function u(n){t.applyTpl(n).success(function(t){t.success?e.$broadcast("print.apply","success",t):e.$broadcast("print.apply","fail",t)})}function g(n,i,a,s){t.getTemplateList(n,i,a,s).success(function(t){t.success&&e.$broadcast("templateList.get",t)})}function m(){t.getHotList().success(function(t){t.success&&e.$broadcast("hotList.get",t)})}function h(){t.getScenePicGroup().success(function(t){t.success&&e.$broadcast("scenePic.group.get",t.list)})}function f(n,i){t.saveToH5(n,i).success(function(t){t.success&&e.$broadcast("saveToH5.success")})}function v(){return t.getAds().then(function(t){var n=t.data;return e.$broadcast("ads.get",n),n}).catch(function(e){n.reject(e)})}function b(i,a,s){return t.getOrderInfo(i,a,s).then(function(t){var n=t.data;return e.$broadcast("orderInfo.get",n),n}).catch(function(e){n.reject(e)})}function y(e,i){return t.getDetailsURL(e,i).then(function(e){return e.data}).catch(function(e){n.reject(e)})}function w(i,a,s,o){return t.getPngPrint(i,a,s,o).then(function(t){var n=t.data;return e.$broadcast("pngPrint.get",n),n}).catch(function(e){n.reject(e)})}function x(){return t.getOrderCount().then(function(e){return e.data}).catch(function(e){n.reject(e)})}var S=[{name:"名片",value:"1",width:90,height:54,unit:"mm"},{name:"邀请函",value:"2",width:140,height:210,unit:"mm"},{name:"贺卡",value:"3",width:140,height:210,unit:"mm"},{name:"海报",value:"4",width:420,height:570,unit:"mm"},{name:"宣传单",value:"5",width:210,height:285,unit:"mm"},{name:"淘宝商品主图",value:"6",width:800,height:800,unit:"px"},{name:"微信公众号首图",value:"7",width:900,height:500,unit:"px"},{name:"长图",value:"8",width:800,height:2400,unit:"px"},{name:"GIF动图",value:"9",width:600,height:800,unit:"px"},{name:"自定义",value:"0"}],T={onlineMarketing:[{name:"长图",value:"8"},{name:"淘宝商品主图",value:"6"},{name:"微信公众号首图",value:"7"},{name:"GIF动图",value:"9"}],adPrint:[{name:"宣传单",value:"5"},{name:"邀请函",value:"2"},{name:"海报",value:"4"},{name:"贺卡",value:"3"},{name:"名片",value:"1"}]};return{addPrint:s,getPrintList:o,getPrintBase:r,getPrintDetail:l,deletePrint:c,copyPrint:d,transferPrint:p,applyTpl:u,getTemplateList:g,getAllTypes:i,getTplTypes:a,getHotList:m,getScenePicGroup:h,saveToH5:f,getAds:v,getOrderInfo:b,getDetailsURL:y,getPngPrint:w,getOrderCount:x}}]),angular.module("common.services.print",[]).factory("printService",["$http",function(e){function t(t){return e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+"m/print/create",headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})}function n(t,n,i,a,s){var o="m/print/list?";return o+="pageNo="+(t||1),o+="&pageSize="+(n||10),"string"==typeof i&&(o+="&type="+i),"string"==typeof a&&(o+="&width="+a),"string"==typeof s&&(o+="&height="+s),e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+o})}function i(t,n){var i="m/print/info?id="+t;return n&&(i+="&page=1"),e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+i})}function a(t){var n="m/print/delete?id="+t;return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+n})}function s(t){var n="m/print/copy?id="+t;return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+n})}function o(t,n){var i="m/print/transfer";return i+="?loginName="+n,i+="&id="+t,e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+i})}function r(t){var n="m/print/tpl/apply?id="+t;return e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+n})}function l(t,n,i,a){var s="m/print/tpl/page/list";return s+="?pageNo="+(t||1),s+="&pageSize="+(n||10),"number"==typeof i&&(s+="&type="+i),"number"==typeof a&&a&&(s+="&tag="+a),e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+s})}function c(){return e({withCredentials:!0,method:"POST",url:PRINT_HOST_SERVER+"m/print/hot/list"})}function d(){return e({withCredentials:!0,method:"GET",url:PREFIX_URL+"m/base/file/tag/my"})}function p(t,n){var i={list:n,tagId:t};return e({withCredentials:!0,method:"POST",headers:{"Content-Type":"text/plain; charset=UTF-8"},url:PRINT_HOST_SERVER+"m/print/save/file",data:i})}function u(){return e({method:"GET",url:PREFIX_S2_URL+"index.php?c=ad&a=banners&pageCode=print_ads"})}function g(t,n,i){var a={pageNo:t,pageSize:n};return"all"!=i&&$.extend(a,{status:i}),e({withCredentials:!0,method:"GET",params:a,url:PRINT_HOST_SERVER+"m/print/printshop/order"})}function m(t,n){return e({withCredentials:!0,method:"POST",params:{orderNumber:t,shopId:n},url:PRINT_HOST_SERVER+"m/print/printshop/order/details"})}function h(t,n,i,a){var s={printId:t,shopId:n,pages:i,version:a};return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+"m/print/printshop/exp/pdf",params:s})}function f(){return e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+"m/print/printshop/order/count"})}return{addPrint:t,getPrintList:n,getPrint:i,deletePrint:a,copyPrint:s,transferPrint:o,applyTpl:r,getTemplateList:l,getHotList:c,getScenePicGroup:d,saveToH5:p,getAds:u,getOrderInfo:g,getDetailsURL:m,getPngPrint:h,getOrderCount:f}}]),angular.module("common.resources.print.template",["common.services.print.template"]).factory("templateResource",["$rootScope","templateService",function(e,t){function n(n){t.getTagCategory(n).success(function(t){t.success&&e.$broadcast("TagCategory.get",t)})}return{getTagCategory:n}}]),angular.module("common.services.print.template",[]).factory("templateService",["$http",function(e){function t(t){var n="base/class/print_size_list";return"0"!=t&&(n+="_"+t),e({withCredentials:!0,method:"GET",url:PRINT_HOST_SERVER+n})}return{getTagCategory:t}}]),angular.module("print.directives.validate",[]).directive("eqdValidate",function(){function e(e,t,n){t.on("$destroy",function(){t.unbind("keydown")}),t.keydown(function(e){var t=e.keyCode;return!/number/.test(n.eqdValidate)||!e.shiftKey&&!!(t>=48&&57>=t||t>=96&&105>=t||36==t||35==t||37==t||39==t||8==t||46==t)})}return{link:e}}),angular.module("security.authority",[]).factory("authority",[function(){return{accessDef:{GROUP_CUSTOMER:1,SCENE_HIDE_LASTPAGE_SETTING:2,TRANSFER_SCENE:4,SCENE_EDIT_TRIGGER:8,EXPAND_WEBSITE:16,SCENE_EDIT_SOUND:32,ACCESS_NEW_PAGEFLIP:64,COMP_ANIMATION:128,RADIO_CHECKBOX_RATING:256,INTERACTION:512,ACCESS_DOMAIN_BIND:1024,LOADING_LOGO:2048,TEMPLATE_PAYMENT:4096,INTERACTION_COUNTER:8192,SCENE_PASSWORD:16384,USERCENTER_HISTORY:32768,APPLY_XIUKE:65536,SHAKE_TRIGGER:131072,ACCESS_WX_AUTH:262144,ACCESS_PSD_UPLOAD:524288,ACCESS_CUSTOMER_SERVICE:1048576,ACCESS_QCLOUD:2097152,ACCESS_COMP_MANAGE:4194304},userRoleDef:{1:{code:74045,name:"普通账号"},2:{code:3469311,name:"企业账号"},21:{code:3206143,name:"企业子账号"},5:{code:3207167,name:"公共账号"},51:{code:3206143,name:"公共子账号"},3:{code:5174271,name:"高级用户"},4:{code:4847615,name:"服务商用户"},99:{code:5895167,name:"超级用户"}}}}]),angular.module("security.authorization",["security.service"]).provider("securityAuthorization",{requireAdminUser:["securityAuthorization",function(e){return e.requireAdminUser()}],requireAuthenticatedUser:["securityAuthorization",function(e){return e.requireAuthenticatedUser()}],$get:["security","securityRetryQueue","$location",function(e,t,n){var i={requireAuthenticatedUser:function(){return e.requestCurrentUser().then(function(){return e.isAuthenticated()||"/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path()?void 0:t.pushRetryFn("unauthenticated-client",i.requireAuthenticatedUser)})},requireAdminUser:function(){return e.requestCurrentUser().then(function(){return e.isAdmin()?void 0:t.pushRetryFn("unauthorized-client",i.requireAdminUser)})}};return i}]}),angular.module("security",["security.service","security.interceptor","security.authorization"]),angular.module("security.interceptor",["security.retryQueue"]).factory("securityInterceptor",["$injector","$q","securityRetryQueue","$location",function(e,t,n,i){return{responseError:function(a){return 401===a.status?n.pushRetryFn("unauthorized-server",function(){return e.get("$http")(a.config)}):(403===a.status&&(alert("对不起，您没有查看此内容的权限"),i.path("/home")),t.reject(a))}}}]).config(["$httpProvider",function(e){e.interceptors.push("securityInterceptor"),e.interceptors.push(["$q",function(e){var t=0;return{request:function(n){return n.loading&&($("#loading").show(),t++),n||e.when(n)},responseError:function(n){return n.config.loading&&(--t||$("#loading").hide()),e.reject(n)},response:function(n){return n.config.loading&&(--t||$("#loading").hide()),n||e.when(n)}}}])}]),angular.module("security.login.reset",["services.localizedMessages"]).controller("ResetFormController",["$scope","security","localizedMessages","$location","resetKey",function(e,t,n,i,a){e.password={},e.checkPassword=function(){if(e.password.newPw){if(/^[a-zA-Z0-9]{6,16}$/g.test(e.password.newPw))return e.passError=null,!0;e.passError="密码为6~16个字符(英文字母或数字，区分大小写)"}else e.passError="新密码不能为空";return!1},e.checkRepeatPassword=function(){if(e.password.confirm){if(e.password.confirm===e.password.newPw)return e.rPassError="",!0;e.rPassError="两次密码输入不一致，请重新输入"}else e.rPassError="确认密码不能为空";return!1},e.reset=function(){e.checkPassword()&&e.checkRepeatPassword()&&t.resetPassByKey(e.password.newPw,a).then(function(t){200===t.data.code?(alert("修改成功"),e.$close(),i.path("/main").search({})):1011===t.data.code&&(e.authError=t.data.msg)})},e.cancel=function(){e.$dismiss()}}]).directive("equals",function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){e.$watch(n.ngModel,function(){a()}),n.$observe("equals",function(){a()});var a=function(){var e=i.$viewValue,t=n.equals;i.$setValidity("equals",e===t)}}}}}),angular.module("security.login.pwd",["services.localizedMessages","app.directives.addelement","security.thirdparty"]).controller("FindPwdController",["$rootScope","$scope","$timeout","$window","security","localizedMessages","$location","$sce","thirdpartyService",function(e,t,n,i,a,s,o,r,l){function c(){0===p?(t.isCodeAccessiable=!1,t.codeTip="获取验证码",p=60):(t.isCodeAccessiable=!0,t.codeTip="重新发送("+p+")",n(function(){p--,c()},1e3))}config.product="popup",t.phone=!1;var d=function(){t.phone?config.popupbtnid="submit-button":config.popupbtnid="mobile-button";var e="https://api.geetest.com/get.php?callback=initCaptcha&time="+(new Date).getTime();t.validateCodeUrl=r.trustAsResourceUrl(e)};d(),t.user={},t.retrieve={},t.showLogin=!0,t.sendPassword=!1,t.unExist=!1,t.cancel=function(){o.path("/home",!1)},t.openLogin=function(){o.path("/home/login",!1)},n(function(){$('input[name="userEmail"]').focus()},300),t.phonePwd=function(){t.phone=!0,t.retrieveError="",d()},t.emailPwd=function(){t.phone=!1,t.retrieveError="",d()},t.getPwdCode=function(e){challenge&&validate&&seccode?t.getCode(e):t.pwdCode=!0},t.getCode=function(e){if(!e)return void(t.userPhone="请填写手机号");var n={phone:e,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};a.getResetCode(n).success(function(e){challenge="",validate="",seccode="",t.userPhone=e.success,200===e.code?(t.userPhone="",c()):t.userPhone=e.msg})};var p=60;t.retrievePhonePassword=function(){return t.retrieve.phone?t.retrieve.code?void a.retrievePhonePassword(t.retrieve.phone,t.retrieve.code).then(function(e){200===e.data.code?window.location.href="/home/reset?resetToken="+e.data.obj:110013===e.data.code?t.retrieveError="短信验证码失效，请重新获取":1018===e.data.code&&(t.retrieveError="手机验证码输入错误")}):void(t.codeError="请填写手机验证码"):void(t.userPhone="请填写手机号")},t.retrievePassword=function(){return t.retrieve.email?/^[a-zA-Z0-9]+((-*|_*|\.?)[a-zA-Z0-9]+)*@[a-zA-Z0-9]+(([-|_]*[a-zA-Z0-9]+)*(\.[a-zA-Z0-9]+)+)+$/.test(t.retrieve.email)?challenge&&validate&&seccode?void a.retrievePassword(t.retrieve.email,challenge,validate,seccode).then(function(e){challenge="",validate="",seccode="",200===e.data.code?(t.sendPassword=!0,submit=!1):1003===e.data.code?t.retrieveError="账号不存在":1005===e.data.code&&(t.retrieveError="验证码错误")}):void(t.retrieveError="验证码不能为空"):(t.retrieveError="请正确填写邮箱",!1):void(t.retrieveError="邮箱不能为空")}}]),angular.module("security.login",["security.login.form","security.login.reset","security.login.toolbar","security.login.pwd"]),angular.module("security.login.toolbar",["services.usercenter"]).directive("loginToolbar",["security","$rootScope","usercenterService","$location","dataCacheService",function(e,t,n,i,a){return{templateUrl:"security/login/toolbar.tpl.html",restrict:"E",replace:!0,scope:!0,link:function(n){n.PREFIX_FILE_HOST=PREFIX_FILE_HOST,n.isAuthenticated=e.isAuthenticated,n.login=e.showLogin,n.logout=e.logout,n.requestResetPassword=e.requestResetPassword,n.isAdvancedUser=t.isAdvancedUser,n.isEditor=t.isEditor,n.isVendorUser=t.isVendorUser,n.$watch(function(){return e.currentUser},function(e){n.currentUser=e,n.currentUser.headImg?/^http.*/.test(e.headImg)&&(n.headImg=e.headImg):n.headImg=CLIENT_CDN+"assets/images/defaultuser.jpg"}),n.$on("headImg.change",function(e,t){n.currentUser.headImg=t}),n.changeCurrent=function(){a.clear("sceneList"),t.branchid="",i.search("branchid",null),i.path("/usercenter/children")},n.openMsgPanel=function(){$(".mes_con").hasClass("open")}}}}]),angular.module("security.register.company",[]),angular.module("security.register.company").controller("companyRegsterCtrl",["$scope","security","$timeout",function(e,t,n){function i(){0===a?(e.isCodeAccessiable=!1,e.codeTip="获取验证码",a=60):(e.isCodeAccessiable=!0,e.codeTip="重新发送("+a+")",n(function(){a--,i()},1e3))}config.product="popup",e.checkName=function(t){return t.name?countCharacters(t.name)>40?(e.nameError="企业名称不能超过40个字符",!1):(e.nameError="",!0):(e.nameError="请填写企业名称",!1)},e.checkEmail=function(t){var n=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return t.email&&!n.test(t.email)?(e.emailError="请正确填写邮箱",!1):t.email?(e.emailError="",!0):(e.emailError="请填写企业邮箱",!1)},e.checkcontacts=function(t){return t.contacts?countCharacters(t.contacts)>30?(e.contactsError="联系人不能超过30个字符",!1):(e.contactsError="",!0):(e.contactsError="请填写联系人",!1)},e.checkAddress=function(t){return t.address?countCharacters(t.address)>50?(e.addressError="联系地址不能超过50个字符",!1):(e.addressError="",!0):(e.addressError="请填写联系地址",!1)},e.checkCode=function(t){return t.code?(e.codeError="",!0):(e.codeError="请输入手机验证码",!1)},e.checkPassword=function(t){if(t.password){if(/^[a-zA-Z0-9]{6,16}$/g.test(t.password))return e.pwdError=null,!0;e.pwdError="密码为6~16个字符(英文字母或数字，区分大小写)"}else e.pwdError="密码不能为空";return!1},e.getImageCode=function(){challenge&&validate&&seccode&&e.getCode()},e.getCode=function(){var n=e.companyInfo;if(!n||!n.mobile)return e.telError="请填写手机号码",!1;e.telError="";var a={phone:n.mobile,geetest_challenge:challenge,geetest_validate:validate,geetest_seccode:seccode};t.getCode($.param(a)).success(function(t){challenge="",validate="",seccode="",200===t.code?i():e.telError=t.msg})},e.isCodeAccessiable=!1;var a=60;e.checkFormFormat=function(t){return!!(e.checkName(t)&&e.checkPassword(t)&&e.checkEmail(t)&&e.checkcontacts(t)&&e.checkAddress(t))};var s=!1;e.register=function(n){if(!n)return void(e.regErr="请填写注册信息");e.regErr="";var i={phone:n.mobile,password:n.password,code:n.code,name:n.name,email:n.email,contacts:n.contacts,address:n.address};e.checkFormFormat(n)&&(s||(s=!0,t.register($.param(i),"",n.mobile,!0).then(function(t){s=!1,t&&(e.regErr=t.msg)})))}}]),angular.module("security.retryQueue",[]).factory("securityRetryQueue",["$q","$log",function(e,t){var n=[],i={onItemAddedCallbacks:[],hasMore:function(){return n.length>0},push:function(e){n.push(e),angular.forEach(i.onItemAddedCallbacks,function(n){try{n(e)}catch(e){t.error("securityRetryQueue.push(retryItem): callback threw an error"+e)}})},pushRetryFn:function(t,n){1===arguments.length&&(n=t,t=undefined);var a=e.defer(),s={reason:t,retry:function(){e.when(n()).then(function(e){a.resolve(e)},function(e){a.reject(e)})},cancel:function(){a.reject()}};return i.push(s),a.promise},retryReason:function(){return i.hasMore()&&n[0].reason},cancelAll:function(){for(;i.hasMore();)n.shift().cancel()},retryAll:function(){for(;i.hasMore();)n.shift().retry()}};return i}]),angular.module("security.service",["security.retryQueue","security.authority","security.login.toolbar","ui.bootstrap.modal"]).factory("security",["$rootScope","$http","$q","$location","securityRetryQueue","$modal","ModalService","authority","dataCacheService","authService",function(e,t,n,i,a,s,o,r,l,c){function d(e){e=e||"/",window.location.href=e}function p(){var t="/upgrade/"===i.path().substring(0,9)||"/xdBuy"===i.path();m||(m=c.showAuth({type:"login"}).then(function(n){"registerEnterprise"===n.type?(t?localStorage.setItem("upgradeUrl",i.path()):localStorage.removeItem("upgradeUrl"),i.path("/reg/guide/company"),a.cancelAll()):"register"===n.type?(t?f.requestCurrentUser(function(){e.$broadcast("toAppUpgrade")}):i.path("/main"),a.cancelAll()):"login"===n.type?(f.currentUser=null,f.requestCurrentUser(function(){var n=l.get("currentuser","currentuser");return t?void e.$broadcast("toAppUpgrade"):void(n!==f.currentUser.id?(i.path("/main"),a.cancelAll()):a.retryAll())})):"reset"===n.type&&(i.path("/main"),a.cancelAll())},function(){a.cancelAll(),t||d()}).finally(function(){m=null}))}function u(e){h=e}function g(){return h}var m=null;a.onItemAddedCallbacks.push(function(){a.hasMore()&&f.showLogin()});var h={},f={showLogin:function(){p()},getUserDetail:function(e,n,i){var a=PREFIX_URL+"base/relUserInfo?type="+e+"&openId="+n+"&accessToken="+i;return a+="&date="+(new Date).getTime(),t({method:"GET",url:a,withCredentials:!0})},checkUniquenessNew:function(e){var n=PREFIX_URL+"m/u/check/loginid?username="+e;return n+="&date="+(new Date).getTime(),t({method:"GET",url:n,withCredentials:!0})},addRegisterInfo:u,getRegisterInfo:g,getCode:function(e){var n=PREFIX_URL+"index.php?c=user&a=register/code";return t({method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,data:e})},hasRel:function(e){registerDialog&&closeUserDialog(registerDialog,!1);var n=new Date,a=PREFIX_URL+"base/user/hasRel?type="+e.type+"&openId="+e.openId+"&time="+n.getTime();t.get(a,{withCredentials:!0}).then(function(t){200===t.status?!0===t.data.success?(("/home"===i.path()||"/home/login"===i.path())&&i.path("main"),f.requestCurrentUser()):"未关联账号"===t.data.msg&&openOtherRegisterDialog(e):f.isAuthenticated()},function(){f.isAuthenticated()})},logout:function(n,a){t({withCredentials:!0,method:"GET",url:PREFIX_URL+"?c=user&a=logout"}).then(function(){f.currentUser=null,a?(e.$broadcast("toAppUpgradeLogout"),p(i.path())):d(n)},function(){f.currentUser=null,a?p():d(n)})},userPromise:null,requestCurrentUser:function(i){if(f.isAuthenticated())return n.when(f.currentUser);var a=new Date;return f.userPromise?f.userPromise:(f.userPromise=t.get(PREFIX_URL+"index.php?c=user&a=check&time="+a.getTime(),{withCredentials:!0}).then(function(t){if(f.userPromise=null,t.data.success){if(t.data.obj?e.userPermit=","+t.data.obj.extPermi+",":e.userPermit=null,f.currentUser=t.data.obj,i)i();else{l.get("currentuser","currentuser")!==f.currentUser.id&&(l.clear(),l.push("currentuser","currentuser",f.currentUser.id))}(!f.currentUser.roleIdList||f.currentUser.roleIdList.length<=0)&&(f.currentUser.roleIdList=[2])}return f.currentUser},function(){f.userPromise=null}),f.userPromise)},isAuthenticated:function(){return!!f.currentUser},setLoginSuccess:function(e){f.isLoginSuccess=e},isAllowToAccess:function(e){if(!f.currentUser)return!1;var t=r.userRoleDef[f.currentUser.type];return!!(t&&(t.code&e)>0)},accessDef:r.accessDef,isEditor:function(){if(!f.currentUser)return!1;var e=f.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if(4===e[t])return!0;return!1},isTplEditor:function(){if(!f.currentUser)return!1;var e=f.currentUser.roleIdList;if(!e)return!1;for(var t=0;t<e.length;t++)if(4===e[t]||12===e[t]||13===e[t])return!0;return!1},isAdvancedUser:function(){return!(!f.currentUser||3!==f.currentUser.type)},isVendorUser:function(){return!(!f.currentUser||4!==f.currentUser.type)},requestResetPassword:function(e){openResetPasswordDialog(e)},validateToken:function(e){var n="changepw?token="+e;return t.get(PREFIX_URL+n,{withCredentials:!0})},resetPassword:function(e,n){var i=PREFIX_URL+"index.php?c=Usercenter&a=changePwd",a={oldPwd:e,newPwd:n};return t.post(i,$.param(a),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}};return f}]),angular.module("security.thirdparty",["security.service"]).factory("thirdpartyService",["$rootScope","$http","$location","$window","security","i18nNotifications",function(e,t,n,i,a,s){function o(e){var t=["client_id=101149132","redirect_uri="+e,"scope=get_user_info","response_type=token"],n=t.join("&");return l="https://graph.qq.com/oauth2.0/authorize?"+n}function r(e){var t=["appid=wxc5f1bbae4bb93ced","redirect_uri="+e,"scope=snsapi_login","response_type=code","state=WECHAT_STATE#wechat_redirect"],n=t.join("&");return c="https://open.weixin.qq.com/connect/qrconnect?"+n}var l,c,d={qqUrl:o,wxUrl:r,referrer:"http://eqxiu.com/home",cookieId:eqShow.getCookieId(),qqLogin:function(e,t){d.getThirdPartyInfo(e).then(function(n){var i=n.openid,a=(n.client_id,{email:"",password:"",openId:i,accessToken:e,type:"qq",expires:t,cookieId:d.cookieId,referrer:d.referrer});d.thirdPartLogin(a)})},thirdPartLogin:function(e){return t.post(PREFIX_URL+"index.php?c=otherlogin",$.param(e),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){if(200===e.status){if(!0!==e.data.success)return e.data;("/home"==n.path()||"/home/login"==n.path())&&n.path("main"),a.setLoginSuccess(!0),a.requestCurrentUser()}else a.isAuthenticated()},function(e){a.isAuthenticated()})},getThirdPartyInfo:function(e){var t="https://graph.qq.com/oauth2.0/me?access_token="+e;return $.ajax({type:"get",url:t,dataType:"jsonp",jsonp:"jsoncallback",jsonpCallback:"callback",xhrFields:{withCredentials:!0}})},weiChatLogin:function(e){return t.post(PREFIX_URL+"eqs/relWechatAccount?code="+e+"&type=weixin&cookieId="+d.cookieId+"&referrer="+d.referrer+"&isMobile=1&time="+(new Date).getTime(),{},{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},unbindRelation:function(n){var i={type:n};t({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/u/unRelation",data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){t.data.success&&e.$broadcast("mail.unbind.success",n)})},wxBindAccount:function(e){d.bindAccountCommon(e)},qqBindAccount:function(e){d.getThirdPartyInfo(e.access_token).then(function(t){var n=t.openid,i=(t.client_id,{openId:n,accessToken:e.access_token,expires:e.expires_in,type:"qq"});d.bindAccountCommon(i)},function(){})},bindAccountCommon:function(n){t({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/u/bind/third",data:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){t.data.success?e.$broadcast("rel.success",n.type):s.pushForCurrentRoute("already.bind.error","notify.success",{msg:t.data.msg})},function(){alert("服务器异常！")})},openThirtyPartyWindow:function(e){d.referrer=document.referrer;var t,n=eqShow.getDomain(window.location.href),a=encodeURIComponent("http://"+n+"/passport.html");"qq"==e?t=d.qqUrl(a):"weixin"==e&&(t=d.wxUrl(a));var s=(window.outerHeight-600)/2,o=(window.outerWidth-600)/2;i.open(t,"_blank","width=600,height=600,menubar=no,toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,top="+s+",left="+o)}};return d}]),angular.module("services.active",[]).factory("activeService",["$rootScope","$http",function(e,t){var n={};return n.getActiveList=function(e,n,i){var a=PREFIX_S1_URL+"eqs/activity/scene";return e&&(a+=/\?/.test(a)?"&":"?",a+="promId="+e),n&&(a+=/\?/.test(a)?"&":"?",a+="pageNo="+n),i&&(a+=/\?/.test(a)?"&":"?",a+="pageSize="+i),t({withCredentials:!0,method:"GET",url:a})},n}]),angular.module("services.breadcrumbs",[]),angular.module("services.breadcrumbs").factory("breadcrumbs",["$rootScope","$location",function(e,t){var n=[],i={};return e.$on("$routeChangeSuccess",function(){var e,i=t.path().split("/"),a=[];for(i.shift(),e=0;e<i.length;e++)a.push({name:i[e],path:function(e){return"/"+i.slice(0,e+1).join("/")}(e)});n=a}),i.getAll=function(){return n},i.getFirst=function(){return n[0]||{}},i}]),angular.module("service.codeMessage",[]).factory("codeMessageService",function(){var e={200:"操作成功",500:"服务器异常",403:"未授权 禁止访问",1001:"未登录",1002:"登录超时",1003:"账号不存在",1004:"密码错误",1005:"验证码错误",1006:"重复注册",1007:"当前账号被冻结，请联系客服处理",1008:"邮箱不能为空",1009:"手机号不能为空",1010:"数据不合法",1011:"不存在该数据",1012:"重复请求",1013:"超过有效期",1014:"验证码错误",1015:"已验证过邮箱",1016:"发送验证码失败,请明天再试!",1017:"发送验证码过于频繁,请稍候重试!",1018:"手机验证码输入错误",1019:"请求太频繁, 请稍候再试",1020:"请获取验证码",110001:"未关联账号",110002:"密码不能为空",110003:"旧密码不正确",110004:"无效的邮件地址",110005:"该链接已失效!",110006:"子账号数量已超过限制",110007:"手机号格式不合法",110008:"不可重复请求！",110010:"更新失败！",110011:"您尚未绑定保密邮箱，无法申请，请在用户中心--账号安全中绑定保密邮箱",110012:"没有权限",110013:"短信验证码失效，请重新获取",110014:"子账号不能添加子账号，请刷新浏览器",110015:"您的短信已用完，请充值",110016:"短信数量不足，请充值",110017:"短信发送失败,请检查客户手机号是否正确",110018:"发送失败,请稍后重试",110019:"账号被冻结，请在企业管理员账号中重新启用",110201:"绑定id不是临时用户id",110202:"用户已经存在",110203:"无效的账号",110204:"用户不存在",110205:"用户名与密码不匹配",110206:"输入邮箱已经关联qq",110207:"输入邮箱已经关联微信",110208:"输入邮箱已经关联微博",110209:"code为空或者不存在",110210:"绑定第三方账号失败，请稍候再试！",110211:"此微信已经绑定过易企秀账号",110212:"call api map is null",110213:"账号未关联",110214:"域名不能为空",110215:"邮箱格式不合法",110216:"3分钟内不可重复请求！",110217:"每天发送量已达上限",110218:"邮件发送失败!",110220:"邮件已发送",110222:"请求已过期，请重新发送短信进行验证！",110223:"无效用户",110224:"与绑定手机号码不符！",110225:"有效期已过，请重新发送验证邮件",110226:"验证邮箱不存在!",110227:"此QQ已经绑定过"+your_webname+"账号",110228:"该邮箱已经被绑定，请更换其他邮箱",110229:"此用户名已被其它用户绑定",110301:"请求参数不合法",110302:"appid不存在",110303:"请求地址与注册信息不符",110304:"参数p2不合法",110305:"token不合法",110306:"域名不合法",110307:"该场景信息不存在",110401:"手机号码已被占用，请更换其它手机号码！",110402:"请更换其它手机号码！",110403:"请输入手机验证码！",110501:"主账号不存在！",110502:"从账号不存在！",110503:"添加部门重复请重新输入",120001:"页面不存在或已删除",120101:"场景保存失败，请稍后重试",120102:"场景不能转送给自已",120103:"保存失败，服务器忙碌请稍后重试",120104:"请为场景起个名字!",120105:"场景创建中，请耐心等待",120106:"添加微信组件或访问密码的场景，无法申请场景保障服务",120107:"您的场景保障服务剩余天数不足",120108:"场景不存在",120109:"审核中或审核不通过的场景，无法申请场景保障服务",120201:"参数不正确",120202:"请重新设置场景标签！",120203:"付费样例免费使用次数已用尽",120204:"企业帐号会员到期",120301:"您今天的前置场景审核次数已用尽",120302:"您今天的驳回加急审核次数已用尽",120303:"前置场景审核每次间隔1小时",120304:"请先重新编辑场景",120305:"场景已在审核队列中，请耐心等待",120306:"请先验证手机号",120307:"当前场景在审核中，无法编辑",120401:"只有企业用户可以查询场景设备和地域浏览量",120402:"免费升级企业会员可使用",130001:"秀点不足",130002:"操作过于频繁，请稍候再试！",130003:"当前要使用的样例价格已被用户修改，请刷新重新选择使用！",130004:"您的秀点余额不足，无法使用该样例，请先购买或参与活动获取秀点",130005:"秀点转送失败",130006:"当前样例价格为：",140101:"申请失败！",140102:"作品不能相同",140103:"服务领域不能超过3个",140104:"擅长领域不能超过5个",140105:"申请成功,请等待审核!",140106:"企业账号与企业子账号不可申请成为秀客！",140107:"秀客信息不存在！",140108:"标签项不能为空！",140109:"秀客作品不能为空！",140110:"申请审核中不可修改信息！",140111:"服务领域不可为空",140112:"擅长领域不可为空",140113:"支付方式不可为空",140001:"删除失败",140002:"修改失败！",150101:"您不是企业会员,请先申请企业会员后再进行操作！",150102:"请先验证手机号",150103:"定制活动申请已在审核中，请耐心等待",150104:"定制活动已通过审核，请等待活动发布",160001:"二级分类不能为'全部'",160002:"add tag size more than 50",160003:"delete tag size more than 50",160004:"请选择业务类型！",160005:"无效的参数",160006:"该图片格式不支持裁切",160007:"裁剪失败",160008:"tagid is all",160009:"tagid is null",160010:"路径不能为空！",160011:"文件地址不正确！",160012:"文件格式不正确",160013:"文件超过最大限制",160014:"不支持该图片格式",160015:"无效的图片",160016:"无效的文件",160017:"文件数据不正确",160018:"文件名有误，请获取客户模板，并按要求填写内容后再次上传",170001:"轻印刷作品不存在！",170101:"复制轻印刷作品失败！",170102:"普通用户无法接收轻印刷作品！",180001:"未能成功获取秉钧token",180002:"未能登录到秉钧",970101:"您不是企业会员,请先申请企业会员后再进行升级！",970102:"会员未到期,不可购买其他会员服务!",970103:"专业版会员只能续费专业版会员服务!",970104:"畅享版会员只能续费畅享版会员服务!",970105:"每次最多只能购买两次会员服务！",970106:"基础版或高级版会员不可升级为畅享版、专业版或渠道专享版会员！",970107:"渠道专享版会员只能续费渠道专享版会员服务！",970108:"请购买更高级别的会员！",970109:"您的会员有效期超过两年或续费后超过两年，无法续费或升级！",970110:"您暂时无法升级该级别会员，请联系客服：010-83035157",970111:"新版会员与原有会员体系不可交叉购买",970112:"您购买后，会员有效期超过服务终止期限，无法购买！",970113:"企业体验版一次最多只能购买6个月",970201:"所选订单中存在已开发票订单！",990001:"android临时关闭qq注册功能，详情请看论坛(bbs.eqxiu.com)通知！",990002:"get ticket error",990003:"请选择要审核的场景记录",990004:"未支持的审核类型",990005:"请选择要审核的场景！",990006:"无效的参数",990007:"无效的appid和secre！",990008:"secre为空",990009:"appid为空",990010:"请选择要审核的轻印刷产品记录！",990010:"创建分组失败",990011:"请选择要删除的用户！",990012:"请选择要删除的词语！",990013:"用户邮箱不能为空！"};return{getMsg:function(t,n){return 200===t.code&&angular.isFunction(n)?void n.apply():200===t.code?"":t.msg||e[t.code]}}}),angular.module("services.config",[]).factory("configService",["$http",function(e){var t=function(){var t=PREFIX_S2_URL+"index.php?c=ad&a=logo";return e({method:"GET",url:t})},n=function(){var t=PREFIX_S2_URL+"index.php?c=ad&a=banner";return e({method:"GET",url:t})},i=function(){var t=PREFIX_S2_URL+"index.php?c=ad&a=friendlinks";return e({method:"GET",url:t})};return{getBanner70:function(){var t=JSON_URL+"?c=ad&a=getBanner70";return e({withCredentials:!0,method:"GET",url:t})},getMenu70:function(){var t=JSON_URL+"?c=ad&a=getMenu70";return e({withCredentials:!0,method:"GET",url:t})},getBanners:n,getFriendLinks:i,getLogo:t}}]),angular.module("services.crud",["services.crudRouteProvider"]),angular.module("services.crud").factory("crudEditMethods",function(){return function(e,t,n,i,a){var s={};return s[e]=t,s[e+"Copy"]=angular.copy(t),s.save=function(){this[e].$saveOrUpdate(i,i,a,a)},s.canSave=function(){return this[n].$valid&&!angular.equals(this[e],this[e+"Copy"])},s.revertChanges=function(){this[e]=angular.copy(this[e+"Copy"])},s.canRevert=function(){return!angular.equals(this[e],this[e+"Copy"])},s.remove=function(){this[e].$id()?this[e].$remove(i,a):i()},s.canRemove=function(){return t.$id()},s.getCssClasses=function(e){var t=this[n][e];return{error:t.$invalid&&t.$dirty,success:t.$valid&&t.$dirty}},s.showError=function(e,t){return this[n][e].$error[t]},s}}),angular.module("services.crud").factory("crudListMethods",["$location",function(e){return function(t){var n={};return n.new=function(){e.path(t+"/new")},n.edit=function(n){e.path(t+"/"+n)},n}}]),function(){function e(e){this.$get=angular.noop,this.routesFor=function(t,n,i){var a=t.toLowerCase(),s="/"+t.toLowerCase();i=i||n,angular.isString(n)&&""!==n&&(a=n+"/"+a),null!==i&&i!==undefined&&""!==i&&(s="/"+i+s);var o=function(e){return a+"/"+t.toLowerCase()+"-"+e.toLowerCase()+".tpl.html"},r=function(e){return t+e+"Ctrl"},l={whenList:function(e){return l.when(s,{templateUrl:o("List"),controller:r("List"),resolve:e}),l},whenNew:function(e){return l.when(s+"/new",{templateUrl:o("Edit"),controller:r("Edit"),resolve:e}),l},whenEdit:function(e){return l.when(s+"/:itemId",{templateUrl:o("Edit"),controller:r("Edit"),resolve:e}),l},when:function(t,n){return e.when(t,n),l},otherwise:function(t){return e.otherwise(t),l},$routeProvider:e};return l}}e.$inject=["$routeProvider"],angular.module("services.crudRouteProvider",["ngRoute"]).provider("crudRoute",e)}(),angular.module("services.dataCache",[]),angular.module("services.dataCache").factory("dataCacheService",["$timeout","$rootScope",function(e,t){var n={};this.asyncUrl="",n.clear=function(e){window.sessionStorage&&(e||sessionStorage.clear(),delete sessionStorage[e])},n.push=function(e,t,n){if(window.sessionStorage){var i=sessionStorage.getItem(e);i=i?JSON.parse(i):{},i[t]=n,sessionStorage.setItem(e,JSON.stringify(i))}},n.get=function(e,t){if(!window.sessionStorage)return null;var n=sessionStorage.getItem(e);return n?(n=JSON.parse(n),n[t]):null},n.asyncGet=function(t,n){var i=sessionStorage.getItem(t);return i=JSON.parse(i),e(function(){return i[n]})},n.contains=function(e,t){if(!window.sessionStorage)return!1;var n=sessionStorage[e];return!!n&&(n=JSON.parse(n),!!n[t])},n.setAsyncUrl=function(e){this.asyncUrl=e},n.getAsyncUrl=function(){return this.asyncUrl};var i={photo:[],audio:[],shapes:[]};return n.pushUsedFile=function(e,t){var n;switch(e){case 1:n=i.photo;break;case 2:n=i.audio;break;case 7:n=i.shapes}n.indexOf(t)<=-1&&n.push(t)},n.removeUsedFile=function(e,t){var n;switch(e){case 1:n=i.photo;break;case 2:n=i.audio;break;case 7:n=i.shapes}var a=n.indexOf(t);-1!==a&&n.splice(a,1)},n.getUsedFiles=function(){for(var e=[],t=[],n=0;n<i.photo.length;n++)i.photo[n]&&(e.push(i.photo[n]),t.push(1));for(var a=0;a<i.audio.length;a++){if(!i.audio[a])return;e.push(i.audio[a]),t.push(2)}for(var s=0;s<i.shapes.length;s++){if(!i.shapes[s])return;e.push(i.shapes[s]),t.push(7)}return 0!==e.length?{file:e.join(","),type:t.join(",")}:void 0},n.clearUsedFiles=function(){i={photo:[],audio:[],shapes:[]}},t.$watch("user",function(e,t){if(e!==t){n.get("currentuser","currentuser")!==e.id&&(n.clear(),n.push("currentuser","currentuser",e.id))}}),n}]),angular.module("services.data",[]),angular.module("services.data").factory("dataService",["$http","$rootScope",function(e,t){var n={};return n.getDatas=function(n){var i="index.php?c=scenedata&a=statSum";return n&&(i+=(/\?/.test(i)?"&":"?")+"user="+n),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(e){if(e.data.success){var n=e.data.obj;t.$broadcast("sceneDatas",n)}})},n.getCustomDatas=function(n){var i="index.php?c=custom&a=statSum";return n&&(i+=(/\?/.test(i)?"&":"?")+"user="+n),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(e){if(e.data.success){var n=e.data.obj;t.$broadcast("customDatas",n)}})},n.getDataBySceneId=function(t,n,i,a){n=n||1,i=i||10;var s="index.php?c=scenedata&a=getdata&id="+t+"?pageNo="+n+"&pageSize="+i;return a&&(s+=(/\?/.test(s)?"&":"?")+"user="+a),s+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},n.getDataBySceneId=function(t,n,i,a){n=n||1,i=i||10;var s="index.php?c=scenedata&a=getdata&id="+t+"?pageNo="+n+"&pageSize="+i;return a&&(s+=(/\?/.test(s)?"&":"?")+"user="+a),s+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},n.getDataDetail=function(t,n){var i="m/c/detail/"+t;n&&(i+=(/\?/.test(i)?"&":"?")+"user="+n);var a=new Date;return i+=(/\?/.test(i)?"&":"?")+"date="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},n.getDataMessage=function(t){var n="index.php?c=custom&a=newDataScene";t&&(n+=(/\?/.test(n)?"&":"?")+"user="+t);var i=new Date;return n+=(/\?/.test(n)?"&":"?")+"date="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.getAllData=function(t,n,i,a){var s="index.php?c=custom&a=getAllData&pageSize=10&pageNo="+t;n&&(s+=(/\?/.test(s)?"&":"?")+"user="+n),a&&(s+=(/\?/.test(s)?"&":"?")+"origin="+a),i&&(s+=(/\?/.test(s)?"&":"?")+"groupId="+i);var o=new Date;return s+=(/\?/.test(s)?"&":"?")+"time="+o.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},n.getProspectDataAccount=function(t){var n="m/c/prospectCount?time="+(new Date).getTime();return t&&(n+=(/\?/.test(n)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.deleteDataById=function(t){var n="index.php?c=custom&a=delete&id="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.saveData=function(t,n){var i=n?"m/c/create":"m/c/save";return e({withCredentials:!0,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},url:PREFIX_URL+i,data:t})},n.getSceneField=function(t){var n="index.php?c=custom&a=formField&id="+t;return n+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.getPremergeScenes=function(t){var n="index.php?c=custom&a=newDataScene";t&&(n+=(/\?/.test(n)?"&":"?")+"user="+t);var i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.mergeSceneData=function(t,n){var i="index.php?c=custom&a=imps&id="+t;return e({withCredentials:!0,method:"POST",url:PREFIX_S3_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})},n.getOrigin=function(t){var n="index.php?c=custom&a=origin";return t&&(n+=(/\?/.test(n)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.getGroups=function(t){var n="index.php?c=custom&a=grouplist";return t&&(n+=(/\?/.test(n)?"&":"?")+"user="+t),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.assignGroup=function(t){var n="m/c/group/set?cIds="+t.cIds+"&gIds="+t.gIds;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},n.deleteAssociation=function(t){var n="m/c/group/unset?cId="+t.cId+"&gId="+t.gId;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},n.createGroup=function(t){return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/c/group/create",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},n.updateSceneGroup=function(t,n){var i="index.php?c=scene&a=updateGroup";i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime();var a={id:t,name:n};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,data:$.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n.createSceneGroup=function(t){return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=scene&a=createGroup",data:$.param({name:t.name}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n.deleteCustomer=function(t){var n="index.php?c=custom&a=delete&ids="+t.ids;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},n.deleteGroup=function(t){var n={id:t};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/c/group/delete",data:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n.modelMess=function(t){var n="m/c/tpl/list?sceneId="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.messageNumber=function(){return e({withCredentials:!0,method:"GET",url:PREFIX_URL+"m/u/user/param/msg"})},n.getMessModel=function(t){var n="m/u/list/goods?type="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.buyMess=function(t){var n={id:t};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/u/user/msg/save",data:$.param(n),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n.sendMess=function(t,n,i,a){var s={ids:t,id:n,mobiles:i,sceneId:a};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/c/msg/batch/scend",data:$.param(s),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},n.sendTatolDetail=function(t){var n="m/c/msg/list";return n+="?pageNo="+t+"&pageSize=10",e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},n.sendDetail=function(t,n){var i="m/c/msg/details/"+t;return i+="?pageNo="+n+"&pageSize=10",e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},n}]),angular.module("services.exceptionHandler",["services.i18nNotifications"]),angular.module("services.exceptionHandler").factory("exceptionHandlerFactory",["$injector",function(e){return function(t){return function(n,i){var a=e.get("i18nNotifications");t(n,i),a.pushForCurrentRoute("error.fatal","error",{},{exception:n,cause:i})}}}]),angular.module("services.exceptionHandler").config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","exceptionHandlerFactory",function(e,t){return t(e)}])}]),angular.module("services.file",["services.i18nNotifications","services.staticRes"]),angular.module("services.file").factory("fileService",["$rootScope","$http","i18nNotifications","staticResService","dataCacheService",function(e,t,n,i,a){function s(e){var n="m/base/file/recently/used?fileType="+e;return n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function o(e,n){var i="index.php?c=statics&a=history_save&fileIds="+e+"&fileTypes="+n;return i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function r(){return[{color:"#6366C3"},{color:"#29A1D6"},{color:"#332E42"},{color:"#DBF3FF"},{color:"#434A54"},{color:"#000000"},{color:"#F1F03E"},{color:"#FCF08E"},{color:"#972D53"},{color:"#724192"},{color:"#967BDC"},{color:"#EC87C1"},{color:"#D870AF"},{color:"#F6F7FB"},{color:"#666C78"},{color:"#ABB1BD"},{color:"#CCD0D9"},{color:"#E6E9EE"},{color:"#48CFAE"},{color:"#36BC9B"},{color:"#3BAEDA"},{color:"#50C1E9"},{color:"#AC92ED"},{color:"#4B89DC"},{color:"#4B89DC"},{color:"#5D9CEC"},{color:"#8DC153"},{color:"#ED5564"},{color:"#DB4453"},{color:"#FB6E52"},{color:"#FFCE55"},{color:"#F6BB43"},{color:"#E9573E"},{color:"#9FF592"},{color:"#A0D468"}]}function l(){var n="index.php?c=statics&a=getCate&type=1",i=n,s=a.get("picbgTotal",n);if(s)return L.sysCategoryList=s.data.rows,void e.$broadcast("sysCategory.update");n+="&time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(t){200===t.status&&(L.sysCategoryList=t.data.rows,a.push("picbgTotal",i,t),e.$broadcast("sysCategory.update"))})}function c(t){L.sysMusicList=""+t=="2"?i.getAudioTypes():i.getSoundTypes(),e.$broadcast("sysMusic.update")}function d(n){var i="index.php?c=upfile&a=systag&type=3";n&&(i+="&bizType="+n);var s=i,o=a.get("sysTag",i);return o?(L.sysTagList=o.list,void e.$broadcast("sysTag.update")):(i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),void t({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(t){t.data.success&&(L.sysTagList=t.data.list,a.push("sysTag",s,t.data),e.$broadcast("sysTag.update"))}))}function p(e,n,i,s,o,r,l){return e+="pageNo="+(n||1),e+="&pageSize="+(i||10),e+="&fileType="+s,(o||0===o)&&(e+="&bizType="+o),r&&(e+="&tagId="+r),l&&(e+="&delete=1"),a.contains("fileService1",e)?a.asyncGet("fileService1",e):(a.setAsyncUrl(e),e+="&time="+Date.now(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+e}))}function u(n,i,s,o,r,l){if("pure"!==r&&"pure"!==l){""+o=="1"&&(s=18),n+="pageNo="+(i||1),n+="&pageSize="+(s||10),n+="&fileType="+o,(r||0===r)&&(n+="&bizType="+r),l&&(n+="&tagId="+l);var c=a.get("fileService",n);if(c)return L.imgList=c.list,L.totalItems=c.map.count,L.pageNo=c.map.pageNo,void e.$broadcast("imgList.update");var d=n;n+="&time="+Date.now(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(t){t.data.success&&(L.imgList=t.data.list,L.totalItems=t.data.map.count,L.pageNo=t.data.map.pageNo,a.push("fileService",d,t.data),e.$broadcast("imgList.update"))})}else i*s<=R.length?L.imgList=R.slice((i-1)*s,i*s):L.imgList=R.slice((i-1)*s,R.length),L.totalItems=R.length,L.pageNo=i,e.$broadcast("imgList.update")}function g(e,t,n,i,a){return p("index.php?c=upfile&a=syslist&",e,t,n,i,a)}function m(e,t,n,i,a){u("index.php?c=upfile&a=syslist&",e,t,n,i,a)}function h(e,t,n,i,a,s){return p("index.php?c=upfile&a=userList&",e,t,n,i,a,s)}function f(e,t,n,i,a){u("index.php?c=upfile&a=userList&",e,t,n,i,a)}function v(n){var i={id:n};t({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=upfile&a=delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)}).then(function(t){t.data.success&&e.$broadcast("files.delete")})}function b(e,n){var i;return i=n?{id:e,backup:n}:{id:e},t({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=upfile&a=delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)})}function y(e,n){var i="m/base/file/recycle/list?pageNo="+e+"&pageSize="+n;return t({withCredentials:!0,method:"GET",url:PREFIX_URL+i})}function w(e){var n="m/base/file/revoke?id="+e;return t({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function x(n){var i={tagName:n};t({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=tag&a=create",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(i)}).then(function(t){L.tagList.push({id:t.data.obj,name:n}),e.$broadcast("tagList.update")},function(){$scope.authError="创建失败"})}function S(){var n="index.php?c=tag&a=my&time"+(new Date).getTime();t({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(t){t.data.success&&(L.tagList=t.data.list,e.$broadcast("tagList.update"))})}function T(n,i){var a={id:n};t({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=tag&a=delete",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(t){t.data.success&&(L.tagList.splice(i,1),e.$broadcast("tagList.delete"))})}function C(n,i){var a={tagId:n,fileIds:i};t({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=tag&a=set",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(t){t.data.success&&e.$broadcast("tag.assign")})}function k(n,i){var a={tagId:n,fileIds:i};t({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/base/file/tag/unset",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(t){t.data.success&&e.$broadcast("tag.unbind")})}function E(e,n,i,s){var o="index.php?c=upfile&a=syslist&";return"0"===i&&""+s=="2"&&(o="index.php?c=upfile&a=userList&"),o+="pageNo="+(e||1),o+="&pageSize="+(n||12),i&&"all"!==i&&(o+="&bizType="+(i||-1)),o+="&fileType="+(s||-1),a.contains("mySounds",o)?a.asyncGet("mySounds",o):(a.setAsyncUrl(o),o+="&time="+(new Date).getTime(),t({withCredentials:!0,method:"GET",url:PREFIX_URL+o}))}function P(e){return t({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=page&a=crop",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(e)})}function I(n){console.log(n);var i=PREFIX_URL+"m/base/file/info/save";return t({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)}).then(function(t){return t.data.success&&e.$broadcast("get.file.list",t.data.obj),t})}function _(){e.$broadcast("backto.my.list")}var L={pageNo:1,totalItems:0,sysCategoryList:[],getSysCategory:l,sysTagList:[],getSysMusicCategory:c,userRecycle:y,fileRevoke:w,sysMusicList:[],getSysTagByCatId:d,imgList:[],getSystemFiles:g,getUserFiles:h,getSystemFiles1:m,getUserFiles1:f,tagList:[],createTag:x,getTagList:S,deleteTag:T,assignTag:C,unbindTag:k,deleteFile:v,deleteFile1:b,getFileByCategory:E,getBgColorList:r,cropImage:P,getFilesHistory:s,saveFilesHistory:o,saveFileInfo:I,backToMyList:_},R=r();return L}]),angular.module("services.font",[]),angular.module("services.font").factory("fontService",["$http","$q",function(e,t){function n(n){var i=t.defer(),a=PREFIX_URL+"m/scene/toll/font";return e({method:"GET",url:a,withCredentials:!0,params:{id:n}}).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}return{checkBoughtFonts:n}}]),angular.module("services.guide",[]),angular.module("services.guide").factory("guideService",["$rootScope","$http","$q","$modal","storageService","security","$timeout",function(e,t,n,i,a,s,o){function r(){var e=!0;if(c=JSON.parse(a.get("newVersionsFrame"))?JSON.parse(a.get("newVersionsFrame")):[],0===c.length)l();else{for(var t=0;t<c.length;t++)c[t].username==s.currentUser.loginName&&c[t].newversion==version&&(e=!1);e&&l()}}function l(){c.push({username:s.currentUser.loginName,newversion:version}),o(function(){i.open({windowClass:"login-container version_frame",keyboard:!1,templateUrl:"main/newVersionFrame.tpl.html",controller:"newVersionFrame",resolve:{}}).result.then(function(e){},function(){})}),a.push("newVersionsFrame",JSON.stringify(c))}var c;return{newVersionFrameFn:r,undateDescription:l}}]),angular.module("services.history",[]).factory("historyService",["$rootScope",function(e){var t={},n={},i={};return t.addPage=function(i,a){return n[i]||(n[i]={currentPos:0,inHistory:!1,pageHistory:[]},t.addPageHistory(i,a)),e.$broadcast("history.changed"),JSON.parse(n[i].pageHistory[n[i].currentPos])},t.addPageHistory=function(t,a){i=n[t],i.inHistory&&(i.inHistory=!1,i.pageHistory.length=i.currentPos+1);var s=JSON.stringify(a);s!==i.pageHistory[i.pageHistory.length-1]&&i.pageHistory.push(s),i.currentPos=i.pageHistory.length-1,e.$broadcast("history.changed")},t.clearHistory=function(){n={}},t.canBack=function(e){return i=n[e],i.currentPos>0},t.canForward=function(e){return i=n[e],i.currentPos<i.pageHistory.length-1},t.back=function(t){if(i=n[t],i.pageHistory.length){i.inHistory=!0;var a=0===i.currentPos?i.pageHistory[0]:i.pageHistory[--i.currentPos];return e.$broadcast("history.changed"),JSON.parse(a)}},t.forward=function(t){if(i=n[t],i.pageHistory.length){i.inHistory=!0;var a=i.currentPos===i.pageHistory.length-1?i.pageHistory[i.currentPos]:i.pageHistory[++i.currentPos];return e.$broadcast("history.changed"),JSON.parse(a)}},t}]),angular.module("services.httpRequestTracker",[]),angular.module("services.httpRequestTracker").factory("httpRequestTracker",["$http",function(e){var t={};return t.hasPendingRequests=function(){return e.pendingRequests.length>0},t}]),angular.module("services.i18nNotifications",["services.notifications","services.localizedMessages"]),angular.module("services.i18nNotifications").factory("i18nNotifications",["localizedMessages","notifications",function(e,t){var n=function(t,n,i,a){return angular.extend({message:e.get(t,i),type:e.get(n,i)},a)};return{pushSticky:function(e,i,a,s){return t.pushSticky(n(e,i,a,s))},pushForCurrentRoute:function(e,i,a,s){return t.pushForCurrentRoute(n(e,i,a,s))},pushForNextRoute:function(e,i,a,s){return t.pushForNextRoute(n(e,i,a,s))},getCurrent:function(){return t.getCurrent()},remove:function(e){return t.remove(e)},removeAll:function(){return t.removeAll()}}}]),angular.module("services.localizedMessages",[]).factory("localizedMessages",["$interpolate","I18N.MESSAGES",function(e,t){var n=function(e,t){return e||"?"+t+"?"};return{get:function(i,a){var s=t[i];return s?e(s)(a):n(s,i)}}}]),angular.module("services.mine",[]),angular.module("services.mine").factory("MineService",["$http","$rootScope","dataCacheService",function(e,t,n){var i={};return i.getNewSample=function(){var t="index.php?c=scene&a=lable";return t+=(/\?/.test(t)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+t})},i.getMyGroup=function(n){var i="index.php?c=scene&a=getMyGroup&param="+n;return i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+i}).then(function(e){200===e.data.code&&t.$broadcast("get.my.group",e.data.list)})},i.editGroup=function(n,i){var a="index.php?c=scene&a=updateGroup";a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime();var s={groupId:n,groupName:i};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(s)}).then(function(e){200===e.data.code&&t.$broadcast("update.my.group",e.data.list)})},i.deleteGroup=function(n,i){var a="index.php?c=scene&a=deleteGroup&id="+n;return a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+a}).then(function(e){200===e.data.code&&t.$broadcast("delete.my.group",i)})},i.moveGroupScene=function(t,n){var i="index.php?c=scene&a=setGroup";i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime();var a={id:t,sIds:n};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},i.getSysRecommend=function(n){var i="m/scene/guided";n&&(i+=(/\?/.test(i)?"&":"?")+"type="+n),i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i}).then(function(e){200===e.data.code&&t.$broadcast("get.getSysRecommend.list",e.data)})},i.getCompanySample=function(n,i,a){var s="m/scene/group/comtemp?userId="+n+"&pageNo="+i+"&pageSize="+a;return s+=(/\?/.test(s)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+s}).then(function(e){200===e.data.code&&t.$broadcast("get.company.sample.scene",e.data)})},i.getMyScenes=function(n,a,s,o,r,l,c){var d;d=n?"index.php?c=scene&a=my&type="+n:"index.php?c=scene&a=my";var p={showData:l,pageNo:a,pageSize:s,user:o,name:r,groupId:c};return d+=(/\?/.test(d)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,loading:!0,method:"POST",url:PREFIX_URL+d,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(p)}).then(function(e){200===e.data.code&&(i.scenes=e.data,t.$broadcast("get.my.scene.list"))})},i.deleteSceneById=function(t,n){var i="index.php?c=scene&a=delscene&id="+t;return n&&(i+="&backup="+n),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},i.getMyHistoryScenes=function(t,n,i){var a="m/scene/recycle/list";return a+="?pageNo="+(t||1),a+="&pageSize="+(n||12),i&&(a+="&user="+i),a+=(/\?/.test(a)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+a})},i}]),angular.module("services.modal",["confirm-dialog","message-dialog","bindemail-dialog"]).factory("ModalService",["$modal",function(e){var t={};return t.openBindEmailDialog=function(){e.open({keyboard:!1,backdropClick:!0,windowClass:"confirm-dialog",templateUrl:"dialog/bindemail.tpl.html",controller:"BindEmailDialogCtrl"})},t.openConfirmDialog=function(t,n,i){e.open({backdrop:"static",keyboard:!1,backdropClick:!1,windowClass:"confirm-dialog",templateUrl:"dialog/confirm.tpl.html",controller:"ConfirmDialogCtrl",resolve:{confirmObj:function(){return t}}}).result.then(n,i)},t.openMsgDialog=function(t,n,i){e.open({backdrop:"static",keyboard:!1,backdropClick:!1,windowClass:"message-dialog",templateUrl:"dialog/message.tpl.html",controller:"MessageDialogCtrl",resolve:{msgObj:function(){return t}}}).result.then(n,i)},t}]),angular.module("I18N.MESSAGES",[]).service("I18N.MESSAGES",["$rootScope",function(){return{"notify.success":"success","notify.info":"info","notify.danger":"danger","notify.warning":"warning","notify.tip":"tip","errors.route.changeError":"Route change error","crud.user.save.success":"A user with id '{{id}}' was saved successfully.","crud.user.remove.success":"A user with id '{{id}}' was removed successfully.","crud.user.remove.error":"Something went wrong when removing user with id '{{id}}'.","crud.user.save.error":"Something went wrong when saving a user...","crud.project.save.success":"A project with id '{{id}}' was saved successfully.","crud.project.remove.success":"A project with id '{{id}}' was removed successfully.","crud.project.save.error":"Something went wrong when saving a project...","login.reason.notAuthorized":"离开久了，麻烦再登录一次吧！","login.reason.notAuthenticated":"为了保障您的账号安全，请登录！","login.error.invalidCredentials":"登录失败，请检查邮箱和密码是否正确。","login.error.serverError":"There was a problem with authenticating: {{exception}}.","register.error.serverError":"There was a problem with authenticating: {{exception}}.","login.reset.notmatch":"新密码和重复密码不匹配","register.error.match":"两次输入密码不一致","register.error.agreement":"请先同意注册协议再完成注册","file.bg.pageSize":"12","scene.save.success.published":"场景已保存成功！","scene.save.success.nopublish":"保存成功，还需要发布哦！","scene.save.success.companyTpl":"成功生成企业样例","scene.clear.success.companyTpl":"成功取消企业样例","companytpl.setting.success":"成功生成企业模板","mytpl.setting.success":"成功生成我的模板","scene.publish.success":"场景发布成功","account.success":"提交成功！","branch.open.success":"账号打开成功！","branch.close.success":"账号关闭成功！","dept.create.success":"部门创建成功！","dept.update.success":"修改成功！","branch.create.success":"账号创建成功！","branch.update.success":"账号修改成功！","scene.setting.success":"场景设置成功！","data.assign.success":"分组成功！","data.delete.success":"数据删除成功！","group.delete.data":"分组内素材移除成功！","custom.data.delete":"此条客户数据删除成功！","group.delete.success":"分组删除成功！","group.create.success":"分组创建成功！","group.edit.success":"分组修改成功！","group.scene.success":"成功将此场景移动至分组","rel.tip":"您的账号还没有绑定邮箱，去用户中心->账号管理，马上绑定","page.change.success":"页面名称修改成功！","email.save.success":"邮箱绑定成功！","bbs.save.success":"论坛账号绑定成功！","reset.psw.success":"密码修改成功！","save.success":"保存成功！","upload.success":"上传成功！","mail.rel.success":"关联成功！","mail.unbind.success":"解除关联成功！","file.assign.success":"分组成功！","already.rel":"此账号已经关联过邮箱","branch.reset.success":"子账号密码重置成功！","already.bind.error":"{{msg}}","reject.crop.image":"不支持裁剪GIF格式图片！","visitor.apply":"信息已经提交审核，审核通过后会更新秀客信息，请耐心等待。","select.trigger.source":"请选择触发源","scratch.percentage.overflow":"涂抹比例不能大于100%","invitation.sendemail.success":"邮件发送成功!","invitation.sendemail.error":"邮件发送失败!","outbox.warning":"红色警告：超出虚线外边框的内容，将无法在手机中被看到","outbox.tip":"橙色警告：超出虚线内边框的内容，在部分老机型手机中将无法看到","already.apply.discovery":"您已申请加入秀场，暂时不能再申请！","already.apply.sample":"您已申请过成为样例，暂时不能再申请！","already.apply.activity":"您已申请过成为活动，暂时不能再申请！","phone.message":"成功开通短信提醒","scene.apply.success":"申请成功","xd.insufficient":"秀点余额不足，去用户中心－>会员服务进行充值","customer.name.overflow":"姓名不能超过50个字符","scene.deny.apply":"审核未通过的场景不能申请活动","scene.incheck.apply":"审核中的场景不能申请活动","scene.accessCode.apply":"加密设置的场景不能加入活动","scene.accessClose.apply":"关闭的场景不能加入活动","spread.share.messagecustomer":"请选择收件人","spread.share.messageless":"可用短信数量不足,请兑换短信","spread.share.messagecontent":"请先选择短信内容!","spread.share.messagesendsuccess":"发送成功","spread.share.messagebuylayout":"请选择购买类型","spread.share.messagebuyxdless":"秀点余额不足,请先购买秀点!","spread.share.guaranteeSucc":"申请保障服务成功","spread.share.guaranteeClose":"取消保障服务成功","print.scene.images.fail":"请先保存预览图","print.shop.images.fail":"印刷需保存预览图","print.images.number":"只能选择两张图片","print.images.null":"未选择任何图片","print.images":"敬请期待！","spread.share.guaranteeBuyXd":"购买保障服务成功","spread.share.guaranteeApplyError":"您的场景保障服务剩余次数不足,请先购买","spread.share.guaranteeApplyUnPublice":"场景未发布,不能参加保障服务","spread.share.guaranteeApplyCheck":"审核关闭的场景,不能参加保障服务","spread.share.guaranteeApplyUnCheck":"审核驳回的场景,不能参加保障服务","delete.scene.guarantee":"场景已经静态化,不能删除","transfer.scene.guarantee":"场景已经静态化,不能转送","usercenter.buybranch.success":"子帐号购买成功","usercenter.buybranch.notcompany":"{{errMsg}}","rel.register.account.success":"设置成功"}}]),angular.module("services.notifications",[]).factory("notifications",["$rootScope",function(e){var t={STICKY:[],ROUTE_CURRENT:[],ROUTE_NEXT:[]},n={},i=function(e,t){if(!angular.isObject(t))throw new Error("Only object can be added to the notification service");return e.push(t),t};return e.$on("$routeChangeSuccess",function(){t.ROUTE_CURRENT.length=0,t.ROUTE_CURRENT=angular.copy(t.ROUTE_NEXT),t.ROUTE_NEXT.length=0}),n.getCurrent=function(){return[].concat(t.STICKY,t.ROUTE_CURRENT)},n.pushSticky=function(e){return i(t.STICKY,e)},n.pushForCurrentRoute=function(e){return i(t.ROUTE_CURRENT,e)},n.pushForNextRoute=function(e){return i(t.ROUTE_NEXT,e)},n.remove=function(e){angular.forEach(t,function(t){var n=t.indexOf(e);n>-1&&t.splice(n,1)})},n.removeAll=function(){angular.forEach(t,function(e){e.length=0})},n}]),angular.module("services.pagetpl",[]),angular.module("services.pagetpl").factory("pageTplService",["$http","$rootScope","$modal","$q","dataCacheService",function(e,t,n,i,a){function s(t){var n="index.php?c=scene&a=getpagetpl&type="+t,i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function o(t){var n="/index.php?c=scene&a=pagelist&id="+t,i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function r(){var t="index.php?c=statics&a=getPageTplType",n=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})}function l(t){var n="index.php?c=statics&a=tagList&type=1";(t||0===t)&&(n+=(/\?/.test(n)?"&":"?")+"bizType="+t);var i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function c(t){var n="index.php?c=upfile&a=systag&type=2";(t||0===t)&&(n+=(/\?/.test(n)?"&":"?")+"bizType="+t);var i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function d(t){var n="m/scene/show/tag?bizType="+t,i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function p(t){var n="/m/scene/tag/page/list?id="+t,i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})}function u(t,n,i,s){var o="index.php?c=scene&a=syspagetpl",r=o,l={};return(t||0===t)&&(r+=(/\?/.test(o)?"&":"?")+"tagId="+t,l.tagId=t),n&&(r+=(/\?/.test(o)?"&":"?")+"name="+n,l.name=n),i&&(r+=(/\?/.test(o)?"&":"?")+"pageSize="+i,l.pageSize=i),s&&(r+=(/\?/.test(o)?"&":"?")+"pageNo="+s,l.pageNo=s),a.contains("pageTpl",r)?a.asyncGet("pageTpl",r):(a.setAsyncUrl(r),e({withCredentials:!0,method:"POST",url:PREFIX_URL+o,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(l)}))}function g(t,n){var i="m/scene/tag/page/set/?ids="+t;(n||0===n)&&(i+=(/\?/.test(i)?"&":"?")+"pageId="+n);var a=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+i})}function m(t){var n=new Date,i=PREFIX_URL+"m/scene/tpl/tags?id="+t+"&time="+n.getTime();return e({withCredentials:!0,method:"GET",url:i})}function h(t){var n=new Date,i=PREFIX_URL+"m/scene/related/tpl?tagId="+t+"&time="+n.getTime();return e({withCredentials:!0,method:"GET",url:i})}return{getPageTpls:s,getMyTplList:o,getPageTplTypes:r,getPageTagLabel:l,getTagSysListWithType:c,getRandomTagWithType:d,getPageTagLabelCheck:p,getPageTplTypestemp:u,updataChildLabel:g,getExemplarTags:m,getSimilarTagExemplar:h}}]),angular.module("services.psdUpload",[]).factory("psdUploadService",["ModalService","uploaderService","fileService","dataCacheService","sceneService","$rootScope",function(e,t,n,i,a,s){function o(t){return t.length>1?(e.openMsgDialog({msg:"您每次上传只能添加一个PSD格式的图片！"}),!1):t.length<1?(e.openMsgDialog({msg:"您还没有添加PSD格式的图片！"}),!1):".psd"===t[0].name.substr(t[0].name.lastIndexOf(".")).toLowerCase()||(e.openMsgDialog({msg:"您上传的不是PSD格式图片，请添加PSD格式的图片！"}),!1)}function r(){$("#psdLoading").hide(),e.openMsgDialog({msg:"您上传的可视图层超过了30个，请您上传可视图层不要超过30个！"})}function l(e,i){var s=$.Deferred();return t.getUploadToken("image").then(function(o){function r(){var p=null;l>=e.length?s.resolve(d):(c=e[l],p=c.layer.image.toBase64().substring(22),p.length>5242880?(d.push(c.name),c=null,p=null,l++,r()):t.uploadBase64(o.data.map.token,p).then(function(t){console.log(t);var s={fileType:"1",bizType:0,path:t.key,tmbPath:t.key,tagId:0,name:c.name,size:Math.ceil(t.size/1024)};n.saveFileInfo(s),c.layer.src=t.key,c.layer.top=c.layer.top/2,c.layer.left=c.layer.left/2,c.layer.adjustWidth=c.layer.width/2,c.layer.adjustHeight=c.layer.height/2,l+1===e.length&&(c.layer.lastOne=!0),a.createComp("4",void 0,void 0,void 0,c.layer),i.currentNum=l+1,l++,c=null,p=null,r()}))}var l=0,c=null,d=[];r()}),s.promise()}function c(e,t){var n=$.Deferred();return eqxPSDDecompose.decompose(e[0]).then(function(e){t.total=e.length,e.length>30?r():$.when(l(e,t)).then(function(e){n.resolve(e)})}),n.promise()}return{validationPSDFile:o,psdDecompose:c}}]),angular.module("services.qCloud",[]).factory("qCloudService",["$http",function(e){function t(t,n,i){var a=STATISTICS_HOST+"m/sa/enable",s=i?1:0;return e({method:"POST",withCredentials:!0,url:a,data:$.param({sceneId:t,partner:n,enable:s}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}return{QCloudOpenOrClosed:t}}]),angular.module("services.sample",[]).factory("sampleService",["$rootScope","$http",function(e,t){var n={};return n.getSamples=function(e,n,i){var a=PREFIX_S2_URL+"index.php?c=scene&a=promotion";return e&&(a+="&type="+e),n&&(a+=/\?/.test(a)?"&":"?",a+="pageNo="+n),i&&(a+=/\?/.test(a)?"&":"?",a+="pageSize="+i),t({withCredentials:!0,method:"GET",url:a})},n.getSamplesPV=function(){var e=PREFIX_S1_URL+"eqs/topThree?time="+(new Date).getTime();return t({withCredentials:!0,method:"GET",url:e})},n}]),angular.module("services.scene",["scene.create.console","services.history","services.select","scene.create.console.pictures","scene.edit.trigger","services.dataCache","scene.create.console.font"]),angular.module("services.scene").factory("sceneService",["$http","$rootScope","$modal","$q","$timeout","security","$cacheFactory","historyService","selectService","picturesService","ModalService","triggerService","i18nNotifications","dataCacheService","editService","fontService","setCompService",function(e,t,n,i,a,s,o,r,l,c,d,p,u,g,m,h,f){function v(e){me.splice(me.indexOf(he[e]),1),delete he[e]}function b(e){ge.obj.elements=e,$("#nr").empty(),ue.parse({def:ge.obj,appendTo:"#nr",mode:"edit"});for(var n in e)if(3==e[n].type){var i="";e[n].properties.imgSrc&&(i=e[n].properties.imgSrc),t.$broadcast("show.edit.bg",i);break}t.$broadcast("dom.changed")}function y(e){angular.copy({},he),$.each(e,function(e,t){he[t.id]=t})}function w(e,t){var n={},i=$("#nr .edit_area"),a=0;if(de)a=de+=1;else{var s=i.children().last(),o=i.children(".maxIndex");de=a=o.length>0?parseInt(o.css("z-index"),10)+1:s.length>0?parseInt(s.css("z-index"),10)+1:101}if(t)return t.zIndex=a,parseInt(t.top,10)>$("#nr .edit_area").outerHeight()-20?t.top=$("#nr .edit_area").outerHeight()-20+pe.comPosition.top+"px":t.top=parseInt(t.top,10)+pe.comPosition.top+"px",t;var r=$("#nr .edit_area").outerWidth(),l=r;return"v"==e?l=50:"4"==e?l=80:5==(""+e).charAt(0)||"6"==e||"r"==e||"c"==e||"a"==e||"z"===e?l=200:"m"==e?l=100:"t"==e?l=300:"b"==e&&(l=240),n={top:100+pe.comPosition.top+"px",left:(r-l)/2+"px"},n.zIndex=a,n}function x(e,t,n,i){var a=parseInt(e.css.top,10)+10*fe,s=parseInt(e.css.left,10);a+34>$("#nr .edit_area").outerHeight()?(t.css.top=a+"px",t.css.left=s+10+"px"):(t.css.top=a+34+"px",t.css.left=e.css.left,n==i&&fe++)}function S(){return Math.ceil(1e10*Math.random())}function T(e,t,n){var i,a=S(),s={};if(e+="",3==e.charAt(0)){var o,r=[];for(o=0;o<me.length;o++)3==me[o].type&&r.push(me[o]);if(r.length>0)return r[0];s={content:null,css:{},id:a,num:0,pageId:ge.obj.id,properties:{bgColor:null,imgSrc:null},sceneId:ge.obj.sceneId,title:null,type:3}}else 1==e.charAt(0)?s={id:a,properties:{title:"提交"},type:1,pageId:ge.obj.id,sceneId:ge.obj.sceneId}:8==e.charAt(0)?(i=w(e,t),$.extend(!0,i,{color:"rgb(255, 255, 255)",width:"100px",height:"30px",lineHeight:"30px",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"rgb(244, 113, 31)"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{title:"一键拨号",number:""},sceneId:ge.obj.sceneId,title:null,type:8}):"l"==e?(i=w(e,t),$.extend(!0,i,{color:"rgb(255, 255, 255)",width:"100px",height:"40px",lineHeight:"40px",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"rgb(244, 113, 31)"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{title:"点我购买"},sceneId:ge.obj.sceneId,title:null,type:"l"}):"s"==e?(i=w(e,t),$.extend(!0,i,{color:"rgb(255, 255, 255)",width:"100px",height:"30px",lineHeight:"30px",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"rgb(244, 113, 31)"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{title:"有惊喜"},sceneId:ge.obj.sceneId,title:null,type:"s"}):2==e.charAt(0)||"x"==e.charAt(0)?(i=w(e,t),$.extend(!0,i,{width:320,height:38,fontSize:24}),s={content:"点击此处进行编辑",css:i,id:a,num:1,pageId:ge.obj.id,properties:{},sceneId:ge.obj.sceneId,title:null,type:(""+e).charAt(0)}):"x"==e.charAt(0)?s.properties={dataUrl:""}:4==e.charAt(0)||"wp"==e?(i=w(e,t),i.width="100px",i.height="100px",s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{width:"100px",height:"100px",src:""},sceneId:ge.obj.sceneId,title:null,type:4},"wp"==e&&(s.type="403",i.width="135px",i.height="240px",s.properties.width="135px",s.properties.height="240px",s.properties.src=CLIENT_CDN+"assets/images/wechat_image.png")):"h"==e?(i=w(e,t),$.extend(!0,i,{color:"#555",width:"100px",height:"100px"}),s={content:"",css:i,id:a,pageId:ge.obj.id,properties:{type:"rect"},sceneId:ge.obj.sceneId,title:null,type:"h"}):5==e.charAt(0)?(i=w(e,t),i.width="200px",$.extend(!0,i,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",borderRadius:"0",backgroundColor:"#ffffff"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{placeholder:"请命名"},isInput:1,sceneId:ge.obj.sceneId,title:"请命名",type:5}):"r"==e?(i=w(e,t),i.width="200px",delete i.height,$.extend(!0,i,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",borderRadius:"0",backgroundColor:"#ffffff"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{titleStyle:{backgroundColor:"#08a1ef",color:"#ffffff"},optionStyle:{borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#08a1ef"}},choices:'{"seq":3,"options":[{"id":1,"label":"选项1"},{"id":2,"label":"选项2"},{"id":3,"label":"选项3"}]}',isInput:1,sceneId:ge.obj.sceneId,title:"",type:"r"}):"c"==e?(i=w(e,t),i.width="200px",delete i.height,$.extend(!0,i,{color:"#676767",borderWidth:"1",borderStyle:"solid",borderColor:"#08a1ef",borderRadius:"0",backgroundColor:"#ffffff"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{titleStyle:{backgroundColor:"#08a1ef",color:"#ffffff"},optionStyle:{borderBottomWidth:"1",borderBottomStyle:"solid",borderBottomColor:"#08a1ef"}},choices:'{"seq":3,"options":[{"id":1,"label":"选项1"},{"id":2,"label":"选项2"},{"id":3,"label":"选项3"}]}',isInput:1,sceneId:ge.obj.sceneId,title:"",type:"c"}):"a"==e?(i=w(e,t),i.width="200px",delete i.height,$.extend(!0,i,{color:"#676767",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"#f9f9f9"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{icon:"eqf-star",size:"rating-m",color:"#ff9307"},isInput:1,sceneId:ge.obj.sceneId,title:"",type:"a"}):"i"==e?(i=w(e,t),$.extend(!0,i,{width:"100%",height:"55px",lineHeight:"55px",color:"#676767",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"#f9f9f9"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{layout:"counter-lr",size:"counter-m",color:"#08a1ef",icon:"eqf-love"},sceneId:ge.obj.sceneId,title:"",type:"i"}):"d"==(""+e).charAt(0)?(i=w(e,t),$.extend(!0,i,{width:"100%",height:"55px",lineHeight:"55px",color:"#676767",borderWidth:"0",borderStyle:"solid",borderColor:"#ccc",borderRadius:"0",backgroundColor:"#f9f9f9"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{layout:"counter-lr",size:"counter-m",color:"#76838f",icon:"eqf-eye3"},sceneId:ge.obj.sceneId,title:"",type:"d"}):6==e.charAt(0)?(i=w(e,t),i.width="200px",$.extend(!0,i,{color:"#fff",borderRadius:"0",backgroundColor:"#08a1ef"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{text:"",link:"",src:"",layout:"rating-l",title:"提交"},sceneId:ge.obj.sceneId,title:null,type:6}):"p"==e?(i=w(e,t),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{title:"图集"},sceneId:ge.obj.sceneId,title:null,type:"p"}):"v"==e?(i=w(e,t),i.width="50px",i.height="48px",s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{src:""},sceneId:ge.obj.sceneId,title:null,type:"v"}):"n"==e?(i=w(e,t),s={content:"",css:i,id:a,pageId:ge.obj.id,properties:{pics:[]},sceneId:ge.obj.sceneId,title:null,type:"n"}):"m"==e?(i=w(e,t),$.extend(!0,i,{height:"100px",width:"210px"}),s={content:"",css:i,id:a,pageId:ge.obj.id,properties:{address:"设置位置"},sceneId:ge.obj.sceneId,title:null,type:"m"}):"w01"==e||"w02"==e?(i=w(e,t),$.extend(!0,i,{width:"180px",height:"40px",lineHeight:"40px",borderRadius:"5px",backgroundColor:"rgba(255,255,255,1)",borderColor:"rgba(0,0,0,1)",borderWidth:"1px",borderStyle:"solid"}),s={content:"",css:i,id:a,pageId:ge.obj.id,properties:{title:"微信音频"},sceneId:ge.obj.sceneId,title:null,type:e}):"t"==e?(i=w(e,t),$.extend(!0,i,{height:"380px",width:"304px"}),s={content:"图表组件",css:i,id:a,num:1,pageId:ge.obj.id,properties:{title:"图表组件",chartTitle:"数据统计详情"},sceneId:ge.obj.sceneId,title:null,type:e}):"b"===e?(i=w(e,t),$.extend(!0,i,{height:"360px",width:"280px",backgroundColor:"#F0F3F4"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{morelabel:"更多留言",meslabel:"我要留言",style:"default"},sceneId:ge.obj.sceneId,title:null,type:e}):"g"===e?(i=w(e,t),$.extend(!0,i,{height:"300px",width:"250px"}),s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{size:4},sceneId:ge.obj.sceneId,title:null,type:e}):"z"===e&&(i=w(e,t),i.width="200px",i.height="38px",s={content:"",css:i,id:a,num:1,pageId:ge.obj.id,properties:{},choices:'{"seq":3,"options":[{"id":1,"label":"请输入内容"},{"id":2,"label":"请输入内容"},{"id":3,"label":"请输入内容"}]}',isInput:1,sceneId:ge.obj.sceneId,title:"下拉列表",type:e,showText:"请选择",placeholderText:"请选择",require:!1});return n&&$.extend(!0,s,n),me.push(s),he[s.id]=s,s}function C(e,n,i){var a=ue.wrapComp(n,"edit",n);s.isAllowToAccess(s.accessDef.ACCESS_COMP_MANAGE)&&3!==n.type&&f.addModel(n),$("#nr .edit_area").append(a);for(var o=ue.getInterceptors(),l=0;l<o.length;l++)o[l](a,n);return ue.getEventHandlers()[(""+e).charAt(0)](a,n),i||(r.addPageHistory(ge.obj.id,ge.obj.elements),t.$broadcast("dom.changed"),("psd"!==n.subType||n.lastOne)&&a.trigger("mousedown")),"n"!=n.type&&"p"!=n.type&&a.trigger("click"),a}function k(e,t){var n=[];if("g101"==e)n.push(we("501")),n.push(we("502")),n.push(we("503")),n.push(we("601"));else if("w"==e)n.push(we("201")),n.push(we("401"));else if("wr"==e){var i=S();n.push(we("w01",t,i)),n.push(we("w02",t,i))}return n}function E(){de=0,angular.forEach(me,function(e){e.css.zIndex>de&&(de=e.css.zIndex)})}function P(e,t){if(""+t.type=="201")return void $(e).trigger("click");var n=JSON.parse(sessionStorage.getItem("toolbarFonts"))||[];0===n.length?h.getMyFontFamily().then(function(i){i.data.success?(n=i.data.list,sessionStorage.setItem("toolbarFonts",JSON.stringify(n)),I(n,e,t)):alert("网络加载失败,请稍后再试!")}):I(n,e,t)}function I(e,t,i){for(var a,s=[],o=/font-family:(.*?);/g,r=i.content,l=[],c=[];null!=(a=o.exec(r));)s.push(a[1].trim());for(var p=0;p<e.length;p++)c.push(e[p].fontFamily);for(p=0;p<s.length;p++)"defaultFont"!==s[p]&&"moren"!==s[p]&&-1===c.indexOf(s[p])&&l.push(s[p]);l.length?h.getFontNames(l.join()).then(function(e){if(200==e.data.code&&e.data.list&&e.data.list.length){for(var a=[],s=0;s<e.data.list.length;s++)a.push(e.data.list[s].name);var o='当前字体<span class="color-blue">'+a.join()+"</span>未经授权，请先购买字体。";d.openConfirmDialog({msg:o,confirmName:"购买字体",cancelName:"暂不购买"},function(){n.open({windowClass:"console img_console",templateUrl:"scene/font/font-shopping.tpl.html",controller:"fontShoppingCtrl",resolve:{}})},function(){d.openConfirmDialog({msg:"确定要恢复默认字体吗？",confirmName:"确认",cancelName:"取消编辑"},function(){i.content=$("#"+i.id).html(),i.fonts={},_(t,i,!0)},function(){})})}}):_(t,i)}function _(e,n,i){pe.currentElemDef=n;var a=n.css.height||0;$(e).css({"min-height":a,cursor:"text"}),$(e).parents("li").hasClass("inside-active")||($(e).bind("click",function(e){e.stopPropagation()}),$(document).bind("mousedown",function(){t.$broadcast("convert.html.canvas",n,e),$(e).css({"min-height":"inherit",cursor:"default"}),$("#btn-toolbar").find("input[type=text][data-edit]").blur(),$("#btn-toolbar")&&($("#btn-toolbar").remove(),t.$broadcast("cancelbind")),$(e).unbind("click");var i=n.content;n.content=$(e).html(),i!=n.content&&t.$broadcast("hisChange");var s=parseInt($(e).parent().height(),10);s>a&&(n.css.height=s,$(e).parents("li").height(s)),$(e).parents("li").removeClass("inside-active").css("user-select","none"),$(e).removeAttr("contenteditable"),window.getSelection&&window.getSelection().modify("move","right","line"),$(document).unbind("mousedown")}),$(e).parents("li").addClass("inside-active").css("user-select","text"),t.$broadcast("text.click",e,i))}function L(e){Y(e,null,function(t){var n=t.data,i="";e.properties.src=n,e.properties.id=t.id;var a=t.width/t.height;e.properties.originSrc&&(delete e.properties.originSrc,delete e.properties.cropSize,delete e.properties.radioValue);var s=$("#"+e.id);if(s.length>0){var o=$("#inside_"+e.id).width(),r=$("#inside_"+e.id).height();a>=o/r?(s.outerHeight(r),s.outerWidth(r*a),s.css("marginLeft",-(s.outerWidth()-o)/2),s.css("marginTop",0)):(s.outerWidth(o),s.outerHeight(o/a),s.css("marginTop",-(s.outerHeight()-r)/2),s.css("marginLeft",0));var l=/.svg/;if(e.properties&&e.properties.cropSize){var c=e.properties.cropSize;i="?imageMogr2/auto-orient/crop/!"+c.w+"x"+c.h+"a"+c.x+"a"+c.y,n+=i}l.test(n)||(n+=(e.properties&&e.properties.cropSize,"")),s.attr("src",PREFIX_FILE_HOST+n),e.properties.imgStyle={},e.properties.imgStyle.width=s.outerWidth(),e.properties.imgStyle.height=s.outerHeight(),e.properties.imgStyle.marginTop=s.css("marginTop"),e.properties.imgStyle.marginLeft=s.css("marginLeft")}else t.width>$("#nr .edit_area").width()&&(t.width=$("#nr .edit_area").width(),t.height=t.width/a),t.height>$("#nr .edit_area").height()&&(t.height=$("#nr .edit_area").height(),t.width=t.height*a),e.css.width=t.width,e.css.height=t.height,e.properties.imgStyle={},e.properties.imgStyle.width=t.width,e.properties.imgStyle.height=t.height,e.properties.imgStyle.marginTop="0",e.properties.imgStyle.marginLeft="0",C(e.type,e)},function(){e.properties.src||v(e.id)})}function R(e){xe||n.open({windowClass:"console img_console",templateUrl:"scene/console/shape.tpl.html",controller:"ShapeConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){var n=$("#"+e.id);if(e.properties.src=t.data,e.properties.id=t.id,e.properties.type=t.type,e.css.height=t.height,e.css.width=t.width,e.properties.items=t.items,n.length){$("#nr").find("#inside_"+e.id).remove()}C(e.type,e)},function(){$("#"+e.id).length||v(e.id)})}function M(e){n.open({windowClass:"console seven-contain",templateUrl:"scene/console/button.tpl.html",controller:"ButtonConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){e.properties=angular.copy(t),$.extend(!0,e.css,t.btnStyle);var n=$("#"+e.id,$("#nr"));n.length>0&&n.parents("li").remove(),C(e.type,e)},function(){$("#"+e.id).length||v(e.id)})}function q(e){xe||(xe=n.open({windowClass:"console six-contain",templateUrl:"scene/console/tel.tpl.html",controller:"TelConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.properties.title=t.title,e.properties.number=t.number,t.title.replace(/ /g,"&nbsp;"),$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function A(e){xe||(xe=n.open({windowClass:"console seven-contain",templateUrl:"scene/console/input.tpl.html",controller:"InputConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,t.type&&(e.type=t.type),e.properties.placeholder=t.title,e.properties.required=t.required,e.title=t.title,$.extend(!0,e.css,t.btnStyle);var n=$("#"+e.id);n.length>0&&n.parents("li").remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function z(e){n.open({windowClass:"img_console",templateUrl:"scene/console/map.tpl.html",controller:"MapCtrl",resolve:{elemDef:function(){return e}}}).result.then(function(t){e.properties.zoom=t.zoom,e.properties.lat=t.center.lat,e.properties.lng=t.center.lng,t.label&&(e.content=t.label,e.properties.address=t.label);var n=$("#"+e.id);if(n.length){var i=n.data("map");if(i.panTo(t.center),i.setZoom(t.zoom),n.data("label")){n.data("label").setPosition(t.center);n.data("marker").setPosition(t.center)}}else C(e.type,e)})}function D(e){xe||(xe=n.open({windowClass:"console seven-contain",templateUrl:"scene/console/radio-checkbox.tpl.html",controller:"RadioCheckboxConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.title=t.title,e.type=t.type;var n=$("#nr").find("#inside_"+e.id);n.length&&n.remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function F(e){xe||(xe=n.open({windowClass:"console seven-contain",templateUrl:"scene/console/rating.tpl.html",controller:"RatingConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(){xe=null;var t=$("#nr").find("#inside_"+e.id);t.length&&t.remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function N(e){xe||(xe=n.open({windowClass:"console six-contain",templateUrl:"scene/console/counter.tpl.html",controller:"CounterConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function H(e){xe||(xe=n.open({windowClass:"console six-contain",templateUrl:"scene/console/statistics-component.tpl.html",controller:"StatisticsConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function O(e){xe||(xe=n.open({windowClass:"console six-contain",templateUrl:"scene/console/link-component.tpl.html",controller:"LinkComponentConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,isNaN(e.properties.url)&&e.properties.url&&(e.properties.url=PREFIX_S1_URL+"eqs/link?id="+e.sceneId+"&url="+encodeURIComponent(e.properties.url)),$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function U(e){xe||(xe=n.open({windowClass:"console six-contain",templateUrl:"scene/console/sound-component.tpl.html",controller:"SoundComponentConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,t.title.replace(/ /g,"&nbsp;"),$.extend(!0,e.css,t.btnStyle),$("#"+e.id).length>0&&$("#"+e.id).parents("li").remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function j(e){xe||(xe=n.open({windowClass:"console seven-contain pictures1",backdrop:"static",templateUrl:"scene/console/pictures1.tpl.html",controller:"pictures1Ctrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.properties=t;var n=$("#inside_"+e.id);n.length&&n.remove(),C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function B(){var e=se;V(e,2,function(t){e.bgAudio&&g.pushUsedFile(2,t.id),t.url||t.src?(g.removeUsedFile(2,t.id),e.bgAudio=t):e.bgAudio=null})}function X(e){V(e,4,function(t){var n=$("#inside_"+e.id);t.src?(e.sound=t,n.children(".sound").length||$('<div class="sound eqf-music">').click(function(){X(e)}).appendTo(n)):(delete e.sound,n.children(".sound").remove())})}function V(e,t,i){xe||(xe=n.open({windowClass:"console img_console",templateUrl:"scene/console/sound.tpl.html",controller:"soundCtrl",resolve:{obj:function(){return{elemDef:e,type:t}}}}).result.then(function(e){xe=null,i(e)},function(){xe=null}))}function G(e){xe||(xe=n.open({windowClass:"console six-contain",templateUrl:"scene/console/video.tpl.html",controller:"VideoCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){xe=null,e.properties.src=t,$("#"+e.id).length||C(e.type,e)},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function W(e,n){Y(e,n,function(i){if("imgSrc"==i.type){var a={type:3,properties:{src:i.data,id:i.id,pageLength:n,name:i.name}};i.height/i.width>=1008/642&&i.height/i.width<=1.578125&&(1==n||i.isSys)?(e.properties.originSrc&&(delete e.properties.originSrc,delete e.properties.cropSize),t.$broadcast("scene.bg.replace",{type:"imgSrc",src:i.data,id:i.id,longPage:n},e),r.addPageHistory(ge.obj.id,ge.obj.elements)):(e.properties.croptype&&(a.properties.croptype=e.properties.croptype),te(a,function(i){1!=n&&(e.properties.pageLength=n,e.properties.croptype=i.type),t.$broadcast("scene.bg.replace",{type:"imgSrc",src:i.src,id:i.id,originSrc:i.originSrc,cropSize:i.cropSize},e),r.addPageHistory(ge.obj.id,ge.obj.elements)},function(){$("#"+e.id).length||v(e.id)}))}"backgroundColor"==i.type&&(1!=n&&(e.properties.croptype=1,e.properties.pageLength=n),t.$broadcast("scene.bg.replace",i,e),r.addPageHistory(ge.obj.id,ge.obj.elements))},function(){$("#"+e.id).length||v(e.id)})}function Q(e){xe||(xe=n.open({windowClass:"console six-contain randomevent-console",templateUrl:"scene/console/randomevent.tpl.html",controller:"RandomEventCtrl",resolve:{obj:function(){return e}}}).result.then(function(n){xe=null,n&&0!==n.length&&(e.properties.pics=n,$("#"+e.id).length||C(e.type,e),t.$broadcast("create.randomevent.trigger",e))},function(){xe=null,$("#"+e.id).length||v(e.id)}))}function Y(e,t,i,a,s){if(!xe){var o="0";3==e.type&&(o="0"),"4"==(""+e.type).charAt(0)&&(o="1"),s||(s=""),xe=n.open({windowClass:"console img_console "+s,templateUrl:"scene/console/bg.tpl.html",controller:"BgConsoleCtrl",resolve:{obj:function(){return{fileType:o,elemDef:e,longPage:t}}}}).result.then(function(e){xe=null,i(e)},function(e){xe=null,a(e)})}}function Z(e){pe.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"style"})}function J(e){pe.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"anim"})}function K(e){pe.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"trigger"})}function ee(e){pe.currentElemDef=e,t.$broadcast("showStylePanel",{activeTab:"dropdown"})}function te(e,t,i){xe=n.open({windowClass:"console seven-contain pictures1",templateUrl:"scene/console/imageCrop.tpl.html",controller:"imageCropCtrl",backdrop:"static",resolve:{obj:function(){return e}}}).result.then(function(e){xe=null,"function"==typeof t&&t(e)},function(e){xe=null,"function"==typeof i&&i(e)})}function ne(){$(".content").trigger("mousedown"),pe.currentElemDef=null,t.$broadcast("showStylePanel",{activeTab:"trigger"})}function ie(e){e.sceneId=ge.obj.sceneId,n.open({windowClass:"console six-contain",templateUrl:"scene/console/link.tpl.html",controller:"LinkConsoleCtrl",resolve:{obj:function(){return e}}}).result.then(function(t){t&&"http://"!=t?(isNaN(t)?e.properties.url=PREFIX_S1_URL+"eqs/link?id="+e.sceneId+"&url="+encodeURIComponent(t):e.properties.url=t,$("#inside_"+e.id).find(".fa-link").removeClass("fa-link").addClass("fa-anchor")):(delete e.properties.url,$("#inside_"+e.id).find(".fa-anchor").removeClass("fa-anchor").addClass("fa-link"))})}function ae(e,t){var n=$(".element",e)[0];$(n).mousedown(function(e){$(this).parents("li").hasClass("inside-active")&&e.stopPropagation()}),$(n).bind("contextmenu",function(e){$(this).parents("li").hasClass("inside-active")?e.stopPropagation():$(this).blur()}),$(n).bind("dblclick",function(e){return!$("#nr").find(".mask-trigger").length&&(P(n,t),$("#popMenu").hide(),void e.stopPropagation())}),$(n).bind("keydown",function(e){$(".btn-toolbar").length>0&&e.stopPropagation()}),$(n).find("a").bind("click",function(e){e.preventDefault()})}var se,oe,re,le,ce,de,pe={},ue=eqShow.templateParser("jsonParser"),ge=null,me=null,he={},fe=0,ve=!1,be=!1;pe.historyBack=function(){r.canBack(ge.obj.id)&&(me=r.back(ge.obj.id),y(me),b(me),t.$broadcast("close.style.panel"),t.$broadcast("refreshPageBg"),t.$broadcast("refreshSetComps"))},pe.historyForward=function(){r.canForward(ge.obj.id)&&(me=r.forward(ge.obj.id),y(me),b(me),t.$broadcast("close.style.panel"),t.$broadcast("refreshPageBg"),t.$broadcast("refreshSetComps"))};var ye=pe.createCompGroup=function(e,n){for(var i=k(e),a=[],s=0;s<i.length;s++){var o=T(i[s].type,n,i[s]);n?(n={left:n.left,top:parseInt(n.top,10)+50+"px"},0!==s&&(n.top=parseInt(n.top,10)-pe.comPosition.top+"px")):n={left:"60px",top:"150px"},C(i[s].type,o),"w"==e&&a.push(o)}0!==a.length&&(a[0].properties.comid=a[1].id,a[0].properties.type="share",a[1].properties.type="share",a[1].properties.comid=a[0].id),r.addPageHistory(ge.obj.id,ge.obj.elements),t.$broadcast("dom.changed")},we=function(e,t,n){var i;return"501"==e&&(i={properties:{placeholder:"姓名"},title:"姓名",type:501}),"502"==e&&(i={properties:{placeholder:"电话"},title:"电话",type:502}),"503"==e&&(i={properties:{placeholder:"邮箱"},title:"邮箱",type:503}),"601"==e&&(i={properties:{title:"提交"},type:601}),"201"==e&&(i={properties:{title:"我的微信昵称"},css:{fontSize:24,textAlign:"center"},content:"我的微信昵称",type:e}),"401"==e&&(i={properties:{title:"我的微信头像",src:CLIENT_CDN+"assets/images/create/wx_default.png"},type:e}),"w01"==e&&(i={id:"wxp"+n,properties:{title:"播放录音",icon:"eqf-nosy",src:CLIENT_CDN+"assets/audio/wexin_sound.mp3"},type:e}),"w02"==e&&(i={id:"wxr"+n,properties:{title:"按住 说话"},type:e}),i};pe.createComp=function(e,t,n,i,a){var s;if("g101"===(e=""+e))return void ye(e,t);if("w"===e.charAt(0)&&("w"===e||"wr"===e))return void ye(e,t);if("9"===e.charAt(0))return void B();if(s=T(e,t),"4"===e.charAt(0)){if(!a)return void L(s);s.subType="psd",s.lastOne=a.lastOne,s.css.width=a.adjustWidth,s.css.height=a.adjustHeight,s.css.top=a.top,s.css.left=a.left,s.properties.src=a.src,s.css.opacity=a.opacity/255,s.css["mix-blend-mode"]=a.blendMode.mode}if("h"===e)return void R(s);if("5"===(""+e).charAt(0))return void A(s);if("6"===(""+e).charAt(0))return void M(s);if("8"===(""+e).charAt(0))return void q(s);if("p"==e)return void j(s);if("v"==e)return G(s),s;if("3"==(""+e).charAt(0))return void W(s,i);if("r"==e||"c"==e)return void D(s);if("a"==e)return void F(s);if("i"==e)return n&&(s.properties.icon=n,"eqf-love"==n?s.properties.color="#ff5448":"eqf-good"==n?s.properties.color="#f2a653":"eqf-flower2"==n?s.properties.color="#ea1f64":"eqf-vote"==n&&(s.properties.color="#08a1ef")),void N(s);if("d"==e)return n&&(s.properties.icon=n),void H(s);if("l"==e)return void O(s);if("s"==e)return void U(s);if("n"==e)return void Q(s);if("m"==e)return void z(s);if("wp"==e)return void C("403",s);if("t"==e)return s.properties.chartType=n,void C(e,s);if("2"==(""+e).charAt(0)||"x"==(""+e).charAt(0)||"z"===e){"x"==(""+e).charAt(0)&&(s.properties.newXiuziti=!0);var o=C(e,s);$(".element",o).trigger("dblclick").focus(),setTimeout(function(){if(window.getSelection){var e=window.getSelection();e.modify("move","left","line"),e.modify("extend","right","line")}})}else C(e,s)},pe.updateCompPosition=function(e,n,i){for(var a=0;a<me.length;a++)"inside_"+me[a].id==e&&(me[a].css?(me[a].css.left=n.left,me[a].css.top=n.top,i||r.addPageHistory(ge.obj.id,me)):(me[a].css=n,i||r.addPageHistory(ge.obj.id,me)));t.$$phase||t.$apply()},pe.updateCompAngle=function(e,n){for(var i=0;i<me.length;i++)"inside_"+me[i].id==e&&(me[i].css?me[i].css.transform="rotateZ("+n+"deg)":me[i].css={},r.addPageHistory(ge.obj.id,me));t.$apply()},pe.setCopy=function(e){ve=e,t.$broadcast("copyState.update",e)},pe.setFormat=function(e){be=e},pe.getCopy=function(){return ve},pe.getPageNames=function(t){var n="index.php?c=scene&a=pagelist&id="+t+"&date="+(new Date).getTime();return e({withCredentials:!0,loading:!0,method:"GET",url:PREFIX_URL+n})},pe.changePageSort=function(t,n){var i="index.php?c=page&a=pageSort&id="+n+"&pos="+t+"&date="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},pe.updateCompSize=function(e,n,i){for(var a=0;a<me.length;a++)"inside_"+me[a].id==e&&(me[a].css||(me[a].css={}),me[a].css.width=n.width,me[a].css.height=n.height,n.lineHeight&&(me[a].css.lineHeight=n.lineHeight),me[a].css.top=n.top,me[a].css.left=n.left,me[a].properties.width=n.width,me[a].properties.height=n.height,n.imgStyle&&(me[a].properties.imgStyle=n.imgStyle),i||r.addPageHistory(ge.obj.id,me));t.$$phase||t.$apply()},pe.savePageNames=function(t){var n={id:t.id,sceneId:t.sceneId,name:t.name};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=page&a=savePageName",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})},pe.resetCss=function(){$("#nr .edit_area li").each(function(e,t){var n=he[t.id.replace(/inside_/g,"")];n&&(n.css||(n.css={}),n.css.zIndex=e)})},pe.copyElement=function(){fe=0,ce=ge.obj.id;var e=l.getElements(),t=[];$.each(e,function(e,n){var i=he[n];"w01"!=i.type&&"w02"!=i.type&&t.push(i)}),re=angular.copy(t),le=angular.copy(t),pe.setCopy(!0)},pe.formatElement=function(){var e=l.getElements(),n=[];$.each(e,function(e,t){var i=he[t];n.push(i)}),t.formatElemDefs=angular.copy(n),pe.setFormat(!0)},pe.pasteElement=function(){var e=0,n=[],i=pe.isCurrentPageSubmitButtonAlreadyExist();de||E();for(var a=0;a<re.length;a++)if(6!==re[a].type&&601!==re[a].type||!i){re[a].pageId=ge.obj.id,re[a].id=S(),ce==re[a].pageId?(e++,x(le[a],re[a],e,re.length)):(fe=0,re[a].css=angular.copy(le[a].css));var s=angular.copy(re[a]),o=de+=1;s.css.zIndex=o,me.push(s),he[s.id]=s,n.push(C(s.type,s,!0))}ce=ge.obj.id,r.addPageHistory(ge.obj.id,ge.obj.elements),t.$broadcast("dom.changed"),angular.forEach(l.getElements(),function(e){$("#inside_"+e).children(".bar").hide()}),l.clearElements(),$.each(n,function(e,t){t.children(".bar").show(),l.addElement(t.attr("id").split("_")[1])})},pe.isCurrentPageSubmitButtonAlreadyExist=function(){var e=!1;return angular.forEach(ge.obj.elements,function(t){6==(""+t.type).charAt(0)&&(e=!0)}),e},pe.openCropModal=function(e,t,n){te(e,t,n)},pe.replaceBgImage=function(e,n,i){var a=e;n.style.backgroundImage="url("+PREFIX_FILE_HOST+a+")",i.properties.bgColor=null,i.properties.imgSrc=a,t.$broadcast("show.edit.bg")};var xe=null;return pe.openConsoleModal=Y,utilTrigger.getSendType(),utilTrigger.getHandleType(),pe.openTriggerMode=ne,ue.addInterceptor(function(e,n,i){function o(){var i=$('<ul id="popMenu" class="dropdown-menu" style="min-width: 150px; display: block;" role="menu" aria-labelledby="dropdownMenu1"><li class="edit" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-write"></div>编辑</a></li><li class="style" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-type"></div>样式</a></li><li class="animation" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-move"></div>动画</a></li><li class="sound" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-music"></div>音效</a></li><li class="trigger" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-chufa"></div>触发</a></li><li class="link" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-link"></div>链接</a></li><li class="copy" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-scene-copy"></div>复制</a></li><li class="cut" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-cut"></div>裁切</a></li><li class="format" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-copy-animation"></div>复制动画</a></li><li role="presentation" class="bottom_bar"><a title="置顶"><div class="eqf-top up-all"></div></a><a title="上移一层"><div class="eqf-up up"></div></a><a title="下移一层"><div class="eqf-down down"></div></a><a title="置底"><div class="eqf-under down-all"></div></a><a title="删除"><div class="eqf-scene-delete remove"></div></a></li></ul>').css({position:"absolute","user-select":"none"});return ve&&i.find(".copy").after($('<li class="paste" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-print"></div>粘贴</a></li>')),be&&i.find(".format").after($('<li class="pasteformat" role="presentation"><a role="menuitem" tabindex="-1"><div class="eqf-paste-animation"></div>粘贴动画</a></li>')),i.find(".edit").click(function(t){switch(t.stopPropagation(),n.type.toString().charAt(0)){case"1":break;case"2":case"x":P(e.find(".element").get(0),n);break;case"3":break;case"4":L(n);break;case"h":R(n);break;case"5":A(n);break;case"6":M(n);break;case"7":break;case"8":q(n);break;case"9":case"g":break;case"p":j(n);break;case"v":G(n);break;case"r":case"c":D(n);break;case"a":F(n);break;case"l":O(n);break;case"s":U(n);break;case"i":N(n);break;case"d":H(n);break;case"n":Q(n);break;case"m":z(n)}i.hide()}),i.find(".style").click(function(t){t.stopPropagation(),"z"===n.type?ee(n):Z(n,function(t){if(1==n.type)for(var i in n.properties.labels)t.backgroundColor&&(n.properties.labels[i].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(n.properties.labels[i].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,n.css,t)}),i.hide()}),i.find(".animation").click(function(e){e.stopPropagation(),J(n,function(e){n.properties.anim=e}),i.hide()}),i.find(".link").click(function(e){e.stopPropagation(),ie(n),i.hide()}),i.find(".remove").click(function(e){e.stopPropagation(),t.$broadcast("element.delete")}),i.find(".sound").click(function(e){e.stopPropagation(),X(n,4),i.hide()}),i.find(".trigger").click(function(e){e.stopPropagation();var t=utilTrigger.getHandleType();$.each(t,function(e,t){p.getSendIds(t.value,n.id)}),K(n,function(e){n.properties.trigger=e}),i.hide()}),i.find(".down").click(function(){var n=e.prev();if(!(n.length<=0)){var i=e.css("zIndex");e.css("zIndex",n.css("zIndex")),n.css("zIndex",i),n.before(e),t.$broadcast("changeCss",{changZindex:"true"})}}),i.find(".up").click(function(){var n=e.next();if(!(n.length<=0)){var i=e.css("zIndex");e.css("zIndex",n.css("zIndex")),n.css("zIndex",i),n.after(e),t.$broadcast("changeCss",{changZindex:"true"})}}),i.find(".up-all").click(function(){var n=e.siblings("li");n.last().after(e),e.css("zIndex",n.length+1),n.each(function(e,t){$(t).css("zIndex",e+1)}),t.$broadcast("changeCss",{changZindex:"true"})}),i.find(".down-all").click(function(){var n=e.siblings("li");n.first().before(e),e.css("zIndex",1),n.each(function(e,t){$(t).css("zIndex",e+2)}),t.$broadcast("changeCss",{changZindex:"true"})}),i.find(".copy").click(function(e){e.stopPropagation(),$(".modal-dialog")[0]||pe.copyElement(),i.hide()}),i.find(".format").click(function(t){t.stopPropagation(),$(".modal-dialog")[0]||(pe.formatElement(),pe.currentTab="anim",e.trigger("click")),i.hide()}),i.find(".pasteformat").click(function(n){n.stopPropagation(),$(".modal-dialog")[0]||a(function(){var n=l.getElements();if(1===n.length){if(pe.getComponent(n[0]).id==t.formatElemDefs[0].id)return;pe.getComponent(n[0]).properties.anim=angular.copy(t.formatElemDefs[0].properties.anim),pe.currentTab="anim",e.trigger("click");var i=[];if(pe.getComponent(n[0]).properties.anim&&(pe.getComponent(n[0]).properties.anim.length?i=pe.getComponent(n[0]).properties.anim:i.push(pe.getComponent(n[0]).properties.anim)),0===i.length)return;t.$broadcast("formatAnim",i),r.addPageHistory(ge.obj.id,ge.obj.elements)}}),i.hide()}),i.find(".paste").click(function(e){e.stopPropagation(),$(".modal-dialog")[0]||pe.pasteElement(),i.hide()}),i.find(".cut").click(function(e){e.stopPropagation(),te(n,function(){r.addPageHistory(ge.obj.id,ge.obj.elements)}),i.hide()}),2!=n.type&&4!=n.type&&401!=n.type&&402!=n.type&&"h"!=n.type&&"x"!=n.type&&i.find(".trigger").hide(),2!=n.type&&4!=n.type&&5!=n.type&&"h"!=n.type&&"x"!=n.type&&501!=n.type&&502!=n.type&&503!=n.type&&401!=n.type&&402!=n.type&&i.find(".sound").hide(),s.isAllowToAccess(s.accessDef.SCENE_EDIT_TRIGGER)||i.find(".trigger").hide(),s.isAllowToAccess(s.accessDef.SCENE_EDIT_SOUND)||i.find(".sound").hide(),4!=n.type&&"401"!=n.type&&"402"!=n.type&&"h"!=n.type&&"x"!=n.type&&i.find(".link").hide(),(4!=n.type&&"401"!=n.type&&"402"!=n.type||"w01"==n.type||"w02"==n.type)&&i.find(".cut").hide(),"p"==n.type&&(i.find(".animation").hide(),i.find(".style").hide(),i.find(".format").hide(),i.find(".pasteformat").hide()),(6==n.type||601==n.type||"w01"==n.type||"w02"==n.type)&&i.find(".copy").hide(),"g"===n.type&&(i.find(".animation").hide(),i.find(".format").hide(),i.find(".edit").hide(),i.find(".up-all").parent().hide(),i.find(".up").parent().hide(),i.find(".down-all").parent().hide(),i.find(".down").parent().hide()),i}if("view"!=i){n.trigger&&p.setTrigger(n.id,n.trigger);var c=$("#eq_main");n.sound&&$('<div class="sound eqf-music">').click(function(){X(n)}).appendTo(e),e.on("contextmenu",".element-box",function(i){if(i.stopPropagation(),"x"==n.type&&!n.properties.newXiuziti)return alert("秀字体功能已全面升级,为保证统一的体验,原有组件已无法再次编辑,请您使用新组件重新编辑"),$("#comp_setting").attr("style","display:none"),!1;if("none"!=$(".select-panel").css("display"))return!1;if($("#nr").find(".mask-trigger").length){if(pe.currentElemDef&&t.$broadcast("create.trigger.menu",e,i),!$(".edit_area").find(".switch-original").length){var a=$('<div class="switch">');e.append(a).children(".bar").hide()}return!1}$("#comp_setting:visible").length>0&&"p"!=n.type&&(pe.currentElemDef=n,t.$broadcast("showStylePanel"));var s=o();return function(e,t){$("#"+t).remove();var n;e.appendTo(c),n=i.pageY+c.scrollTop()+e.height()>document.documentElement.clientHeight?i.pageY+c.scrollTop()-e.height()<0?i.pageY+c.scrollTop()-e.height()/2:i.pageY+c.scrollTop()-e.height():i.pageY+c.scrollTop(),e.css({left:i.pageX+c.scrollLeft()+15,top:n,zIndex:10001}),c.mousemove(function(n){e=$("#"+t),(n.pageX<e.offset().left-20||n.pageX>e.offset().left+e.width()+20||n.pageY<e.offset().top-20||n.pageY>e.offset().top+e.height()+20)&&(e.hide(),$(this).unbind("mousemove"))})}(s,"popMenu"),!1}),"p"!=n.type&&e.on("click",function(t){if(t.stopPropagation(),!$("#nr").find(".mask-trigger").length){if("x"==n.type&&!n.properties.newXiuziti)return alert("秀字体功能已全面升级,为保证统一的体验,原有组件已无法再次编辑,请您使用新组件重新编辑"),void $("#comp_setting").attr("style","display:none");if(!t.ctrlKey&&!t.shiftKey){if(pe.currentTab===undefined||null===pe.currentTab)"z"!==n.type?Z(n,function(t){if(1==n.type)for(var i in n.properties.labels)t.backgroundColor&&(n.properties.labels[i].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(n.properties.labels[i].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,n.css,t)}):ee(n);else if("style"===pe.currentTab)"z"!==n.type?Z(n,function(t){if(1==n.type)for(var i in n.properties.labels)t.backgroundColor&&(n.properties.labels[i].color.backgroundColor=t.backgroundColor,$(".label_content").css("background-color",t.backgroundColor)),t.color&&(n.properties.labels[i].color.color=t.color,$(".label_content").css("color",t.color));else $(".element-box",e).css(t),$.extend(!0,n.css,t)}):ee(n);else if("anim"===pe.currentTab)J(n,function(e){n.properties.anim=e});else if("trigger"==pe.currentTab){var i=utilTrigger.getHandleType();$.each(i,function(e,t){p.getSendIds(t.value,n.id)}),K(n,function(e){n.properties.trigger=e})}else"dropdown"===pe.currentTab&&ee(n);return!1}}}),e.attr("title","按住鼠标进行拖动，点击鼠标进行编辑")}}),pe.openLinkModal=ie,ue.bindEditEvent("2",function(e,t){ae(e,t)}),ue.bindEditEvent("x",function(e,t){ae(e,t)}),ue.bindEditEvent("3",function(){}),ue.bindEditEvent("v",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){G(t),$("#popMenu").hide()})}),ue.bindEditEvent("4",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){return!$("#nr").find(".mask-trigger").length&&(L(t),void $("#popMenu").hide())})}),ue.bindEditEvent("n",function(e,t){var n=$(".element",e)[0];$(n).bind("dblclick",function(){return!$("#nr").find(".mask-trigger").length&&(Q(t),void $("#popMenu").hide())})}),ue.bindEditEvent("h",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){return!$("#nr").find(".mask-trigger").length&&(R(t),void $("#popMenu").hide())})}),ue.bindEditEvent("5",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){A(t),$("#popMenu").hide()})}),ue.bindEditEvent("r",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){D(t),$("#popMenu").hide()})}),ue.bindEditEvent("c",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){D(t),$("#popMenu").hide()})}),ue.bindEditEvent("a",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){F(t),$("#popMenu").hide()})}),ue.bindEditEvent("p",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){j(t),$("#popMenu").hide()}),c.setProperties(t.properties)}),ue.bindEditEvent("6",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){M(t),$("#popMenu").hide()})}),ue.bindEditEvent("8",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){q(t),$("#popMenu").hide()})}),ue.bindEditEvent("l",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){O(t),$("#popMenu").hide()})}),ue.bindEditEvent("s",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){U(t),$("#popMenu").hide()})}),ue.bindEditEvent("i",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){N(t),$("#popMenu").hide()})}),ue.bindEditEvent("d",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){H(t),$("#popMenu").hide()})}),ue.bindEditEvent("7",function(e,t){$(".element",e)[0].addEventListener("click",function(){xe||n.open({windowClass:"",templateUrl:"scene/console/map.tpl.html",controller:"MapConsoleCtrl"}).result.then(function(e){var n=new BMap.Map("map_"+t.id);n.clearOverlays();var i=new BMap.Point(e.lng,e.lat),a=new BMap.Marker(i);n.addOverlay(a);var s=new BMap.Label(e.address,{offset:new BMap.Size(20,-10)});a.setLabel(s),n.centerAndZoom(i,12),t.properties.pointX=e.lng,t.properties.pointY=e.lat,t.properties.x=e.lng,t.properties.y=e.lat,t.properties.markTitle=e.address})})}),ue.bindEditEvent("m",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick"),$(n).bind("dblclick",function(){z(t),$("#popMenu").hide()})}),ue.bindEditEvent("w",function(e){var t=$(".element",e)[0];$(t).unbind("dblclick"),$(t).bind("dblclick",function(){$("#popMenu").hide()})}),ue.bindEditEvent("t",function(){}),ue.bindEditEvent("b",function(e){}),ue.bindEditEvent("g",function(e){}),ue.bindEditEvent("z",function(e,t){var n=$(".element",e)[0];$(n).unbind("dblclick")}),pe.templateEditor=ue,pe.getTplById=function(t){var n="m/scene/select?id="+t;return n+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.getUserNum=function(){var t=PREFIX_URL+"m/scene/free/tpl/num";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},pe.createByTpl=function(t){var n=PREFIX_URL+"index.php?c=scene&a=createBySys";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},pe.getSceneDetail=function(t,n){var i="index.php?c=scene&a=detail&id="+t;return n&&(i+=(/\?/.test(i)?"&":"?")+"user="+n),oe=e({withCredentials:!0,method:"GET",url:PREFIX_URL+i}),se=null,oe.then(function(e){se=e.data.obj}),oe},pe.getCurrentScene=function(){return se},pe.getCurrentScenePromise=function(){return oe},pe.saveSceneSettings=function(t){t=angular.copy(t),angular.isObject(t.bgAudio)&&(t.bgAudio=JSON.stringify(t.bgAudio)),t.image=null;return e({withCredentials:!0,loading:!0,method:"POST",url:PREFIX_URL+"index.php?c=scene&a=saveSettings",headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},pe.publishScene=function(t,n){var i="index.php?c=scene&a=publish&id="+t;return n&&(i+=(/\?/.test(i)?"&":"?")+"checkType="+n),i+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},pe.closeScene=function(t){var n="index.php?c=scene&a=off&id="+t;return n+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.openScene=function(t){var n="index.php?c=scene&a=on&id="+t;return n+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.createBlankScene=function(t,n,i){var a={name:t,type:n,pageMode:i};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=scene&a=create",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},pe.copySceneById=function(t){var n="index.php?c=scene&a=createByCopy&id="+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.deleteSceneById=function(t,n){var i="index.php?c=scene&a=delscene&id="+t;return n&&(i+="&backup="+n),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},pe.getCoverImages=function(){var t="index.php?c=upfile&a=userList&bizType=99&fileType=1&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},pe.revoke=function(t){var n="m/scene/revoke?id="+t+"&time="+(new Date).getTime();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.getSceneByPage=function(t,n,a,s){var o="";n||a?(o="index.php?c=scene&a=createpage&id="+t,a&&(o+="&copy=true"),s&&(o+="&longPage="+s)):o="index.php?c=scene&a=design&id="+t;var r=i.defer(),l=new Date;return o+=(/\?/.test(o)?"&":"?")+"time="+l.getTime(),e({withCredentials:!0,loading:!0,method:"GET",url:PREFIX_URL+o}).then(function(e){r.resolve(e),ge=e.data,ge.obj.elements||(ge.obj.elements=[]),me=ge.obj.elements;for(var t=0;me&&t<me.length;t++)he[me[t].id]=me[t]},function(e){r.reject(e)}),r.promise},pe.previewSceneTpl=function(t){var n="index.php?c=scene&a=syspageinfo&id="+t,a=(i.defer(),new Date);return n+=(/\?/.test(n)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.recentlyUsedTpls=function(){var t="m/scene/tpl/recently/used";return t+=(/\?/.test(t)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+t})},pe.recordTplUsage=function(t){var n={id:t},i="m/scene/usePageTpl",a=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(n)})},pe.getSceneTpl=function(t){var n=o.get("tplCache")?o.get("tplCache"):o("tplCache"),a=i.defer();if(n.get(t)){var s=$.extend(!0,{},n.get(t));s.data.obj.scene&&s.data.obj.scene.bgAudio&&(se.bgAudio=s.data.obj.scene.bgAudio);for(var r={},l=0;l<s.data.obj.elements.length;l++){var c=s.data.obj.elements[l];c.type+""=="w01"||c.type+""=="w02"?(r[c.id.substr(3)]||(r[c.id.substr(3)]=S()),c.id=c.id.substr(0,3)+r[c.id.substr(3)]):c.id=S(),c.sceneId=ge.obj.sceneId,c.pageId=ge.obj.id}me=s.data.obj.elements;for(var d=0;d<me.length;d++)he[me[d].id]=me[d];a.resolve(s)}else{var p="index.php?c=scene&a=syspageinfo&id="+t,u=new Date;p+=(/\?/.test(p)?"&":"?")+"time="+u.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+p}).then(function(e){n.put(e.data.obj.id,$.extend(!0,{},e)),e.data.obj.scene&&e.data.obj.scene.bgAudio&&(se.bgAudio=e.data.obj.scene.bgAudio),e.data.obj.elements||(e.data.obj.elements=[]);for(var t=0;t<e.data.obj.elements.length;t++){var i=e.data.obj.elements[t];i.id=S(),i.sceneId=ge.obj.sceneId,i.pageId=ge.obj.id}me=e.data.obj.elements;for(var s=0;s<me.length;s++)he[me[s].id]=me[s];a.resolve(e)},function(e){a.reject(e)})}return a.promise},pe.saveScene=function(t){return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=scene&a=savepage",headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},pe.deletePage=function(t){var n="index.php?c=scene&a=delPage&id="+t;return e({withCredentials:!0,loading:!0,method:"GET",url:PREFIX_URL+n})},pe.getBgImages=function(t){var n="m/scene/gallery/"+t,i=new Date;return n+=(/\?/.test(n)?"&":"?")+"time="+i.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.createCustomComp=we,pe.openAudioModal=B,pe.openBgModal=W,pe.getElements=function(){return me},pe.getElementsMap=function(){return he},pe.getComponent=function(e){return he[e]},pe.deleteElement=v,pe.getSceneObj=function(){return ge},pe.getTpls=function(t,n,i,a){var s="m/scene/listTpl";null!=t&&(s+=(/\?/.test(s)?"&":"?")+"sceneType="+t),s+=(/\?/.test(s)?"&":"?")+"pageNo="+(n||1),s+=(/\?/.test(s)?"&":"?")+"pageSize="+(i||12),a&&(s+=(/\?/.test(s)?"&":"?")+"orderBy="+a);var o=new Date;return s+=(/\?/.test(s)?"&":"?")+"time="+o.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+s})},pe.getCompanyTpls=function(t,n,i){var a={pageNo:t,pageSize:n,order:i};return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"/m/scene/tpl/company/list",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)})},pe.getSceneById=function(t){var n="/m/scene/tpl/detail/"+t;return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n})},pe.createCompanyTpls=function(t){var n="/m/scene/tpl/company/set?id="+t;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n})},pe.clearCompanyTpls=function(t){var n="/m/scene/tpl/company/unset?id="+t;return e({withCredentials:!0,method:"POST",url:PREFIX_URL+n})},pe.getPageTpls=function(n,i,a,s,o,r,l,c,d){var p="index.php?c=scene&a=syslist",u=new Date;p+=(/\?/.test(p)?"&":"?")+"time="+u.getTime();var g={tplType:1,bizType:i,tagId:a,order:r,freeTplSetting:l,name:c,createUser:d,pageNo:s||1,pageSize:o||12};return e({withCredentials:!0,loading:!0,method:"POST",url:PREFIX_URL+p,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(g)}).then(function(e){200==e.data.code&&(pe.scenes=e.data,t.$broadcast("getSampleList"))})},pe.getPageTplTypesTwo=function(t,n){var i="index.php?c=upfile&a=systag&type=2&bizType="+n,a=new Date;return i+=(/\?/.test(i)?"&":"?")+"time="+a.getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},pe.saveMyTpl=function(t){return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"index.php?c=user&a=saveMyTpl",headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},pe.saveCompanyTpl=function(t){return e({withCredentials:!0,method:"POST",url:PREFIX_URL+"m/scene/page/companytpl/save",headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},pe.previewScene=function(t){var n="index.php?c=user&a=getMyTpl&id="+t,a=new Date;n+=(/\?/.test(n),"&time="+a.getTime());var s=i.defer();return e({withCredentials:!0,method:"GET",url:PREFIX_URL+n}).then(function(e){for(var t=o.get("tplCache")?o.get("tplCache"):o("tplCache"),n=0;n<e.data.list.length;n++){var i={data:{obj:{elements:e.data.list[n].elements,scene:e.data.obj}}};t.put(e.data.list[n].id,$.extend(!0,{},i))}s.resolve(e)}),s.promise},pe.transferScene=function(t,n,i){var a=PREFIX_URL+"index.php?c=scene&a=transfer";return a+="&loginName="+n,a+="&id="+t,a+="&platform="+i,a+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:a})},pe.getActivities=function(){var t=PREFIX_S1_URL+"index.php?c=eqs&a=activity&all=1";return e({withCredentials:!0,method:"GET",url:t})},pe.getSceneTemplatePrices=function(){var t=PREFIX_URL+"index.php?c=statics&a=scene_template_prices";return e({withCredentials:!0,method:"GET",url:t})},pe.soundLink=function(t,n){var i="index.php?c=upfile&a=savewl&url="+t+"&fileType="+n;return i+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:PREFIX_URL+i})},pe.getPageTplByAll=function(){var t=PREFIX_URL+"m/scene/tpl/scene/recommendTag/list",n=new Date;return t+=(/\?/.test(t)?"&":"?")+"time="+n.getTime(),e({withCredentials:!0,method:"POST",url:t})},pe.comPosition={top:0},pe}]),angular.module("services.select",[]).factory("selectService",["$rootScope","security",function(e,t){var n={},i=[];return n.addElement=function(n){n+="";var a=t.isAllowToAccess(t.accessDef.ACCESS_COMP_MANAGE);i.indexOf(n)>=0||(i.push(n),i.length>1?(e.$broadcast("select.more"),e.$broadcast("hideStylePanel")):a&&1==i.length?e.$broadcast("comps.select",n):e.$broadcast("comps.select"))},n.deleteElement=function(n){e.$broadcast("select.less.id",n);var a=t.isAllowToAccess(t.accessDef.ACCESS_COMP_MANAGE),s=i.indexOf(n+"");0>s||(i.splice(s,1),i.length<=1?(e.$broadcast("select.less"),0===i.length&&(e.$broadcast("close.style.panel"),a&&e.$broadcast("comps.select"))):e.$broadcast("hideStylePanel"))},n.clearElements=function(){e.$broadcast("select.less",i),i=[]},n.getElements=function(){return i},n}]),angular.module("services.staticRes",[]),angular.module("services.staticRes").factory("staticResService",["$http",function(e){var t={},n=[{name:"行业",value:"101"},{name:"个人",value:"102"},{name:"企业",value:"103"},{name:"节假",value:"104"},{name:"风格",value:"105"},{name:"品牌",value:"106"}];t.getSceneTypea=function(){return e({withCredentials:!0,method:"GET",url:PREFIX_URL+"index.php?c=statics&a=typelistb"})},t.getSceneType=function(){return t.getSceneTypea().success(function(e){n=e.list}),n};var i=[{name:"版式",value:"1101"},{name:"风格",value:"1103"},{name:"互动",value:"1102"}];t.getBigTab=function(){return i};var a={1101:[{id:1140,name:"招聘",bizType:1101},{id:1141,name:"简历",bizType:1101},{id:1142,name:"表格",bizType:1101},{id:1143,name:"照片",bizType:1101},{id:1144,name:"节日",bizType:1101},{id:1145,name:"商品",bizType:1101},{id:1160,name:"介绍",bizType:1101},{id:1161,name:"图文",bizType:1101},{id:1162,name:"名片",bizType:1101}],1102:[{id:1147,name:"背景",bizType:1102},{id:1148,name:"图集",bizType:1102},{id:1149,name:"表单",bizType:1102},{id:1150,name:"互动",bizType:1102},{id:1151,name:"特效",bizType:1102},{id:1152,name:"事件",bizType:1102},{id:1153,name:"特殊",bizType:1102}],1103:[{id:1154,name:"纯色",bizType:1103},{id:1155,name:"黑白",bizType:1103},{id:1156,name:"绚丽",bizType:1103},{id:1157,name:"怀旧",bizType:1103},{id:1158,name:"现代",bizType:1103},{id:1163,name:"小清新",bizType:1103},{id:1164,name:"扁平化",bizType:1103},{id:1165,name:"中国风",bizType:1103},{id:1166,name:"欧美风",bizType:1103},{id:260,name:"English",bizType:1103},{id:262,name:"Android",bizType:1103}]};t.getPageTpls=function(e){return e?a[e]:a[1101].concat(a[1102]).concat(a[1103])};var s=[{id:13076,name:"风格",value:"203",remark:"group1/M00/61/89/yq0KA1T2vXqAH3MxAAAdfvrWmmM009.png"},{id:13078,name:"节日",value:"205",remark:"group1/M00/61/89/yq0KA1T2vXqAGI-4AAAWKIt1ceE158.png"},{id:13075,name:"企业",value:"202",remark:"group1/M00/61/89/yq0KA1T2vXqAdp7RAAAOCH36lkY788.png"},{id:13074,name:"行业",value:"201",remark:"group1/M00/61/89/yq0KA1T2vXqARMyQAAASI6ZG0zM493.png"},{id:13077,name:"个人",value:"204",remark:"group1/M00/61/89/yq0KA1T2vXqAIorQAAAVuqdCoU4830.png"},{id:15162,name:"正版授权",value:"206",remark:null}];t.getBgTypes=function(){return s};var o=[{id:13084,name:"图标",value:"106",remark:"group1/M00/61/89/yq0KA1T2vXqAOVqkAAAX-MAtU0A633.png"},{id:13085,name:"动画",value:"107",remark:"group1/M00/61/89/yq0KA1T2vXqANcAcAAATIr_b2OM515.png"},{id:13083,name:"节日",value:"105",remark:"group1/M00/61/89/yq0KA1T2vXqAGI-4AAAWKIt1ceE158.png"},{id:13081,name:"风格",value:"103",remark:"group1/M00/61/89/yq0KA1T2vXqAH3MxAAAdfvrWmmM009.png"},{id:13080,name:"企业",value:"102",remark:"group1/M00/61/89/yq0KA1T2vXqAdp7RAAAOCH36lkY788.png"},{id:13079,name:"行业",value:"101",remark:"group1/M00/61/89/yq0KA1T2vXqARMyQAAASI6ZG0zM493.png"},{id:13082,name:"个人",value:"104",remark:"group1/M00/61/89/yq0KA1T2vXqAIorQAAAVuqdCoU4830.png"},{id:15161,name:"正版授权",value:"109",remark:null}];t.getTpTypes=function(){return o};var r=[];t.getAudioTypes=function(){return r};var l=[{id:29331,name:"交通",value:"2"},{id:48376,name:"人物",value:"3"},{id:48377,name:"生活",value:"4"},{id:48378,name:"自然",value:"5"},{id:48379,name:"动物",value:"6"},{id:48380,name:"科技",value:"7"},{id:48381,name:"卡通",value:"8"},{id:48382,name:"其它",value:"9"}];return t.getSoundTypes=function(){return l},t}]),angular.module("services.dataCache").factory("storageService",[function(){var e={};return e.clear=function(){window.localStorage&&localStorage.clear()},e.push=function(e,t){window.localStorage&&localStorage.setItem(e,t)},e.get=function(e){return window.localStorage?localStorage.getItem(e):void 0},e}]),angular.module("service.upgradeAccount",[]).factory("upgradeAccountService",["ModalService","security","$modal",function(e,t,n){return{upgradeAccountFunc:function(i){var a=t.currentUser;return 1===a.type?void n.open({windowClass:"seven-contain",templateUrl:"usercenter/console/upgrade_company.tpl.html",controller:"UsercenterupgradeCtrl",resolve:{user:function(){return{id:a.id}}}}).result.then(function(){t.currentUser.type=2}):2!==a.type?void e.openMsgDialog({msg:"尊敬的用户，您当前账号类型无法升级为企业用户！"}):void n.open({windowClass:"six-contain console",templateUrl:"usercenter/upgrade.tpl.html",controller:"UpgradeCtrl",resolve:{type:function(){return i}}})},buyBtnValueFunc:function(e){if(e.buyBtnValue="立即购买",!t.currentUser)return void(e.disBuyTip="");if(t.currentUser.memberType&&-1!==[1,2,3,4].indexOf(t.currentUser.memberType))e.disBuyTip="您的会员版本为早期版本，请待到期后再购买！",e.disBuyFlag=!0;else if(t.currentUser&&t.currentUser.memberType===e.memberType){var n=new Date;n.setFullYear(n.getFullYear()+1),n.getTime()>t.currentUser.expiryTime?(e.buyBtnValue="立即续费",e.disBuyFlag=!1):(e.disBuyTip="用户自身版本与页面中版本相同，但用户当前版本有效期还超过1年！",e.disBuyFlag=!0)}else t.currentUser.memberType>e.memberType?(e.disBuyTip="用户自身版本比页面中版本级别更高！",e.disBuyFlag=!0):(e.disBuyTip="",e.disBuyFlag=!1)}}}]),angular.module("services.file.upload",["angularFileUpload","services.file"]).factory("uploaderService",["$rootScope","$http","$interval","FileUploader","fileService","$q",function(e,t,n,i,a,s){var o,r={};return r.getUploadToken=function(e){var n=PREFIX_URL+"m/base/file/uptokens?type="+e,i=s.defer();return t({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){i.resolve(e)}),i.promise},r.uploadBase64=function(e,t){return $.ajax({type:"POST",url:PREFIX_URL+"m/base/file/upbase64",contentType:"application/octet-stream",beforeSend:function(t){t.setRequestHeader("Authorization","UpToken "+e)},data:t})},r.uploader=function(t,a,s){var r=s||6;(2==t||4==t)&&(o=PREFIX_URL+"index.php?c=upfile&a=upload&bizType=0&fileType="+t);var l,c=new i({url:o,withCredentials:!0,queueLimit:r,onAfterAddingAll:function(t){e.$broadcast("uploadfiles.add"),c.uploadAll()},onSuccessItem:function(i,a,s,o){function r(){n.cancel(l)}var l=n(function(){var n=null;i.progress>=100&&(n=4==t?{id:a.obj.id,src:a.obj.path,name:a.obj.name,size:a.obj.size}:2==t?{id:a.obj.id,url:a.obj.path,name:a.obj.name,size:a.obj.size}:{tmbPath:a.obj.tmbPath,id:a.obj.id,path:a.obj.path,name:a.obj.name},e.$broadcast("thumbnailList.update",n),r())},100)}}),d=a||3145728;return"0"==t||"1"==t?l="|jpg|png|jpeg|bmp|gif|svg+xml|webp|":"4"==t||"2"==t?l="|wav|mp3|mpeg|":"8"==t&&(l="|msword|vnd.openxmlformats-officedocument.wordprocessingml.document|"),c.filters.push({name:"imageFilter",fn:function(e,t){var n="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!==l.indexOf(n)}}),c.filters.push({name:"imageSizeFilter",fn:function(e,t){var n=e.size;return n>=d&&alert("上传文件大小限制在"+d/1024/1024+"M以内"),d>n}}),c.filters.push({name:"fileNameFilter",fn:function(e,t){return e.name.length>50&&alert("文件名应限制在50字符以内"),e.name.length<=50}}),c},r}]),angular.module("services.usercenter",["services.i18nNotifications"]).factory("usercenterService",["$http","$rootScope","$location","security","$modal","ModalService",function(e,t,n,i,a,s){var o={};return o.getUserInfo=function(){var t=PREFIX_URL+"index.php?c=user&a=check";return t+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getCompanyScale=function(){var t=PREFIX_URL+"/base/class/company_scale";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getCompanyIndustry=function(){var t=PREFIX_URL+"/base/class/company_industry";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getCompanyInfo=function(){var t=PREFIX_URL+"index.php?c=company&a=info";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.saveCompanyInfo=function(t,n){var i=n?"m/u/company/upgrade":"m/u/company/save";return e({withCredentials:!0,method:"POST",url:PREFIX_URL+i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.savePublicInfo=function(t){var n=PREFIX_URL+"m/u/organiz/save";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.saveUserInfo=function(t){var n=PREFIX_URL+"index.php?c=user&a=save";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.phoneMessage=function(){var t=PREFIX_URL+"m/scene/buy/remind/sms";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getUserXd=function(){var t=PREFIX_URL+"index.php?c=user&a=xd";return t+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getgiveXd=function(t){var n=PREFIX_URL+"index.php?c=user&a=giveXd";return n+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.getUserInvoice=function(){var t=PREFIX_URL+"m/order/user/invoice";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.saveUserInvoice=function(t){var n=PREFIX_URL+"m/order/user/save/invoice";return n+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"text/plain; charset=UTF-8"},data:JSON.stringify(t)})},o.saveOrderInvoice=function(t){var n=PREFIX_URL+"m/order/invoice/save";return n+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.getXdlog=function(t,n,i){var a=PREFIX_URL+"index.php?c=user&a=xdlog&pageNo="+n+"&pageSize="+i;return a+="&time="+(new Date).getTime(),t&&(a+=(/\?/.test(a)?"&":"?")+"type="+t),a+=(/\?/.test(a)?"&":"?")+"pageNo="+n,a+=(/\?/.test(a)?"&":"?")+"pageSize="+i,e({withCredentials:!0,method:"POST",url:a})},o.getXdStat=function(){var t=PREFIX_URL+"index.php?c=user&a=XdStat";return t+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.thirdSettingLogName=function(t,n){var i={loginName:t,password:n},a=PREFIX_URL+"m/u/set/login/info";return e({withCredentials:!0,method:"POST",url:a,data:$.param(i),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.relAccount=function(t,n,i,a){var s={loginName:n,loginPassword:i},o=PREFIX_URL+"m/u/bind/email";return a&&(o+=(/\?/.test(o)?"&":"?")+"register=1"),o+=(/\?/.test(o)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:o,data:$.param(s),headers:{"Content-Type":"text/plain; charset=UTF-8"}})},o.relEmail=function(t,n,i){var a={email:t,pass:n,resend:i},s=PREFIX_URL+"index.php?c=user&a=email";return e({withCredentials:!0,method:"POST",url:s,data:$.param(a),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.verifyEmail=function(){var t=PREFIX_URL+"index.php?c=usercenter&a=verify";return e({withCredentials:!0,method:"GET",url:t,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},o.relMobile=function(t,n,i){var a=PREFIX_URL+"m/u/phone/verify?phone="+t+"&pass="+n+"&code="+i;return a+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:a,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},o.relMobileCode=function(t,n){var i=PREFIX_URL+"m/u/bind/user/phone";return n&&(i+=(/\?/.test(i)?"&":"?")+"type="+n),i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:i,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.companyMobile=function(t){var n=PREFIX_URL+"m/u/company/smscode/send";return n+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"POST",url:n,data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.setRead=function(t){var n=PREFIX_URL+"index.php?c=user&a=markRead&ids=";return t&&(n+=t),n+=(/\?/.test(n)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:n,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},o.getNewMessage=function(t,n,i,a){var s=PREFIX_URL+"index.php?c=statics&a=msgList&pageNo="+t+"&pageSize="+n;return i&&(s+="&unread="+i),a&&(s+="&system="+a),s+="&time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:s})},o.getBranches=function(t,n){var i=PREFIX_URL+"index.php?c=ad&a=subList";return t&&(i+=(/\?/.test(i)?"&":"?")+"pageSize="+t),n&&(i+=(/\?/.test(i)?"&":"?")+"pageNo="+n),i+=(/\?/.test(i)?"&":"?")+"time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:i})},o.getDepts=function(){var t=PREFIX_URL+"m/u/tag/list";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.addDept=function(t){var n=PREFIX_URL+"m/u/tag/create";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.updateBranch=function(t){var n=PREFIX_URL+"m/u/sub/save";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.createBranch=function(t){var n=PREFIX_URL+"m/u/sub/create";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.openBranch=function(t,n){var i=PREFIX_URL;return i+=n?"m/u/sub/turnOn?id="+t:"m/u/sub/turnOff?id="+t,e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"text/plain; charset=UTF-8"}})},o.resetBranchPass=function(n){var i=PREFIX_URL+"m/u/sub/pwd/reset",a={id:n};e({withCredentials:!0,method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)}).then(function(e){e.data.success&&t.$broadcast("reset.branch.success")},function(){})},o.saveApplyInfo=function(t){var n=PREFIX_URL+"m/u/showker/apply";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.resetApplyInfo=function(t){var n=PREFIX_URL+"m/u/showker/apply";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.getVisitorMsg=function(){var t=PREFIX_URL+"m/u/showker/detail";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getAPPlyMessage=function(t){var n=PREFIX_S2_URL+"showker/tag?type="+t;return e({method:"GET",url:n})},o.getUserScene=function(){var t=PREFIX_URL+"m/u/scene/list";return t+="?time="+(new Date).getTime(),e({withCredentials:!0,method:"GET",url:t})},o.getUserStatus=function(){var t=PREFIX_URL+"m/u/showker/status";return e({withCredentials:!0,method:"GET",url:t})},o.getCompanyQrCode=function(t,a,s,o){var r=PREFIX_URL+"m/u/pay/member/url?goodsId="+t+"&type="+a;return s&&(r+="&amount="+s),("/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path())&&!o&&(r+="&userId="+i.currentUser.id),e({withCredentials:!0,method:"GET",url:r})},o.getUserMemberDetail=function(t){var n=PREFIX_URL+"m/u/member/detail?userId="+t;return e({withCredentials:!0,method:"GET",url:n})},o.getPayXdQrCode=function(t,a,s){var o=PREFIX_URL+"m/u/pay/xd/url?goodsId="+t+"&type="+a;return("/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path())&&!s&&(o+="&userId="+i.currentUser.id),e({withCredentials:!0,method:"GET",url:o})},o.sendEmail=function(t){var n=PREFIX_URL+"m/u/invite/user/email";return e({withCredentials:!0,method:"POST",url:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(t)})},o.getInvoiceList=function(n,i){var a=PREFIX_URL+"m/order/can/invoice/list";i&&(a+=(/\?/.test(a)?"&":"?")+"pageSize="+i),n&&(a+=(/\?/.test(a)?"&":"?")+"pageNo="+n),e({withCredentials:!0,method:"GET",url:a}).then(function(e){e.data.success&&t.$broadcast("get.invoice.list",e.data)})},o.relForum=function(t,n,i){var a=PREFIX_URL+"m/u/bind/user/bbs",s={userName:t,passWord:n,eqXiuPassWord:i};return e({withCredentials:!0,method:"POST",url:a,data:$.param(s),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.buyBranch=function(){var t=PREFIX_URL+"m/u/buy/sub/user";return e({withCredentials:!0,method:"POST",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},o.xdBuyService=function(e,r,l){o.getPayXdQrCode(10,1,l).then(function(o){if(e.$close(),o.data.success){var l=o.data.obj;a.open({windowClass:"console",templateUrl:"usercenter/payment.tpl.html",controller:"PayMentCtrl",resolve:{qrCodeUrl:function(){return l.url},type:function(){return 10},money:function(){return l.price/100},oprice:function(){return l.oprice/100},method:function(){return"buyXd"},counts:function(){}}}).result.then(function(){r()})}else{var c="/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path();970301===o.data.code&&c?(i.currentUser=null,i.requestCurrentUser().then(function(){t.$broadcast("toAppUpgrade"),a.open({windowClass:"console updateDlg refuseDlg",templateUrl:"upgrade/buyRefuseDlg.tpl.html",controller:"buyRefuseDlgCtrl",resolve:{type:function(){return 0}}})})):s.openMsgDialog({msg:o.data.msg})}})},o.openInvoice=function(){s.openConfirmDialog({msg:"是否开具发票？",confirmName:"是",cancelName:"否"},function(){o.openInvoiceListModal()},function(){"/upgrade/"===n.path().substring(0,9)?n.path("/usercenter/member"):n.path("/privilege")})},o.openInvoiceListModal=function(){a.open({windowClass:"console seven-contain",templateUrl:"usercenter/console/invoice-list.tpl.html",controller:"GetInvoiceListCtrl"}).result.then(function(){})},o.upgradeVersionService=function(e,r,l){o.getCompanyQrCode(r,1,null,l).then(function(l){e.$close();var c;if(6===r?c=[{name:"1个月",value:1},{name:"2个月",value:2},{name:"3个月",value:3},{name:"4个月",value:4},{name:"5个月",value:5},{name:"6个月",value:6}]:7===r?c=[{name:"1年",value:1}]:8===r?c=[{name:"1年",value:1}]:9===r&&(c=[{name:"1年",value:1}]),l.data.success){var d=l.data.obj;a.open({windowClass:"console",templateUrl:"usercenter/payment.tpl.html",controller:"PayMentCtrl",resolve:{qrCodeUrl:function(){return d.url},type:function(){return r},money:function(){return d.price/100},oprice:function(){return d.oprice/100},method:function(){return"member"},counts:function(){return c}},size:"lg"}).result.then(function(){o.getUserInfo().then(function(e){e.data.success&&(i.currentUser=e.data.obj)}),s.openMsgDialog({msg:"因网络原因，部分用户开通会有延迟",btn:"确定"},function(){o.openInvoice()})})}else{var p="/upgrade/"===n.path().substring(0,9)||"/xdBuy"===n.path();970301===l.data.code&&p?(i.currentUser=null,i.requestCurrentUser().then(function(){t.$broadcast("toAppUpgrade"),a.open({windowClass:"console updateDlg refuseDlg",templateUrl:"upgrade/buyRefuseDlg.tpl.html",controller:"buyRefuseDlgCtrl",resolve:{type:function(){return r}}})})):s.openMsgDialog({msg:l.data.msg})}})},o}]),angular.module("services.validate",[]).factory("validateService",function(){var e={},t=function(e,t,n,i){var a="";return e?angular.isFunction(t)&&!t()?a=i:t instanceof RegExp&&!t.test(e)&&(a=i):a=n,a};return e.checkEmail=function(e){return t(e,/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,"邮箱不能为空！","邮箱格式不正确！")},e.checkAccountName=function(e){return t(e,/^[a-z0-9-\.\_@]{6,40}$/,"账号名称不能为空！","6-40个字符(英文或数字，只支持小写)以及-_@.的组合！")},e.checkPassword=function(e){return t(e,/^[a-zA-Z0-9]{6,16}$/g,"密码不能为空！","密码6~16个字符(英文字母或数字 区分大小写)！")},e.checkName=function(e){return t(e,function(){return countCharacters(e)<=30},"用户名不能为空！","用户名不能超过30个字符！")},e}),angular.module("templates-app",["about.tpl.html","active/active.tpl.html","active/tab/active1.tpl.html","data/edit/canedit.tpl.html","data/edit/canread.tpl.html","data/editData.tpl.html","dialog/bindemail.tpl.html","dialog/confirm.tpl.html","dialog/message.tpl.html","error.tpl.html","error/error.tpl.html","fillscene/fillscene.tpl.html","footer.tpl.html","header.tpl.html","help.tpl.html","home/home.tpl.html","main/console/group.tpl.html","main/console/oldVersionTip.tpl.html","main/console/transferscene.tpl.html","main/customer.tpl.html","main/downApp.tpl.html","main/main.tpl.html","main/mobileTansform.tpl.html","main/newVersionFrame.tpl.html","main/print/ads.tpl.html","main/print/dialog/affirmPrint.tpl.html","main/print/dialog/applyTpl.tpl.html","main/print/dialog/define.tpl.html","main/print/dialog/saveToH5.tpl.html","main/print/dialog/transferPrint.tpl.html","main/print/print.tpl.html","main/print/tab/create.tpl.html","main/print/tab/hotZone.tpl.html","main/print/tab/mine.tpl.html","main/print/tab/order.tpl.html","main/print/tab/template.tpl.html","main/print/tab/tplSort.tpl.html","main/print/tab/works.tpl.html","main/print/transition/printShop.tpl.html","main/recSceneList.tpl.html","main/squareSceneList.tpl.html","main/uploadData.tpl.html","main/userGuide.tpl.html","notifications.tpl.html","reg/agreement.tpl.html","reg/reg.tpl.html","regSuccess/console/applyComMes.tpl.html","regSuccess/guide.tpl.html","region/region.tpl.html","scene/buySample.tpl.html","scene/console.tpl.html","scene/console/angle-knob.tpl.html","scene/console/anim.tpl.html","scene/console/bg.tpl.html","scene/console/button.tpl.html","scene/console/category.tpl.html","scene/console/chartStyle.tpl.html","scene/console/chartViewEdit.tpl.html","scene/console/compstyle.tpl.html","scene/console/counter.tpl.html","scene/console/cropimage.tpl.html","scene/console/customActivities.tpl.html","scene/console/dropdown.tpl.html","scene/console/fake.tpl.html","scene/console/imageCrop.tpl.html","scene/console/input.tpl.html","scene/console/link-component.tpl.html","scene/console/link.tpl.html","scene/console/map.tpl.html","scene/console/microweb.tpl.html","scene/console/pictures.tpl.html","scene/console/pictures1.tpl.html","scene/console/radio-checkbox.tpl.html","scene/console/randomevent.tpl.html","scene/console/rating.tpl.html","scene/console/scene-setting-component.tpl.html","scene/console/setting.tpl.html","scene/console/shape.tpl.html","scene/console/sound-component.tpl.html","scene/console/sound.tpl.html","scene/console/soundCrop.tpl.html","scene/console/soundCropPanel.tpl.html","scene/console/soundLink.tpl.html","scene/console/statistics-component.tpl.html","scene/console/style.tpl.html","scene/console/tel.tpl.html","scene/console/trigger.tpl.html","scene/console/triggerelemlist.tpl.html","scene/console/video.tpl.html","scene/create.tpl.html","scene/createNew.tpl.html","scene/edit/editbg/editbg.tpl.html","scene/edit/select/select.tpl.html","scene/edit/workspace/compsManage.tpl.html","scene/effect/falling.tpl.html","scene/effect/snowfly.tpl.html","scene/font/font-shopping.tpl.html","scene/font/fontPurpose.tpl.html","scene/newLongPage.tpl.html","scene/page/page-tpl.tpl.html","scene/pageeffect/fall.tpl.html","scene/pageeffect/finger.tpl.html","scene/pageeffect/fireworks.tpl.html","scene/pageeffect/money.tpl.html","scene/pageeffect/none.tpl.html","scene/pageeffect/pageeffect.tpl.html","scene/pageeffect/scratch.tpl.html","scene/pageeffect/snow.tpl.html","scene/preview.tpl.html","scene/saveTemplate.tpl.html","scene/scene.tpl.html","scene/scenePreviewExemplar.tpl.html","scene/support/support.tpl.html","scene/tplOption.tpl.html","show/active/active-xq.tpl.html","show/active/active.tpl.html","show/category/category.tpl.html","show/category/nav.tpl.html","show/index.tpl.html","show/recommend/commonRecommend.tpl.html","show/recommend/recommend.tpl.html","show/search/search.tpl.html","show/visitor/visitor-xq.tpl.html","show/visitor/visitor.tpl.html","sysmessage.tpl.html","upgrade/accountDlg.tpl.html","upgrade/buyRefuseDlg.tpl.html","upgrade/updateDlg.tpl.html","upgrade/upgrade.tpl.html","usercenter/buyXd.tpl.html","usercenter/console/branch.tpl.html","usercenter/console/checkMobile.tpl.html","usercenter/console/companyinfo.tpl.html","usercenter/console/email_fail.tpl.html","usercenter/console/email_succeed.tpl.html","usercenter/console/invitation.tpl.html","usercenter/console/invoice-list.tpl.html","usercenter/console/invoice.tpl.html","usercenter/console/register.tpl.html","usercenter/console/relAccount.tpl.html","usercenter/console/relEmail.tpl.html","usercenter/console/relForum.tpl.html","usercenter/console/resetbranchpass.tpl.html","usercenter/console/serverinfo.tpl.html","usercenter/console/upgrade_company.tpl.html","usercenter/invoiceNotice.tpl.html","usercenter/message.tpl.html","usercenter/payment.tpl.html","usercenter/paymentxd.tpl.html","usercenter/request_reg.tpl.html","usercenter/tab/account.tpl.html","usercenter/tab/children.tpl.html","usercenter/tab/domain.tpl.html","usercenter/tab/member.tpl.html","usercenter/tab/message.tpl.html","usercenter/tab/privilege.tpl.html","usercenter/tab/reset.tpl.html","usercenter/tab/trash.tpl.html","usercenter/transfer.tpl.html","usercenter/upgrade.tpl.html","usercenter/upgradeTip.tpl.html","usercenter/userCenterGuid.tpl.html","usercenter/usercenter.tpl.html"]),angular.module("about.tpl.html",[]).run(["$templateCache",function(e){e.put("about.tpl.html",'<div id=home class=about-contain><header style=background-color:#fff;width:100%;height:60px><div class="we_nav content_center same-content"><div class=link_list><ul class=clearfix><li><a target=_blank href=/#/show>秀场</a></li><li ng-hide=isAuthenticated()><a ng-click=openLogin()>登录</a></li><li ng-hide=isAuthenticated() class=""><a ng-click=openRegister() id=registerFormBtn>注册</a></li><li ng-show=isAuthenticated()><a href=/#/main>进入</a></li></ul></div><a href=/#/main class="hint--bottom hint--rounded" id=logo><img ng-src="{{logoSrc}}"></a></div></header><div class="content_center about-main"><div class="about-eqx box-shadow about-bg shuoming"><h1>关于'+your_webname+"</h1><p>“"+your_webname+"”成立于2014年7月，隶属于 “北京中网易企秀科技有限公司”。 “"+your_webname+"”致力于成为中小企业社会化自营销服务平台，提供基于场景的自营销闭环服务，方便中小企业制作展示场景、数据收集、二次营销。</p><p>“"+your_webname+'”团队秉持互联网精神，坚持以用户为中心，以产品为核心，共邀广大中小企业一起投身互联网大潮。</p><p>客服咨询：vip#eqxiu.com (联系请#改成@)；<br>客服电话：010-58813666；<br>商务合作：BD#eqxiu.com (联系请#改成@)；<br>公司地址：北京市海淀区中关村南四街紫金数码四号楼201</p></div><div class="box-shadow about-bg product about-eqx clearfix"><h1>易企秀的产品</h1><div class="list pro-one"><div class=product-img><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/item.svg></div><p>场景制作营销工具：是一款针对移动互联网营销的手机幻灯片、H5场景应用制作工具，将原来只能在PC端制作和展示的各类复杂营销方案转移到更为便携和展示的手机上，用户随时随地根据自己的需要在PC端、手机端进行制作和展示，随时随地营销。</p></div><div class=list><div class="product-img pro-two"><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/item2.svg></div><p>轻设计在线设计工具：是一款针对传单、图片设计的轻型设计工具，方便不懂photoshop制图的企业营销人员设计出精美的企业宣传图片。</p></div></div><div class="box-shadow about-bg about-eqx meiti-content clearfix"><h1>媒体报道</h1><div class=meiti><div class="meiti-list clearfix"><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/pic1.svg width=120px height="88px"><div class=meiti-jieshao><h2>猎云网</h2><p>'+your_webname+'：免费移动场景应用，并提供移动端客户管理</p><p><a href=http://www.lieyunwang.com/archives/63304 target=_blank>http://www.lieyunwang.com/archives/63304</a></p></div></div><div class="meiti-list clearfix"><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/pic3.svg width=120px height="88px"><div class=meiti-jieshao><h2>搜狐焦点</h2><p>'+your_webname+'成为搜狐焦点家居微场景类产品合作伙伴</p><p><a href=http://home.focus.cn/newshtml/426979.html target=_bkank>http://home.focus.cn/newshtml/426979.html</a></p></div></div></div><div class="meiti line"><div class="meiti-list clearfix"><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/pic2.svg width=120px height="88px"><div class=meiti-jieshao><h2>光明网</h2><p>光明日报采用'+your_webname+'报道两会</p><p><a href=http://epaper.gmw.cn/gmrb/html/2015-03/04/nw.D110000gmrb_20150304_3-04.htm target=_blank>http://epaper.gmw.cn/gmrb/html/2015-03/04/nw.D110000gmrb_20150304_3-04.htm</a></p></div></div><div class="meiti-list clearfix"><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/pic4.svg width=120px height="88px"><div class=meiti-jieshao><h2>企业网D1Net</h2><p>VC的钱都砸到哪里去了：云计算云存储大数据安全</p><p><a href=http://www.d1net.com/bigdata/news/294287.html target=_blank>http://www.d1net.com/bigdata/news/294287.html</a></p></div></div></div><div class=more><a href="http://news.baidu.com/ns?word='+your_webname+'" target=_blank>查看更多新闻</a></div></div><div class="about-eqx box-shadow about-bg clearfix fuli"><h1>公司福利</h1><div class=fuli-slide><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/1.svg> <span>餐补、交通补、电脑补贴</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/3.svg> <span>丰厚的过节费(元旦/春节/五一/中秋/国庆/元宵/端午/三八)</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/5.svg> <span>全年健身游泳卡（高档健身会所）</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/7.svg> <span>年度体检</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/9.svg> <span>优秀员工无息贷款买房买车</span></div></div><div class="fuli-slide line"><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/2.svg> <span>七险一金（补充医疗保险和意外保险）</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/4.svg> <span>年度春游、秋游（可带家属）、优秀员工境外游</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/6.svg> <span>员工集体生日会（抽奖环节100%中奖）</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/8.svg> <span>优秀员工出国游</span></div><div class=fuli-list><img ng-src={{CLIENT_CDN}}assets/images/aboutfont/10.svg> <span>免费水果零食饮料无限供应.......</span></div></div><div class=more><a href=http://www.lagou.com/gongsi/93527.html target=_blank>马上加入我们</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("active/active.tpl.html",[]).run(["$templateCache",function(e){e.put("active/active.tpl.html","<div id=activeTwo><div ng-include=\"'active/tab/active1.tpl.html'\"></div></div>")}]),angular.module("active/tab/active1.tpl.html",[]).run(["$templateCache",function(e){e.put("active/tab/active1.tpl.html",'<div class=active-banner><img ng-src="{{CLIENT_CDN}}assets/images/active/visitor_02.png"></div><div class=active-list><div class=active-bg><div class=active-con><h2 class=text-center>'+your_webname+'<span class=big-color>2亿</span>资源，扶持万名<span class=big-color>秀客</span>创业</h2><div class=clearfix><img class="fl pr20" ng-src="{{CLIENT_CDN}}assets/images/active/people_03.png"><div class=xiuke><h6>秀客</h6><p>指能为他人提供场景定制的设计师个人以及广告、公关、营销、媒介、代理制作等服务商。<br>'+your_webname+'作为H5行业的领导品牌，积极响应国家“大众创业、万众创新”号召。投入2亿元资源，1年扶持<span class=big-color>10000</span>名秀客创业，年收入<span class=big-color>10万元</span>以上。</p></div></div></div><div class=active-con><h2 class=text-center>加入<span class=big-color>“万名秀客扶持计划”</span>你将获得</h2><div class="clearfix join-jiang"><p class=fl style=margin-right:40px><span class="action fl">1</span>全新改版的'+your_webname+'H5场景制作和营销平台的使用；</p><p class=fl><span class="action fl">2</span>每个订单下发200秀点，用于去除'+your_webname+'场景首尾页标识；</p><p class=fl style=margin-right:40px><span class="action fl">3</span>升级开通服务商账号，享受秀客账号特有使用权限；</p><p class=fl><span class="action fl">4</span>官方平台的推荐和展示以及官方推荐场景定制业务；</p><p class=fl><span class="action fl">5</span>应急审核服务：客户定制场景被审核关闭后的应急审核通道。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13228" target=_blank>(查看详情)</a></p></div></div><div class=active-con><h2 class=text-center><span class=big-color>审核流程</span></h2><div class="clearfix join-jiang"><p class=fl style=margin-right:20px><span class="action fl">1</span>登陆'+your_webname+'官网，进入用户中心，点击申请秀客；<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13174" target=_blank>（秀客审核规则)</a></p><p class=fl><span class="action fl">2</span>提交场景定制订单报备获取200秀点。<a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=14741" target=_blank>（查看获取步骤）</a></p></div><p>我们会根据您提交报备订单的数量进行官方推广资源分配。</p></div><div class=active-con><h2 class="">秀客商业信息机密机制</h2><div class="clearfix join-jiang"><h6>保密机制：</h6><p>'+your_webname+'保证将对秀客申请的订单信息进行严格保密。</p></div><div class="clearfix join-jiang"><h6>违规处罚</h6><p>恶意、做假申请扶持资源者，'+your_webname+"会取消秀客资格，情节严重者冻结"+your_webname+'账号。</p></div><div class="clearfix join-jiang"><h6>'+your_webname+"权利声明</h6><p style=height:30px;line-height:30px;margin-bottom:0>1) 以上条款解释权归"+your_webname+"</p><p style=height:30px;line-height:30px>2) "+your_webname+'保留对以上条款调整的权利</p></div><div class="clearfix join-jiang"><h6>关于本计划的常见问题</h6><p><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=11204" target=_blank>http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=11204</a></p></div></div></div><div class=triangle-bottom><div class=icon-left></div><div class=icon-right></div></div></div><div class=backHome><a href=http://eqxiu.com target=_blank><span class=eqf-scene-company></span> <span>官网首页</span></a></div>')}]),angular.module("data/edit/canedit.tpl.html",[]).run(["$templateCache",function(e){e.put("data/edit/canedit.tpl.html",'<div class="main clearfix"><div class="panel panel-default same-content" style=margin-top:20px><div class=return><a ng-href=/#/main/customer><span class="fa fa-mail-reply">返回</span></a></div><div class=custom-detail><table width=100%><tr><td><span>姓名</span>：{{dataDetail.name}}</td><td><span>电话</span>：{{dataDetail.tel}}</td><td><span>来源</span>：{{dataDetail.originName}}</td></tr><tr ng-if="isAllowedToAccessGrouping && sceneId != \'create\'"><td colspan=3><span>分组</span>：<span class=userList ng-repeat="groupName in groupNames">{{groupName.name}}<em class=delete ng-click=deleteAssociation(dataDetail.id,groupName.id)>x</em></span><div class="group-cat btn-group dropdown"><em class="add dropdown-toggle" title=添加分组>+</em><div class=dropdown-menu><ul class="group-list group-over" role=menu><li class=group-menu ng-repeat="group in groups" forbidden-close><div class=select-group><span class=eqf-no style=color:#ff0000 ng-click="deleteGroup(group, $index);"></span><div class=checkbox-square ng-class="{checked: group.selected}"><em class=eqf-yes2></em> <input type=checkbox ng-model=group.selected name=iCheck></div><span>{{group.name}}</span></div></li></ul><div class="select-group addGroup" forbidden-close ng-click=addGroup(); style=cursor:pointer><em>+</em> <span class=add-group>添加分组</span></div><div style=text-align:center;padding-top:10px><a class="btn btn-primary" ng-click=assignGroup();>确定</a></div></div><div class=confirm-group></div></div></td></tr></table></div><div class=panel-body><form name=formName class=form-horizontal role=form><div class=form-group><label for=userName class="col-sm-3 control-label">姓名</label><div class=col-sm-7><input type=text name=name ng-model=dataDetail.name class=form-control id=userName placeholder=姓名 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=sex class="col-sm-3 control-label">性别</label><div class=col-sm-7><eqx-select class="customer-edit border-width select-contain select-great" model=sex change=updateSex(sex)><eqx-select-option value=null>请选择性别</eqx-select-option><eqx-select-option value=sexOption ng-repeat="sexOption in sexOptions">{{sexOption.name}}</eqx-select-option></eqx-select></div></div><div class=form-group ng-repeat="mobile in formMobiles track by $index"><label for=mobile class="col-sm-3 control-label" ng-show="$index==0">手机</label><label class="col-sm-3 control-label" ng-show="$index!=0"></label><div class=col-sm-7 id=mobileAddress><div class=input-group><input type=text name=mobile ng-model=formMobiles[$index] class=form-control placeholder=手机 show-icon callback-fn=updateData(arg1,formMobiles)> <span class=input-group-btn><button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'mobile\', formMobiles)" type=button><span class="fa fa-minus"></span></button></span></div></div><div class=col-sm-1><span ng-click=addInputs(formMobiles) ng-show="$index==0" class="fa fa-plus add-inputs"></span></div></div><div class=form-group ng-repeat="email in formEmails track by $index"><label for=email class="col-sm-3 control-label" ng-show="$index==0">邮箱</label><label for=email class="col-sm-3 control-label" ng-show="$index!=0"></label><div class=col-sm-7 id=emailAddress><div class=input-group><input type=text name=email ng-model=formEmails[$index] class=form-control placeholder=邮箱 show-icon callback-fn="updateData(arg1,formEmails, formName.emial.$invalid)"> <span class=input-group-btn><button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'email\', formEmails)" type=button><span class="fa fa-minus"></span></button></span></div></div><div class=col-sm-1><span ng-click=addInputs(formEmails) ng-show="$index==0" class="fa fa-plus add-inputs"></span></div></div><div class=form-group><label for=company class="col-sm-3 control-label">公司</label><div class=col-sm-7><input type=text name=company ng-model=dataDetail.company class=form-control id=company placeholder=公司 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=job class="col-sm-3 control-label">职务</label><div class=col-sm-7><input type=text name=job ng-model=dataDetail.job class=form-control id=job placeholder=职务 show-icon callback-fn=updateData(arg1) required></div></div><div class=form-group ng-repeat="tel in formTels track by $index"><label for=tel class="col-sm-3 control-label" ng-show="$index==0">电话</label><label for=tel class="col-sm-3 control-label" ng-show="$index!=0"></label><div class=col-sm-7 id=tel><div class=input-group><input type=text name=tel ng-model=formTels[$index] class=form-control placeholder=电话 show-icon callback-fn=updateData(arg1,formTels)> <span class=input-group-btn><button class="btn btn-default add-btn btn-sm" ng-click="removeInputs($index, \'email\', formTels)" type=button><span class="fa fa-minus"></span></button></span></div></div><div class=col-sm-1><span ng-click=addInputs(formTels) ng-show="$index==0" class="fa fa-plus add-inputs"></span></div></div><div class=form-group><label for=address class="col-sm-3 control-label">地址</label><div class=col-sm-7><input type=text name=address ng-model=dataDetail.address class=form-control id=address placeholder=地址 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=website class="col-sm-3 control-label">个人网址</label><div class=col-sm-7><input type=text name=website ng-model=dataDetail.website class=form-control id=website placeholder=个人网址 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=qq class="col-sm-3 control-label">QQ号</label><div class=col-sm-7><input type=text name=qq ng-model=dataDetail.qq class=form-control id=qq placeholder=QQ号 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=weixin class="col-sm-3 control-label">微信号</label><div class=col-sm-7><input type=text name=weixin ng-model=dataDetail.weixin class=form-control id=weixin placeholder=微信号 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=yixin class="col-sm-3 control-label">易信号</label><div class=col-sm-7><input type=text name=yixin ng-model=dataDetail.yixin class=form-control id=yixin placeholder=易信号 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=weibo class="col-sm-3 control-label">微博号</label><div class=col-sm-7><input type=text name=weibo ng-model=dataDetail.weibo class=form-control id=weibo placeholder=微博号 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=laiwang class="col-sm-3 control-label">来往号</label><div class=col-sm-7><input type=text name=laiwang ng-model=dataDetail.laiwang class=form-control id=inputEmail3 placeholder=来往号 show-icon callback-fn=updateData(arg1)></div></div><div class=form-group><label for=remark class="col-sm-3 control-label">其它</label><div class=col-sm-7><input type=text name=remark ng-model=dataDetail.remark class=form-control id=remark placeholder=其他 show-icon callback-fn=updateData(arg1)></div></div></form><div class="btn-contain btn-big"><a class="btn btn-primary login" ng-click=saveData(dataDetail)>保存</a> <a ng-click=cancel() class="btn-grey0 btn">取消</a></div></div></div></div>')}]),angular.module("data/edit/canread.tpl.html",[]).run(["$templateCache",function(e){e.put("data/edit/canread.tpl.html",'<div class="main clearfix"><div class="panel panel-default"><div class=return><a ng-href=/#/main/customer><span class="fa fa-mail-reply">返回</span></a></div><div class=custom-detail><table width=100%><tr><td><span>姓名</span>：{{dataDetail.name}}</td><td><span>电话</span>：{{dataDetail.tel}}</td><td><span>来源</span>：{{dataDetail.originName}}</td></tr><tr ng-if=isAllowedToAccessGrouping><td colspan=3><span>分组</span>：<span class=userList ng-repeat="groupName in groupNames">{{groupName.name}}</span></td></tr></table></div><div class=panel-body><form name=formName class="form-horizontal data-detail" role=form><div class="form-group form-group-sm"><label for=userName class="col-sm-3 control-label">姓名：</label><div class=col-sm-7><span>{{dataDetail.name}}</span></div></div><div class="form-group form-group-sm"><label for=sex class="col-sm-3 control-label">性别：</label><div class=col-sm-7><span>{{sex.id ? sex.name : \'\'}}</span></div></div><div class="form-group form-group-sm"><label for=mobile class="col-sm-3 control-label">手机：</label><div class=col-sm-7 id=mobileAddress><span>{{formMobiles.join()}}</span></div></div><div class="form-group form-group-sm"><label for=email class="col-sm-3 control-label">邮箱：</label><div class=col-sm-7 id=emailAddress><span>{{formEmails.join()}}</span></div></div><div class="form-group form-group-sm"><label for=company class="col-sm-3 control-label">公司：</label><div class=col-sm-7><span>{{dataDetail.company}}</span></div></div><div class="form-group form-group-sm"><label for=job class="col-sm-3 control-label">职务：</label><div class=col-sm-7>{{dataDetail.job}}</div></div><div class="form-group form-group-sm"><label for=tel class="col-sm-3 control-label">固定电话：</label><div class=col-sm-7 id=tel><span>{{formTels.join()}}</span></div></div><div class="form-group form-group-sm"><label for=address class="col-sm-3 control-label">地址：</label><div class=col-sm-7><span>{{dataDetail.address}}</span></div></div><div class="form-group form-group-sm"><label for=website class="col-sm-3 control-label">个人网址：</label><div class=col-sm-7><span>{{dataDetail.website}}</span></div></div><div class="form-group form-group-sm"><label for=qq class="col-sm-3 control-label">QQ号：</label><div class=col-sm-7><span>{{dataDetail.qq}}</span></div></div><div class="form-group form-group-sm"><label for=weixin class="col-sm-3 control-label">微信号：</label><div class=col-sm-7><span>{{dataDetail.weixin}}</span></div></div><div class="form-group form-group-sm"><label for=yixin class="col-sm-3 control-label">易信号：</label><div class=col-sm-7><span>{{dataDetail.yixin}}</span></div></div><div class="form-group form-group-sm"><label for=weibo class="col-sm-3 control-label">微博号：</label><div class=col-sm-7>{{dataDetail.weibo}}</div></div><div class="form-group form-group-sm"><label for=laiwang class="col-sm-3 control-label">来往号：</label><div class=col-sm-7><span>{{dataDetail.laiwang}}</span></div></div><div class="form-group form-group-sm"><label for=remark class="col-sm-3 control-label">其它：</label><div class=col-sm-7><span>{{dataDetail.remark}}</span></div></div></form></div></div></div>')}]),angular.module("data/editData.tpl.html",[]).run(["$templateCache",function(e){e.put("data/editData.tpl.html","<div ng-include=\"'header.tpl.html'\"></div><div id=main class=min_contain ng-if=!hideOpea><div ng-include=\"'data/edit/canedit.tpl.html'\"></div></div><div id=main class=min_contain ng-if=hideOpea><div ng-include=\"'data/edit/canread.tpl.html'\"></div></div>")}]),angular.module("dialog/bindemail.tpl.html",[]).run(["$templateCache",function(e){e.put("dialog/bindemail.tpl.html","<div class=email-account><h1>您的账号还没有绑定邮箱</h1><p><span>去用户中心>账号管理，</span> <a ng-href=/#/usercenter/account?bindemail><span>马上绑定</span></a></p></div>")}]),angular.module("dialog/confirm.tpl.html",[]).run(["$templateCache",function(e){e.put("dialog/confirm.tpl.html","<div class=modal-body ng-if=confirmObj.msg><div class=confirm-msg ng-bind-html=confirmObj.msg></div></div><div class=\"btn-contain btn-small\"><a ng-click=ok(); class=btn-main ng-class={deletePage:insistDelete}>{{confirmObj.confirmName || ('确定')}}</a> <a ng-click=cancel(); class=btn-grey0 ng-class={cancelDeletePage:cancelDelete}>{{confirmObj.cancelName || ('取消')}}</a></div>")}]),angular.module("dialog/message.tpl.html",[]).run(["$templateCache",function(e){e.put("dialog/message.tpl.html","<div class=modal-header><span class=\"glyphicon glyphicon-exclamation-sign\"></span> <span>{{msgObj.title || ('提示')}}</span></div><div class=modal-body ng-if=msgObj.msg><div class=msg ng-class=\"msgObj.title ? '' : 'msg-padding'\" ng-bind-html=msgObj.msg></div></div><div class=modal-footer><a ng-click=close(); class=\"btn btn-primary\" style=\"width: 88px\">{{msgObj.btn || ('关闭')}}</a></div>")}]),angular.module("error.tpl.html",[]).run(["$templateCache",function(e){e.put("error.tpl.html",'<div class=error><div class=header><div class=content><div class=logo><img ng-src={{CLIENT_CDN}}assets/images/logo.png alt=""></div></div></div><div class=error_contain><div class=error_con><img ng-src={{CLIENT_CDN}}assets/images/404_03.png alt=""><p style=font-size:24px;margin-top:30px;margin-bottom:15px><span>对不起，您想要进入的页面已经去火星了！</span></p><p style=text-align:left><a href=/#/home target=_blank><span>返回地球</span></a></p></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("error/error.tpl.html",[]).run(["$templateCache",function(e){e.put("error/error.tpl.html",'<div class=error><div class=header><div class=content><div class=logo><a href=/#/home target=_blank><img ng-src={{CLIENT_CDN}}assets/images/logoo.png alt=""></a></div></div></div><div class=error_contain><div class=error_con><img ng-src={{CLIENT_CDN}}assets/images/404_03.png alt=""><p style="font-size:24px;margin-top:30px;margin-bottom:15px;padding:0 10px">对不起，您想要进入的页面已经去火星了！</p><p style="padding:0 10px"><a href=/#/home target=_blank><ins>返回地球</ins></a></p></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("fillscene/fillscene.tpl.html",[]).run(["$templateCache",function(e){e.put("fillscene/fillscene.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div class="fillscene same-content tab-box-shadow"><div class=fill-left><div class=backbtn ng-click=backup()><em class=eqf-left></em>返回样例列表</div><div eqd-scroll style="height: 520px" prevent-exception=true disable-mouse=true><ul class=page-uls id=pageList ui-sortable=sortableOptions ng-model=pageList><li class=page-li ng-repeat="page in pageList track by $index" ng-click=selectPage($index) ng-class="{current: curPage.id == page.id}"><span class=number><em class=number-em>{{$index+1}}</em></span> <img class=page-thumbnail ng-if=page.properties.thumbSrc ng-src="{{PREFIX_FILE_HOST + page.properties.thumbSrc}}"> <a class="change-tpl all-change" ng-click=deletePage($event) ng-if="curPage.id == page.id"><em class=eqf-scene-delete></em></a></li></ul></div><div class=add-page ng-click=addPage()><div class="page-thumbnail all-change"><em class=eqf-plus2></em></div></div></div><div class=fill-content fill-scene-len len={{pageLen}}><div class=phone><div class="phone-view nr"></div><div class=comp-view><div ng-repeat="editComp in editCompList" edit-component ele={{editComp}} content={{editComp.content}}></div></div></div><div class=replace-btn><a class="btn btn-primary" ng-click=replaceTpl()>替换模板</a></div></div><div class=fill-right><div eqd-scroll style="height: 520px" prevent-exception=true disable-mouse=true ng-if=showSetting><div><h5 class="set-title mb20" ng-if="picCompList.length!=0">设置图片</h5><ul class=clearfix><li class=img-item id=container{{$index}} ng-repeat="picComp in picCompList" ng-click=uploadImg(picComp)><img class=set-img ng-src="{{PREFIX_FILE_HOST + picComp.content}}"> <span class=number><em class=number-em>{{$index+1}}</em></span><div class="action all-change"><div class=left-btn><a class="icon-img all-change" ng-click=replaceImg(picComp) style=font-size:16px><em class="icon-font eqf-change"></em></a> <span class=action-label>换图</span></div><div class=right-btn><a class="icon-img all-change" id=pickfiles{{$index}} qiniu-upload-directive resource-type="\'jpg,gif,png\'" token-type="\'image\'" resources=[] tag-id="" upload-con=container{{$index}} upload-btn=pickfiles{{$index}} file-type=1><em class="icon-font eqf-update"></em></a> <span class=action-label>上传</span></div></div></li></ul><h5 class="set-title mb20" ng-if="textCompList.length!=0" style="margin-top: 30px">设置文本</h5><div class=set-text ng-repeat="textComp in textCompList"><div class=textlabel>{{textComp.setlabel}}</div><textarea placeholder={{textComp.descrip}} class=textinput ng-model=textComp.content></textarea></div><h5 class="set-title mb20" ng-if="showCompList.length!=0" style="margin-top: 30px">设置装饰元素</h5><ul class="show-list clearfix"><li class=show-li ng-repeat="showComp in showCompList"><div class=checkbox-square comp-show-hide value={{showComp.checked}} ele-id={{showComp.id}} ng-class="{checked: showComp.checked}"><em class=eqf-yes2></em> <input type=checkbox ng-model="showComp.checked"></div><em>{{showComp.setlabel}}</em></li></ul></div></div><div eqd-scroll style="height: 560px" prevent-exception=true disable-mouse=true ng-if=!showSetting><div><h5 class="set-title mb20">模板选择</h5><ul style="margin-right: 150px" class=clearfix><li class="page-tpl-item animation-zoom ng-scope" ng-repeat="pageTpl in pageTpls" ng-click=selectPageTpl(pageTpl.id); ng-style="{\'animation-delay\': $index%42 * 50 + \'ms\'}"><img class=page-tpl-img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src=assets/images/create/pic.svg load-err></li></ul></div></div><div class=backset-btn ng-if=!showSetting ng-click=backset()><em class=eqf-left></em> 返回</div><div class=complete-con ng-if=showSetting><a class=page-btn ng-class="{\'disable\':pageNum==0}" ng-click=prePage()><em class=eqf-left></em></a> <a class="page-btn ml20" ng-class="{\'disable\':pageNum==pageList.length-1}" ng-click=nextPage()><em class=eqf-right></em></a> <a class="btn btn-primary" ng-click=saveScene()>完成制作</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("footer.tpl.html",[]).run(["$templateCache",function(e){e.put("footer.tpl.html",'<div class=scroll data-ng-init=load2()><a class=scroll_top ng-click=goTop()><span class=eqf-clickmore2></span> <span>顶部</span></a></div><div class=app-download><div style=position:relative;height:40px;width:40px><a class="scroll_top bgScroll" ng-click=downApp() ng-show=appIconDown><span class=eqf-phone></span> <span>APP</span></a></div><div ng-hide=appIconDown class=qrcode-download><div class="closedown eqf-wrong" ng-click=closeDown() title=关闭></div><div qr-code qr-url="{{PREFIX_CLIENT_HOST + \'/appdown.html\'}}"></div></div></div><div class=video-user><a target=_blank href=http://class.qq.com/class/13657/p62157.html><span class=eqf-top-video></span> <span>教程</span></a> <a target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13225"><span class=eqf-top-contact></span> <span>客服</span></a></div><footer><div class=help-contain><div class="same-content clearfix"><div class="home-help fl"><h6><em>'+your_webname+'</em></h6><ul><li><a href=/about target=_blank>关于我们</a></li><li><a href=http://www.lagou.com/gongsi/93527.html target=_blank>人才招聘</a></li><li><a href=/agreement target=_blank>服务协议</a></li><li><a href=http://hypefolio.com target=_blank>Hypefolio</a></li></ul></div><div class="home-help fl"><h6><em>设计制作帮助</em></h6><ul><li><a href="http://bbs.eqxiu.com/plugin.php?id=eqxiu_help:eqxiu_help" target=_blank>制作场景教程</a></li><li><a href=http://eqxiu.com/show target=_blank>找场景案例</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13104" target=_blank>轻设计制作教程</a></li><li><a href="http://bbs.eqxiu.com/plugin.php?id=ljqqqun:qq&type=4" target=_blank>QQ群交流</a></li></ul></div><div class="home-help fl"><h6><em>审核问题</em></h6><ul><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890" target=_blank>场景审核及被关闭</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=8293" target=_blank>样例审核</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13174" target=_blank>秀客及审核被驳回</a></li></ul></div><div class="home-help fl"><h6><em>企业服务</em></h6><ul><li><a href=http://eqxiu.com/privilege target=_blank>免费升级企业账号</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=11204" target=_blank>升级服务商账号：秀客特权-新</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=297" target=_blank>去场景上'+your_webname+'标识</a></li><li><a href=http://eqxiu.com/show/visitor target=_blank>场景定制</a></li></ul></div><div class="home-help fl" style=width:140px><h6><em>联系我们</em></h6><ul><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=17931" target=_blank>'+your_webname+'产品开放合作</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=17913" target=_blank>区域服务商招募</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=15985" target=_blank>场景设计与广告推广</a></li><li><a href="http://bbs.eqxiu.com/forum.php?mod=forumdisplay&fid=258&filter=typeid&typeid=632" target=_blank>公共帐号申请及其他</a></li></ul></div></div></div><div class="contact-friend same-content" ng-if="friendLinks.length > 0"><ul class=clearfix><li ng-repeat="link in friendLinks"><a target=_blank ng-href={{link.url}}>{{link.name}}</a></li></ul></div><div class="same-content clearfix pt20 pb20"><div class=fr style=width:270px><div class=fr style=background-color:#fff><img ng-src={{CLIENT_CDN}}assets/images/home/QRcode.svg width=80px height="80px;"></div><p>微信：扫描二维码咨询在线客服</p><p>邮箱：vip@eqxiu.com</p><p>电话：010-58813666</p><p>工作日：8:45-12:00 13:00-17:30</p></div><div class=fl><p>?? 2015 eqxiu.com. All rights reserved 北京中网'+your_webname+'科技有限公司</p><p>电信与信息服务业务经营许可证：京ICP证160037号 | 京ICP备15056244号-5 | 京公网安备11010802018300</p><div class=renzheng style=padding-top:10px><a href="https://ss.knet.cn/verifyseal.dll?sn=e14082111011652865izip000000&amp;ct=df&amp;a=1&amp;pa=0.5974755212664604" target=_blank><img ng-src={{CLIENT_CDN}}assets/images/kexin.svg width=80px height=30px></a> <a href=http://bbs.eqxiu.com/portal.php class="btn btn-main" target=_blank>官方论坛</a> <a><em class="eqf-wechat btn btn-primary"></em><div class=weixin style=background-color:#fff><img ng-src={{CLIENT_CDN}}assets/images/home/QRcode.svg width=120px height=120px></div></a> <a href=http://weibo.com/eqxiu target=_blank><em class="eqf-weibo btn out-red"></em></a> <a href="http://bbs.eqxiu.com/plugin.php?id=ljqqqun:qq&amp;type=4" target=_blank style=padding:0 class="qq-group btn-main background-color-width-change clearfix"><em class="eqf-qq btn"></em> <span>QQ群交流</span></a></div></div></div></footer>');var t='<footer><div class=help-contain><div class="same-content clearfix"><div class="home-help fl"><h6><em>'+your_webname+'</em></h6><ul><li><a href=/about target=_blank>关于我们</a></li><li><a href=# target=_blank>人才招聘</a></li><li><a href=/agreement target=_blank>服务协议</a></li><li><a href=http://hypefolio.com target=_blank>Hypefolio</a></li></ul></div><div class="home-help fl"><h6><em>设计制作帮助</em></h6><ul><li><a href="#" target=_blank>制作场景教程</a></li><li><a href=/#/show target=_blank>找场景案例</a></li><li><a href="#" target=_blank>轻设计制作教程</a></li><li><a href="#" target=_blank>QQ群交流</a></li></ul></div><div class="home-help fl"><h6><em>审核问题</em></h6><ul><li><a href="#" target=_blank>场景审核及被关闭</a></li><li><a href="#" target=_blank>样例审核</a></li><li><a href="#" target=_blank>秀客及审核被驳回</a></li></ul></div><div class="home-help fl"><h6><em>企业服务</em></h6><ul><li><a href=/#/privilege target=_blank>免费升级企业账号</a></li><li><a href="#" target=_blank>升级服务商账号：秀客特权-新</a></li><li><a href="#" target=_blank>去场景上'+your_webname+'标识</a></li><li><a href=/#/show target=_blank>场景定制</a></li></ul></div><div class="home-help fl" style=width:140px><h6><em>联系我们</em></h6><ul><li><a href="#" target=_blank>'+your_webname+'产品开放合作</a></li><li><a href="#" target=_blank>区域服务商招募</a></li><li><a href="#" target=_blank>场景设计与广告推广</a></li><li><a href="#" target=_blank>公共帐号申请及其他</a></li></ul></div></div></div><div class="contact-friend same-content" ng-if="friendLinks.length > 0"><ul class=clearfix><li ng-repeat="link in friendLinks"><a target=_blank ng-href={{link.url}}>{{link.name}}</a></li></ul></div><div class="same-content clearfix pt20 pb20"><div class=fr style=width:270px><div class=fr style=background-color:#fff><img ng-src='+your_weixinhao_pic_url+' width=80px height="80px;"></div><p>微信：扫描二维码咨询在线客服</p><p>邮箱：'+zixun_mail+"</p><p>电话："+zixun_tel+"</p><p>工作日：8:45-12:00 13:00-17:30</p></div><div class=fl><p>2016 "+your_webname+". All rights reserved "+your_webname+"科技有限公司</p><p>电信与信息服务业务经营许可证："+your_demain_beian+'</p><div class=renzheng style=padding-top:10px><a href="" target=_blank><img ng-src={{CLIENT_CDN}}assets/images/kexin.svg width=80px height=30px></a></div></div></div></footer>';3==web_muban_status&&(t='<footer>\n<footer>\n\t<div class="content_center">\n<center>\t<article class="footer">\n\t<p class="beizhu"> 2016  '+your_demain_beian+'  All rights reserved   {{web_ipc}}</p>\n\t<p>\n\t<a href="{{web_site}}" target="_blank" rel="nofollow" style="margin: 0 auto;">\n\t<img ng-src="{{CLIENT_CDN}}assets/images/sn.png">\n\t</a>\n\t</p>\n\t</article>\n\t</center></div>\n\t</footer>'),e.put("footer.tpl.html",t)}]),angular.module("header.tpl.html",[]).run(["$templateCache",function(e){e.put("header.tpl.html",'<div class=header-wap ng-if=user><div class=header-contain><div class="same-content clearfix"><div class=head_nav ng-if=showToolBar();><ul class="clearfix head_navs"><li class=background-color-width-change ng-class="{isActive: isActive == \'main\'}"><a href=/#/main>H5场景</a></li><li ng-class="{isActive: isActive == \'show\'}" class=background-color-width-change><a href=/#/show target=_blank>秀场</a></li></ul><login-toolbar></login-toolbar></div><a href=/#/main class="hint--bottom hint--rounded" id=logo><img ng-src="{{logoSrc}}"></a></div></div></div><div class=pri-nav ng-if=!user id=home><header style=background-color:#fff;width:100%;height:60px><div class="we_nav content_center"><div class=link_list><ul class=clearfix><li><a class=background-color-width-change target=_blank href=/#/show>秀场</a></li><li class=login ng-hide=isAuthenticated()><a class=background-color-width-change ng-click="openAuth(\'login\')">登录</a></li><li ng-hide=isAuthenticated() class=register><a class=background-color-width-change ng-click="openAuth(\'register\')" id=registerFormBtn>注册</a></li><li ng-show=isAuthenticated()><a class=background-color-width-change href=/#/main>进入</a></li></ul></div><div id=logo><a href=/#/home><img ng-src={{logoSrc}}></a></div></div></header></div>')}]),angular.module("help.tpl.html",[]).run(["$templateCache",function(e){e.put("help.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=usercenter class=min_contain><div class="main clearfix"><div class=help_content><h1>快速获得秀点</h1><p><span>1.场景展示得秀点</span></p><table><tr><th class=col-sm-3><span>账号属性</span></th><th class=col-sm-3><span>获取秀点条件</span></th><th class=col-sm-8><span>秀点计算</span></th></tr><tr><td><span>普通账号</span></td><td><span>分享尾页展示</span></td><td><span>5000展示=100秀点</span></td></tr><tr><td><span>高级账号</span></td><td><span>末页底标展示</span></td><td><span>10000展示=100秀点</span></td></tr><tr><td><span>服务账号</span></td><td><span>末页底标展示</span></td><td><span>10000展示=100秀点</span></td></tr></table><p><span>2.推荐会员得秀点</span></p><table><tr><td class=col-sm-3><span>推荐会员</span></td><td class=col-sm-3><span>注册会员</span></td><td class=col-sm-8><span>推荐一个会员，可以获得20个秀点</span></td></tr></table><h1 style="margin:20px 0"><span>秀点使用</span></h1><table><tr><th class=col-sm-3><span>账号属性</span></th><th class=col-sm-3><span>使用内容</span></th><th class=col-sm-8><span>所需秀点</span></th></tr><tr><td><span>普通账号</span></td><td><span>去除分享尾页</span></td><td><span>100个</span></td></tr><tr><td><span>高级账号</span></td><td><span>去除末页底标</span></td><td><span>100个</span></td></tr><tr><td><span>服务账号</span></td><td><span>去除末页底标/修改载入logo</span></td><td><span>100个/500个</span></td></tr></table></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("home/home.tpl.html",[]).run(["$templateCache",function(e){e.put("home/home.tpl.html",web_muban)}]),angular.module("main/console/group.tpl.html",[]).run(["$templateCache",function(e){e.put("main/console/group.tpl.html",'<div class=modal-header><span ng-show=!title>新建组</span> <span ng-show=title>{{title}}</span></div><div class="modal-body add-new-cat" forbidden-list-close><input type=text class=form-control ng-model=group.name placeholder="设置名称"></div><p ng-show=authError style=text-align:center>{{authError}}</p><div class="btn-contain btn-small"><a class="btn-main login" ng-click=confirm()>确认</a> <a class="btn-grey0 cancel" ng-click=cancel()>取消</a></div>')}]),angular.module("main/console/oldVersionTip.tpl.html",[]).run(["$templateCache",function(e){e.put("main/console/oldVersionTip.tpl.html",'<div style="position: absolute;top: 300px;left: 50%;z-index: 100"><div class=bind-email-guide><h1><em>'+your_webname+'会员账号改版通知</em><span ng-click="$parent.showOldVersion = false;">&times;</span></h1><p style="padding-bottom: 0">尊敬的'+your_webname+'会员{{currentUser.loginName}}，您好！</p><p style="padding-bottom: 0">有您的陪伴，我们才不断成长！</p><p style="padding-bottom: 0">'+your_webname+'发布新的会员账号体系啦！</p><p style="line-height: 34px;padding-top: 10px">但为了保障您的权益，您此前已购买的{{versionName}}账号，在有效期内({{currentUser.joinTime | date:\'yyyy年MM月dd日\'}}---{{currentUser.expiryTime | date:\'yyyy年MM月dd日\'}})，将继续享有原账号的功能和服务，请您放心使用！</p><div class=user-select><button class="btn btn-primary" ng-click="$parent.showOldVersion = false;">知道了</button></div></div></div>')}]),angular.module("main/console/transferscene.tpl.html",[]).run(["$templateCache",function(e){e.put("main/console/transferscene.tpl.html",'<div class=modal-header ng-show=transferScene><button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true ng-click=cancel()>×</span></button><h4 class=modal-title>场景转赠</h4></div><div class=modal-body ng-show=transferScene><form class=form-horizontal><div class=form-group><label for=inputPassword3 class="col-sm-3 control-label">转赠账号</label><div class=col-sm-7><input type=text class=form-control id=inputPassword3 ng-model=model.toUser placeholder=受赠方的账号名称(可在用户中心查询) ng-click="model.actionerrorFlag = false;"></div></div><div class=form-group><label for=inputPassword3 class="col-sm-3 control-label">选择平台</label><div class=col-sm-7><div class="col-sm-6 platform-yqx" ng-click=selectPlatform(0)><div class=radio-square ng-class="{checked: (model.toPlatform === 0)}"><em></em></div><em>'+your_webname+'</em></div><div class="col-sm-6 platform-hyp" ng-click="selectPlatform(1);model.actionerrorFlag = false;"><div class=radio-square ng-class="{checked: (model.toPlatform === 1)}"><em></em></div><em>海外版Hypefolio</em></div></div></div></form></div><div class="modal-footer transfer_tip_footer" ng-show=transferScene><p class=transfer_tip><span>*</span><em>转出后将不再拥有此场景</em></p><p class="error transfer_tip transfer_tip_error" ng-show=model.actionerrorFlag>{{actionerror}}</p><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=confirm()>确认</button></div><div ng-hide=transferScene class=gift-success-tips id=transfer_mes><p><i>您已将此场景成功转送给</i><span style="padding:0 15px">{{model.toUser}}</span></p><a ng-click=submit()>x</a></div>')}]),angular.module("main/customer.tpl.html",[]).run(["$templateCache",function(e){e.put("main/customer.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=main class="customer min_contain"><div ng-include="\'sysmessage.tpl.html\'"></div><div class=info-show><div class=same-content><div class=cus-title>我的客户</div></div></div><div class="same-content min_contain"><div class="cus-bar clearfix" ng-show="dataShow == \'message\'"><div class="group-action fl clearfix" ng-show=!hideOpea><div class="group-cat btn-group dropdown" ng-show=!branchid><a class=dropdown-toggle>添加到组 <span class="eqf-more pl20"></span></a><div class="dropdown-menu transform-change"><ul role=menu><li ng-repeat="group in groups" forbidden-close><div class=select-group><div class="checkbox-square customer-check fr" ng-class="{checked: group.selected}"><em class=eqf-clickmore></em> <input class=check-box type=checkbox ng-model=group.selected name=iCheck></div><div class=group-name><span class=ellipsis>{{group.name}}</span> <a class=fr ng-click="deleteGroup(group, $index);">删除</a></div></div></li></ul><div class="select-group add-group text-center" forbidden-close ng-click=addGroup();><em>+</em> <span class=add-group>添加分组</span></div><div class=text-center style=padding-top:10px><a class="btn btn-primary" ng-click=assignGroup();>确定</a></div></div><div class=confirm-group></div></div></div><div class=fr><eqx-select class="select-sm select-contain border-width" model=customer.group change=getDataBySceneId(pageNo,branchid,customer.group.id,customer.origin.ID)><eqx-select-option value=null>全部群组</eqx-select-option><eqx-select-option value=mygroup ng-repeat="mygroup in groups">{{mygroup.name}}</eqx-select-option></eqx-select><eqx-select class="select-sm select-contain border-width" model=customer.origin change=getDataBySceneId(pageNo,branchid,customer.group.id,customer.origin.ID)><eqx-select-option value=null>全部来源</eqx-select-option><eqx-select-option value=myorigin ng-repeat="myorigin in origins">{{myorigin.TITLE}}</eqx-select-option></eqx-select><div class="add-data btn-group dropdown" ng-if="!branchid && ((user.type ==21 && userPermit.indexOf(\',1102,\') >=0) || user.type !=21)"><a class="btn btn-border dropdown-toggle"><span class=eqf-plus2></span> 添加数据</a><div class=dropdown-menu><ul role=menu><li ng-click=createData() forbidden-close><a>新建数据</a></li><li ng-click=sceneData() forbidden-close><a>场景数据</a></li><li ng-click=uploadData() forbidden-close><a>上传数据</a></li></ul></div></div><a ng-if="(user.type == 21 && userPermit.indexOf(\',3,\')>=0) || user.type !=21 " class="btn btn-border" ng-click=downLoad(customer.group.id,customer.origin.ID) tooltip-placement=bottom tooltip=将数据导出为excel文件 tooltip-append-to-body=true><span class=eqf-download></span> 导出数据</a></div></div><div ng-show="dataShow == \'message\' && customerDatas.length" class="cus-table mt20"><table class="table table-hover customer-data-table" style=background-color:#fff><thead><tr><th ng-if=!hideOpea class="col-sm-1 check-line"><div class="checkbox-square customer-check" ng-class="{checked: allImages.selected}"><em class=eqf-clickmore></em> <input class=check-box type=checkbox ng-change=selectAll() ng-model=allImages.selected name=iCheck></div></th><th>姓名</th><th>手机</th><th>客户群组</th><th>客户来源</th><th ng-if=!branchid>管理</th></tr></thead><tbody><tr ng-repeat="customerData in customerDatas"><td ng-if=!hideOpea class=check-line><div class=checkbox-square ng-class="{checked: customerData.selected}"><em class=eqf-clickmore></em> <input type=checkbox ng-model=customerData.selected name=iCheck ng-change=selectCustomer(customerData)></div></td><td>{{customerData.name}}</td><td>{{customerData.mobile}}</td><td>{{customerData.groupName}}</td><td>{{customerData.originName}}</td><td ng-if=!branchid><span ng-show="(user.type == 21 && userPermit.indexOf(\',1,\') >= 0) || user.type !=21" class="hint--bottom hint--rounded" data-hint=编辑><a class=eqf-write ng-click="editCustom(customerData, $index)"></a></span> <span ng-show="(user.type == 21 && userPermit.indexOf(\',2,\') >= 0) || user.type !=21" class="hint--bottom hint--rounded" data-hint=删除><a style="margin-left: 30px" class=eqf-scene-delete ng-click=removeCustomer(customerData) ng-if=!hideOpea></a></span></td></tr></tbody></table><div ng-show="totalItems > 10" class="clearfix page-turn"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=10 total-items=totalItems ng-model=model.currentPage ng-change=pageChanged(model.currentPage,branchid,customer.group.id,customer.origin.ID) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=model.toPage ng-keyup="$event.keyCode == 13 ? pageChanged(model.toPage,branchid,customer.group.id,customer.origin.ID) : null"><span class=fl>页</span> <a ng-click=pageChanged(model.toPage,branchid,customer.group.id,customer.origin.ID) class=go>确定</a></div></div></div><div ng-show="dataShow == \'dataIn\' && !hideOpea"><div class="new-export new-import clearfix"><div class=custom-data><em>可导入数据：</em> <span>{{customCount.unImp}}</span> <span style=cursor:pointer ng-show="customCount.unImp < 1" ng-click="dataShow = \'message\'"><em>返回</em></span></div></div><div class="import-container clearfix" style=text-align:center ng-show=importDatas><div class="select-scene fl" style=text-align:left><h2>1.选择新数据场景</h2><ul style=height:489px;overflow-y:auto><li ng-repeat="importData in importDatas" ng-click=selectScene(importData.ID,$index) ng-class="{active: select == $index}"><span>{{importData.TITLE}}</span></li></ul></div><div class="data-column ml20 mr20 fl"><h2>2.拖拽导入的数据</h2><ul class=item-remove-droppable style=height:489px;overflow-y:auto;width:210px item-remove-droppable><li item-draggable item-id={{field.id}} class=list_darggable ng-repeat="field in fields"><span>{{field.title}}</span></li></ul></div><div class="name-to-name fl"><h2>3.拖入对应名称</h2><div class="clearfix drag" style=height:489px><div><ul><li style=border-bottom:none class=clearfix ng-repeat="staticFiled in staticFileds"><div class="list-attribute fl" item-droppable item-id={{staticFiled.id}}>拖拽到此处</div><div class="list-field fr">{{staticFiled.name}}</div></li></ul></div></div></div></div><div class=action style=text-align:right ng-show=importDatas><span style=padding-right:60px>拖拽名称标签放到右侧对应名称中</span> <span style=padding-right:182px>导入后原场景数据不会删除</span> <a type=button class="btn btn-grey0" ng-click="dataShow = \'message\'"><em>取消</em></a> <a type=button class="btn btn-primary" ng-click=confirm()>导入</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div></div>')}]),angular.module("main/downApp.tpl.html",[]).run(["$templateCache",function(e){e.put("main/downApp.tpl.html",'<div class=login-form-section><div class=login-content><div class=section-title style=margin-bottom:20px><a class="bbs-help-tip eqf-wrong fr" ng-click=$dismiss()></a><h3>'+your_webname+'APP</h3></div><div class=down-code><p qr-code qr-url="http://a.app.qq.com/o/simple.jsp?pkgname=cn.knet.eqxiu"></p><p style=padding-bottom:40px;padding-top:10px>一键生成H5，随时随地查数据</p></div></div></div>')}]),angular.module("main/main.tpl.html",[]).run(["$templateCache",function(e){e.put("main/main.tpl.html",'<div><div ng-include="\'header.tpl.html\'"></div><div id=main class=min_contain><div ng-include="\'sysmessage.tpl.html\'"></div><div class=info-show><div class=same-content><div class=info-title>H5场景</div><div class=info><div class=creat ng-show=!branchid><a href=/#/scene class="clearfix opacity-width-change" data-event=2207><em class=eqf-plus2></em><span class=opacity-width-change>点击开始创建</span></a></div><ul ng-show=showScene ng-init="showScene=true;showCustomer=false" class="clearfix changjing-data"><li><span class=eqf-phone></span><div class=big-icon ng-click=showTip()><p class=num>{{datasCount.total || 0 | fixnum}}</p><p class="title fade-color">场景总计</p></div></li><li><span class=eqf-eye style=font-size:20px></span><div class="big-icon eye"><p class=num>{{datasCount.pv || 0 | fixnum}}</p><p class="title fade-color">场景展示</p></div></li><li><span class=eqf-date></span><div class="big-icon datas"><p class=num>{{datasCount.dt || 0 | fixnum}}</p><p class="title fade-color">收集数据</p></div></li></ul></div></div></div><div class=same-content><div class="ad mt20" ng-init="showAd= true;" id=ad_001 slides3 width=1180px height=40px ng-show="showAd== true" style=position:relative><a style=position:absolute;right:0;z-index:6;top:0;font-size:12px;height:40px;width:40px;background-color:rgba(0,0,0,0.3);display:block;text-align:center;line-height:40px ng-click="showAd = false;" data-event=2206><em class=eqf-wrong></em></a><div class=slides_container></div></div><div class="scene-type clearfix"><div class=search-tab><div ng-if="user.type == 2 || user.type == 5 || (user.type == 21 && userPermit.indexOf(\',1405,\') >=0)" class="select-branch fl"><eqx-select class="select-contain select-sm" model=branchCurrent change=selectBranch(branchCurrent)><eqx-select-option value=null>当前账号</eqx-select-option><eqx-select-option value=branch ng-repeat="branch in branches">{{branch.loginName}}</eqx-select-option></eqx-select></div><div class=fl><eqx-select class="cate-width select-sm select-contain" model=scene.type change=getMyScenes()><eqx-select-option value=null>项目分类</eqx-select-option><eqx-select-option value=type ng-repeat="type in scene.types">{{type.name}}</eqx-select-option></eqx-select></div><div class="search fl" ng-class={hover:name}><input type=text maxlength=40 placeholder=请输入搜索内容 ng-model=name ng-change=changeName(name) ng-keypress=EnterPress(event,name) ng-keydown=EnterPress(name)> <span ng-if=searchButton class="search-icon eqf-search" ng-click=submit(name) data-event=2211></span> <span ng-if=!searchButton class="search-icon eqf-wrong" ng-click=clearSearch()></span></div><div class=list-toggle ng-click=listToggle()><span ng-if="listType == false" class="hint--right hint--rounded" data-hint=橱窗展示 data-event=2212><em class=eqf-top-background></em></span> <span ng-if="listType == true" class="hint--right hint--rounded" data-hint=列表展示 data-event=2212><em class=eqf-scene-list></em></span></div></div><ul class=jiaoxue style="width:500px;position: static"><li style=position:relative class=pr20 ng-if=switchChild ng-class="{active:sceneList == \'system\'}"><a ng-click="switchList(\'system\');getSysScene();getNewSample(\'recommend\');" data-event=2208>精选<em ng-if=guid class="effect-tip heart"></em></a></li><li style=position:relative ng-if="companyType && switchChild" class=pr20 ng-class="{active:sceneList == \'sample\'}"><a ng-click="switchList(\'sample\');getCompanyScene(user.id,\'sample\');getNewSample(\'company\');">企业专属<em ng-if=comp class="effect-tip heart"></em></a></li><li class="pr20 myscenemmore" ng-class="{active:sceneList == currentGroup.activeName}" ng-mouseover="showGroud = true" ng-mouseleave="showGroud = false"><a ng-click=currentNameGroup(currentGroup.clickName,currentGroup.currentId)>{{currentGroup.currentName}} <em class=eqf-clickmore></em></a><ul class="jiaoxue scene-tag-grounp zoomIn-change" ng-if="groups.length > 0 && showGroud == true && switchChild" style="transform-origin: 0 0"><li class=pr20 ng-class="{active:currentGroup.clickId === null}"><a ng-click=currentNameGroup() data-event=2210>我的场景</a> <i></i></li><li class=pr20 ng-class="{active: currentGroup.clickId == group.id}" ng-repeat="group in groups"><a ng-click=currentNameGroup(group.groupName,group.id) data-event=2210>{{group.groupName}}</a> <i></i></li><li style=padding-right:15px ng-class="{active: currentGroup.clickId === \'0\'}" ng-if=showWeiGroup><a ng-click="currentNameGroup(\'\',0)" data-event=2210>未分组</a></li></ul><ul class="jiaoxue scene-tag-grounp zoomIn-change" ng-if="groups.length == 0 && showGroud == true && switchChild" style="transform-origin: 0 0"><li>还没有分组,去管理分组创建吧!</li></ul></li><li ng-show="!manageGroupName && switchChild" ng-init="showcreate=false"><a ng-click="manageGroup();showcreate = !showcreate" class="hint--right hint--rounded manage-ground-setting" data-hint=管理分组>管理分组<em class=eqf-scene-settingII></em></a></li><li ng-show="manageGroupName && switchChild"><a ng-click="manageGroup();showcreate=false" class="manage-ground-setting manage-ground-complete" data-event=2209>完成</a></li></ul><div class="grouddetail zoomIn-change" ng-if=showcreate style="transform-origin: 0 0"><ul class="jiaoxue addgroup"><li style=padding-right:15px ng-show=manageGroupName><a ng-click=addGroup() class="hint--right hint--rounded" data-hint=添加分组><em class=eqf-plus style="margin-right: 8px"></em>添加分组</a></li></ul><ul class="jiaoxue editdelete" ng-if="groups.length > 0"><li class=pr20 ng-class="{active: sceneList == group.id}" ng-repeat="group in groups"><span class=bottomborder><a ng-click=currentNameGroup(group.groupName,group.id)>{{group.groupName}}</a> <span ng-show=manageGroupName class="hint--right hint--rounded" data-hint=编辑分组 style=margin-right:4px><em class=eqf-xiuziti ng-click=editGroup(group.id,group.groupName)></em></span> <span ng-show=manageGroupName class="hint--right hint--rounded" data-hint=删除分组><em class=eqf-wrong2 ng-click=deleteGroup(group.id,$index)></em></span></span> <i></i></li><li style=padding-right:15px ng-class="{active: sceneList == 0}" ng-if=showWeiGroup><div><a ng-click="currentNameGroup(\'\',0)">未分组</a></div></li></ul></div></div><div style="text-align:center;margin:50px 0" ng-if="myScenes.length < 1"><h2 class=pb20>暂无场景<a href=/#/scene ng-if=!branchid style=color:#08a1ef;font-size:14px;display:block class="pl20 pb20 pt20">创建场景</a></h2><img ng-src={{CLIENT_CDN}}assets/images/notfound.svg></div><div class=mask><div ng-include="\'main/squareSceneList.tpl.html\'" ng-show="listType == true"></div><div ng-include="\'main/recSceneList.tpl.html\'" ng-show="listType == false"></div></div><div class="clearfix page-turn" ng-show="(sceneList != \'system\') && totalItems > 12"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=pageSize total-items=totalItems ng-model=page.currentPage ng-change=pageChanged(page.currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div></div><div ng-if="currentTpl.exemplarPreview ===true && sceneList == \'sample\'" preview-exemplar current-tpl=currentTpl create-scene="createScene(tpl, \'isComp\');"></div><div ng-if="currentTpl.exemplarPreview ===true && sceneList != \'sample\'" preview-exemplar current-tpl=currentTpl create-scene=createScene(tpl);></div>')}]),angular.module("main/mobileTansform.tpl.html",[]).run(["$templateCache",function(e){e.put("main/mobileTansform.tpl.html",'<div class=mobile><div class=header><a class="eqf-wrong fr" style=margin-top:25px ng-click=$dismiss()></a>提示</div><div class="content clearfix"><img class="mobile-img fl" ng-src="{{CLIENT_CDN}}assets/images/phone.jpg"><div class="mobile-text pt20"><h2 class=mt20>一旦编辑它就变成电脑场景了</h2><p class=mt20>手机场景一旦编辑，就会变为电脑场景。<br>显示在APP中的电脑列表下（如左图）。<br>此后，就永远是电脑场景了，没有办法再变回来。<br>电脑场景的状态和编辑相对于手机更灵活，也会复杂，请谨慎操作。</p></div></div><div class="footer clearfix"><a class=submit ng-click=$close()>继续</a> <a class="cancel btn-primary" ng-click=$dismiss()>取消</a></div></div>')}]),angular.module("main/newVersionFrame.tpl.html",[]).run(["$templateCache",function(e){e.put("main/newVersionFrame.tpl.html",'<div class="login-form-section new-version"><div class=section-title><a class="bbs-help-tip eqf-wrong fr" ng-click=cancel() data-event=2204></a><h3>更新说明</h3></div><div class=new-version-box><h4>更新啦</h4><div class=new-version-content><p>本次更新秀秀为您带来了：</p><ul class=new-version-list><li><em>[访问深度]</em> <span>付费账号、公共账号按级别新增场景访问深度，可直观了解到场景页面点击量及页面平均停留时长。</span></li><li><em>[多维统计]</em> <span>付费账号、公共账号按级别新增用户画像、操作系统、访问时间、访问设备等，提高企业统计与分析能力。</span></li><li><em>[互动统计]</em> <span>全部账号新增互动统计，清楚场景组件点击情况。</span></li><li><em>[场景功能]</em> <span>服务账号新增场景组件管理功能，轻松管理每页组件。</span></li><li><em>[功能优化]</em> <span>优化场景预览、字体、账号属性等8项功能，提供更好的使用体验。</span></li></ul></div><div class=new-version-button ng-click=cancel() data-event=2203></div></div></div>')}]),angular.module("main/print/ads.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/ads.tpl.html",'<div id=ads_notice ng-show=showAds><span class=eqf-wrong ng-click=close()></span> <span class="arrow eqf-left" ng-show=showArrow ng-click="toggle(\'left\')"></span> <span class="arrow eqf-right" ng-show=showArrow ng-click="toggle(\'right\')"></span><div class=items><ul ng-if=showAds><li ng-repeat="ads in adsList" eqd-repeat-last=repeatOver><img src="" ng-src={{ads.path}} alt=""></li></ul></div></div>')}]),angular.module("main/print/dialog/affirmPrint.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/dialog/affirmPrint.tpl.html",'<div class=eqc-print-image><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>请选择需要印刷的图片</h4></div><div class=modal-body ng-show=!showTips><div class=pic eqd-scroll={{scrollType}}><ul><li ng-repeat="pic in picker.coverArr"><label for=select_item_{{$index}}><div class=print-cover ng-style="{backgroundImage: pic.cover ? \'url(\' +  PREFIX_FILE_HOST + pic.cover + \'?imageMogr2/auto-orient/thumbnail/180x180/strip)\' : null}"><div ng-if=!pic.cover><span class=eqf-exclamation-sign></span><span>预览图未生成</span></div></div></label><div class=checkbox-square ng-class="{checked: pic.checked}"><em class=eqf-yes2></em> <input type=checkbox id=select_item_{{$index}} ng-model=pic.checked name=iCheck></div></li></ul></div></div><div class=modal-footer ng-show=!showTips><p class=tips>提示：打印文件两页默认双面打印！</p><a class=modal-cancle ng-click=cancel()>取消</a> <button data-event=3202 type=button class="btn btn-primary" ng-click=confirm()>印刷</button></div></div>')}]),angular.module("main/print/dialog/applyTpl.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/dialog/applyTpl.tpl.html",'<div class=modal-header ng-show=!showTips><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>申请模板</h4></div><div class="modal-body eqc-apply-tpl" ng-show=!showTips><p class=affirm>您确定申请提交该作品为模板吗？</p><p class=apply-tips>查看更多规则及版权须知 【<a ng-href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=14142&page=1&extra" target=_blank>点击查看</a>】</p></div><div class=modal-footer ng-show=!showTips><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=confirm()>确认</button></div><div ng-show=showTips class=gift-success-tips id=transfer_mes style=text-align:center><p><i>您已提交该模板，我们正在审核中，请及时查看审核消息。</i></p><a ng-click=cancel()>x</a></div>')}]),angular.module("main/print/dialog/define.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/dialog/define.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>创建自定义</h4></div><div class="modal-body eqc-define"><div class=input><input placeholder=宽度 ng-model=size.width eqd-validate=number maxlength="4"> <span>&times;</span> <input placeholder=高度 ng-model=size.height eqd-validate=number maxlength="4"><select ng-model=size.unit><option ng-selected="size.unit == mm" value=mm>mm（毫米）</option><option ng-selected="size.unit == px" value=px>px（像素）</option></select></div><div class=size-intro><div>常见尺寸说明</div><span>A3: 3508 * 4961px (297 * 420mm)</span> <span>A4: 2480 * 3508px (210 * 297mm)</span> <span>A5: 1748 * 2480px (148 * 210mm)</span> <span>以上换算，皆基于300dpi</span></div></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=confirm()>创建</button></div>')}]),angular.module("main/print/dialog/saveToH5.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/dialog/saveToH5.tpl.html",'<div class=eqc-print-image><div class=modal-header ng-show=!showTips><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>请选择需要保存的图片</h4></div><div class=modal-body ng-show=!showTips><div class=pic eqd-scroll={{scrollType}}><ul><li ng-repeat="pic in picker.coverArr"><label for=select_item_{{$index}}><div class=print-cover ng-style="{backgroundImage: pic.cover ? \'url(\' +  PREFIX_FILE_HOST + pic.cover + \'?imageMogr2/auto-orient/thumbnail/180x180/strip)\' : null}"><div ng-if=!pic.cover><span class=eqf-exclamation-sign></span><span>预览图未生成</span></div></div></label><div class=checkbox-square ng-class="{checked: pic.checked}"><em class=eqf-yes2></em> <input type=checkbox id=select_item_{{$index}} ng-change=changeItem() ng-model=pic.checked name=iCheck></div></li></ul></div><div class=save-location><span>保存位置</span><div class=scene-pic-group><eqx-select class="select-great select-contain" change=saveLocation(scenePicGroup) model=scenePicGroup><eqx-select-option value=-1>我的图片</eqx-select-option><eqx-select-option value=picGroup.id ng-repeat="picGroup in picGroupList">{{picGroup.name}}</eqx-select-option></eqx-select></div></div></div><div class=modal-footer ng-show=!showTips><div class=select-all ng-click=selectAll()><div class=checkbox-square ng-class="{checked: picker.isAllCheck}"><em class=eqf-yes2></em> <input type=checkbox id=select_all ng-change=changeLoop() ng-model=picker.isAllCheck name=iCheck></div><label for=select_all onselectstart="return false">全部</label></div><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=confirm() ng-disabled=isSave data-event=3204>确认</button></div><div ng-show=showTips class=gift-success-tips id=transfer_mes style=text-align:center><p><i>已成功保存的H5场景素材库</i></p><a ng-click=cancel()>x</a></div></div>')}]),angular.module("main/print/dialog/transferPrint.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/dialog/transferPrint.tpl.html",'<div class=modal-header ng-show=!showTips><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>转送作品</h4></div><div class=modal-body ng-show=!showTips><form class=form-horizontal><div class=form-group><label for=inputPassword3 class="col-sm-3 control-label">账号:</label><div class=col-sm-7><input type=text class=form-control id=inputPassword3 ng-model=model.toUser placeholder=请输入要转送的账号><p class="scene-gift-tips pt20"><span>*</span><em>转出后将不再拥有此作品</em></p><p class=error ng-show=activeError>{{activeError}}</p></div></div></form></div><div class=modal-footer ng-show=!showTips><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=confirm()>确认</button></div><div ng-show=showTips class=gift-success-tips id=transfer_mes style=text-align:center><p><i>您已将此作品成功转送给</i><span style="padding:0 15px">{{model.toUser}}</span></p><a ng-click=cancel()>x</a></div>')}]),angular.module("main/print/print.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/print.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=main class="eqc-print min_contain"><div class=info><div class=content><div class=title>轻设计</div><div class=items><ul><li><a href="" ng-class="{active: tabView == \'create\'}" ng-click="showTab($event, \'create\')">开始设计</a></li><li><a href="" ng-class="{active: tabView == \'template\'}" ng-click="showTab($event, \'template\')">模板中心</a> <span class=point></span></li><li><a href="" ng-class="{active: tabView == \'mine\'}" ng-click="showTab($event, \'mine\')">我的轻设计</a></li></ul></div><div class=create ng-show="tabView != \'create\'"><a class=opacity-width-change ng-click="showTab($event, \'create\')"><em class=eqf-plus2></em> <span class=opacity-width-change>点击开始创建</span></a></div><div class=define ng-show="tabView == \'create\'"><em class=eqf-plus2></em> <a href="" ng-click=define()>自定义尺寸创建</a></div></div></div><eqd-create ng-show="tabView == \'create\'"></eqd-create><eqd-template ng-show="tabView == \'template\'"></eqd-template><eqd-mine ng-show="tabView == \'mine\'"></eqd-mine></div><div ng-include="\'footer.tpl.html\'"></div><div id=preview_wrap><span class=eqf-wrong></span><iframe id=pc_preview width=100% height=100% scrolling=no frameborder=0></iframe></div><eqd-ads></eqd-ads>')}]),angular.module("main/print/tab/create.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/create.tpl.html",'<div class=eqc-create><div class=content><div class="works ad-print"><div class=title>广告印刷</div><div class=category><div class="h-225 animation-zoom" ng-style="{animationDelay: 4 * 50 + \'ms\'}"><p class=fs14>宣传单</p><p class=mm>210 * 285mm</p><p class=px>(2480 * 3366px)</p><div class=selected><div class=item ng-click="add(\'5\', 210, 285, \'mm\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div><div class=tag><span>可下单印刷</span></div></div><div class="h-169 h-2 ml animation-zoom" ng-style="{animationDelay: 5 * 50 + \'ms\'}"><p class=fs14>邀请函</p><p class=mm>140 * 210mm</p><p class=px>(1654 * 2480px)</p><div class=selected><div class=item ng-click="add(\'2\', 140, 210, \'mm\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div></div><div class="h-255 ml animation-zoom" ng-style="{animationDelay: 6 * 50 + \'ms\'}"><p class=fs14>海报</p><p class=mm>420 * 570mm</p><p class=px>(4691 * 6732px)</p><div class=selected><div class=item ng-click="add(\'4\', 420, 570, \'mm\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div><div class=tag><span>可下单印刷</span></div></div><div class="h-169 ml animation-zoom" ng-style="{animationDelay: 7* 50 + \'ms\'}"><p class=fs14>贺卡</p><p class=mm>140 * 210mm</p><p class=px>(1654 * 2480px)</p><div class=selected><div class=item ng-click="add(\'3\', 140, 210, \'mm\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div></div><div class="h-120 ml animation-zoom" ng-style="{animationDelay: 8 * 50 + \'ms\'}"><p class=fs14>名片</p><p class=mm>90 * 54mm</p><p class=px>(1063 * 638px)</p><div class=selected><div class=item ng-click="add(\'1\', 90, 54, \'mm\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div><div class=tag><span>可下单印刷</span></div></div></div></div><div class="works online-marketing"><div class=title>线上营销</div><div class=category><div class="w-98 animation-zoom" ng-style="{animationDelay: 0 * 50 + \'ms\'}"><p class=fs14>长图</p><p class=mm>800 * 2400px</p><div class=selected><div class=item ng-click="add(\'8\', 800, 2400, \'px\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div></div><div class="w-160 ml animation-zoom" ng-style="{animationDelay: 1 * 50 + \'ms\'}"><p class=fs14>淘宝商品主图</p><p class=mm>800 * 800px</p><div class=selected><div class=item ng-click="add(\'6\', 800, 800, \'px\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div></div><div class="w-270 ml animation-zoom" ng-style="{animationDelay: 2 * 50 + \'ms\'}"><p class=fs14>微信公众号首图</p><p class=mm>900 * 500px</p><div class=selected><div class=item ng-click="add(\'7\', 900, 500, \'px\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div></div><div class="w-120 ml animation-zoom" ng-style="{animationDelay: 3 * 50 + \'ms\'}"><p class=fs14>GIF动图</p><p class=mm>600 * 800px</p><div class=selected><div class=item ng-click="add(\'9\', 600, 800, \'px\')"><span class=eqf-xiuziti></span> <a href="">创建</a></div></div></div></div></div></div></div>')}]),angular.module("main/print/tab/hotZone.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/hotZone.tpl.html",'<div id=hot_zone class=eqc-hot-zone><ul class=sort><li>每日必做</li><li>翻牌子</li><li>大长图</li></ul><div class=content><div class=every-day><ul class="square-scene clearfix"><li class="tab-box-shadow animation-zoom" ng-repeat="list0 in hotList0"><div class=image><div class="front face" ng-style="getStyle(list0.cover, 370)"></div><div class=overlay><div class=edit><a class=edit-same eqd-preview view-id={{list0.id}} view-code={{list0.code}}><em class="eqf-eye background-color-width-change" style=font-size:18px></em> <span>预览</span></a> <a class=edit-same ng-click=copyHotItem(list0.id) target=_blank><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>我也做</span></a></div></div></div><div class=project-info><p class=ellipsis>{{list0.title || \'无标题\'}}</p><span class=print-type>{{list0.type | printType}}</span> | {{list0.unit == \'px\' ? list0.width : ((list0.width / 300) * 25.4).toFixed()}}*{{list0.unit == \'px\' ? list0.height : ((list0.height / 300) * 25.4).toFixed()}}{{list0.unit}}</div></li></ul></div><div class="effects turn-brand"><ul class="square-scene clearfix"><li class="tab-box-shadow animation-zoom" ng-repeat="list1 in hotList1" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class=image><div class="front face" ng-style="getStyle(list1.cover, 170)"></div><div class=overlay><div class=edit><a class=edit-same eqd-preview view-id={{list1.id}} view-code={{list1.code}}><em class="eqf-eye background-color-width-change" style=font-size:18px></em> <span>预览</span></a> <a class=edit-same ng-click=copyHotItem(list1.id) target=_blank><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>我也做</span></a></div></div></div><div class=project-info><p class=ellipsis>{{list1.title || \'无标题\'}}</p><span class=print-type>{{list1.type | printType}}</span> | {{list1.unit == \'px\' ? list1.width : ((list1.width / 300) * 25.4).toFixed()}}*{{list1.unit == \'px\' ? list1.height : ((list1.height / 300) * 25.4).toFixed()}}{{list1.unit}}</div></li></ul></div><div class="effects long-image"><ul class="square-scene clearfix"><li class="tab-box-shadow animation-zoom" ng-repeat="list2 in hotList2" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class=image><div class="front face" ng-style="getStyle(list2.cover, 170)"></div><div class=overlay><div class=edit><a class=edit-same eqd-preview view-id={{list2.id}} view-code={{list2.code}}><em class="eqf-eye background-color-width-change" style=font-size:18px></em> <span>预览</span></a> <a class=edit-same ng-click=copyHotItem(list2.id) target=_blank><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>我也做</span></a></div></div></div><div class=project-info><p class=ellipsis>{{list2.title || \'无标题\'}}</p><span class=print-type>{{list2.type | printType}}</span> | {{list2.unit == \'px\' ? list2.width : ((list2.width / 300) * 25.4).toFixed()}}*{{list2.unit == \'px\' ? list2.height : ((list2.height / 300) * 25.4).toFixed()}}{{list2.unit}}</div></li></ul></div></div></div>')}]),angular.module("main/print/tab/mine.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/mine.tpl.html",'<div><div class=sub-nav><ul class=content-list><li><a href="" ng-class="{selected: showContent}" ng-click="getContent(\'works\')">我的设计</a></li><li><a href="" ng-class="{selected: !showContent}" ng-click="getContent(\'order\')">我的订单</a></li></ul></div><eqd-works ng-show=showContent></eqd-works><eqd-order ng-if=!showContent></eqd-order></div>')}]),angular.module("main/print/tab/order.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/order.tpl.html",'<div class=eqf-order><div class=status><ul><li class=ml20><a ng-class="{active: currentStatus == \'all\'}" ng-click="getOrderList(\'all\')">全部订单 <span>（{{count.all}}）</span></a></li><li><a ng-class="{active: currentStatus == \'0\'}" ng-click=getOrderList(0)>待付款订单 <span>（{{count.nonPayment}}）</span></a></li><li><a ng-class="{active: currentStatus == \'3\'}" ng-click=getOrderList(3)>已完成订单 <span>（{{count.completed}}）</span></a></li><li><a ng-class="{active: currentStatus == \'-1\'}" ng-click=getOrderList(-1)>无效订单 <span>（{{count.cancel}}）</span></a></li></ul></div><div class=order-info><ul><li>订单编号</li><li>订购日期</li><li>订单金额</li><li>支付/配送方式</li><li>收货人</li><li>查看详情</li></ul><ul class=items ng-repeat="list in orderList"><li>{{list.orderNumber}}</li><li>{{list.createTime}}</li><li>{{list.amount}}</li><li>{{list.payment}}</li><li>{{list.receiver}}</li><li><a class=order-detail ng-click="getDetails(list.orderNumber, list.shopId)">查看订单详情</a></li></ul></div><div class="clearfix page-turn" style=margin-top:10px ng-show="totalItems > 8"><div class=fl><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=8 total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div></div>')}]),angular.module("main/print/tab/template.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/template.tpl.html",'<div><div class=sub-nav><ul class=content-list><li><a href="" ng-class="{selected: selected == \'hot\'}" ng-click="getList(\'hot\')">热点专区</a></li><li><a href="" ng-class="{selected: selected == \'tpl\'}" ng-click="getList(\'tpl\')">模板分类</a></li></ul></div><div id=print_tpl class=print-list><eqd-tpl-sort ng-show=showList></eqd-tpl-sort><div class="clearfix page-turn" style=margin-top:10px ng-show="tplTotalItems > 12 && showList"><div class=fl><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=12 total-items=tplTotalItems ng-model=currentTplPage ng-change=pageTplChanged(currentTplPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageTplChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageTplChanged(toPage) class=go>确定</a></div></div></div><eqd-hot-zone ng-show=!showList></eqd-hot-zone></div></div>')}]),angular.module("main/print/tab/tplSort.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/tplSort.tpl.html",'<div class=eqc-tpl-sort><div class=tpl-sort-btn><ul class=head-type><li><a href="" ng-class="{active: activeTpl == 1}" ng-click=getTplList(1)>全部</a></li><li><a href="" ng-class="{active: activeTpl == 3}" ng-click=getTplList(3)>广告印刷</a></li><li><a href="" ng-class="{active: activeTpl == 2}" ng-click=getTplList(2)>线上营销</a></li></ul><ul class=type><li>类型：</li><li ng-repeat="type in typeObj"><a href="" ng-class="{active: activeType == type.value}" ng-click=getTypeList(type.value)>{{type.name}}</a></li></ul><ul class=tag><li>标签：</li><li ng-repeat="tag in tagCategory"><a href="" ng-class="{active: activeTag == tag.value}" ng-click=getTagList(tag.value)>{{tag.name}}</a></li></ul></div><ul class="square-scene clearfix"><li ng-repeat="template in templateList track by $index" pid={{template.printId}} class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class=image><div class="front face" ng-style="getStyle(template.cover, 280)"></div><div class=overlay><div class=edit><a class=edit-same ng-click="intoTemplate(template.type, template.id, template.printId)" target=_blank><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>就这个</span></a></div></div></div><div class=project-info><p class=ellipsis>{{template.printName || \'无标题\'}}</p><span class=print-type>{{template.type | printType}}</span> | {{template.unit == \'px\' ? template.width : ((template.width / 300) * 25.4).toFixed()}}*{{template.unit == \'px\' ? template.height : ((template.height / 300) * 25.4).toFixed()}}{{template.unit}}<div class="buttons sample clearfix"><div class="set sample-scene"><span class=scene-name>{{template.user}}</span></div></div></div><div class=head-img><img ng-if=template.avatar ng-src={{template.avatar}}> <span ng-if=!template.avatar class=scene-headimg><em class=eqf-top-contact></em></span></div></li></ul></div>')}]),angular.module("main/print/tab/works.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/tab/works.tpl.html",'<div id=eqi_works class=eqc-works><div class=sort-btn><ul class=head-type><li><a href="" ng-class="{active: activeWorksType == 1}" ng-click=getWorksList(1)>全部</a></li><li><a href="" ng-class="{active: activeWorksType == 3}" ng-click=getWorksList(3)>广告印刷</a></li><li><a href="" ng-class="{active: activeWorksType == 2}" ng-click=getWorksList(2)>线上营销</a></li></ul><ul class=type><li>类型：</li><li ng-repeat="type in typeOfWorks"><a href="" ng-class="{active: printType == type.value}" ng-click=getPrintList(type.value)>{{type.name}}</a></li></ul></div><div id=print_mine class=print-list><ul class="square-scene clearfix"><li ng-repeat="print in printList track by $index" pid={{print.id}} class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class=image><div class="front face" ng-style="getStyle(print.cover, 280)"></div><div class=overlay><div class=edit><a class=edit-same eqd-preview view-id={{print.id}} view-code={{print.code}}><em class="eqf-eye background-color-width-change" style=font-size:18px></em> <span>预览</span></a> <a class=edit-same href=print/create/{{print.id}} target=_blank><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>编辑</span></a> <a class=edit-same ng-click=setPrint(print.id) target=_blank><em class="eqf-scene-setting background-color-width-change" style=font-size:18px></em> <span>设置</span></a></div><div class="sample applyTpl"><a onselectstart="return false" ng-show="print.type != 0" ng-click="applyTpl(print.id, print.isTpl)" ng-style="{backgroundColor: (print.isTpl | statusBgFilter), color: (print.isTpl | statusColorFilter)}">{{print.isTpl | statusFilter}}</a> <a onselectstart="return false" ng-click="saveToH5(print.id, print.type)" data-event=3203>保存到H5场景素材库</a></div><div class="buttons clearfix"><div class=set><a class="delete background-color-width-change button" ng-click=delete(print.id)><em class=eqf-scene-delete></em><span>删除</span></a> <a class="operation background-color-width-change button" ng-click=copy(print.id)><em class=eqf-scene-copy></em><span>复制</span></a> <a class="background-color-width-change button" ng-click=transfer(print.id)><em class=eqf-scene-gift></em><span>转送</span></a></div></div></div></div><div class=project-info ng-class="{\'no-print\': (print.type | isOnline)}"><p class=ellipsis>{{print.title || \'无标题\'}}</p><span class=print-type>{{print.type | printType}}</span> | {{print.unit == \'px\' ? print.width : ((print.width / 300) * 25.4).toFixed()}}*{{print.unit == \'px\' ? print.height : ((print.height / 300) * 25.4).toFixed()}}{{print.unit}} &nbsp;&nbsp;&nbsp; <span class=eqf-eye></span> <span>{{print.pv || 0}}</span></div><div class=print-order ng-if="!(print.type | isOnline)"><span>低至<i>{{print.price}}</i>元</span> <button data-event=3201 ng-style="{backgroundColor: print.type == 2 || print.type == 3 ? \'#aaa\' : \'\'}" ng-click="affirmPrint(print.id, print.type)"><span class=eqf-printmachine></span>下单印刷</button></div></li></ul><div style="text-align:center;margin:50px 0" ng-if="printList.length < 1"><h2 style="padding-bottom: 10px">暂无作品</h2><a href=/#/main/print/create ng-if=!branchid style=color:#08a1ef;font-size:14px;display:block class="pb20 pt20">创建作品</a> <img ng-src={{CLIENT_CDN}}assets/images/notfound.svg></div><div class="clearfix page-turn" style=margin-top:10px ng-show="totalItems > 12"><div class=fl><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=12 total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div></div></div>')}]),angular.module("main/print/transition/printShop.tpl.html",[]).run(["$templateCache",function(e){e.put("main/print/transition/printShop.tpl.html",'<div class=eqc-shop eqd-print-shop><form id=order_form action="" method=post><input type=hidden name=data id=hidden_data value=""></form></div>')}]),angular.module("main/recSceneList.tpl.html",[]).run(["$templateCache",function(e){e.put("main/recSceneList.tpl.html",'<ul class=rec-scene><li ng-repeat="scene in myScenes" ng-init="sceneIndex = $index" class="mb20 clearfix tab-box-shadow animation-opacity" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="scene-img scene_contain" style=overflow:hidden ng-hover resource=scene><a ng-click=showPreview($event,scene) style=display:block><div class="ribbon ribbon-badge" ng-if="scene.bizType !=30 && !scene.show && !scene.publishTime "><span class="ribbon-inner unpublish">未发布</span></div><div ng-if="scene.bizType !=30 && !scene.show && scene.publishTime && scene.updateTime > scene.publishTime" class="ribbon ribbon-badge"><span class="ribbon-inner new">有修改</span></div><div ng-if="!scene.show && scene.isExpedited == 1" class="ribbon ribbon-badge"><span class="ribbon-inner check">加急审核中</span></div><div ng-if="!scene.show && scene.status == -1" class="ribbon ribbon-badge"><span class="ribbon-inner check">未通过审核</span></div><div ng-if="!scene.show && scene.status == -2" class="ribbon ribbon-badge"><span class="ribbon-inner check">审核中</span></div><div ng-show="scene.bizType ==30" class="ribbon ribbon-badge" style=z-index:3><span class="ribbon-inner new" style=background-color:#44cb83>手机场景</span></div><div class=f1-card><div ng-show=!scene.show class="front face" ng-style=getStyle(scene.cover)></div><div ng-show="scene.show && scene.staticStatus !== 1" class="face front qrcode" qr-code qr-url="{{canvasUrl + \'/v/\' + scene.code}}" data-event="{{scene.bizType==30?2222:2213}}"></div><div ng-show="scene.show && scene.staticStatus === 1" class="face front qrcode" qr-code qr-url="{{canvasUrlStatic + \'s/\' + scene.code}}" data-event="{{scene.bizType==30?2222:2213}}"></div></div></a></div><div class=scene-data><div class=scene-data-header><div ng-show=manageGroupName class="scene-group fr" ng-mouseover="moveGroup = true" ng-mouseleave="moveGroup = false"><a class=move>移动至<em class=eqf-clickmore style=padding-left:5px></em></a><div class="group-list zoomIn-change clearfix" ng-show="moveGroup== true"><div eqd-scroll style=position:relative;overflow:hidden;max-height:150px><div><a class=ellipsis ng-repeat="group in groups" ng-click=moreGroup(group.id,scene.id,sceneIndex)>{{group.groupName}}</a> <a ng-show="groups.length > 0" class=ellipsis ng-click=moreGroup(0,scene.id,sceneIndex)>未分组</a> <a class=ellipsis ng-click=addGroup(scene.id)><em class=eqf-plus2 style=padding-right:5px></em>添加分组</a></div></div></div></div><div class=scene-info><span class=item-title>{{scene.name}}</span><p class=item_title ng-class="{\'scene-description\': scene.description}" ng-model=scene.description>{{scene.description?scene.description:("未添加场景描述")}}</p></div></div><div class="scene-data-footer clearfix"><div class=user-param><a class="background-color-width-change button" data-event="{{scene.bizType==30?2225:2216}}"><em class=eqf-eye style=font-size:12px></em><span>{{scene.showCount | fixnum}}</span></a> <a class="background-color-width-change button" ng-show="scene.dataCount > 0" ng-click=showData(scene.id);><em class=eqf-date style=font-size:12px></em><span>{{scene.dataCount | fixnum}}</span></a></div><div class="user-operate-site set" role=menu ng-if=!branchid><a class="button background-color-width-change delete" ng-if="(user.type == 21 && userPermit.indexOf(\',1204,\') >= 0) || user.type != 21" ng-click=deleteScene($event,scene.id,scene.staticStatus) data-event="{{scene.bizType==30?2227:2218}}"><em class=eqf-scene-delete></em><span>删除</span></a> <a class="button background-color-width-change operation" ng-if="scene.bizType !=30 && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1203,\') >= 0) || user.type !=21) " ng-click=copyScene($event,scene.id) data-event=2219><em class=eqf-scene-copy></em><span>复制</span></a> <a class="button background-color-width-change" ng-if="scene.bizType !=30 && isAllowedToAccessTransfer && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1205,\') >= 0) || user.type !=21)" ng-click=transferScene($event,scene.id,scene.staticStatus) data-event=2220><em class=eqf-scene-gift></em><span>转送</span></a> <a class="button background-color-width-change sample" ng-if="scene.bizType !=30 && scene.isTpl == 3 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2" ng-click=clearCompanyTpl($event,scene.id,$index)><em class=eqf-scene-company></em><span>取消企业样例</span></a> <a class="button background-color-width-change sample" ng-if="scene.bizType !=30 && scene.isTpl == 0 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2" ng-click=creatCompanyTpl($event,scene.id,$index)><em class=eqf-scene-company></em><span>生成企业样例</span></a> <a class="button background-color-width-change operation" ng-if="scene.bizType !=30 && (!scene.publishTime || scene.updateTime > scene.publishTime) && scene.status != -1 && scene.status != -2" ng-click=publishScene($event,scene)><em class=eqf-scene-send></em><span>发布</span></a> <a class="button background-color-width-change" ng-click=sceneSettings($event,scene.id,scene) data-event="{{scene.bizType==30?2228:2221}}"><em class=eqf-scene-setting></em><span>设置</span></a> <a class="button background-color-width-change" ng-click=editScene($event,scene.id,scene) data-event="{{scene.bizType==30?2223:2214}}"><em class=eqf-xiuziti></em><span>编辑</span></a></div></div></div></li></ul>')}]),angular.module("main/squareSceneList.tpl.html",[]).run(["$templateCache",function(e){e.put("main/squareSceneList.tpl.html",'<ul class="square-scene clearfix" ng-show="sceneList != \'system\' && sceneList != \'sample\'"><li ng-repeat="scene in myScenes" ng-init="sceneIndex = $index" class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div ng-show=manageGroupName class=scene-group ng-mouseover="moveGroup = true" ng-mouseleave="moveGroup = false"><a class=move>移动至<em class=eqf-clickmore style=padding-left:5px></em></a><div class="group-list zoomIn-change clearfix" ng-show="moveGroup == true"><div eqd-scroll style=position:relative;overflow:hidden;max-height:180px><div><a class=ellipsis ng-repeat="group in groups" ng-click=moreGroup(group.id,scene.id,sceneIndex)>{{group.groupName}}</a> <a ng-show="groups.length > 0" class=ellipsis ng-click=moreGroup(0,scene.id,sceneIndex)>未分组</a> <a class=ellipsis ng-click=addGroup(scene.id)><em class=eqf-plus2 style=padding-right:5px></em>添加分组</a></div></div></div></div><div class="ribbon ribbon-badge" ng-if="!scene.show && !scene.publishTime && scene.bizType !=30"><span class="ribbon-inner unpublish">未发布</span></div><div ng-show="scene.bizType ==30" class="ribbon ribbon-badge" style=z-index:3><span class="ribbon-inner new" style=background-color:#44cb83>手机场景</span></div><div ng-show="scene.bizType !=30 && !scene.show && scene.publishTime && scene.updateTime > scene.publishTime" class="ribbon ribbon-badge"><span class="ribbon-inner new">有修改</span> <span class="ribbon-inner new hint--bottom hint--rounded" data-hint=内容有修改，新修改未发布 style="transform: rotate(0deg);background:none"></span></div><div ng-if="!scene.show && scene.isExpedited == 1 && scene.status == -2" class="ribbon ribbon-badge"><span class="ribbon-inner check">加急审核中</span></div><div ng-if="!scene.show && scene.isExpedited == 1 && scene.status == 1" class="ribbon ribbon-badge"><span class="ribbon-inner check">前置审核中</span></div><div ng-if="!scene.show && scene.status == -1" class="ribbon ribbon-badge"><span class="ribbon-inner check">未通过审核</span></div><div ng-if="!scene.show && scene.status == -2 && scene.isExpedited != 1" class="ribbon ribbon-badge"><span class="ribbon-inner check">审核中</span></div><div class=image><div ng-if=!scene.show class="front face" ng-style=getStyle(scene.cover)></div><div ng-if="scene.show && scene.staticStatus !== 1" class=ercode qr-code qr-url="{{canvasUrl + \'/v/\' + scene.code}}"></div><div ng-if="scene.show && scene.staticStatus ===1" class=ercode qr-code qr-url="{{canvasUrlStatic + \'s/\' + scene.code}}"></div><div class=overlay ng-show=!scene.show><div class=edit><a class=edit-same ng-click=showPreview($event,scene) data-event="{{scene.bizType==30?2222:2213}}"><em class="eqf-eye background-color-width-change" style=font-size:18px></em> <span>预览</span></a> <a class=edit-same ng-if=!branchid ng-click=editScene($event,scene.id,scene) data-event="{{scene.bizType==30?2223:2214}}"><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>编辑</span></a> <a class=edit-same ng-click=showDetail(scene.id) data-event="{{scene.bizType==30?2224:2215}}"><em class="eqf-date background-color-width-change" style=font-size:18px></em> <span>详情</span></a></div><div class=sample ng-if="scene.bizType !=30 && !branchid && scene.isTpl == 0 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2 && scene.bizType !=30"><a ng-click=creatCompanyTpl($event,scene.id,$index)>成为企业样例</a></div><div class=sample ng-if="scene.bizType !=30 && scene.isTpl == 3 && (userProperty.type ==2 || userProperty.type ==5) && scene.status != -1 && scene.status != -2 && scene.bizType !=30"><a ng-click=clearCompanyTpl($event,scene.id,$index)>取消企业样例</a></div></div></div><div class=project-info><p class=ellipsis>{{scene.name}}</p><a class=show-count data-event="{{scene.bizType==30?2225:2216}}"><em class=eqf-eye></em>{{scene.showCount | fixnum}}</a> <a ng-click=showData(scene.id); class=show-count ng-if="scene.dataCount > 0"><em class=eqf-date></em><span>{{scene.dataCount | fixnum}}</span></a><div class="buttons clearfix"><div class=set ng-if=!branchid><a class="delete background-color-width-change button" ng-if="(user.type == 21 && userPermit.indexOf(\',1204,\') >= 0) || user.type != 21" ng-click=deleteScene($event,scene.id,scene.staticStatus) data-event="{{scene.bizType==30?2227:2218}}"><em class=eqf-scene-delete></em><span>删除</span></a> <a ng-if="scene.bizType !=30 && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1203,\') >= 0) || user.type !=21)" ng-click=copyScene($event,scene.id) class="button background-color-width-change operation" data-event=2219><em class=eqf-scene-copy></em><span>复制</span></a> <a class="button background-color-width-change" ng-if="scene.bizType !=30 && isAllowedToAccessTransfer && scene.status != -1 && scene.status != -2 && ((user.type == 21 && userPermit.indexOf(\',1205,\') >= 0) || user.type !=21)" ng-click=transferScene($event,scene.id,scene.staticStatus) data-event=2220><em class=eqf-scene-gift></em><span>转送</span></a> <a ng-if="scene.bizType !=30 && (!scene.publishTime || scene.updateTime > scene.publishTime) \n                        && scene.status != -1 && scene.status != -2" ng-click=publishScene($event,scene) class="button background-color-width-change operation"><em class=eqf-scene-send></em><span>发布</span></a> <a class="button background-color-width-change" ng-click=sceneSettings($event,scene.id,scene) data-event="{{scene.bizType==30?2228:2221}}"><em class=eqf-scene-setting></em><span>设置</span></a></div><a class="erweima button" ng-hover resource=scene data-event="{{scene.bizType==30?2226:2217}}"><em class=eqf-QRcode></em></a></div></div></li></ul><ul class="square-scene clearfix" ng-show="sceneList == \'system\' || sceneList == \'sample\'"><li ng-repeat="scene in myScenes track by $index" class="tab-box-shadow animation-zoom" ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="ribbon ribbon-badge" ng-if="!!scene.price && sceneList == \'system\' && !scene.disCountFlag"><span class="ribbon-inner check">{{scene.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="!!scene.price && sceneList == \'system\' && scene.disCountFlag"><div class="discount-red discount-bg"><span class=discount-del>&nbsp{{scene.price}}秀点&nbsp</span> <span class=discount-normal><em>{{scene.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="sceneList == \'sample\' && !scene.price && !scene.disCountFlag"><span class="ribbon-inner isCompany">企业专属</span></div><div class="ribbon discount-detail" ng-if="sceneList == \'sample\' && scene.price && scene.disCountFlag"><div class=discount-bg><span class=discount-del>&nbsp{{scene.price}}秀点&nbsp</span> <span class=discount-normal><em>{{scene.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="sceneList == \'sample\' && scene.price && !scene.disCountFlag"><span class="ribbon-inner isCompany">{{scene.price}}秀点</span></div><div class=image><div ng-if=!scene.show class="front face" ng-style=getStyle(scene.cover)></div><div ng-if=scene.show class=ercode qr-code qr-url="{{canvasSampleUrl + \'/v/\' + scene.code}}"></div><div class=overlay ng-show=!scene.show><div class=edit><a class=edit-same target=_blank ng-click=openPreview(scene);><em class="eqf-eye background-color-width-change" style=font-size:18px></em> <span>预览</span></a> <a ng-if="sceneList == \'sample\'" class=edit-same ng-click="createScene(scene,\'isComp\')"><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>就这个</span></a> <a ng-if="sceneList != \'sample\'" class=edit-same ng-click=createScene(scene)><em class="eqf-xiuziti background-color-width-change" style=font-size:18px></em> <span>就这个</span></a></div></div></div><div class=project-info><p class=ellipsis>{{scene.name}}</p><p class="ellipsis discount-overdue" ng-if=scene.disCountFlag>限时打折,距离活动结束还有{{scene.disCountTime}}天</p><div class="buttons clearfix"><div class="set sample-scene"><span class=scene-name>{{scene.userName}}</span></div><a class="erweima button" ng-hover resource=scene><em class=eqf-QRcode></em></a></div></div><div class=head-img><img ng-if=scene.avatar ng-src={{scene.avatar}}> <span ng-if=!scene.avatar class=scene-headimg><em class=eqf-top-contact></em></span></div></li></ul>')}]),angular.module("main/uploadData.tpl.html",[]).run(["$templateCache",function(e){e.put("main/uploadData.tpl.html",'<div class=modal-header><a class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></a><h4 class=modal-title>上传数据</h4></div><div class=modal-body><div class=upload-data>请下载“客户模板”并填写要上传的客户信息后，使用“上传数据”功能上传数据至客户列表中。</div></div><div class="modal-footer customer-upload-data"><a class="btn btn-primary" ng-href="{{PREFIX_FILE_HOST + \'客户模板.xls\'}}"><em class=eqf-down></em>客户模板</a> <span class="btn btn-primary data"><span class=button><em class=eqf-up></em>上传数据</span> <input type=file nv-file-select="" uploader=uploader options accept=application/vnd.ms-excel></span></div>')}]),angular.module("main/userGuide.tpl.html",[]).run(["$templateCache",function(e){e.put("main/userGuide.tpl.html",'<div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0; background: rgba(0,0,0,0.8);z-index:10000" ng-click=showGuide() ng-show=firstLogin ng-controller=userGuideCtrl><div class=bind-email-guide><h1><em>必读：帮您更好地使用'+your_webname+"：</em><span ng-click=showNextGuide()>&times;</span></h1><p>感谢您使用"+your_webname+"，为了更好的使用"+your_webname+"，您可以：</p><ul class=guide-describe><li class=guide-list><em>① 绑定邮箱，密码忘记时可取回密码</em><ul class=item><li><a href=/#/usercenter/account class=text-primary target=_blank>立即验证</a></li></ul></li><li class=guide-list><em>② 获得更多免费功能：申请企业帐号免费版</em><ul class=item><li><a href=/#/privilege class=text-primary target=_blank>马上申请</a></li></ul></li><li class=guide-list><em>③ 获得“去掉场景上的"+your_webname+"品牌标识”等增值服务</em><ul class=item><li><a href=/#/privilege class=text-primary target=_blank>付费版会员帐号</a></li></ul></li></ul><div class=user-select><span>不会使用"+your_webname+'？</span> <a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=72" class=text-primary target=_blank>操作指南</a><p><input type=checkbox style="margin: 4px; font-size:14px" ng-click="isShow()"><em>不再提示</em></p><button class="btn btn-primary" ng-click=showNextGuide()>知道了</button></div></div></div>')}]),angular.module("notifications.tpl.html",[]).run(["$templateCache",function(e){e.put("notifications.tpl.html","<div ng-class=\"['alert', 'alert-'+notification.type]\" ng-repeat=\"notification in notifications.getCurrent()\" notification-fadeout><button class=close ng-click=removeNotification(notification)>×</button> {{notification.message}}</div>")}]),angular.module("reg/agreement.tpl.html",[]).run(["$templateCache",function(e){e.put("reg/agreement.tpl.html",'<div class=about><div class=header><div class="logo same-content"><a href=/#/home><em class=eqf-love></em></a></div></div><div class="main clearfix mt20"><div class="reg_xy_Box same-content p20"><h1>'+your_webname+"注册协议</h1><div class=reg_xy><p>甲方：北京中网"+your_webname+"科技有限公司</p><p>乙方：“"+your_webname+"”的注册用户（以下简称用户或“您”）</p><p class=para>您确认：在您开始“"+your_webname+"”产品试用或购买前，您已充分阅读、理解并接受本协议的全部内容，一旦您开始使用本服务或完成购买流程，即表示您同意遵循本协议之所有约定。不具备前述条件的，您应立即终止注册或停止使用本服务。</p><p class=para>甲方有权随时对协议内容进行单方面的变更，并在eqxiu.com上公布，无需另行单独通知；若您在本协议内容公告变更后继续使用本服务，表示您已充分阅读、理解并接受修改后的协议内容，也将遵循修改后的协议内容使用本服务；若您不同意修改后的协议内容，您应停止使用本服务。您可以访问 http://www.eqxiu.com来了解最新版本的服务条款。</p><p>帐户注册及条款</p><p>1. 您保证具有法律规定的完全民事权利能力和民事行为能力，能够独立承担民事责任的自然人、法人或其他组织；本协议内容不会被您所属国家或地区的法律禁止。</p><p>2. 具体操作使用人应该是自然人。不允许采用注册机或者其他类似的自动化方式注册账户。</p><p>3. 当您注册时应当按网站要求填写您真实的信息及其他必要的信息以完成注册。</p><p>4. 您的登录信息只能用于一个人，不允许多人共享登录信息。</p><p>5. 您应当保护好自己的用户名及密码信息不被泄露。“"+your_webname+"”无法也不能保护因为您泄露用户名或密码导致的数据信息权益。</p><p>6. 同一个用户只能拥有一个免费账户。</p><p>7. 您应当对您的账户及所创建的内容负责，当您创建的不仅限于帐户、内容等数据，违反法律、法规及基本相关规则规定的，"+your_webname+"不承担相关法律责任。</p><p>8. 您不得恶意攻击“"+your_webname+"”服务器。</p><p>9. 您不得复制、转售或转授权任何部分或者全部的”"+your_webname+"”服务。</p><p>10. 甲方有权但并非义务关闭或删除以下内容：非法、歧视、恐吓、诽谤、色情、淫秽或者违反中国法律的。</p><p>11. 您不得以口头或者文字方式攻击（包括恐吓、报复等）甲方客户、员工、成员或本产品及服务的其他使用者。</p><p>12. 您不得上传或者发布垃圾邮件，短信，或上传计算机病毒程序或者恶意代码。</p><p>13. 如果您的账户流量恶意使用或明显超过平均用户带宽使用，我们保留停用您的账户的权利。</p><p>14. 您在本协议期间应遵守全部中国法律、法规和规章。</p><p>15. 如果甲方因乙方的任何触犯中国法律法规的行为或违反本协议的行为而承受任何损失或损害，乙方应该采取所有行动使甲方免于承担责任，并对由此产生的全部损失和损害承担赔偿责任。</p><p>16. 如果乙方存在任何触犯中国法律法规的行为或违反本协议的行为，甲方有权根据行为的严重性自行决定立即暂停或终止乙方对本服务的使用，甲方无须就服务暂停或终止对乙方承担任何责任，并且无须返还乙方已支付的费用。</p><p>付费相关条款</p><p>1. “"+your_webname+"”产品目前提供免费和付费产品供您使用，甲方有权依据市场需求调整或新推出付费产品、功能或服务。</p><p>2. 您有权自由选择决定是否使用“"+your_webname+"”中的付费产品、功能或服务。</p><p>产品服务条款</p><p>1. 甲方将以专业的方式提供产品及服务，但并不保证：1) 产品及服务满足您的所有需求或您的所有期待； 2) 产品及服务没有任何失误或缺陷，或产品及服务中的所有错误都会被修正。</p><p>2. 甲方保留不断修改调整这项服务的权利，而无需事先通知乙方。</p><p>知识产权条款</p><p>1. 您提交的各种内容版权归属于您。</p><p>2. 您应当了解并授权“"+your_webname+"”及“"+your_webname+"”许可的用户可以传播、二次编辑、分享您通过"+your_webname+"编辑生成的共享作品。</p><p>3. 甲方提供的服务及产品（包括但不限于观感、设计、图标、代码等）的版权、商标权、专利权及其他知识产权均归属于甲方。除非获得甲方明确书面允许，您不得复制、重用任何HTML/CSS, JavaScript或者任何视觉设计，也不得对甲方产品进行反向工程、分解或进行编译或其他修改。</p><p>4. 本协议中未明确授予您的权利将由甲方保留。</p><p>责任限制 在任何情况下，甲方均无须对任何间接性、后果性、惩戒性、偶然性、特殊性或刑罚性的损害(包括但不限于乙方因使用甲方服务而遭受的利润、收入损失、或预期的节约成本损失或商誉损失等）承担责任。甲方对乙方承担的全部责任总额，无论因何原因（基于合同法、侵权法或其他法规）或何种行为方式产生，始终不超过乙方在当月服务期内因使用甲方服务而已经支付给甲方的费用。</p><p>服务取消与终止条款</p><p>1. 您清楚的了解终止服务的后果。无需邮件或者电话确认，您可以在任何时候通过点击账户链接并执行相应操作来终止您的账户及删除相应的所有信息。</p><p>2. 一旦终止，所有隶属于这个账户的数据及信息将由甲方作删除处理，并且无法恢复。</p><p>3. 一旦终止账户，账户之下的用户将无法访问任何相关的服务。</p><p>其他条款</p><p>1. 您了解甲方使用第三方的运营商和网络提供商提供必要的硬件、软件、存储或网络来运行"+your_webname+"服务。甲方无需因为第三方的、或者不在甲方控制范围内的原因（如不可抗力）造成的运行问题（如服务中断、停顿、中止等）负责。</p><p>2. 如果本协议的某一条款或某一条款的一部分无效或不可执行，不影响本协议其他条款的有效性，无效或不可执行的条款将被视作已从本协议中删除。</p><p>3. 本协议受中华人民共和国法律管辖。 在执行本协议过程中如发生纠纷，双方应及时协商解决。协商不成时，任何一方均应向甲方所在地人民法院提起诉讼。</p><p>4. 若有任何疑问，请通过浏览http://www.eqxiu.com网站下方的联系方式与我们联系。</p></div></div></div></div><div ng-include=\"'footer.tpl.html'\"></div>")}]),angular.module("reg/reg.tpl.html",[]).run(["$templateCache",function(e){e.put("reg/reg.tpl.html","<div><a ng-href={{weiChatUrl}}>登录测试</a></div>")}]),angular.module("regSuccess/console/applyComMes.tpl.html",[]).run(["$templateCache",function(e){e.put("regSuccess/console/applyComMes.tpl.html",'<div class=upgrad-mes><div class=textbox-wrap><label>企业名称</label><input class=form-control type=text placeholder=企业名称 ng-model=companyInfo.name ng-blur=checkName(companyInfo) ng-class="{error:nameError}"> <span class=tips>必填</span> <span class=error_text><em ng-show=nameError>{{nameError}}</em></span></div><div class=textbox-wrap><label>企业邮箱</label><input class=form-control type=text placeholder=企业邮箱 ng-class={error:emailError} ng-model=companyInfo.email ng-blur="checkEmail(companyInfo)"> <span class=tips>必填</span> <span class=error_text><em ng-show=emailError>{{emailError}}</em></span></div><div class=textbox-wrap><label>联系人</label><input class=form-control type=text placeholder=联系人 ng-class={error:contactsError} ng-model=companyInfo.contacts ng-blur="checkcontacts(companyInfo)"> <span class=tips>必填</span> <span class=error_text><em ng-show=contactsError>{{contactsError}}</em></span></div><div class=textbox-wrap><label>联系地址</label><input class=form-control type=text placeholder=联系地址 ng-class={error:addressError} ng-model=companyInfo.address ng-blur="checkAddress(companyInfo)"> <span class=tips>必填</span> <span class=error_text><em ng-show=addressError>{{addressError}}</em></span></div><div ng-if="userMobile != 1"><div class=textbox-wrap><label>手机号码</label><input class=form-control type=text placeholder=手机号码 ng-class={error:telError} ng-model="companyInfo.mobile"> <span class=tips>必填</span> <span class=error_text><em ng-show=telError>{{telError}}</em></span></div><div><script load-script ng-src={{validateCodeUrl}}><\/script></div><div id=captcha-box></div><div class=textbox-wrap><label>验证码</label><div class=clearfix><input type=type class="form-control mobile fl" ng-class={error:codeError} placeholder=验证码 ng-model=companyInfo.code> <span class=code ng-show=!codeTip ng-click=getImageCode()><a id=submit-button>获取验证码</a></span> <span class="code enble" ng-show=codeTip>{{codeTip}}</span></div><span class=error_text><em ng-show=codeError>{{codeError}}</em></span></div></div><a class=submit-button ng-click=upgradeCompanyMessage(companyInfo)>提交信息</a></div>')}]),angular.module("regSuccess/guide.tpl.html",[]).run(["$templateCache",function(e){e.put("regSuccess/guide.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div class="reg-upgrade company" id=main><h1 ng-if="type == \'company\' && !regSuccess" class=fill-mes>还差一步，就成为企业用户了！</h1><div class="clearfix company guide-layout" ng-if="type == \'company\' && !regSuccess"><div class="fl same-img"><img ng-src={{CLIENT_CDN}}assets/images/reg-sus/conpany.svg width=420px; height=520px></div><div class="fill-msg fl"><eqd-reg-company change-location=false></eqd-reg-company></div></div><div class="reg-success guide-layout" ng-show="regSuccess || type == \'person\'"><h1 class=tips-suc><em class="eqf-clickmore icon-big"></em>恭喜，注册成功</h1><div class="guide-list clearfix" ng-show=regSuccess><div class=img><img ng-src={{CLIENT_CDN}}assets/images/reg-sus/phone.svg alt=""></div><div class=guide-decoration><h2>海量企业专属样例，供您选择</h2><h2 class=next-title>简单替换，立即生成炫酷场景</h2><a href=/#/scene class=submit-button>马上制作</a></div></div><div class="guide-list clearfix" ng-if="type == \'person\'"><div class=img><img ng-src={{CLIENT_CDN}}assets/images/reg-sus/phone.svg alt=""></div><div class=guide-decoration><h2>海量样例 轻松制作</h2><h2 class=next-title>一键分享 玩转朋友圈</h2><a href=/#/scene class=submit-button>马上制作</a></div></div><div class="guide-list clearfix" ng-if="type == \'person\'"><div class=img><img ng-src={{CLIENT_CDN}}assets/images/reg-sus/conpany2.svg alt=""></div><div class="guide-decoration service"><h2>免费升级企业会员，体验更多优质服务</h2><p>企业专属样例免费用/精准营销渠道任意挑/推广数据+传播效果轻松查</p><a href=/#/privilege class=submit-button>免费升级企业会员</a></div></div><div class="guide-list clearfix"><div class=img><div class=mt20 qr-code qr-url="http://a.app.qq.com/o/simple.jsp?pkgname=cn.knet.eqxiu"></div></div><div class="guide-decoration sao-ma"><h2>扫码下载'+your_webname+'APP</h2><h2 class=next-title>轻松制作 随时分享</h2></div></div><div class=verson ng-show=regSuccess><em class="eqf-huangguan icon-big"></em><div class=verson-title><h1 class=mb20>'+your_webname+'为企业准备了更多高级版本，快来升级体验吧！</h1><p>因为优秀，所以不同</p></div><ul class="verson-list clearfix"><li class="mr20 verson{{$index + 2}}" ng-repeat="ver in verson"><div class=verson-msg><p>{{ver.name}}</p><p class=price>{{ver.price}}</p><p>{{ver.time}}</p></div><div class=decoration><p ng-bind-html=ver.decoration></p></div><a class=submit-button ng-click=upgradeCompany(ver.type)>升级</a></li></ul></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("region/region.tpl.html",[]).run(["$templateCache",function(e){e.put("region/region.tpl.html",'<div id=region><header class=text-center></header><div class="same-content text-center pt90 pb90"><h1 class=text-color>市场需求</h1><p class=mt20>错过楼市，错过股市，错过电商，还要错过H5吗？！<br>全民低头玩手机的时代，H5在中国火到爆的现在，移动场景自营销管家横空出世！<br>移动互联网的快速发展、微信类社交产品用户的爆发式增长为企业营销提供了自我营销成长的土壤；企业对于自营销的视觉、交互和营销效果需求也发生了井喷式的增长，一款简单易用，便于管理的自营销工具恰恰成为企业刚需。'+your_webname+'0代码0设计+极速制作+多渠道推广，立即上手，分分钟搞定。</p></div><div class="area pt90 pb90"><h1 class="text-center same-content"><em>'+your_webname+"地位</em><span></span></h1><p class=text-center style=margin-top:30px>行业的领先地位，用户的好评口碑，"+your_webname+'在移动互联网的大潮中乘风破浪、大展身手，俨然取得了有目共睹的成绩和赞许。</p><ul class="item clearfix same-content pt20"><li><em>1</em><span></span>注册用户1000万。</li><li><em>4</em><span></span>《互联网周刊》2015年度APP排行榜：创新APP榜眼。</li><li><em>2</em><span></span>Alexa中国排名前1000名。</li><li><em>5</em><span></span>App store排行榜：稳居免费商业应用前十。</li><li><em>3</em><span></span>模板样例3000+，图片素材7000+，音乐素材400+，版权素材3000+。</li><li><em>6</em><span></span>获得千万美元级别A轮融资。</li></ul></div><div class="mt20 mb20"><div class="same-content request"><h1 class=text-color>'+your_webname+"合作伙伴资质要求</h1><p>市场广阔，品牌优秀，产品领先，"+your_webname+"邀您成为战略合作伙伴，合作发展，互利共赢。<br>（1） 注册资金100万以上，从事互联网产品经营3年以上，年营业额2000万以上。<br>（2） 拥有"+your_webname+"产品的专职销售人员30人以上。<br>（3） 具备一定的行业、区域人脉资源、客户资源，具有长期合作发展的前瞻意识，与"+your_webname+"共同成长<br>（4） 将"+your_webname+'产品列为主要经营项目，具有规范的公司管理制度。良好的经营信誉，无不良记录。</p></div></div><div class="product text-center"><img ng-src="{{CLIENT_CDN}}assets/images/area/area_06.png"></div><div class="support same-content text-center"><h1 class=text-center>销售支持</h1><ul class="clearfix teach"><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_10.png"><p>产品基础操作视频培训<br>不定期远程视频会议培训<br>行业及产品培训<br>销售交流分享会/精英集训<br>优秀服务商交流会</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_12.png"><p>公司介绍及产品宣传册<br>宣传海报/易拉宝/名片{电子模板）<br>公司装修标准指导手册<br>销售工具包/销售合同模板<br>授权服务商牌匾</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_14.png"><p>用户活动操作标准<br>活动执行步骤指导手册<br>秀客认证标准/证书模板<br>活动前期宣传支持<br>活动后期新媒体宣传</p></li></ul><ul class="clearfix jigou"><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_20.png"><p>协助推荐二级代理机构<br>成功销售模式推广</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_22.png"><p>5X8客服咨询<br>专属销售支持人员</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_24.png"><p>产品对接API开放<br>场景设计技术研讨</p></li><li><img ng-src="{{CLIENT_CDN}}assets/images/area/area_26.png"><p>销售目标指导/激励<br>销售行为规范</p></li></ul></div><div class="user text-center"><div class=same-content><h1>'+your_webname+"用户</h1><p>他们都选择了"+your_webname+'</p><ul class=clearfix><li><img ng-src="{{CLIENT_CDN}}assets/images/area/China Daily.png" width=145px height="145px"><p>China Daily</p></li><li><img ng-src={{CLIENT_CDN}}assets/images/area/china.png width=145px height="145px"><p>中国银行</p></li><li><img ng-src={{CLIENT_CDN}}assets/images/area/shunfeng.png width=145px height="145px"><p>顺丰</p></li><li><img ng-src={{CLIENT_CDN}}assets/images/area/wangyi.png width=145px height="145px"><p>网易</p></li><li><img ng-src={{CLIENT_CDN}}assets/images/area/tengxun.png width=145px height="145px"><p>腾讯</p></li><li><img ng-src={{CLIENT_CDN}}assets/images/area/baoma.png width=145px height="145px"><p>宝马</p></li></ul></div></div><div class="contact same-content text-center"><h1>联系方式</h1><p>来电垂询：010-56187707<br>有意者请下载申请书发送至sales@eqxiu.com<br>我们期待与您合作！</p><a class="btn btn-primary" target=_blank ng-href={{CLIENT_CDN}}download/shenqingshu.doc download='+your_webname+'服务商申请书>下载申请书</a></div><div id=activeTwo style=padding-bottom:0><div class="backHome ng-scope"><a href=http://eqxiu.com target=_blank><span class=eqf-scene-company></span> <span>官网首页</span></a></div></div></div>')}]),angular.module("scene/buySample.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/buySample.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>购买样例</h4></div><div class="dialog-contain pay-sample-content"><div class="dialog-content pay-XD" ng-if=!modal.bFlagMember><p>当前选择消耗{{modal.tplPrice}}秀点，账户持有{{modal.userXd || 0}}秀点</p><p class=pay-XD-explain><span>购买企业会员，尊享免费使用当前样例特权</span>，<span>点击</span><a target=_blank href=/#/privilege>了解详情</a></p></div><div class="dialog-content pay-count" ng-if=modal.bFlagMember><form name=resetForm novalidate class=form-horizontal><div class=pay-select><ul class=pay-select-list><li ng-init="modal.sampleType = 1"><div class=radio-square ng-class="{checked:modal.sampleType == 1}"><em></em> <input type=radio name=sampleType id=XDCast ng-model=modal.sampleType value=1></div><label for=XDCast>当前选择消耗1次,剩余免费使用次数{{modal.sampleCount || 0}}次</label></li><li><div class=radio-square ng-class="{checked:modal.sampleType == 0}"><em></em> <input type=radio id=donate name=sampleType ng-model=modal.sampleType value=0></div><label for=donate>当前选择消耗{{modal.tplPrice}}秀点,账户持有{{modal.userXd || 0}}秀点</label></li></ul></div></form></div></div><div class=modal-footer><a class=modal-cancle ng-click=cancel() ng-disabled=form.$invalid>取消</a> <a class="btn btn-primary" ng-click=confirm() ng-disabled=form.$invalid>立即购买</a></div>')}]),angular.module("scene/console.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console.tpl.html","<div><div ng-show=\"comp_type=='bg'\" ng-include=\"'scene/console/bg.tpl.html'\" ng-controller=BgConsoleCtrl></div></div>")}]),angular.module("scene/console/angle-knob.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/angle-knob.tpl.html","<div class=sliderContainer><div class=sliderKnob></div></div>")}]),angular.module("scene/console/anim.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/anim.tpl.html",'<div ng-if="activeTab == \'anim\'" ng-controller=AnimConsoleCtrl><div style=height:410px><div eqd-scroll style="height: 100%" disable-mouse=true prevent-exception=true><div class=anim_area><div class=anim-panels style=padding-top:10px ng-if=animations.length><section ng-repeat="animation in animations track by $index"><div class="style_list pr20 pl20 border-bottom" ng-class="{\'border-top\':($index==0 || opea.show),active:opea.show}" ng-init="opea.show=true" ng-click="opea.show=!opea.show"><em>动画</em>&nbsp;{{$index+1}}<div class="animation-opera fr"><span title=删除此动画 class=eqf-wrong style=margin-right:10px ng-click="removeAnim($index, $event)"></span> <b class=caret ng-if=opea.show></b> <b class="caret off" ng-if=!opea.show></b></div></div><div class="pl20 pr20" style=background-color:#fff><div ng-if=opea.show class="style_list_angel clearfix"><label>方式</label><div class="flo_lef touming"><select style="width:100px;border:1px solid #C9C9C9" ng-model=types[$index] ng-change="animation.type=types[$index].id; changeAnimation(animation, $index)" ng-options="animType.name group by animType.cat for animType in animTypeEnum"><option value=-1>无</option></select></div></div><div ng-if="opea.show && animation.type == 7" class="style_list_angel clearfix"><label>速度</label><div class="clearfix touming"><div class=num style=text-align:right;margin-top:4px><input type=checkbox value="" ng-model=animation.linear ng-true-value=1 onfocus=this.select() style="margin-right:2px;margin-top:0px"><em>匀速</em></div></div></div><div ng-if="animation.type != -1 && animation.type != null && opea.show"><form role=form><div class="style_list_angel clearfix" ng-show="animation.type == 1 || animation.type == 2 || animation.type == 17 || animation.type == 19"><label style=padding-top:8px>方向</label><div class="flo_lef touoming"><select style=color:#999 class=form-control ng-model=directions[$index] ng-change="animation.direction=directions[$index].id;changeAnimation(animation, $index)" ng-options="animDirection.name for animDirection in animDirectionEnum"></select></div></div><div class=style_list_angel ng-show="animation.type != \'typer\'"><label>时间</label><div class="touming clearfix"><p class=num><input limit-input class="input_kuang short" type=number step=0.1 min=0 max=20 ng-model=animation.duration onfocus="this.select()"></p><div class=slider ui-slider-t ng-model=animation.duration fixed=1 min=0 max=20></div></div></div><div class=style_list_angel ng-show="animation.type == \'typer\'"><label>间隔时间</label><div class="touming clearfix"><p class=num><input limit-input class="input_kuang short" type=number step=0.1 min=0 max=20 ng-model=animation.interval onfocus="this.select()"></p><div class=slider ui-slider-t ng-model=animation.interval fixed=1 min=0 max=20></div></div></div><div class=style_list_angel><label>延迟</label><div class="touming clearfix"><p class=num><input limit-input class="input_kuang short" type=number step=0.1 min=0 max=20 class=form-control onfocus=this.select() ng-model="animation.delay"></p><div class=slider ui-slider-t ng-model=animation.delay fixed=1 min=0 max=20></div></div></div><div class=style_list_angel ng-show="animation.type != \'typer\'"><label>次数</label><div class="touming clearfix"><p class=num style=float:left;margin-right:10px><input ng-disabled=animation.count limit-input class="input_kuang short" type=number min=1 max=10 class=form-control ng-model=animation.countNum onfocus="this.select()"></p><div class=checkbox-square style=margin-left:50px ng-class="{checked: animation.count}"><em class=eqf-yes2></em> <input type=checkbox ng-model=animation.count></div><em>循环</em></div></div></form></div></div></section></div><div class=add-anim><a class="btn btn-sm green mr20" style=float:left ng-click=addAnim($event)><span class=eqf-plus2></span>添加动画</a> <a class="btn btn-sm blue" ng-click=previewAnim($event)><span class=eqf-play2></span>预览动画</a></div></div></div></div><div class=btn-option><a class="btn btn-sm green" ng-click=cancel()>确定</a> <a class="btn btn-sm out-red" ng-click=clear()>清除动画</a></div></div>')}]),angular.module("scene/console/bg.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/bg.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>素材库 <a ng-show="fileType ==\'0\'" class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1921&page=1&extra=#pid6652"></a> <a ng-show="fileType ==\'1\'" class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1934&page=1&extra=#pid6696"></a> <span ng-show=!authError class=action>单击使用</span> <span ng-show=authError class=action>{{authError}}</span></h4></div><div class=dialog-contain><div class="dialog-content bg_console sound-flex clearfix"><div class=cate-title><ul class="nav tabs-left" style=padding-top:0><li ng-class="{active: systemImages}"><a href="" ng-show="fileType == \'0\'" ng-click="switchToSystemImages(\'true\');getSystemFiles();" data-toggle=tab>背景库</a> <a href="" ng-show="fileType == \'1\'" ng-click="switchToSystemImages(\'true\');getSystemFiles();" data-toggle=tab>图片库</a></li><li ng-class="{active: !systemImages && !userTagId}"><a href="" ng-show="fileType == \'0\'" ng-click="switchToSystemImages(\'false\');getUserFiles(0)" data-toggle=tab>我的背景</a> <a href="" ng-show="fileType == \'1\'" ng-click="switchToSystemImages(\'false\');getUserFiles(0)" data-toggle=tab>我的图片</a></li><li class="add-tag clearfix" ng-if="type != \'p\' && type !=\'n\'"><a ng-click=createTag(); style=border-bottom:none><span class=eqf-plus></span>&nbsp;<em>添加分组</em></a></li><li class="my-bg-upload bg-img-upload blue"><div class="hint--top hint--rounded" data-hint=大小不超过3M，支持格式：jpg、png、gif，一次最多上传6张><span class=eqf-update></span><em>上传</em> <input type=file nv-file-select="" uploader=uploader options multiple style="width:200px;height: 55px;overflow: hidden;position: absolute;top: 0;right: 0;left:-70px;bottom:0;cursor: pointer;opacity:0"></div></li></ul><ul class="nav tabs-left user-tabs" style=padding-top:0><li ng-class="{active: userTagId == tag.id && !systemImages}" ng-repeat="tag in tagList" ng-click="switchToSystemImages(\'false\');getUserFiles(tag.id)" ng-hover resource=tag><a href="" data-toggle=tab><span class="eqf-wrong2 del-tag" ng-if="tag.show && type != \'p\'\n                         && type != \'n\'" style=float:right;margin-top:15px;opacity:0.8 ng-click="deleteTag(tag.id, $index)"></span> {{tag.name}}</a></li></ul></div><div class="cate-list bg-rig"><div id=bg_contain><div class="tab-pane active tab-head" ng-show=systemImages><div class=img_list><div class="category_list clearfix"><ul class="category_list_container clearfix"><li class=category_item ng-class="{\'active\': sysCatId == \'0\'}" ng-click="getSysCatAndList(\'0\')"><span>最新</span></li><li class=category_item ng-class="{\'active\': sysCatId == sysCategory.value}" ng-repeat="sysCategory in sysCategoryList|filter:{\'lang\':\'zh_CN\'}" ng-click=getSysCatAndList(sysCategory.value)>{{sysCategory.name}}</li></ul></div><div class="cat_two_list clearfix"><ul><li ng-repeat="sysTag in sysTagList" ng-class="{\'active\': sysTagId == sysTag.id}" ng-click=getSysImgByTag(sysTag.id); style=cursor:pointer>{{sysTag.name}}</li><li ng-if="bFlagType == \'3\' && sysCatId==\'1301\'" class=category_item ng-class="{\'active\': sysTagId == \'pure\'}" ng-click="getSysImgByTag(\'pure\')"><span>纯色背景</span></li></ul></div></div></div><div ng-show="userTagId==\'history\'" class="tab-pane active tab-head"></div><div class="tab-pane active tab-head" ng-show="!systemImages && type != \'p\' && type != \'n\' && userTagId!=\'history\'"><div class=my-bg><span style=float:right ng-if=!userTagId><a class=manage-all ng-show=!mangeObj.manageAll ng-click="mangeObj.manageAll = true;"><em>管理</em></a> <a class=mul-del ng-show=mangeObj.manageAll ng-click=deleteFile();><em>删除</em></a> <a class=cancel-all ng-show=mangeObj.manageAll ng-click="cancelSelect();mangeObj.manageAll = false;"><em>取消选择</em></a></span> <span style=float:right ng-if=userTagId><span ng-if="userTagId && mangeObj.manageAll" style=cursor:pointer class=cancel-all ng-click=unbindTag(userTagId);>移除</span> <a class=cancel-all ng-show=mangeObj.manageAll ng-click="cancelSelect();mangeObj.manageAll = false;"><em>取消选择</em></a> <a class=manage-all ng-show=!mangeObj.manageAll ng-click="mangeObj.manageAll = true;"><em>管理</em></a></span> <span><a class="assign-group drop-area" ng-click="showObj.showGroup=!showObj.showGroup"><em>分组</em>&nbsp;&nbsp;&nbsp; <span class=eqf-down2></span></a></span></div><div class=group-panel ng-if="showObj.showGroup && tagList.length" auto-close><ul><li ng-repeat="tag in tagList" ng-click=assignTag(tag.id)>{{tag.name}}</li></ul></div></div><div class=img_list><div class="img_list_container photo_list"><ul class="img_box clearfix" ng-class="{\'img-box-his\':userTagId==\'history\'}"><li ng-if="!systemImages && uploader.queue.length" class=imgList ng-repeat="item in uploader.queue.slice().reverse()"><div class=progress style="position: absolute;top: 50%;margin-top: -10px;width: 90%;margin-left: 5%"><div style=background-color:#08a1ef class=progress-bar role=progressbar ng-style="{ \'width\': item.progress + \'%\' }"></div></div></li><li id=userlist ng-if="sysTagId != \'pure\'&& sysCatId != \'pure\'" class=imageList ng-repeat="img in imgList" ng-click="replaceByClick(img, $shape, $event);switchSelect(img, $shape, $event);" resource=img style="\'position: relative"><span ng-show="img.libType == 1" class=imagesYiTo><a href="http://www.yituw.com/searchs/DoSearch/?search=search&Srange_zh=chinese+new+year+2016&mode=&keyword=chinese+new+year+2016&Srange=" target=_blank tooltip-placement=right tooltip=亿图网正版授权 class=YiToLogo ng-click=$event.stopPropagation();><img ng-src="{{CLIENT_CDN}}assets/images/1tu.png"></a></span> <img ng-src="{{PREFIX_FILE_HOST + img.tmbPath}}" responsive-image file=img ng-class="{\'add-shadow\': img.show && systemImages && type != \'p\' && type != \'n\'}"><div class=img-mask ng-show="type == \'p\' || type == \'n\' || ((selectedImages.length || img.show || img.selected || mangeObj.manageAll) && !systemImages)"><a class="del-file ope-img" ng-if="!mangeObj.manageAll && !userTagId && type != \'p\' && type != \'n\'" ng-click=deleteFile(img.id)><span class="eqf-wrong2 ope-icon"></span></a> <a class="sel-file ope-img" ng-class="{\'sel-active\': img.selected, \'hide-del\': mangeObj.manageAll || userTagId || type == \'p\' || type == \'n\'}"><span class="eqf-yes ope-icon"></span></a></div></li><li id=userlist class=imageList ng-repeat="img in imgList" ng-if="sysTagId == \'pure\'|| sysCatId == \'pure\'" resource=img ng-click=replaceByClick(img) ng-class="{\'add-shadow\': img.show && systemImages && type != \'p\' && type != \'n\'}"><div ng-style="{\'background-color\': img.color}" style="position: relative;height:100%;width:63px;margin: 0 auto"></div></li></ul></div></div></div></div><div class="modal-footer bg-pagination clearfix no-line"><div class="fl mr20" ng-show="numPages > 1 && userTagId!=\'history\'"><pagination style="float: left" previous-text=&lsaquo; next-text=&rsaquo; first-text=首页 last-text=尾页 max-size=5 items-per-page=pageSize total-items=totalItems ng-model=$parent.currentPage boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=$parent.toPage ng-keyup="$event.keyCode == 13 ? getImgByPage() : null"><span class=fl>页</span> <a ng-click=getImgByPage() class=go>确定</a></div></div><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=replaceImage();>确定</a></div></div></div>')}]),angular.module("scene/console/button.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/button.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>按钮名称 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=5051&extra="></a> <span class=action ng-show=!authError>每个场景只能添加一个提交按钮</span> <span ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class="modify_area tel_title tab-same clearfix" style=padding-left:30px><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style=button.btnStyle ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span></div><div class=dialog-content><form class=form-contain role=form><div class="modify_area form-list clearfix" style=""><label class=form-label style=width:106px>按钮名称</label><div class=form-input style="width: 400px;margin-left:10px"><input type=text check-count=40 ng-model=model.title ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation style="width: 296px"></div></div></form></div></div><div class="dialog-contain rating-content"><div class="form_console dialog-content rating-preview-design"><div class="modify_area rating rating-design"><div class=rating-group><span class=title>提示类型</span><div class=rating-choice><div class=btn-group><label class="btn btn-rating" ng-model=model.layout btn-radio="\'rating-l\'" style="line-height: 40px;width:80px" ng-click="model.showPic=false;">纯文字</label><label class="btn btn-rating" btn-radio="\'rating-m\'" style="line-height: 40px;width:80px;margin-left: 28px" ng-click="model.showPic=true;" ng-model=model.layout>上图下文</label><label class="btn btn-rating" ng-model=model.layout btn-radio="\'rating-s\'" style="line-height: 40px;width:80px;margin-left: 28px" ng-click="model.showPic=true;">上文下图</label></div></div></div><div class=rating-group><span class=title>提示信息</span><div class=rating-choice><input type=text ng-model=model.text class=form-control check-count=50 id=ratingTitle stop-propagation placeholder="谢谢您的参与!"></div></div><div class=rating-group style="position: relative"><div class=checkbox-square ng-class="{checked: model.checkedLink}" style="position: absolute;left:-34px"><em class=eqf-yes2></em> <input type=checkbox ng-model=model.checkedLink name=iCheck></div><span class=title>文字外链</span><div class=rating-choice><input type=text class=form-control ng-model=model.link check-count=50 id=ratingTitle stop-propagation placeholder=链接地址 ng-disabled="!model.checkedLink"></div></div><div class=rating-group ng-show=model.showPic><span class=title>提示图片</span><div class=rating-choice><a class="btn blue mr20 upload" ng-click=openImageModal()>上传</a><div class=see-image ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + model.imgSrc) + \')\',\'background-size\':\'cover\'}" style="top:340px;left:240px; width:120px;height: 120px;background-color:rgba(0,0,0,0)"></div></div></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel() ng-init="feedback=false" ng-click="feedback=true">取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/category.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/category.tpl.html",'<div class=modal-header><span>创建分类</span></div><div class="modal-body add-new-cat"><input type=text class=form-control ng-model=category.name placeholder=分类名称 autofocus stop-propagation></div><p ng-show=authError style=text-align:center;font-size:12px;color:#ff0000>{{authError}}</p><div class="btn-contain btn-small"><a ng-click=confirm() class="btn-main login">确定</a> <a ng-click=cancel(); class=btn-grey0>取消</a></div>')}]),angular.module("scene/console/chartStyle.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/chartStyle.tpl.html",'<div class="style_list_angel charts_group clearfix"><div ng-if="elemDef.properties.chartType==\'pie\'"><label>扇区个数</label><select class=chart-select ng-model=charts.sectorNum><option value=2>2</option><option value=3>3</option><option value=4>4</option><option value=5>5</option><option value=6>6</option><option value=7>7</option><option value=8>8</option></select></div><div class="style_list_angel clearfix"><label>标题名</label><input type=text ng-model=charts.chartTitle style="width:150px"></div><div class="style_list_angel clearfix"><label>图例设置</label><select legend-style class=chart-select ng-model=charts.legPosition><option value=position-align>横向排列</option><option value=position-left>纵向居左</option><option value=position-right>纵向居右</option><option value=position-none>不显示</option></select></div><div class="style_list_angel clearfix"><label style="width: 85px">标签字体颜色</label><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.options.scaleFontColor}" ng-model=charts.options.scaleFontColor colorpicker=rgba></a> <input class=flo_right style=width:90px style-input elem-id={{elemDef.id}} ng-model=charts.options.scaleFontColor type="text"></div></div><table class=pie-table ng-if="elemDef.properties.chartType==\'pie\'"><tr ng-repeat="segment in charts.segments"><td><input class=data-label type=text ng-model=segment.label ng-change="maxLength20()"></td><td><input class=data-value type=text ng-model="segment.value"></td><td ng-if="elemDef.properties.chartType==\'pie\'"><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: segment.color}" ng-model=segment.color colorpicker=rgba y={{scrollTop}}></a></div></td></tr></table><a ng-if="elemDef.properties.chartType!=\'pie\'" class="btn btn-primary" ng-click=showEditDataView(); style="margin-top: 10px">编辑表单数据</a></div>')}]),angular.module("scene/console/chartViewEdit.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/chartViewEdit.tpl.html",'<div class=viewData><div class=explain>表格中的一行代表x轴上一个关键点数；一列代表一个类型的数据</div><table id=chart-table ng-if="elemDef.properties.chartType!=\'pie\'"><tr><td>图例名</td><td><input type=text ng-model=charts.lengends[0] ng-change="maxLength20()"></td><td><input type=text ng-model=charts.lengends[1] ng-change="maxLength20()"></td><td><input type=text ng-model=charts.lengends[2] ng-change="maxLength20()"></td></tr><tr><td>填充色</td><td><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.fillColors[0]}" ng-model=charts.fillColors[0] colorpicker=rgba></a></div></td><td><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.fillColors[1]}" ng-model=charts.fillColors[1] colorpicker=rgba></a></div></td><td><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: charts.fillColors[2]}" ng-model=charts.fillColors[2] colorpicker=rgba></a></div></td></tr><tr ng-repeat="segment in charts.segments"><td><input type=text ng-model=segment.label ng-change="maxLength20()"></td><td><input type=text ng-model="segment.value1"></td><td><input type=text ng-model="segment.value2"></td><td><input type=text ng-model="segment.value3"></td></tr></table><a class="btn btn-sm btn-chart green" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/compstyle.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/compstyle.tpl.html",'<div class="style_list border-bottom pl20" ng-click="openExpore(\'showSetting\')"><span>填空设置</span><b class=caret ng-show=showSetting></b><b class="caret off" ng-show=!showSetting></b></div><div class=style_con_hei ng-show=showSetting><div class="style_list_angel clearfix"><label>名称</label><div class="color_select clearfix"><input class=flo_right check-count=16 style=width:140px ng-model=setModel.setlabel type="text"> <span class=countSpan>{{(setModel.setlabel?countCharacters(setModel.setlabel.trim()):0)}}/16</span></div></div><div class="style_list_angel clearfix"><label>状态</label><div class="color_select clearfix"><select style="width:140px;border:1px solid #C9C9C9;float: right" ng-model=setModel.setstatus ng-options="status.value as status.name for status in statusArr"></select></div></div><div class="style_list_angel clearfix"><label>备注</label><div class="color_select clearfix"><input class=flo_right style=width:140px ng-model=setModel.setremark type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type==2 || elemDef.type==201"><label>字间距</label><div class="color_select clearfix"><select style="width:140px;border:1px solid #C9C9C9;float: right" ng-model=cssModel.letterSpacing ng-options="wordLine.value as wordLine.name for wordLine in wordLineList"></select></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type==2 || elemDef.type==201" comp-style-set elem-id={{elemDef.id}} css-item={{cssModel}}><div class="css-font hint--bottom hint--rounded" data-hint=加粗 ng-click=bold();><i class=eqf-b></i></div><div class="css-font hint--bottom hint--rounded" data-hint=倾斜 ng-click=italic()><i class=eqf-I></i></div><div class="css-font hint--bottom hint--rounded" data-hint=下划线 ng-click=underLine();><i class=eqf-U></i></div><div class="css-font hint--bottom hint--rounded" data-hint=删除线 ng-click=delLine();><i class=eqf-del2></i></div><div class="css-font hint--bottom hint--rounded" data-hint=居左 ng-click="textAlign(\'left\');"><i class=eqf-leftword></i></div><div class="css-font hint--bottom hint--rounded" data-hint=居中 ng-click="textAlign(\'center\');"><i class=eqf-minddleword></i></div><div class="css-font hint--bottom hint--rounded" data-hint=居右 ng-click="textAlign(\'right\');"><i class=eqf-rightword></i></div><div class="css-font hint--bottom hint--rounded" data-hint=添加超链接 ng-click=addLink();><i class=eqf-link></i></div><div class="css-font hint--bottom hint--rounded" data-hint=清除超链接 ng-click=removeLink()><i class=eqf-linkout></i></div></div></div>')}]),angular.module("scene/console/counter.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/counter.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>计数 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13239&page=1&extra=#pid104204"></a> <span class=action ng-show=!authError>可以更换自己的图标</span> <span ng-show=authError>{{authError}}</span></h4></div><div class="dialog-contain counter"><div class=tab-same><span ng-class="{\'spanborder\': model.properties.icon == \'eqf-love\'}"><a ng-click="chooseEqfont(\'eqf-love\')"><span class=eqf-love></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-good\'}"><a ng-click="chooseEqfont(\'eqf-good\')"><span class=eqf-good></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-flower2\'}"><a ng-click="chooseEqfont(\'eqf-flower2\')"><span class=eqf-flower2></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-vote\'}"><a ng-click="chooseEqfont(\'eqf-vote\')"><span class=eqf-vote></span></a></span><div ng-class="{\'spanborder\': model.properties.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint=上传图片大小不超过3M，支持上传格式：jpg、png、gif ng-click=openImageModal()><em class=eqf-top-pic style=font-size:16px></em><em>自定义</em></div></div><div class="form_console dialog-content"><div class=modify_area><div class=counter-group ng-show=model.properties.imgSrc><span class=title>计数图标</span><div class="form-image btn-small counter-choice"><img style="width: 115px;height: 115px" ng-src="{{PREFIX_FILE_HOST + model.properties.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture" ng-click=openImageModal()>更换图片</a></div></div><div class=counter-group><span class=title>颜色</span><div class=counter-choice><a class=color-picker ng-style="{backgroundColor: model.properties.color}" ng-model=model.properties.color colorpicker=rgba></a> <input class=color-picker-input ng-model=model.properties.color type="text"></div></div><div class=counter-group><span class=title>字号</span><div class=counter-choice><div class=btn-group><label class="btn btn-counter" ng-model=model.properties.size btn-radio="\'counter-l\'">大</label><label class="btn btn-counter" ng-model=model.properties.size btn-radio="\'counter-m\'">中</label><label class="btn btn-counter" ng-model=model.properties.size btn-radio="\'counter-s\'">小</label></div></div></div><div class=counter-group><span class=title>布局</span><div class=counter-choice><div class=btn-group><label class="btn btn-counter" ng-model=model.properties.layout btn-radio="\'counter-lr\'">左右</label><label class="btn btn-counter" ng-model=model.properties.layout btn-radio="\'counter-tb\'">上下</label></div></div></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/cropimage.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/cropimage.tpl.html",'<div class="dialog-contain cropimage"><div class=dialog-head><h1>图片裁切</h1><p style=margin-top:0>请根据您的需要，点击自定义或匹配单签上方按钮进行裁切</p></div><div class="crop-content dialog-content"><div class=crop-control><ul><li ng-class="{active: !fit}"><div class=pl><div class=check ng-click="fit = false"></div><div class="cha text-center">自定义</div></div><div class=pr><div class="kuan cha" ng-show=!fit>宽度: <span class=cropWidth></span></div><div class="kuan cha" ng-show=!fit>高度: <span class=cropHeight></span></div><div class="kuan cha"><input type=checkbox ng-disabled=fit ng-model="lockRatio">锁定当前比例</div></div></li><li ng-class="{active: fit}"><div class=pl><div class=check ng-click="fit = true"></div><div class="cha text-center">匹配当前</div></div><div class=pr><div class="kuan cha" ng-show=fit>宽度: <span class=cropWidth></span></div><div class="kuan cha" ng-show=fit>高度: <span class=cropHeight></span></div><div class="kuan cha">匹配当前图片框比例</div></div></li><li class="crop-btn fr"><a class=btn-main href="" ng-click=crop()>确定</a> <a class=btn-grey0 style=margin-top:20px href="" ng-click=cancel()>取消</a></li></ul></div><div class=image_crop><img id=target></div></div></div>')}]),angular.module("scene/console/customActivities.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/customActivities.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>企业定制活动</h4></div><div class="modal-body invoice" style="height:415px;overflow: hidden;padding:20px 20px 0 20px"><form class=form-horizontal><div class="form-group clearfix"><label style=line-height:30px;text-align:center class=col-sm-3>活动主题</label><div class=col-sm-8><input type=text ng-disabled=formDis class=form-control ng-model=active.title maxlength=24 required></div></div><div class="form-group clearfix"><label style=line-height:30px;text-align:center class=col-sm-3>活动时间</label><div class=col-sm-4><p class="input-group datepicker"><input type=text class=form-control datepicker-popup=yyyy/MM/dd ng-model=active.startDate is-open=opened1 max-date=active.endDate datepicker-options="{\'formatYear\':\'yy\',startingDay:1}" ng-disabled=formDis date-disabled="disabled(date, mode)" ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=formDis ng-click="opened1 = true;opened=false;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div><div style="float:left;line-height: 30px">-</div><div class=col-sm-4 style=padding-left:10px;padding-right:20px><p class="input-group datepicker"><input type=text class=form-control ng-disabled=formDis datepicker-popup=yyyy/MM/dd ng-model=active.endDate min-date=active.startDate is-open=opened datepicker-options="{\'formatYear\':\'yy\',startingDay:1}" date-disabled="disabled(date, mode)" ng-required=true close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-disabled=formDis ng-click="opened = true;opened1=false;$event.stopPropagation();$event.preventDefault();"><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></div><div class="form-group clearfix" id=container><label style=line-height:30px;text-align:center class=col-sm-3>活动描述</label><div class=col-sm-8><span class=mr20 ng-if=active.introductionName>{{active.introductionName}}<em class=eqf-wrong style=margin-left:10px;cursor:pointer ng-click=removeIntro()></em></span><div class="btn blue mr20 upload" style="cursor: pointer;position: relative" ng-disabled=formDis qiniu-upload-directive id=pickfiles resource-type=resourceType tag-id=userTagId file-type=fileType token-type="\'attach\'">上传</div></div></div></form></div><div class="modal-footer ml20 mr20"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=ok()>确定</a></div>')}]),angular.module("scene/console/dropdown.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/dropdown.tpl.html",'<div ng-if="activeTab == \'dropdown\'" ng-controller=DropdownConsoleCtrl><div class=styleDropdown><section ng-show="elemDef.type ==\'z\'"><div class=mainAttribute><div class=component ng-show=isTplEditor><label class=componentLabel>填空名称</label><input class=flo_right style="width: 165px" check-count=16 ng-model=setModel.setlabel type="text"> <span class=countSpan>{{(setModel.setlabel?countCharacters(setModel.setlabel.trim()):0)}}/16</span></div><div class=component ng-show=isTplEditor><label class=componentLabel>填空状态</label><select class=flo_right style="border:1px solid #C9C9C9;width:165px" ng-model=setModel.setstatus ng-change="" ng-options="status.value as status.name for status in statusArr"></select></div><div class=component ng-show=isTplEditor><label class=componentLabel>填空备注</label><input class=flo_right style="width: 165px" ng-model=setModel.setremark type="text"></div><div class=component><label class=componentLabel>默认选项</label><div><select class=componentSelect ng-change=checkPlaceholder(); ng-model=currentParam.selectedOption ng-options="option.label for option in model.choices.options"><option value="">空</option></select></div></div><div class=component><label class=componentLabel>占位文本</label><input class="flo_right placeHolderInput" type=text check-count=20 ng-model=model.placeholderText ng-disabled="currentParam.placeholderAvaiable ===false"> <span class=countSpan>{{(model.placeholderText?countCharacters(model.placeholderText.trim()):0)}}/20</span></div><div class=component style=height:37px><label class=componentLabel>必填</label><div class=checkbox-square ng-class="{checked: elemDef.required}" style="margin-top: 2px"><em class=eqf-yes2></em> <input type=checkbox ng-true-value=required ng-model=elemDef.required name=iCheck></div></div><div class=component style="margin-right: 0px;border-bottom: 0px"><div><div class=optionTitle><span text>选项</span></div><div><div eqd-scroll ng-style="{true:{\'height\':\'115px\'},false:{\'height\':\'220px\'}}[isTplEditor]" disable-mouse=true prevent-exception=true><div><div class=optionPart ng-repeat="option in model.choices.options"><input class=optionInput type=text check-count=20 stop-propagation ng-model="option.label"> <span class=optionSpan>{{(option.label?countCharacters(option.label.trim()):0)}}/20</span><div class=iconPart><a class=iconPlus><span class="eqf-plus iconBlue" ng-click=addNewOption($index)></span></a> <a class=iconMinus><span class="eqf-delete2 iconRed" ng-click=deleteTheOption($index)></span></a></div></div></div></div><div class=anim_area style="transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) translateZ(0px)"><div class=add-anim style="padding-left: 0px"><a class="btn btn-sm green mr20" style=float:left ng-click=addNewOption(model.choices.options.length)><span class=eqf-plus2></span>增加选项</a></div></div></div></div></div></div></section></div><div class=btn-option><a class="btn btn-sm green" ng-click=cancel()>确定</a> <a class="btn btn-sm out-red" ng-click=clear()>清除属性</a></div></div>')}]),angular.module("scene/console/fake.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/fake.tpl.html",'<div class=modal-footer><div class="alert alert-info" role=alert>此功能为高级账号功能，点击按钮免费申请成为高级账号！</div><a class="btn-main login" target=_blank style="width: 188px" ng-href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=77">免费成为高级账号</a></div><div class=anim_area style="padding: 0 20px 20px"><img title=点击上方按钮成为高级账号 ng-show="type==\'style\'" src="{{CLIENT_CDN}}assets/images/create/fakestyle.png"> <img title=点击上方按钮成为高级账号 ng-show="type==\'anim\'" src="{{CLIENT_CDN}}assets/images/create/fakeanim.png"></div>')}]),angular.module("scene/console/imageCrop.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/imageCrop.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{cropOption.title}} <span class=action>{{cropOption.desc}}</span></h4></div><div class="dialog-contain cropimage"><div class="crop-content dialog-content clearfix"><div class="image_crop crop-img-cut" ctype={{cropOption.type}} ng-class="{\'bg-crop\': !cropOption.showItems}"><img id=target eqx-crop-preview ng-src="{{PREFIX_FILE_HOST + cropOption.imgSrc}}"></div><div class=cut-size ng-show=cropOption.showItems><ul><li ng-repeat="item in cropOption.cropItems"><input type=radio id={{item.desc}} name=cropSize ng-model=cropOption.currentItem ng-value=item ng-change=cropItemChange(item)><label for={{item.desc}}>{{item.desc}}</label><span ng-if="item.lock != null"><input type=checkbox id=lock ng-model=item.lock ng-change=cropItemChange(item)><label for=lock>锁定</label></span></li></ul></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=ok()>确定</a></div>')}]),angular.module("scene/console/input.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/input.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>输入框组件 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1935&page="></a> <span class=action ng-show=!authError>在场景中添加输入框可以用来收集数据信息</span> <span ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class="modify_area tel_title tab-same change-title clearfix" style=padding-left:30px><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a style="border-width: 2px !important" ng-style=button.btnStyle ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span></div><div class="form_console dialog-content"><div class=modify_area><form class=form-contain><div class="form-list clearfix" style=margin-left:70px><label class=form-label>输入框名称：</label><div class=form-input><input style=width:350px;float:left type=text ng-model=model.title check-count=40 ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation><div class=checkbox-square ng-class="{checked: model.required}"><em class=eqf-clickmore></em> <input type=checkbox ng-true-value=required ng-model=model.required name=iCheck></div><label for=checkbox_required class=ml20>必填</label></div></div></form><div class="customized_container clearfix"><div class=radio-square ng-class="{checked: model.type==\'501\'}"><em></em> <input type=radio id=input_name ng-model=model.type ng-change="model.title=\'姓名\'" value=501></div><label for=input_name>姓名</label><div class=radio-square ng-class="{checked: model.type==\'502\'}"><em></em> <input type=radio id=input_phone ng-model=model.type ng-change="model.title=\'电话\'" value=502></div><label for=input_phone>电话</label><div class=radio-square ng-class="{checked: model.type==\'503\'}"><em></em> <input type=radio id=input_email ng-model=model.type ng-change="model.title=\'邮箱\'" value=503></div><label for=input_email>邮箱</label><div class=radio-square ng-class="{checked: model.type==\'504\'}"><em></em> <input type=radio id=input_text ng-model=model.type ng-change="model.title=\'文本\'" value=504></div><label for=input_text>文本</label></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/link-component.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/link-component.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>链接组件 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13069&extra"></a> <span class=action ng-show=!authError>两种链接：可以跳转到场景外部的链接，或者内部导航链接</span> <span ng-show=authError>{{authError}}</span></h4></div><div class="dialog-contain link-component"><div class=tab-same><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style=button.btnStyle ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span><div ng-class="{\'spanborder\': model.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint=上传图片大小不超过3M，支持上传格式：jpg、png、gif ng-click=openImageModal()><em class=eqf-top-pic></em><em>自定义</em></div></div><div class="link-modal dialog-content"><form class=form-contain><div class="form-list clearfix" ng-if=!model.imgSrc><label for=buttonName class=form-label>按钮名称：</label><div class=form-input><input id=buttonName class=btn-name style=width:300px type=text ng-model=model.title check-count=40 ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation></div></div><div class="form-list clearfix" ng-if=model.imgSrc><label class=form-label>按钮图片：</label><div class="form-image btn-small"><img ng-src="{{PREFIX_FILE_HOST + model.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture" style=text-align:center;font-size:12px ng-click=openImageModal()>更换图片</a></div></div><div class="form-list clearfix" style="position: relative"><label for=externalRadio class=form-label><input type=radio name=externalRadio id=externalRadio ng-model=model.url.link value=external ng-change=changed() style="margin:0px 5px 0 0"><span>网站地址：</span></label><div class=form-input><input style=width:300px type=text ng-model=model.url.externalLink name=externalLink id=externalLink placeholder=网站地址 ng-disabled="url.link == \'internal\'" ng-change="selectRadio(\'external\')" limit-link-length stop-propagation> <a style="font-size: 16px;display: inline-block; margin-top: 5px;background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px" ng-show="url.link == \'external\'" class=delete-link ng-click="removeLink(\'external\')"></a></div><a href="http://dwz.cn/" style="text-decoration: underline;color: #08A1EF;position: absolute;top: 10px;right: -30px;font-size:12px" target=_blank>生成短链接</a></div><div class="form-list clearfix"><label for=internalRadio class=form-label><input type=radio name=internalRadio id=internalRadio value=internal ng-model=model.url.link ng-change=changed() style="margin:0px 5px 0 0"><span>场景页面：</span></label><div class=form-input><eqx-select class="select-sm border-width select-contain" model=model.url.internalLink change="selectRadio(\'internal\')"><eqx-select-option value=null>选择场景页面</eqx-select-option><eqx-select-option value=page.id ng-repeat="page in pageList">{{page.name}}</eqx-select-option></eqx-select><a style="display: inline-block;font-size: 16px; background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px" ng-show="url.link == \'internal\'" ng-click="removeLink(\'internal\')"></a></div></div></form></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/link.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/link.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>链接组件 <span class=action>可以链接到场景其他页面或者链接网站地址</span></h4></div><div class=dialog-contain><div class="link-modal dialog-content"><form class=form-contain><div class="form-list clearfix"><label for=externalRadio class=form-label ng-init="url.link=\'external\'"><div class=radio-square ng-class="{checked:url.link==\'external\'}"><em></em> <input type=radio name=externalRadio id=externalRadio ng-model=url.link value=external ng-change=changed() style=margin:0px></div><em>网站地址：</em></label><div class=form-input><input class="" style=height:35px;width:300px type=text ng-model=url.externalLink name=externalLink id=externalLink placeholder="http://" ng-disabled="url.link == \'internal\'" ng-change="selectRadio(\'external\')" limit-link-length> <a style="font-size: 16px;display: inline-block; margin-top: 5px;background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px" ng-show="url.link == \'external\'" class=delete-link ng-click="removeLink(\'external\')"></a></div><a href="http://dwz.cn/" style="text-decoration: underline;color: #08A1EF;position: absolute;top: 10px;right: -30px" target=_blank>生成短链接</a></div><div class="form-list clearfix"><label for=internalRadio class=form-label><div class=radio-square ng-class="{checked:url.link==\'internal\'}"><em></em> <input type=radio name=internalRadio id=internalRadio value=internal ng-model=url.link ng-change=changed() style=margin:0px></div><em>场景页面：</em></label><div class=form-input><eqx-select class="select-sm select-contain border-width fl" model=url.internalLink change="selectRadio(\'internal\')"><eqx-select-option value=page ng-disabled="url.link == \'external\'" ng-repeat="page in pageList">{{page.name}}</eqx-select-option></eqx-select><a style="margin-left:10px;display: inline-block;font-size: 16px; background-image: url(\'assets/images/create/delete.png\'); width: 14px; height: 14px" ng-show="url.link == \'internal\'" ng-click="removeLink(\'internal\')"></a></div></div></form></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/map.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/map.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>地图</h4></div><div class=map_console><div class=search_area><div class=input-group><input type=text class=form-control ng-model=address ng-keyup="$event.keyCode == 13 ? searchAddress(address) : null" placeholder=请输入地名> <span class=input-group-btn><button ng-click=searchAddress(address) class="btn btn-default" type=button>搜索</button></span></div><h5 class=result-count ng-if=pois>搜索结果：{{pois.length}}条</h5><div class=result><div eqd-scroll style="height: 100%"><ul><li ng-class="{active:choosePoi.id==poi.id}" ng-repeat="poi in pois" ng-click=choosePosition(poi)><i class=circle>{{$index+1}}</i><h5 class=name>{{poi.name}}</h5><p class=address>{{poi.address}}</p></li></ul></div></div></div><div eqd-map class=map-contain center=$parent.center zoom=$parent.zoom bounds=$parent.bounds><eqd-map-mark position=markerP></eqd-map-mark></div></div><div class="modal-footer ml20 mr20"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=ok()>确定</a></div>')}]),angular.module("scene/console/microweb.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/microweb.tpl.html",'<div class=button_console><div class=modify_area><div>导航样式:<ul><li ng-click=selectColor(color) ng-class="{colorborder: model.color == color.backgroundColor}" style="display: inline-block; margin: 10px" ng-repeat="color in backgroundColors"><div style="width: 50px; height: 30px; margin: 10px; cursor:pointer" ng-style=color></div></li></ul></div></div><div class=divider style="margin-top: 10px; height: 1px; background: #ccc"></div><div class=modify_area><div><ul class=clearfix style=left:50%;margin-left:-160px;position:relative;height:65px><li class=title_color ng-class="{colorborder:labelIndex == $index && labelName.mousedown,selectedcolor: labelName.selected,whitecolor: labelName.color.backgroundColor == \'#fafafa\'}" ng-click="switchLabel(labelName, $index)" style="display: inline-block;float:left" ng-repeat="labelName in labelNames"><div style="margin: 10px; width:50px; height: 30px;line-height:30px; border: 1px solid #ccc; cursor: pointer" ng-style=labelName.color>{{labelName.title}}</div></li></ul></div><span class=label>导航名称：</span> <input type=text ng-model=model.title ng-change=changeLabelName() ng-keyup="$event.keyCode == 13 ? confirm() : null" placeholder=导航名称 maxlength="4"></div><div class=modify_area><span class=label>链接页面：</span><select style="width: 181px; height: 30px; display: inline-block" ng-model=model.link ng-options="page.name for page in pageList" ng-change=selectLink(model.link)></select></div><div class=modify_area style="color: #ff0000">至少选择两个标签，并分别添加链接</div></div><div class=modal-footer><a class="btn-main login" style="width: 88px" ng-click=confirm()>确定</a> <a class="btn-grey0 cancel" style="width: 88px" ng-click=cancel()>取消</a></div>')}]),angular.module("scene/console/pictures.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/pictures.tpl.html",'<div class=dialog-contain><div class=dialog-head><h1>图集组件</h1><p ng-show=!authError>图集中可以添加多张图片</p><p ng-show=authError>{{authError}}</p></div><div class=pic-contain><div class="pic-head clearfix pic-same"><div class=select-img><a ng-click=choosePic()>选择图片</a> <span>最多可选择6张图片</span></div><div class="select-style clearfix"><select ng-model=properties.picStyle ng-options="pic.desc for pic in picStyles"></select><span class=bg-color ng-style="{\'background-color\': properties.bgColor}"></span> <span class=select-bg-color colorpicker=rgba ng-model=properties.bgColor>背景颜色</span></div></div><div class="pic-img-list pic-same"><ul class=clearfix><li eqx-pictures-image-click ng-class="{hover: currentImageIndex === $index}" ng-repeat="img in properties.children track by $index"><img class=pic-img ng-src="{{PREFIX_FILE_HOST + img.src}}"> <i class=delete-img><img ng-src="{{CLIENT_CDN}}assets/images/bg_07.png"></i></li></ul></div><div class=pic-preview ng-style="{\'background-color\': properties.bgColor, width: position.width, height: position.height}"></div><div class=operation-pre><a class=cut eqx-pictures-image-crop>裁切</a></div><div class="pic-same pic-play clearfix"><div class="set-play clearfix"><span ng-show=properties.autoPlay><span class="button on" ng-click="properties.autoPlay = false"><i></i></span>已开启自动播放</span> <span ng-show=!properties.autoPlay><span class="button off" ng-click="properties.autoPlay = true"><i></i></span>已关闭自动播放</span></div><div class="btn-content btn-contain" style=padding:0><a class="btn-grey0 cancel" style=margin-right:8px ng-click=cancel()>取消</a> <a class="btn-main login" ng-click=ok()>确定</a></div></div></div></div>')}]),angular.module("scene/console/pictures1.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/pictures1.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{imageOption.title}} <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1934&page=1&extra=#pid6696"></a> <span class=action>{{imageOption.desc}}</span></h4></div><div class="dialog-contain cropimage"><div class="crop-content dialog-content clearfix"><div class=image-con style=width:100% ng-hide=imageOption.showCrop><div class=add-img ng-click="addPictures($event, 0, \'first\')"><i>点击添加图片</i><p style="padding-top: 5px;font-size: 14px"><i>（最多可添加6张图片）</i></p></div></div><div class=clearfix ng-show=imageOption.showCrop><div class=picture-img><div class=image_crop ng-class="{\'bg-crop\': !cropOption.showItems}"><img id=img_preview eqx-pictures-crop-preview index={{imageOption.currentImage.index}} ng-src="{{imageOption.currentImage.originSrc ? PREFIX_FILE_HOST + imageOption.currentImage.originSrc : PREFIX_FILE_HOST + imageOption.currentImage.src}}"></div><div class=img-abbre><ul class=clearfix><li ng-repeat="child in properties.children" ng-class="{active: imageOption.currentImage.index === $index}" ng-style="{\'background-image\':  child.originSrc ? \'url(\' + PREFIX_FILE_HOST + child.originSrc + \')\' : \'url(\' + PREFIX_FILE_HOST + child.src + \')\'}" ng-click=changePicture($index)><div class=img-set ng-show=child.src.length><div class="delete-img hint--top hint--rounded" data-hint=删除图片 ng-click=delPicture($index)><span class=eqf-wrong2></span></div><div class="abbre hint--bottom hint--rounded" data-hint=更换图片 ng-click="addPictures($event, $index)"><span class=eqf-top-pic></span></div></div><p class=eqf-plus2 ng-hide=child.src.length ng-click="addPictures($event, $index, \'more\')"></p></li></ul></div></div><div class="cut-size picture-size" ng-show=cropOption.showItems><ul><li ng-repeat="item in cropOption.cropItems"><div class=radio-square style=margin-top:7px ng-class="{checked:cropOption.currentItem== item}"><em></em> <input type=radio id={{item.desc}} name=cropSize ng-model=cropOption.currentItem ng-value=item ng-change=cropItemChange(item)></div><label for={{item.desc}}>{{item.desc}}</label><span ng-if="item.lock != null"><input type=checkbox id=lock ng-model=item.lock ng-change=cropItemChange(item)><label for=lock>锁定</label></span></li></ul><ul style=margin-top:10px class=picture-set><li class=clearfix><span class="switch-circle on" ng-class="{on: properties.autoPlay, off: !properties.autoPlay}" ng-click="properties.autoPlay = !properties.autoPlay"><i></i></span>{{properties.autoPlay ? (\'自动切换\') : (\'手动切换\')}}</li><li><p><i>切换时间：</i>{{properties.interval / 1000}}<i>秒</i></p></li><li class=switch-time style="padding-top: 5px"><div ui-slider-t min=1000 max=5000 step=1000 class=slider ng-model=properties.interval ng-class="{disable: !properties.autoPlay}"></div><div class=time-mark ng-hide=properties.autoPlay></div></li><li><p>切换动画</p></li><li><eqx-select class="select-sm border-width select-contain" model=properties.picStyle change=getMyScenes()><eqx-select-option value=pic ng-repeat="pic in picStyles">{{pic.desc}}</eqx-select-option></eqx-select></li></ul></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel() ng-style="{\'margin-left\': imageOption.showCrop ? 25 : 0}">取消</a> <a class="btn btn-primary" ng-click=ok() ng-show=imageOption.showCrop>确定</a></div><div class=loading-mask ng-show=imageOption.showLoading><img ng-src={{CLIENT_CDN}}assets/images/oval.svg></div>')}]),angular.module("scene/console/radio-checkbox.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/radio-checkbox.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{model.type ==\'r\' ? (\'单选框组件\'): (\'多选框组件\')}} <a ng-show="model.type ==\'r\'" class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=9374&extra="></a> <a ng-show="model.type ==\'c\'" class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=9375&extra="></a> <span class=action ng-show=!authError>{{model.type ==\'r\' ? (\'最多可以添加八个单选选项\') : (\'最多可以添加八个多选选项\')}}</span> <span ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class="modify_area tel_title tab-same clearfix" style=padding-left:30px><span ng-repeat="button in buttons" ng-class="{spanborder: $index == btnIndex}"><a ng-style=button.btnStyle ng-click="chooseTabButton(button, $index)"><span>{{model.type ==\'r\' ? (\'单选选项\'):(\'多选选项\')}}</span></a></span></div><div class="form_console dialog-content input-content"><div class=input-preview style="border-color:  {{buttons[btnIndex].btnStyle.borderColor}}"><div class=preview-title ng-style=buttons[btnIndex].properties.titleStyle>{{model.title?model.title:(\'标题演示\')}}</div><div class=preview-options><div class=preview-option ng-repeat="option in model.options" ng-style=buttons[btnIndex].properties.optionStyle><input type=radio disabled ng-if="model.type == \'r\'" style="margin-top: -1px"> <input type=checkbox disabled ng-if="model.type == \'c\'" style="margin-top: -1px"> <span>{{option.label}}</span></div></div></div><div class="modify_area input-design"><div class=input-title><div><span class=title>标题</span></div><textarea class=form-control ng-model=model.title placeholder=请输入标题 id=radioTitle rows=3 check-count=82 stop-propagation autofocus style="width: 400px"></textarea><span style="position: relative;display: inline-block;vertical-align: middle;height: 74px;line-height: 74px"><label for=checkbox_required style="font-weight: lighter; margin:0;font-size:12px;position: absolute;width: 60px"><div class=checkbox-square style=margin-top:30px ng-class="{checked: model.required}"><em class=eqf-clickmore></em> <input type=checkbox ng-true-value=required ng-model=model.required name=iCheck></div>必填</label></span></div><div class=input-options><div class=input-option><span class=option>选项</span> <span class=option-tip>（您可以添加八个选项，每个选项最多请不要超过41字）</span></div><div id=optionGroupContainer class=option-group-container style=position:relative><div eqd-scroll style="height: 100%"><div><div class=option-group ng-repeat="option in model.options"><textarea class="option-label form-control" rows=2 ng-model=option.label check-count=82 stop-propagation></textarea><div class=operations><span class=eqf-delete2 ng-click=deleteTheOption($index)></span> <span class=eqf-plus ng-click=addNewOption($index)></span></div></div></div></div></div><div class="input-tip clearfix"><span class=add-option ng-click=addNewOption(model.options.length)><span class=eqf-plus2></span><i>增加选项</i></span> <span class=page-indicator>{{model.options.length}}/8</span></div></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/randomevent.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/randomevent.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>随机事件 <span ng-show=!authError class=action>可以从素材库中添加图片</span> <span ng-show=authError class=action>{{authError}}</span></h4></div><div class=dialog-contain><div class=dialog-content><ul><li ng-click=choosePic() ng-hide="picList.length >= 10"><a href="">添加</a></li><li ng-repeat="pic in picList"><div class=img-set><div class="delete-img hint--top hint--rounded" data-hint=删除图片 ng-click=delImage($index)><span class=eqf-wrong2></span></div><div class="abbre hint--bottom hint--rounded" data-hint=更换图片 ng-click=replaceImage($index)><span class=eqf-top-pic></span></div></div><img ng-src="{{PREFIX_FILE_HOST + pic.src}}" responsive-image></li></ul></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/rating.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/rating.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>评分 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=9376&extra="></a> <span class=action ng-show=!authError>请输入少于12个字的评分标题</span> <span ng-show=authError>{{authError}}</span></h4></div><div class="dialog-contain rating-content"><div class=tab-same><span ng-class="{\'spanborder\': model.properties.icon == \'eqf-star\'}"><a ng-click="chooseEqfont(\'eqf-star\')"><span class=eqf-star></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-love\'}"><a ng-click="chooseEqfont(\'eqf-love\')"><span class=eqf-love></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-roll\'}"><a ng-click="chooseEqfont(\'eqf-roll\')"><span class=eqf-roll></span></a></span> <span ng-class="{\'spanborder\': model.properties.icon == \'eqf-flower\'}"><a ng-click="chooseEqfont(\'eqf-flower\')"><span class=eqf-flower></span></a></span></div><div class="form_console dialog-content rating-preview-design"><div class="comp_rating rating rating-preview"><div class="rating-title ellipsis">{{model.title?model.title:(\'预览标题\')}}</div><div class=rating-icons><span class="{{model.properties.icon}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span> <span class="{{model.properties.icon + \'-line\'}} {{model.properties.size}}" ng-style="{color: model.properties.color}"></span></div></div><div class="modify_area rating rating-design"><div class=rating-group><span class=title>标题</span><div class=rating-choice><input type=text class=form-control ng-model=model.title placeholder=评分： check-count=40 id=ratingTitle stop-propagation autofocus> <span style="display: inline-block;position: relative;vertical-align: middle;height: 35px;line-height: 35px"><label for=checkbox_required style="font-weight: lighter; margin:0;font-size:12px;position: absolute;width: 70px"><div class=checkbox-square ng-class="{checked: model.properties.required}"><em class=eqf-clickmore></em> <input type=checkbox ng-true-value=properties.required ng-model=model.properties.required name=iCheck></div><span style=padding-left:5px>必填</span></label></span></div></div><div class=rating-group><span class=title style="vertical-align: top;line-height: 28px;height: 28px">颜色</span><div class=rating-choice><eqd-input-color select-color=model.properties.color default-color="\'rgba(255, 147, 7, 1)\'" x=24 stop-propagation></eqd-input-color></div></div><div class=rating-group><span class=title>大小</span><div class=rating-choice><div class=btn-group><label class="btn btn-rating" ng-model=model.properties.size btn-radio="\'rating-l\'">大</label><label class="btn btn-rating" ng-model=model.properties.size btn-radio="\'rating-m\'">中</label><label class="btn btn-rating" ng-model=model.properties.size btn-radio="\'rating-s\'">小</label></div></div></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/scene-setting-component.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/scene-setting-component.tpl.html",'<div class=scene-setting-component><div class=setting-bg></div><div class=left-con ng-mousedown=closeSetting($event)><div class="phone-view nr" scene-view id=phoneView scene-id={{sceneId}} scene-name={{scene.name}} scene-cover="{{PREFIX_FILE_HOST + coverUrl}}" scene-description={{scene.description}} ng-click=$event.stopPropagation() ng-mousedown=$event.stopPropagation()></div><div class=phone ng-click=$event.stopPropagation() ng-mousedown=$event.stopPropagation()><h4 class=name>{{showPhoneTitle}}</h4></div><div class=ctrl-panel ng-click=$event.stopPropagation() ng-mousedown=$event.stopPropagation()><a class=next-page ng-click=nextPage()>下一页</a> <a class=pre-page ng-click=prePage()>上一页</a></div></div><div class="scene-setting-info fade"><div class=form-contain><ul class="nav nav-tabs"><li ng-class="{active:tabid==\'customset\'}"><a ng-click="changeTab(\'customset\')">常用设置</a></li><li ng-class="{active:tabid==\'shareset\'}"><a ng-click="changeTab(\'shareset\')">分享设置</a></li><li ng-class="{active:tabid==\'companyset\'}"><a ng-click="changeTab(\'companyset\')">高级设置</a></li></ul><div style="position: fixed;top: 40px;bottom: 80px;left: 0;right: 0"><form class=form-horizontal role=form eqd-scroll style="height: 100%" name=myForm ng-show="tabid==\'customset\'" novalidate disable-mouse=true prevent-exception=true><div class="basic-setting clearfix"><div class="content clearfix"><div class="basic-info clearfix"><div class=left><div class=cover-img><a ng-click=openImageModal();><img ng-src="{{PREFIX_FILE_HOST + coverUrl}}"> <em>更换封面</em></a></div></div><div class=right><div class="setting-group setting-name"><em style=margin-bottom:5px>标题</em><div class=setting-value><input name=name type=text class="form-control name" ng-class="{redborder:(!scene.name || countCharacters(scene.name.trim())>48)}" id=name placeholder=场景名称 ng-change=changeSceneName();maxLength24() ng-focus=changeView() ng-model=scene.name stop-propagation> <span class=input-tip>{{(scene.name?countCharacters(scene.name.trim()):0)}}/48</span></div></div><div class="setting-group setting-description"><em style=line-height:48px>描述</em><div class=setting-value><textarea style=font-size:12px placeholder=点击添加描述即可在左侧同步看到最终分享时的效果 ng-model=scene.description class="description form-control" rows=2 id=description ng-focus=changeView() name=description ng-change=maxLength30() stop-propagation></textarea></div></div></div></div><h6 class="des mt20">场景类型</h6><div class="setting-group setting-flip"><div class=setting-line><div class="scene-type-contain select-up-show border"><eqx-select class="select-great select-contain" model=scene.type><eqx-select-option value=type.value ng-repeat="type in types">{{type.name}}</eqx-select-option></eqx-select></div></div><h6 class="des mt20">翻页方式</h6><div class=setting-line><div class="scene-type-contain select-up-show border"><eqx-select class="select-great select-contain" change=changePageMode() model=scene.pageMode><eqx-select-option value=pagemode.id ng-repeat="pagemode in pagemodes">{{pagemode.name}}</eqx-select-option></eqx-select></div><div class="music-cycle border" ng-class="{checkedbg: !scene.property.triggerLoop}"><div class=checkbox-square ng-class="{checked: scene.property.triggerLoop}"><em class=eqf-yes2></em> <input type=checkbox ng-change=changeLoop() ng-model=scene.property.triggerLoop name=iCheck></div><em>循环播放</em></div><div class="music-cycle border" ng-class="{checkedbg: !scene.property.autoFlip}"><div class=checkbox-square ng-class="{checked: scene.property.autoFlip}"><em class=eqf-yes2></em> <input type=checkbox ng-change=changeAutoFlip() ng-model=scene.property.autoFlip></div><em>自动播放</em></div><div class=flip-num style=width:120px ng-if=scene.property.autoFlip><input type=number ng-change=changeAutoFlip() class=form-control min=1 max=60 limit-input ng-model=scene.property.autoFlipTime stop-propagation> <span class=speed>秒</span></div></div><div class=setting-line ng-show="user.type!=1"><div class="music-cycle border" style=margin-left:0;width:178px ng-class="{checkedbg: !scene.property.forbidHandFlip}"><div class=checkbox-square ng-class="{checked: scene.property.forbidHandFlip}"><em class=eqf-yes2></em> <input type=checkbox ng-change=changeHandFlip() ng-model=scene.property.forbidHandFlip name=iCheck></div><em>禁止滑动进入下一页</em></div></div><div><h6 class=des style=float:left>场景音乐</h6><h6 class="des mt20" style=margin-left:200px>场景页码</h6></div><div class=setting-line style=margin-bottom:50px><div class=scene-music style=position:relative><span class="form-control bg-music ellipsis" style="padding-top: 9px" ng-click=openAudioModal()>{{(!!scene.bgAudio) ? (scene.bgAudio.name ? scene.bgAudio.name : (\'已添加\')) : (\'场景音乐\')}}</span> <span class="eqf-top-music music-icon" ng-click=openAudioModal()></span></div><div class="music-cycle border" ng-class="{checkedbg: !scene.property.slideNumber,uncheckedbg:scene.property.slideNumber}"><div class=checkbox-square ng-class="{checked: scene.property.slideNumber}"><em class=eqf-yes2></em> <input type=checkbox ng-change=changeProgess() ng-model=scene.property.slideNumber></div><em>显示</em></div></div></div></div></div></form><form class=form-horizontal role=form eqd-scroll style="height: 100%" name=myForm ng-show="tabid==\'shareset\'" novalidate><div class="basic-setting clearfix"><div class="content clearfix"><h6 class="des mt20">场景访问状态</h6><div class="setting-group setting-flip"><div class=setting-line><div class="scene-type-contain border"><eqx-select class="select-great select-contain" change=changeSceneState() model=sceneStatue><eqx-select-option value=1>允许访问</eqx-select-option><eqx-select-option value=2>不允许访问</eqx-select-option><eqx-select-option value=3 ng-if="scene.applyTemplate!=2">加密访问</eqx-select-option></eqx-select></div><div class=flip-num ng-if="sceneStatue == 3"><input type=text maxlength=4 class="form-control password" id=accessCode placeholder=请设置4位数字的密码 ng-change=fourNumberPassword();changeCode(); ng-model=scene.accessCode maxlength=4 ng-change=fourNumberPassword() stop-propagation ng-disabled="scene.applyPromotion == \'1\' || oldSceneApplyState.applyPromotion == \'1\' || oldSceneApplyState.applyPromotion == \'2\' || scene.applyTemplate == \'1\' || oldSceneApplyState.applyTemplate == \'1\' || oldSceneApplyState.applyTemplate == \'2\' || scene.isShow == \'1\' || scene.promIds"></div></div><div class="setting-line mt20"><div class="form-col2 border" style=width:200px ng-class="{checkedbg: scene.property.showShareCount!=1,uncheckedbg:scene.property.showShareCount==1}"><div class=checkbox-square ng-class="{checked: scene.property.showShareCount==1}"><em class=eqf-yes2></em> <input id=eqShowGround type=checkbox class=option ng-true-value=1 ng-false-value=0 ng-model=scene.property.showShareCount></div><em>在微信中分享时显示分享次数</em></div></div><div class="setting-line mb20" style=line-height:36px><span class=fl>我是第X位</span><div class=share-des><input name=name type=text class="form-control name" id=name placeholder={{shareCountPlaceholder}} ng-model=scene.property.shareDes stop-propagation></div></div><h6 class="des mt20">分享</h6><div class=setting-line><div class="form-col2 border hint--right hint--rounded" data-hint="{{scene.publishTime?\'申请加入秀场\':\'发布后才能申请\'}}" ng-class="{checkedbg: scene.isShow!=1,uncheckedbg:scene.isShow==1}"><div class=checkbox-square ng-class="{checked: scene.isShow==1}"><em class=eqf-yes2></em> <input id=eqShowGround type=checkbox class=option ng-true-value=1 ng-false-value=0 ng-model=scene.isShow ng-disabled="sceneStatue==2 || sceneStatue==3 || !scene.publishTime || $parent.scene.isShow==1 || $parent.scene.isShow==2 || scene.status == -1 && scene.status == -2"></div><em>申请加入秀场</em></div><div class="scene-type-contain border ml20" ng-if="scene.isShow==1"><eqx-select class="select-great select-contain" change=changeTagId() model=scene.tagId><eqx-select-option value=null>选择类型</eqx-select-option><eqx-select-option value=sceneTag.id ng-repeat="sceneTag in sceneTags">{{sceneTag.name}}</eqx-select-option></eqx-select></div><a class=logo-tip target=_blank href=/#/show style=text-decoration:underline;position:absolute;right:20px>访问秀场</a></div><div class=last-page-contain ng-if=appendActive><div eqd-scroll style="height: 100%"><ul><li class=last-cover-img ng-repeat="pageTpl in activityPageTpls" ng-click=chooseActivityPageTpl(pageTpl.id)><img class=lp-list ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}"><div class=checkbox-square ng-class="{checked: scene.property.activityPageId == pageTpl.id}"><em class=eqf-yes2></em></div></li></ul></div></div></div></div></div></form><form eqd-scroll style="height: 100%" class="form-horizontal setting-group" role=form name=myForm ng-show="tabid==\'companyset\'" novalidate><div class="basic-setting clearfix"><h6 class="des mt20 ng-hide">加载设置</h6><div class="setting-line mr20 ng-hide" style="border-bottom:1px solid #ccd5db;height:56px;margin-top:20px"><div class="form-col2 border" ng-class="{checked: !loadingLogo,uncheckedbg: loadingLogo}"><div class=checkbox-square ng-click=changeLogo() ng-class="{checked: loadingLogo}"><em class=eqf-yes2></em> <input type=checkbox></div><em>自定义加载logo</em></div><div class="setting-logo border" ng-if=loadingLogo ng-click=uploadLoadingLogo()><div class=load-logo-contain><img ng-if=!scene.loadingLogo ng-src={{CLIENT_CDN}}assets/images/create/pic.svg> <img ng-if=scene.loadingLogo ng-src="{{PREFIX_FILE_HOST + scene.loadingLogo}}"></div><span class=des>设置加载logo</span></div><div class=logo-tip ng-if=loadingLogo style="position: absolute;right: 180px">118*118px</div><div class=logo-tip ng-if=!user.memberType style="position: absolute;right: 80px">需<span style=color:#ff5448>'+loadingLogo_qi_xd+'</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></div><div class=logo-tip ng-if="user.memberType==1" style="position: absolute;right: 80px">需<span style=color:#ff5448>95</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></div><div class=logo-tip ng-if="user.memberType==2" style="position: absolute;right: 80px">需<span style=color:#ff5448>90</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></div><div class=logo-tip ng-if="user.memberType==3 && memberObj.loadingLogo!=\'0\'" style="position: absolute;right: 80px">免费<span style=color:#ff5448>{{memberObj.loadingLogo}}</span>次</div><div class=logo-tip ng-if="user.memberType==3 && memberObj.loadingLogo==\'0\'" style="position: absolute;right: 80px">需<span style=color:#ff5448>100</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></div><div class=logo-tip ng-if="user.memberType==4" style="position: absolute;right: 80px">需<span style=color:#ff5448>70</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></div><div class=logo-tip ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.loadingLogo < 1" style="position: absolute;right: 65px">需<del>100</del><span style=color:#ff5448;padding-left:3px>{{memberObj.loadingLogo * 100}}</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></div><div class=logo-tip ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.loadingLogo >= 1" style="position: absolute;right: 80px">免费<span style=color:#ff5448>{{memberObj.loadingLogo}}</span>次</div></div><h6 class="des mt20">尾页与底标<a ng-if="user.type == 1" ng-click=freeUpgrade() style=padding-left:10px;color:#a3afb7><ins>免费</ins></a></h6><table class=bottom-table><tr ng-click=switchToAdState($scope.eqADTypeChoice.FREEPAGE,true); ng-class="{uncheckedbg:(eqShowType==\'eqFree\')}"><td class=choise><div class=radio-square ng-class="{checked: (eqShowType==\'eqFree\')}"><em></em></div><em>技术支持尾页</em></td><td class=price>免费</td></tr><tr ng-click=switchToAdState(eqADTypeChoice.HIDE,true) ng-class="{uncheckedbg:(eqShowType==\'eqHide\')}" ng-show="user.type!=5 && user.type!=51"><td class=choise><div class=radio-square ng-class="{checked: (eqShowType == \'eqHide\')}"><em></em></div><em>无尾页和底标</em></td><td class=price ng-if=!user.memberType>需<span style=color:#ff5448>'+QI_AD_XDS+'</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></td><td class=price ng-if="user.memberType==1">需<span style=color:#ff5448>95</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></td><td class=price ng-if="user.memberType==2">需<span style=color:#ff5448>90</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></td><td class=price ng-if="user.memberType==3 && memberObj.tailPage!=\'0\'">免费<span style=color:#ff5448>{{memberObj.tailPage}}</span>次</td><td class=price ng-if="user.memberType==3 && memberObj.tailPage==\'0\'">需<span style=color:#ff5448>100</span>秀点<a ng-click=buyXd() ng-if=sceneBuyXd style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></td><td class=price ng-if="user.memberType==4">需<span style=color:#ff5448>70</span>秀点<a ng-if=sceneBuyXd ng-click=buyXd() style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></td><td class=price ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.tailPage < 1">需<del>100</del><span style=color:#ff5448;padding-left:3px>{{memberObj.tailPage * 100}}</span>秀点<a ng-click=buyXd() ng-if=sceneBuyXd style=color:#a3afb7;padding-left:10px><ins>充值</ins></a></td><td class=price ng-if="(user.memberType==6 || user.memberType==7 || user.memberType==8 || user.memberType==9) && memberObj.tailPage >= 1">免费<span style=color:#ff5448>{{memberObj.tailPage}}</span>次</td></tr></table><div class=setting-line ng-show="scene.property.eqAdType == 3"><div class=setting-logo style=margin-left:0><input type=text class=form-control ng-model=scene.property.bottomLabel.name ng-change=changeBottomLabel() id=changeMessage placeholder=名称 stop-propagation></div><div class=setting-logo style=width:450px><input type=text class=form-control ng-model=scene.property.bottomLabel.url ng-change=changeBottomLabel() id=linkAddress placeholder=http://eqxiu.com stop-propagation></div></div><div class=last-page-contain ng-if="eqShowType==\'eqFree\'"><div eqd-scroll style="height: 100%" disable-mouse=true prevent-exception=true><ul><li class=last-cover-img style="text-align:center;border-radius:4px;border:1px solid #ccd5db" ng-click=chooseLastPage(null)><span class="lp-list default-last-page" style=line-height:152px ng-class="{checked: !scene.property.lastPageId}">默认</span><div class=checkbox-square ng-class={checked:!scene.property.lastPageId}><em class=eqf-yes2></em></div></li><li class=last-cover-img ng-repeat="pageTpl in pageTpls" ng-click=chooseLastPage(pageTpl.id)><img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src=assets/images/create/pic.svg load-err><div class=checkbox-square ng-class="{checked:scene.property.lastPageId == pageTpl.id}"><em class=eqf-yes2></em></div></li></ul></div></div><div class=last-page-contain ng-if="eqShowType==\'eqLink\' && scene.property.eqAdType == 3"><div eqd-scroll style="height: 100%" disable-mouse=true prevent-exception=true><ul><li ng-repeat="bottomPageTpl in bottomPageTpls" ng-click=chooseCustomBottomLabel(bottomPageTpl.id)><img src=assets/images/create/pic.svg> <img class=bottom-img ng-src="{{PREFIX_FILE_HOST + bottomPageTpl.properties.thumbSrc}}"><div class=checkbox-square ng-class="{checked: scene.property.eqAdType == 3 && scene.property.bottomLabel.id == bottomPageTpl.id}"><em class=eqf-yes2></em></div></li></ul></div></div><h6 ng-if=false class="des mt20">第三方统计</h6><div ng-if=false class=setting-line><div class="form-col3 border"><div class=checkbox-square ng-click=openStatisticData() ng-class="{checked: QCloudStatus}"><em class=eqf-yes2></em> <input type=checkbox ng-disabled=!isAllowedToAccessOpenQCloud></div><em>开启腾讯云分析（次日可在场景详情中查看）</em></div><div class=logo-tip style="position: absolute;right: 80px"><a href=/#/privilege target=_blank style=color:#a3afb7;padding-left:10px><ins>付费会员专享</ins></a></div></div><div ng-if=false class=setting-line style=color:red>服务异常，请重新申请。</div></div></form></div></div><div class=setting-operations><div class=option-box><button ng-click=saveSceneSettings(scene) class="btn green">确定</button> <button ng-click=cancelSceneSetting() class="btn gray" style=margin-left:10px>取消</button></div></div></div><div ng-class={showin:showActiveTip} class=showxiu ng-init="hideActiveTip = true;"><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="showActiveTip=false;"><span aria-hidden=true>×</span></button><h4 class=modal-title>参加活动</h4></div><div class=modal-body><p style="line-height: 30px">参加活动并保存场景后，不可取消或选择其他活动</p></div><div class=modal-footer><input type=checkbox style=margin-top:0;margin-right:5px ng-model=hideActiveTip><span style=margin-right:10px>不再提示</span> <a type=button class="btn btn-primary" ng-click=changeAppendActive(true)>确定</a></div></div></div>')}]),angular.module("scene/console/setting.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/setting.tpl.html","<div panel-draggable id=comp_setting><div class=cancel><span class=set-title>组件设置</span><span class=\"set-close eqf-wrong\" ng-click=cancel()></span></div><ul class=\"nav nav-tabs\"><li ng-class=\"{active:activeTab == 'style' || activeTab =='dropdown'}\"><a class=all-change ng-click=\"(elemDef.type !=='z') ? showSettingTab('style'):showSettingTab('dropdown');\">样式</a></li><li ng-hide=\"elemDef.type == 'g'\" ng-class=\"{active:activeTab == 'anim'}\"><a class=all-change ng-click=\"showSettingTab('anim');\">动画</a></li><li ng-hide=\"elemDef.type == 'w01' || elemDef.type == 'w02' ||elemDef.type === 'z' || elemDef.type == 't' || elemDef.type == 'g'\" ng-class=\"{active:activeTab == 'trigger'}\"><a class=all-change ng-click=\"showSettingTab('trigger');\">触发</a></li></ul><div class=style_content><div ng-include=\"'scene/console/anim.tpl.html'\"></div><div ng-include=\"'scene/console/style.tpl.html'\"></div><div ng-include=\"'scene/console/trigger.tpl.html'\"></div><div ng-include=\"'scene/console/dropdown.tpl.html'\"></div></div></div>")}]),angular.module("scene/console/shape.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/shape.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>形状库 <span ng-show=!authError class=action>矢量素材，可更换颜色，放大不失真</span> <span ng-show=authError class=action>{{authError}}</span></h4></div><div class=dialog-contain><div class="dialog-content bg_console sound-flex clearfix"><div class=cate-title><ul class="nav tabs-left" style=padding-top:0><li ng-class="{active: systemImages}"><a href="" ng-click="switchToSystemImages(\'true\');getSystemCategoryList();" data-toggle=tab>形状库</a></li></ul><ul class="nav tabs-left user-tabs" style=padding-top:0></ul></div><div class="cate-list bg-rig"><div id=bg_contain><div class="tab-pane active tab-head" ng-show=systemImages><div class=img_list><div class="category_list clearfix"><ul class="category_list_container clearfix"><li class=category_item ng-class="{\'active\': sysCatId == sysCategory.value}" ng-repeat="sysCategory in sysCategoryList" ng-click=getSysCatAndList(sysCategory.value)>{{sysCategory.name}}</li></ul></div><div class="cat_two_list clearfix"><ul><li ng-repeat="sysTag in sysTagList" ng-class="{\'active\': sysTagId == sysTag.id}" ng-click=getSysImgByTag(sysTag.id); style=cursor:pointer>{{sysTag.name}}</li></ul></div></div></div><div class=img_list><div class="img_list_container photo_list"><ul class="img_box clearfix" ng-class="{\'img-box-his\':userTagId==\'history\'}" style=height:333px><li ng-if=!systemImages ng-repeat="img in imgList" style="width:100px;height:100px;position:relative;display: inline-block;background:#e6ebed no-repeat center/contain" ng-style="{backgroundImage: \'url(\' + PREFIX_FILE_HOST + img.path + \')\'}" data-url={{img.path}} ng-click=selectSvg($event,img)></li><li ng-if=systemImages ng-repeat="img in imgList" style="width:100px;height:100px;position:relative;display: inline-block;background:#e6ebed no-repeat center/contain" ng-style="{backgroundImage: \'url(\' + PREFIX_FILE_HOST + img.path + \')\'}" data-url={{img.path}} ng-click=selectSvg($event,img)></li></ul></div></div></div></div><div class="modal-footer bg-pagination clearfix no-line"><div class="fl mr20" ng-show="numPages > 1 && userTagId!=\'history\'"><pagination style="float: left" previous-text=&lsaquo; next-text=&rsaquo; first-text=首页 last-text=尾页 max-size=5 items-per-page=pageSize total-items=totalItems ng-model=$parent.currentPage boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=$parent.toPage ng-keyup="$event.keyCode == 13 ? getImgByPage() : null"><span class=fl>页</span> <a ng-click=getImgByPage() class=go>确定</a></div></div><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm();>确定</a></div></div></div>')}]),angular.module("scene/console/sound-component.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/sound-component.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>音效组件 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=10990&extra="></a> <span class=action ng-show=!authError>音效不能大于100kb</span> <span ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class="modify_area tel_title tab-same clearfix"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style=button.btnStyle ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span><div ng-class="{\'spanborder\': model.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint=上传图片大小不超过3M，支持上传格式：jpg、png、gif ng-click=openImageModal()><em class=eqf-upload style=font-size:16px></em><em>自定义</em></div></div><div class="button_console dialog-content"><form class=form-contain form=role><div class="form-list clearfix" ng-if=!model.imgSrc><label for=buttonName class=form-label>按钮名称：</label><div class=form-input><input id=buttonName class=btn-name type=text ng-model=model.title check-count=40 ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation></div></div><div class="form-list clearfix" ng-if=model.imgSrc><label class=form-label>按钮图片：</label><div class="form-image btn-small"><img ng-src="{{PREFIX_FILE_HOST + model.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture text-center" ng-click=openImageModal()>更换图片</a></div></div><div class="form-list clearfix"><label for=btnSound class=form-label>音效：</label><div class=form-input><a id=btnSound class="btn-main blue" ng-click=openSoundModal()>设置音效</a></div></div><div class="form-list clearfix" ng-show=model.sound.name><label class=form-label>已选择：</label><div class=form-input><span>{{model.sound.name}}</span></div></div></form></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/sound.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/sound.tpl.html",'<div class="modal-header no-bottom-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title ng-if="type == 4">音效设置 <span ng-show=selectSoundError class=action>{{selectSoundError}}</span></h4><h4 class=modal-title ng-if="type == 2">音乐素材 <span ng-show=selectSoundError class=action>{{selectSoundError}}</span></h4></div><div class=dialog-contain><div class="dialog-content bg_console clearfix"><div ng-show=soundAction style="position:absolute;left:0;right:0;top:0;bottom:0;background-color:#000;z-index: 1;opacity: 0.2"></div><div class=sound-action-upload ng-show=soundAction><p><span>通过本地电脑上传或者添加外链，大小不超过4M，格式为MP3.注意：音乐大小会影响打开速度。</span></p><div class=know><input type=checkbox ng-model=actionShow ng-change=isCheckbox(actionShow)><span>不再提示</span> <span style=position:relative><a class="btn btn-primary">知道了</a> <input type=file ng-click=closeAction() nv-file-select="" uploader=uploader multiple style="width:90px;height: 35px;overflow: hidden;position: absolute;top:-10px;right: 0;left:10px;bottom:0;cursor: pointer;opacity:0"></span></div></div><div class=sound-flex><div class=cate-title style=width:200px;height:412px;background-color:#f7f7f7><ul class="nav tabs-left" style=padding-top:0><li ng-class="{active: !isMySound}" ng-show="type == 2"><a ng-click=selectTab(false)>音乐库</a></li><li ng-class="{active: !isMySound}" ng-show="type == 4"><a ng-click=selectTab(false)>音效库</a></li><li ng-class="{active: isMySound && isMySound!=\'history\'}" ng-show="type == 2"><a ng-click=selectTab(true)>我的音乐</a></li><li ng-class="{active: isMySound && isMySound!=\'history\'}" ng-show="type == 4"><a ng-click=selectTab(true)>我的音效</a></li><li class=add-tag><a ng-click=urlLink()><span class=eqf-link style=padding-right:10px></span><span>添加外链</span></a></li><li class="my-bg-upload blue"><div id=upload-progress></div><div class=my-upload-action ng-if=alertAction ng-click=popSoundAction()></div><div class="sound-upload form"><div class=form-menus><div class="popover right"><div class=arrow></div><div class=popover-content style=font-size:12px><i>链接如何减少文件大小，请网上查询一下</i></div></div></div><span class=eqf-update></span><em>上传</em> <input type=file nv-file-select="" uploader=uploader multiple style="width: 100px;height:35px;overflow: hidden;position: absolute;top: 0;right: 0;bottom: 0;cursor: pointer;opacity: 0"></div></li></ul></div><div class="cate-list bg-rig" style=min-height:417px><div class=clearfix><audio style="margin: 25px 0 0 20px;height:30px" eqx-audio></audio><div style="font-size: 12px; width: 250px;height:40px;line-height:40px;overflow:hidden;float:right"><span ng-show=sound.name><i>已选择：</i>{{sound.name | maxLength: 16}} <a class=eqf-wrong2 style="margin-left: 10px" title=清除 ng-click=clear()></a></span></div><div class=music-cate><ul class=clearfix ng-init="$parent.sysCatId = \'0\'" ng-show=sysCate><li ng-class="{\'active\': sysCatId == \'0\'}" ng-click="getSysMusicList(\'0\')">最新</li><li ng-repeat="music in sysMusicList" ng-class="{active:sysCatId == music.value}" ng-click=getSysMusicList(music.value)>{{music.name}}</li></ul></div></div><div class=tab-content id=bg_contain><div class="tab-pane tab-head active"><div class=tab-pane><div class=img_list><div class=sound-action ng-show=actionContent><p>通过本地电脑上传或者添加外链，大小不超过4M，格式为MP3.注意：音乐大小会影响打开速度。</p></div><div class="sound-list clearfix" ng-show=!actionContent><ul><li style=cursor:pointer ng-class="{active: isSoundSelected(type, sound, s)}" ng-click="selectSound(s,type, isSoundSelected(type, sound, s))" ng-repeat="s in sounds track by $index"><span><em>{{s.size}}</em> <a class="sound eqf-play" title="{{s.isPlaying ? (\'暂停\') : (\'播放\')}}" ng-class="{\'eqf-play2\': !s.isPlaying, \'eqf-stop\': s.isPlaying}" ng-click="playSound($event, $index)"></a> <a class="del eqf-wrong2" title=删除 ng-show="isMySound && isMySound!=\'history\'" ng-click="deleteMySound($event, $index)"></a></span><div class=linkName title={{s.name}}>{{s.name}}<em style=padding-left:10px class=eqf-link3 ng-show=s.isValue></em></div></li></ul></div></div></div></div></div></div></div></div><div class="modal-footer bg-pagination no-line"><div class="pagination_container fl" ng-show="pagination.totalItems > 10 && isMySound!=\'history\'"><pagination style="float: left" previous-text=&lsaquo; next-text=&rsaquo; first-text=首页 last-text=尾页 max-size=5 items-per-page=pagination.pageSize total-items=pagination.totalItems ng-model=pagination.currentPage ng-change=getSounds(pagination.currentPage) boundary-links=true rotate=true num-pages=pagination.numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? getSounds(toPage) : null"><span class=fl>页</span> <a ng-click=getSounds(toPage) class=go>确定</a></div></div><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=ok()>确定</a></div></div>')}]),angular.module("scene/console/soundCrop.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/soundCrop.tpl.html",'<div class="modal-header no-line"><h4 class=modal-title>音频裁切 <span class=action>音频裁切</span></h4></div><div class="dialog-contain cropimage"><div class="crop-content dialog-content clearfix"><div style=position:relative id=container-crop><div style=font-size:24px;width:600px;float:left>{{title}}</div><span style="border:1px solid #ccd5db;padding:5px;cursor:pointer;margin-left:166px" nosave=true qiniu-upload-directive id=pickfiles-crop resource-type=resourceType resources=[] tag-id=0 max-file-size=4 upload-con=container-crop upload-btn=pickfiles-crop file-type=type token-type="\'audio\'">重新选择音乐</span></div><div sound-crop-panel style=margin-top:30px start-time=$parent.startTime end-time=$parent.endTime state=$parent.state current-time=$parent.currentTime duration=$parent.duration sound-src={{soundSrc}}></div><div style=padding-top:30px;width:600px;float:left><em ng-class="{\'eqf-play2\':state!=\'start\',\'eqf-stop\':state==\'start\'}" style=font-size:90px;float:left;cursor:pointer ng-click=play();></em><div style=float:left;height:35px;margin-top:10px;margin-left:20px;padding-top:5px><span ng-click=setStartTime() style="border: 1px solid #ccd5db;padding:5px;margin-right:10px;cursor:pointer">设当前播放为起点</span> 起点：<input type=number min=0 ng-change=changeStartTime() ng-model=$parent.minuteS style=height:24px;width:80px;margin-right:5px>分<input ng-change=changeStartTime() type=number ng-model=$parent.secondS max=59 min=0 style=height:24px;width:80px;margin-right:5px;margin-left:5px>秒</div><div style="float: left;height: 35px;margin-top: 10px;margin-left:20px;padding-top:5px"><span ng-click=setEndTime(); style="border: 1px solid #ccd5db;padding:5px;margin-right:10px;cursor:pointer">设当前播放为终点</span> 终点：<input type=number min=0 ng-model=$parent.minuteE ng-change=changeEndTime() style=height:24px;width:80px;margin-right:5px>分<input type=number ng-change=changeEndTime() ng-model=$parent.secondE max=59 min=0 style=height:24px;width:80px;margin-right:5px;margin-left:5px>秒</div></div><div style=float:left;padding-top:35px><h6 style=padding-bottom:10px>音乐长度</h6><h1>{{cropLen}}</h1><h6 style=padding-top:10px>（建议长度控制在20秒内）</h6></div></div></div><div class="modal-footer no-line"><a class="btn btn-primary" ng-click=ok()>确定</a></div>')}]),angular.module("scene/console/soundCropPanel.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/soundCropPanel.tpl.html",'<div class=sound-crop-dire><ul class=scale><li ng-class="{\'s-scale\':($index+1)%5!=0,\'l-scale\':($index+1)%5==0}" ng-style="{\'width\':($index+1)!=scales.length?liW:endLi}" ng-repeat="scale in scales"><span ng-if="$index==0" style="top:-21px;left:5px;text-align: left">0:00</span> <span ng-if="($index+1)%5==0">{{scale}}</span></li></ul><em class=bar-s data-state=s><em class=triangle data-state=s></em> <em class=line data-state=s></em></em> <em class=bar-c data-state=c><em class=triangle data-state=c></em> <em class=line data-state=c></em></em> <em class=bar-e data-state=e><em class=triangle data-state=e></em> <em class=line data-state=e></em></em><div class=left-dis></div><div class=right-dis></div></div><span>{{curT}}/<span class=dur></span></span><audio><audio></audio></audio>')}]),angular.module("scene/console/soundLink.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/soundLink.tpl.html",'<div class="modal-header no-bottom-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>外部链接 <span ng-show=!authError class=action>可从外部使用链接添加音乐</span> <span ng-show=authError class=action>{{authError}}</span></h4></div><div class=dialog-contain><div class=dialog-content><form class=form-contain role=form><div class="form-list audio_area clearfix"><lable class=form-label>链接地址：</lable><div class=form-input><input type=text class=link ng-model=soundLink.src ng-click=selectLink() placeholder=请输入mp3格式的音乐链接></div></div></form></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/statistics-component.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/statistics-component.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>统计 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=15676&page=1&extra=#pid122999"></a> <span class=action ng-show=!authError>记录并显示当前作品的展示次数</span> <span ng-show=authError>{{authError}}</span></h4></div><div class="dialog-contain counter"><div class=tab-same><span class=spanborder ng-class="{\'spanborder\': model.properties.icon == \'eqf-eye3\'}"><a ng-click="chooseEqfont(\'eqf-eye3\')"><span class=eqf-eye3></span></a></span></div><div class="form_console dialog-content"><div class=modify_area><div class=counter-group><span class=title>颜色</span><div class=counter-choice><a class=color-picker ng-style="{backgroundColor: model.properties.color}" ng-model=model.properties.color colorpicker=rgba></a> <input class=color-picker-input ng-model=model.properties.color type="text"></div></div><div class=counter-group><span class=title>字号</span><div class=counter-choice><div class=btn-group><label class="btn btn-counter" ng-model=model.properties.size btn-radio="\'counter-l\'">大</label><label class="btn btn-counter" ng-model=model.properties.size btn-radio="\'counter-m\'">中</label><label class="btn btn-counter" ng-model=model.properties.size btn-radio="\'counter-s\'">小</label></div></div></div><div class=counter-group><span class=title>布局</span><div class=counter-choice><div class=btn-group><label class="btn btn-counter" ng-model=model.properties.layout btn-radio="\'counter-lr\'">左右</label><label class="btn btn-counter" ng-model=model.properties.layout btn-radio="\'counter-tb\'">上下</label></div></div></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/style.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/style.tpl.html",'<div ng-if="activeTab == \'style\'" ng-controller=StyleConsoleCtrl><div class=yangshi><section><div class="style_list border-bottom pl20" ng-show="elemDef.type!=\'m\' && elemDef.type!=\'b\'" ng-class={active:showBasic} ng-init="showBasic=true" ng-click="openExpore(\'showBasic\');"><span>基础样式</span><b class=caret ng-show=showBasic></b><b class="caret off" ng-show=!showBasic></b></div><div class=style_con_hei ng-show="elemDef.type==\'m\'"><div class="style_list_angel clearfix"><label>标签内容</label><div class="color_select clearfix"><input class=flo_right style=width:140px style-input elem-id={{elemDef.id}} ng-model=model.content css-item=content type="text"></div></div><div style=border-bottom:none class="style_list_angel clearfix"><label>地图位置</label><div class="color_select clearfix" style=text-align:right><i class=eqf-map style=margin-right:5px></i><a class=primary style="text-decoration: underline;line-height: 20px" ng-click=setPosition()>{{model.address}}</a></div></div></div><div class=style_con_hei ng-if="elemDef.type==\'g\'" ng-show=showBasic><div class="style_list_angel clearfix"><label>广告代码</label><div class="color_select clearfix"><textarea class=flo_right style="height: 120px" insert-html content={{proModel.content}} target="#nr #{{elemDef.id}} .ad-contain" elem-id={{elemDef.id}} ng-model=proModel.content>\n\t\t\t\t\t\t</textarea><input style=display:none style-input elem-id={{elemDef.id}} ng-model=model.width css-item=width type="text"> <input style=display:none style-input elem-id={{elemDef.id}} ng-model=model.height css-item=height type="text"></div></div><div class="style_list_angel clearfix"><label>广告尺寸</label><div class="color_select clearfix"><select class=flo_right ng-change=changeSize(size) ng-model=proModel.size style="width:150px;border:1px solid #C9C9C9" ng-options="size.value as size.name for size in adSizes"></select></div></div></div><div class=style_con_hei ng-if="elemDef.type==\'b\'"><div class="style_list_angel clearfix" ng-init="styles=[{name:\'默认\',value:\'default\'},{name:\'黑色\',value:\'black\'},{name:\'粉色\',value:\'pink\'}]"><label>配色风格</label><div class="color_select clearfix"><select class=flo_right ng-model=boardsModel.style style="width:140px;border:1px solid #C9C9C9" ng-options="style.value as style.name for style in styles"></select></div></div><div class="style_list_angel clearfix"><label>我要留言</label><div class="color_select clearfix"><input class=flo_right style=width:140px style-input elem-id={{elemDef.id}} ng-model=boardsModel.meslabel css-item=content maxlength=10 type="text"> <span str=boardsModel.meslabel strlen class=strlen max=10>4/10</span></div></div><div style=border-bottom:none class="style_list_angel clearfix"><label>更多留言</label><div class="color_select clearfix"><input class=flo_right style=width:140px style-input elem-id={{elemDef.id}} ng-model=boardsModel.morelabel css-item=content maxlength=10 type="text"> <span str=boardsModel.morelabel strlen class=strlen max=10>4/10</span></div></div></div><div ng-class="{\'h-scroll\':scrollShow && showBasic}"><div eqd-scroll style="height: 100%" change-pos=changePos(pos) disable-mouse=true prevent-exception=true><div ng-show="showBasic && elemDef.type!=\'m\'" class=style_con_hei><div class="style_list_angel clearfix" ng-show="elemDef.type==\'201\' || elemDef.type==\'401\'"><label>文字内容</label><div class="color_select clearfix"><input class=flo_right style=width:155px elem-id={{elemDef.id}} ng-model=model.content type="text"></div></div><div class="style_list_angel clearfix" ng-if="(elemDef.type == \'201\' || elemDef.type == \'401\' || elemDef.type == \'2\') && isEditor"><label>文字大小</label><div class="touming clearfix"><p class=num><input class=short type=number min=12 max=72 style-input elem-id={{elemDef.id}} css-item=fontSize ng-model="model.fontSize"></p><div class=slider ui-slider-t his-records=true ng-model=model.fontSize min=12 max=72></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type!=\'t\' \n\t\t\t\t\t\t&& elemDef.type!=\'b\' && elemDef.type != \'x\' && elemDef.type != \'g\'"><label ng-if="elemDef.type!=\'201\' && elemDef.type!=\'401\'">背景颜色</label><label ng-if="elemDef.type==\'201\' || elemDef.type==\'401\'">文字背景</label><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: model.backgroundColor}" ng-model=model.backgroundColor colorpicker=rgba></a> <input class=flo_right style=width:100px style-input elem-id={{elemDef.id}} ng-model=model.backgroundColor css-item=backgroundColor type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'2\' || elemDef.type == \'201\' || elemDef.type == \'401\' ||elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'r\' || elemDef.type == \'c\' || (elemDef.type == \'h\' && !elemDef.properties.src) || elemDef.type == \'w01\' || elemDef.type == \'w02\'"><label ng-if="elemDef.type != \'h\'">文字颜色</label><label ng-if="elemDef.type == \'h\'">形状颜色</label><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: model.color}" ng-model=model.color colorpicker=rgba></a> <input class=flo_right style=width:100px style-input elem-id={{elemDef.id}} ng-model=model.color css-item=color type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'h\' && elemDef.properties.src" ng-repeat="shapeColor in shapeAttrs"><label>形状颜色{{$index+1}}</label><div class="color_select clearfix"><a class="input_kuang flo_lef" ng-style="{backgroundColor: shapeColor.fill}" ng-model=shapeColor.fill colorpicker=rgba y={{scrollTop}}></a> <input class=flo_right style=width:100px style-input elem-id={{elemDef.id}} ng-model=shapeColor.fill type="text"></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type!=\'b\' && elemDef.type!=\'201\' && elemDef.type!=\'401\' && elemDef.type!=\'t\' && elemDef.type != \'g\'"><label>透明度</label><div class="touming clearfix"><p class=num><input class=short type=number min=0 max=100 limit-input style-input elem-id={{elemDef.id}} css-item=opacity ng-model="model.opacity"></p><div class=slider ui-slider-t his-records=true ng-model=model.opacity min=0 max=100></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'2\' || (\'\'+elemDef.type).charAt(0) == \'5\'"><div><label>边距</label><div class="touming clearfix"><p class=num><input class=short min=0 max=20 limit-input class="input_kuang short" type=number style-input css-item=padding ng-model="model.paddingTop"></p><div class=slider his-records=true ui-slider-t ng-model=model.paddingTop min=0 max=20></div></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'8\' || (\'\'+elemDef.type).charAt(0) == \'6\' || elemDef.type == \'2\' || (\'\'+elemDef.type).charAt(0) == \'5\'"><div><label>行高</label><div class="touming clearfix"><p class=num><input class=short min=0 max=3 limit-input step=0.1 class="input_kuang short" type=number style-input css-item=lineHeight ng-model=model.lineHeight ng-blur="lineHeightEmpty();"></p><div class=slider his-records=true ui-slider-t fixed=1 ng-model=model.lineHeight min=0 max=3></div></div></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'201\' || elemDef.type == \'401\'"><label>昵称类型</label><div class="touming clearfix"><select style="border:1px solid #ccc;height:20px;width:155px" ng-model=model.niketype><option value=own>浏览者昵称头像</option><option value=share>分享者昵称头像</option></select></div></div><div class="style_list_angel clearfix" ng-if="elemDef.type == \'4\' || elemDef.type == \'2\' || elemDef.type == \'s\' || elemDef.type == \'v\' || elemDef.type == \'l\' || elemDef.type == \'8\' || elemDef.type == \'m\' || elemDef.type == \'i\' || elemDef.type == \'d\' || elemDef.type == \'401\' || elemDef.type == \'201\' || elemDef.type == \'403\' || elemDef.type == \'w02\' || elemDef.type == \'w01\'"><div><label>固定组件</label><div class="touming clearfix" ng-show=longPage><input class=short type=checkbox ng-model=model.lock style="float:left;width:20px"><div style=padding-top:4px>固定组件位置(长页面)</div></div><div ng-show=!longPage class="touming clearfix" tooltip-placement=bottom tooltip=固定组件只能在长页面内使用><input disabled class=short type=checkbox ng-model=model.lock style="float:left;width:20px"><div style=padding-top:4px>固定组件位置(长页面)</div></div></div></div><div ng-if="elemDef.type == \'t\'" ng-controller=chartStyleCtrl><div ng-include="\'scene/console/chartStyle.tpl.html\'"></div></div></div></div></div></section><section ng-show="elemDef.type!=\'g\' && elemDef.type!=\'b\' && elemDef.type!=\'m\' && elemDef.type!=\'201\' && elemDef.type!=\'401\'&& elemDef.type!=\'t\'"><div class="style_list border-bottom pl20" ng-click="openExpore(\'showBorder\');"><span>边框样式</span><b class=caret ng-show=showBorder></b><b class="caret off" ng-show=!showBorder></b></div><div ng-show=showBorder class=style_con_hei><div class="style_list_angel clearfix"><label>尺寸</label><div class="touming clearfix"><p class=num><input class="input_kuang short" limit-input type=number min=0 max=20 style-input css-item=borderWidth ng-model="model.borderWidth"></p><div class="slider hint--right" ui-slider-t his-records=true ng-model=model.borderWidth min=0 max=20></div></div></div><div class="style_list_angel clearfix"><label>弧度</label><div class="touming clearfix"><p class=num><input class="input_kuang short" type=number min=0 max={{maxRadius}} limit-input style-input css-item=borderRadius ng-model="model.borderRadius"></p><div class=slider his-records=true ui-slider-t ng-model=model.borderRadius min=0 max={{maxRadius}}></div></div></div><div class="style_list_angel clearfix"><label>样式</label><div class=touming><select style="border:1px solid #ccc;height:20px;width:155px" style-input css-item=borderStyle ng-model=model.borderStyle><option value=solid>直线</option><option value=dashed>破折线</option><option value=dotted>点状线</option><option value=double>双划线</option><option value=groove>3D凹槽</option><option value=ridge>3D垄状</option><option value=inset>3D内嵌</option><option value=outset>3D外嵌</option></select></div></div><div class="style_list_angel clearfix"><label>颜色</label><div class="color_select clearfix"><input class="flo_right short" style=width:100px style-input ng-model=model.borderColor css-item=borderColor type="text"> <a class="input_kuang flo_lef" ng-style="{backgroundColor: model.borderColor}" ng-model=model.borderColor colorpicker=rgba></a></div></div><div class="style_list_angel clearfix"><div><label>旋转</label><div class="touming clearfix"><p class=num><input min=0 max=360 limit-input style-input css-item=transform class="input_kuang short" type=number ng-model="model.transform"></p><div his-records=true class=slider ui-slider-t ng-model=model.transform min=0 max=360></div></div></div></div></div></section><section ng-show="elemDef.type!=\'g\' && elemDef.type!=\'b\' && elemDef.type!=\'m\' && elemDef.type!=\'201\' && elemDef.type!=\'401\'&& elemDef.type!=\'t\'"><div class="style_list border-bottom border-top pl20" ng-click="openExpore(\'showShadow\');"><span>阴影样式</span><b class=caret ng-show=showShadow></b><b class="caret off" ng-show=!showShadow></b></div><div ng-show=showShadow class=style_con_hei><div class="style_list_angel clearfix"><label>大小</label><div class="touming clearfix"><div class=slider his-records=true ui-slider-t ng-model=tmpModel.boxShadowSize min=0 max=20></div><p class=num><input limit-input class="input_kuang short" min=0 max=20 type=number style-input css-item=boxShadow ng-model="tmpModel.boxShadowSize"></p></div></div><div class="style_list_angel clearfix"><label>模糊</label><div class="touming clearfix"><div class=slider his-records=true ui-slider-t ng-model=tmpModel.boxShadowBlur min=0 max=20></div><p class=num><input limit-input class="input_kuang short" min=0 max=20 type=number style-input css-item=boxShadow ng-model="tmpModel.boxShadowBlur"></p></div></div><div class="style_list_angel clearfix"><label>颜色</label><div class="clearfix color_select"><input class="flo_right short" style=width:100px style-input ng-model=tmpModel.boxShadowColor css-item=boxShadow type="text"> <a class="input_kuang flo_lef" ng-style="{backgroundColor: tmpModel.boxShadowColor}" ng-model=tmpModel.boxShadowColor colorpicker=rgba colorpicker-fixed-position=true></a></div></div><div class="style_list_angel clearfix"><label>方向</label><div class="touming clearfix"><div class=slider his-records=true ui-slider-t ng-model=tmpModel.boxShadowDirection min=0 max=359></div><p class=num><input limit-input class="input_kuang short" min=0 max=359 type=number style-input css-item=boxShadow ng-model="tmpModel.boxShadowDirection"></p></div></div></div></section><section ng-if="isEditor && elemDef.type!=\'g\'" ng-include="\'scene/console/compstyle.tpl.html\'" ng-controller=CompStyleCtrl></section></div><div class=btn-option><a class="btn btn-sm green" ng-click=cancel()>确定</a> <a class="btn btn-sm out-red" ng-click=clear() ng-if="elemDef.type!=\'t\'">清除样式</a></div></div>')}]),angular.module("scene/console/tel.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/tel.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>电话组件 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13070&extra"></a> <span class=action ng-show=!authError>填写按钮名称和联系号码，点击可以直接拨打</span> <span ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class="modify_area tel_title tab-same clearfix"><span ng-repeat="button in buttons track by $index" ng-class="{spanborder: $index == btnIndex}"><a ng-style=button.btnStyle ng-click="chooseTabButton(button, $index)">{{button.text}}</a></span><div ng-class="{\'spanborder\': model.imgSrc}" class="auto-upload hint--top hint--rounded" data-hint=上传图片大小不超过3M，支持上传格式：jpg、png、gif ng-click=openImageModal()><em class=eqf-top-pic style=font-size:12px></em><em>自定义</em></div></div><div class="button_console dialog-content"><form class=form-contain form=role><div class="form-list clearfix" ng-if=!model.imgSrc><label for=buttonName class=form-label>按钮名称：</label><div class=form-input><input id=buttonName ng-class="{error: butName}" class=btn-name type=text ng-model=model.title check-count=40 ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation></div></div><div class="form-list clearfix" ng-if=model.imgSrc><label class=form-label>按钮图片：</label><div class="form-image btn-small"><img ng-src="{{PREFIX_FILE_HOST + model.imgSrc}}" alt="按钮图片"> <a class="btn-main btn-picture text-center" ng-click=openImageModal()>更换图片</a></div></div><div class="form-list clearfix"><label for=phoneNumber class=form-label>手机/电话：</label><div class=form-input><input id=phoneNumber ng-class="{error: butInput}" check-count=40 class=tel-button type=text placeholder=010-88888888 ng-model=model.number ng-keyup="$event.keyCode == 13 ? confirm() : null" stop-propagation></div></div></form></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/console/trigger.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/trigger.tpl.html",'<div ng-if="activeTab == \'trigger\'" ng-controller=TriggerConsoleCtrl><div style=height:410px><div eqd-scroll style="height: 100%" disable-mouse=true prevent-exception=true><div class=trigger-area eqx-trigger><div class=trigger-panels><div class="style_list_angel clearfix pl20"><label style="width: 100px;margin-top:5px">浏览页面时，当</label><div class="flo_lef touming"><eqx-select class="select-sm border-width select-contain" model=sendType change=changeTriggerType(v)><eqx-select-option value=v ng-repeat="v in sendTypes">{{v.title}}</eqx-select-option></eqx-select></div></div><div class="style_list_angel clearfix pl20" ng-show="sendType.value!=2"><label style=margin-top:5px>页面元素</label><div class="flo_lef touming"><eqx-select class="select-sm border-width select-contain" model=sourceElem change=getTriggerSources(sourceElem)><eqx-select-option value=null>点击选择元素</eqx-select-option><eqx-select-option value=triggerSource ng-repeat="triggerSource in triggerSources">{{triggerSource.name}}</eqx-select-option></eqx-select></div></div></div><div class=event-list><div ng-repeat="triggerEvent in triggerEvents track by $index" ng-init="sendIndex = $index"><div class=select-exist-elem ng-show="triggerEvent.value == 1"><section><div class="style_list pl20" ng-class={active:opea.show} ng-init="opea.show=true" ng-click="opea.show=!opea.show">{{triggerEvent.title}} <span ng-click="addTriggerItem(triggerEvent, $index, $event);opea.show=!opea.show;">&nbsp;&nbsp;&nbsp;&nbsp;编辑</span> <b class=caret ng-if=opea.show></b> <b class="caret off" ng-if=!opea.show></b> <span style=margin-left:35px class=eqf-wrong ng-click="removeTrigger($index, $event)"></span></div><div ng-if=opea.show><form role=form><div class="style_list_angel ml20 mr20"><label>延迟时间</label><div class="touming clearfix"><p class=num><input limit-input class="input_kuang short" type=number step=0.1 min=0 max=20 ng-model="triggerEvent.delay"></p><div class=slider ui-slider-t ng-model=triggerEvent.delay min=0 max=20></div></div></div><div class="select-trigger-item ml20 mr20"><ul ng-show=triggerEvent.handles.length><li ng-repeat="triggerElement in triggerEvent.triggerElements"><div style="padding: 10px 20px" ng-if="sourceElem.id!=triggerElement.id || sendType.value==2"><span hover-element id=triggerElement.id style="cursor: pointer"><span id="{{\'tip_\' + triggerElement.id}}"></span> {{$index+1}}</span><div class=fr><span style="padding-right: 5px" class=fl ng-click="switchShow(triggerElement, sendIndex)" ng-show="triggerElement.handleType.type==1">显示</span> <span style="padding-right: 5px" class=fl ng-click="switchShow(triggerElement, sendIndex)" ng-show="triggerElement.handleType.type==2">隐藏</span><div class=switch style=float:left ng-class="{\'switch-open\':triggerElement.handleType.type==1,\'switch-close\':triggerElement.handleType.type==2}" ng-click="switchShow( triggerElement, sendIndex)"><div class=circle-con><i class=circle></i></div></div><span style="padding-left: 10px" class=eqf-wrong ng-click="cancelTriggerElem(triggerElement.id, sendIndex);"></span></div></div><div style="padding: 10px 20px" ng-if="sendType.value!=2 && sourceElem.id==triggerElement.id"><span hover-element id=triggerElement.id style="cursor: pointer"><span id="{{\'tip_\' + triggerElement.id}}"></span> {{$index+1}}</span><div class=fr><span style="padding-right: 45px" class=fl>隐藏</span> <span style="padding-left: 10px" class=eqf-wrong ng-click="cancelTriggerElem(triggerElement.id, sendIndex);"></span></div></div></li></ul></div></form></div></section></div><div class=random-event ng-show="triggerEvent.value == 2"><section><div class="style_list pr20 pl20" ng-class={active:opea.show} ng-init="opea.show=true" ng-click="opea.show=!opea.show">{{triggerEvent.title}} <b class=caret ng-if=opea.show></b> <b class="caret off" ng-if=!opea.show></b> <span style=margin-left:34px class=eqf-wrong ng-click="removeTrigger($index, $event)"></span></div><div ng-if=opea.show><form role=form><div class="style_list_angel ml20 mr20"><label>延迟时间</label><div class="touming clearfix"><p class=num><input limit-input class="input_kuang short" type=number step=0.1 min=0 max=20 ng-model="triggerEvent.delay"></p><div class=slider ui-slider-t ng-model=triggerEvent.delay min=0 max=20></div></div></div><div class=select-trigger-item><div ng-show=triggerEvent.handles.length><div ng-repeat="handle in triggerEvent.handles"><div ng-repeat="id in handle.ids"><span style="cursor:pointer;padding: 10px 20px" hover-element id=id><span>随机图片</span> {{$index+1}}</span> <a style="display: inline" ng-click="cancelTriggerElem(id, sendIndex);">取消</a></div></div></div></div></form></div></section></div></div></div><div class="trigger-btn pl20" leave-panel><div class=event-panel style="margin-bottom: 5px"><div class=add-trigger ng-mousedown=$event.stopPropagation(); ng-click="obj.showTriggerPanel = true;$event.stopPropagation();">添加触发 <span class=clickmore></span></div><div><ul ng-show=obj.showTriggerPanel><li ng-repeat="eventType in eventTypes" ng-click="addTriggerEvent(eventType, triggerEvents.length || 0);obj.showTriggerPanel = false;">{{eventType.title}}</li></ul></div></div></div></div></div></div><div class=btn-option><a class="btn btn-sm green" ng-click=confirm()>确定</a> <a class="btn btn-sm out-red" ng-click=clear()>清除</a></div></div>')}]),angular.module("scene/console/triggerelemlist.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/triggerelemlist.tpl.html",'<div class=trigger-list><div class=modal-header><h4 class=modal-title>选择触发哪些元素显示或隐藏</h4></div><div class=modal-body><ul highlight-element><li class=trigger-elem ng-repeat="triggerElement in triggerElements track by $index" id="{{\'trigger_\' + triggerElement.id}}"><div><div class="square one-line" ng-if="elemDef.id != triggerElement.id"><div class=checkbox-square ng-class="{checked: triggerElement.checked}"><em class=eqf-clickmore></em> <input type=checkbox ng-model=triggerElement.checked ng-change="changed(triggerElement)"></div><label>{{triggerElement.name}}</label><div class=fr ng-if=triggerElement.checked><a style="padding-right: 5px" class=fl ng-click="switchShow(triggerElement, currentIndex);" ng-show="triggerElement.triggerType==1">显示</a> <a style="padding-right: 5px" class=fl ng-click="switchShow(triggerElement, currentIndex);" ng-show="triggerElement.triggerType==2">隐藏</a><div class=switch style=float:left ng-class="{\'switch-open\':triggerElement.triggerType==1,\'switch-close\':triggerElement.triggerType==2}" ng-click="switchShow( triggerElement, currentIndex)"><div class=circle-con><i class=circle></i></div></div></div></div><div ng-if="elemDef.id == triggerElement.id"><div class=checkbox-square ng-class="{checked: triggerElement.checked}"><em class=eqf-clickmore></em> <input type=checkbox ng-model=triggerElement.checked ng-change="changed(triggerElement,true)"></div><label>{{triggerElement.name}}</label><div class=fr ng-if=triggerElement.checked><a style="padding-right: 45px" class=fl>隐藏</a></div></div></div></li></ul></div><div class=modal-footer><a class="btn btn-primary" ng-click=confirmList()><span>确定</span></a></div></div>')}]),angular.module("scene/console/video.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/console/video.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>视频组件 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1926&extra="></a> <span ng-show=!authError class=action>把视频通用代码复制到框中即可使用</span> <span ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class="video_console dialog-content"><div class=modify_area style=height:auto><div class=video_tip><span>视频通用代码：</span> <span class=video_code><a href="/Public/help.htm" target=_blank><ins>什么是视频通用代码？</ins></a></span></div><div class=video_tip><textarea style=border-radius:0px class=video_src ng-model=model.src ng-keyup="$event.keyCode == 13 ? confirm() : null"></textarea></div><div class=video_tip><span>将视频的通用代码粘贴到文本框里即可。</span><a href="/Public/help.htm" target=_blank><ins>查看帮助</ins></a></div><div class=video_tip><span>支持的视频：</span><a href="http://www.youku.com/" target=_blank><ins>优酷</ins></a>、<a href="http://www.tudou.com/" target=_blank><ins>土豆</ins></a>、<a href="http://v.qq.com/" target=_blank><ins>腾讯视频</ins></a></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/create.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/create.tpl.html",'<div id=psdLoading><div class=loading-con><img ng-src={{CLIENT_CDN}}assets/images/puff.svg><div id=psdUploadStatus ng-show="psdUpload.total>0">{{psdUpload.currentNum}} / {{psdUpload.total}}</div><p>上传中，请稍后</p></div><div class=loading-bg></div></div><div class=create-bg style="position: fixed;top: 0;left: 0;right: 0;bottom: 0;background-color: #d0cfd8"></div><div class=creat_head conver-to-image><div class="creat_head_con clearfix"><div class=creat_logo><a href=/#/main ng-click=stopCopy()><img ng-src="{{logoSrc}}" alt=""></a></div><div class="creat_con clearfix"><ul class="comp_panel clearfix"><li comp-draggable=panel ctype=2 class="comp-draggable text" ng-click="createComp(\'2\');" data-event=12002><span class="eqf-text-word eqf-btn"></span> <span class=tip>文本</span></li><li comp-draggable=panel ctype=3 class="comp-draggable bg" ng-click="createComp(\'3\');" data-event=12003><span class="eqf-top-background eqf-btn"></span> <span class=tip>背景</span></li><li comp-draggable=panel ctype=9 class="comp-draggable music" ng-click="createComp(\'9\');" data-event=12004><span class="eqf-top-music eqf-btn"></span> <span class=tip>音乐</span></li><li comp-draggable=panel ctype=v class="comp-draggable vedio" ng-click="createComp(\'v\');" data-event=12005><span class="eqf-top-video eqf-btn"></span> <span class=tip>视频</span></li><li comp-draggable=panel ctype=4 class="comp-draggable image" ng-click="createComp(\'4\');" data-event=12006><span class="eqf-top-pic eqf-btn"></span> <span class=tip>图片</span></li><li comp-draggable=panel ctype=h class="comp-draggable image" ng-click="createComp(\'h\');" data-event=12007><span class="eqf-shape eqf-btn"></span> <span class=tip>形状</span></li><li comp-draggable=panel ctype=p class="comp-draggable images" ng-click="createComp(\'p\');" data-event=12008><span class="eqf-top-pics eqf-btn"></span> <span class=tip>图集</span></li><li class="interaction hint--bottom hint--rounded"><span class="eqf-refresh eqf-btn"></span><div class=form-menus><div class="popover bottom"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=l class="menu-item comp-draggable button hint--right hint--rounded" data-hint=点击添加链接 ng-click="createComp(\'l\');" data-event=12009><span class=eqf-link></span> <span class=menu-item-name>链接</span></li><li comp-draggable=panel ctype=g class="menu-item comp-draggable button hint--right hint--rounded" data-hint=点击添加链接 ng-click="createComp(\'g\');" data-event=120045 ng-if=isTplEditor><span class=eqf-link></span> <span class=menu-item-name>广告</span></li><li comp-draggable=panel ctype=8 class="menu-item comp-draggable phone hint--right hint--rounded" data-hint=点击添加电话 ng-click="createComp(\'8\');" data-event=12009><span class=eqf-glyphicon-earphone></span> <span class=menu-item-name>电话</span></li><li comp-draggable=panel ctype=trigger class="menu-item comp-draggable button hint--right hint--rounded" data-hint=点击添加触发 ng-click=openTriggerMode() data-event=12009><span class=eqf-chufa></span> <span class=menu-item-name>触发</span></li><li comp-draggable=panel ctype=m class="menu-item comp-draggable button hint--right hint--rounded" data-hint=点击添加地图 ng-click="createComp(\'m\');" data-event=12009><span class=eqf-map></span> <span class=menu-item-name>地图</span></li><li comp-draggable=panel ctype=s class="menu-item comp-draggable button hint--right hint--rounded" data-hint=点击添加音效 ng-click="createComp(\'s\');" data-event=12009><span class=eqf-music></span> <span class=menu-item-name>音效</span></li><li class=menu-item><span class=eqf-clock-o></span> <span class=menu-item-name>计数</span> <span class=caret></span><div class=menu-item-menu><div class="popover right"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=i class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加计数器 font=eqf-love ng-click="createComp(\'i\', \'eqf-love\');" data-event=12009><span class=eqf-love></span> <span class=menu-item-name>喜欢</span></li><li comp-draggable=panel ctype=i class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加计数器 font=eqf-good ng-click="createComp(\'i\', \'eqf-good\');" data-event=12009><span class=eqf-good></span> <span class=menu-item-name>顶起</span></li><li comp-draggable=panel ctype=i class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加计数器 font=eqf-flower2 ng-click="createComp(\'i\', \'eqf-flower2\');" data-event=12009><span class=eqf-flower2></span> <span class=menu-item-name>送花</span></li><li comp-draggable=panel ctype=i class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加计数器 font=eqf-vote ng-click="createComp(\'i\', \'eqf-vote\');" data-event=12009><span class=eqf-vote></span> <span class=menu-item-name>投票</span></li></ul></div></div></div></li><li class=menu-item><span class=eqf-date2></span> <span class=menu-item-name>统计</span> <span class=caret></span><div class=menu-item-menu><div class="popover right"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=d class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加计数器 ng-click="createComp(\'d\',\n\t\t\t\t\t\t\t\t\t\t\t  \t\'eqf-eye3\');" data-event=12009><span class=eqf-eye3></span> <span class=menu-item-name>阅读量</span></li></ul></div></div></div></li><li class="menu-item ng-hide"><span style="font-size: 10px" class=eqf-wechat></span> <span class="menu-item-name">微信 <span style="position: absolute;top: 1px;transform: scale(0.8);color: red">beta</span></span> <span style="margin-left: 1px" class=caret></span><div class=menu-item-menu><div class="popover right"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=w class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加微信昵称和头像 ng-click="showFirstTimeTip(\'w\');hideHeartTip(\'wechatWTip\');" data-event=12009><span class=eqf-top-contact></span> <span class=menu-item-name>头像</span></li><li comp-draggable=panel ctype=wp class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加微信图片 ng-click="showFirstTimeTip(\'wp\');hideHeartTip(\'wechatWTip\');" data-event=12009><span class=eqf-top-pic></span> <span class=menu-item-name>照片</span></li><li comp-draggable=panel ctype=wr class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加微信音频组件 ng-click="showFirstTimeTip(\'wr\');hideHeartTip(\'wechatWTip\');" data-event=12009><span class=eqf-voice></span> <span class=menu-item-name>声音</span></li></ul></div></div></div></li></ul></div></div></div><em ng-if=wechatWTip class="effect-tip heart ng-scope"></em> <span class=tip>互动</span></li><li class="form hint--bottom hint--rounded"><span class="eqf-top-list eqf-btn"></span><div class=form-menus><div class="popover bottom"><div class=arrow></div><div class=popover-content><ul class=menus><li class=menu-item><span class=eqf-glyphicon-list></span> <span class=menu-item-name>快捷表单</span> <span class=caret></span><div class=menu-item-menu><div class="popover right"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=g101 class="menu-item comp-draggable contact hint--right hint--rounded" data-hint=点击添加联系人 ng-click="createCompGroup(\'g101\');" data-event=12010><span class=eqf-top-contact></span> <span class=menu-item-name>联系人</span></li></ul></div></div></div></li><li class=menu-item><span class=eqf-option></span> <span class=menu-item-name>选项</span> <span class=caret></span><div class=menu-item-menu><div class="popover right"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=5 class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加输入框 ng-click="createComp(\'5\');" data-event=12010><span class=eqf-write></span> <span class=menu-item-name>输入框</span></li><li ng-if=isRadioCheckboxRatingAccessable comp-draggable=panel ctype=r class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加单选按钮 ng-click="createComp(\'r\');" data-event=12010><span class=eqf-single></span> <span class=menu-item-name>单选</span></li><li ng-if=isRadioCheckboxRatingAccessable comp-draggable=panel ctype=c class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加多选按钮 ng-click="createComp(\'c\');" data-event=12010><span class=eqf-morechoice></span> <span class=menu-item-name>多选</span></li><li ng-if=isRadioCheckboxRatingAccessable comp-draggable=panel ctype=c class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加多选按钮 ng-click="createComp(\'z\');" data-event=12010><span class=eqf-select></span> <span class=menu-item-name>下拉列表</span></li><li ng-if=isRadioCheckboxRatingAccessable comp-draggable=panel ctype=a class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加评分组件 ng-click="createComp(\'a\');" data-event=12010><span class=eqf-star></span> <span class=menu-item-name>评分</span></li></ul></div></div></div></li><li class=menu-item><span class=eqf-chart></span> <span class=menu-item-name>图表</span> <span class=caret></span><div class=menu-item-menu><div class="popover right"><div class=arrow></div><div class=popover-content><ul class=menus><li comp-draggable=panel ctype=t class="menu-item comp-draggable textarea hint--right hint--rounded" data-hint=点击添加饼状图 font=pie ng-click="createComp(\'t\', \'pie\'); hideHeartTip(\'showAddFormTip\');" data-event=12010><span class=eqf-pie></span> <span class=menu-item-name>饼状图</span></li><li comp-draggable=panel ctype=t class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加柱状图 font=bar ng-click="createComp(\'t\', \'bar\'); hideHeartTip(\'showAddFormTip\');" data-event=12010><span class=eqf-bar-chart></span> <span class=menu-item-name>柱状图</span></li><li comp-draggable=panel ctype=t class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加折线图 font=line ng-click="createComp(\'t\', \'line\'); hideHeartTip(\'showAddFormTip\');" data-event=12010><span class=eqf-line2></span> <span class=menu-item-name>折线图</span></li><li comp-draggable=panel ctype=t class="menu-item comp-draggable radio-input hint--right hint--rounded" data-hint=点击添加曲面图 font=curve ng-click="createComp(\'t\', \'curve\'); hideHeartTip(\'showAddFormTip\');" data-event=12010><span class=eqf-circle-line></span> <span class=menu-item-name>曲面图</span></li></ul></div></div></div></li><li comp-draggable=panel ctype=b class="menu-item comp-draggable button hint--right hint--rounded" data-hint=一个场景建议只添加一个 ng-click="createComp(\'b\'); hideHeartTip(\'showAddFormTip\');" data-event=12010><span class=eqf-boards></span> <span class=menu-item-name>留言板</span></li><li comp-draggable=panel ctype=6 class="menu-item comp-draggable button hint--right hint--rounded" data-hint=一个场景建议只添加一个 ng-click="createComp(\'6\');" data-event=12010><span class=eqf-top-button></span> <span class=menu-item-name>提交按钮</span></li></ul></div></div></div><em ng-if=showAddFormTip class="effect-tip heart ng-scope"></em> <span class=tip>表单</span></li><li ng-click="openPageEffectModal(tpl.obj.properties);showPage=true;hideEffTip()" class="comp-draggable images" data-event=12011><span class="eqf-top-star eqf-btn"></span> <span class=tip>特效</span></li></ul></div><div class=create-action><ul><li class="act-border setting gray-dark all-change" ng-click=openSetting() data-event=12012><span class=tip>设置</span></li><li class="act-border save gray-dark all-change" ng-click=saveScene(true) data-event=12013><span class=tip>保存</span></li><li class="publish gray-dark all-change" ng-click=publishScene() data-event=12014><span class=tip>发布</span></li><li class="act-border quit out-red" ng-click=exitScene() data-event=12015><span class=tip>退出</span></li></ul></div><div ng-hide=showToolBar();><div ng-show=isEditor style="position: absolute;right: 225px;top: 20px"><select ng-model=tpl.obj.isTpl><option value=0>非模板</option><option value=1>保存为pc模板</option><option value=2>保存为移动端模板</option></select></div></div></div></div><div class=create_scene><div class="main clearfix" mouse-comp-select><div class=content><div class=create_left conver-to-image><ul class="nav nav-tabs"><li ng-class="{active:tabid==\'template\'}"><a ng-click=setTplTab() class=all-change data-event=12016>模板中心</a></li><li ng-class="{active:tabid==\'myCollection\'}"><a ng-click=getPageTplsByMyType(); class=all-change data-event=12017>我的模板</a></li></ul><div class=tab-panel style=height:100% ng-show="tabid==\'template\'"><div class="sel-contain all-change" style=left:10px><eqx-select class=select-great model=pageTpl.format change=getPageTpls()><eqx-select-option value=null>用途</eqx-select-option><eqx-select-option value=type.id ng-repeat="type in tplFormatList">{{type.name}}</eqx-select-option></eqx-select></div><div class="sel-contain all-change" style=left:103px><eqx-select class=select-great model=pageTpl.style change=getPageTpls()><eqx-select-option value=null>功能</eqx-select-option><eqx-select-option value=type.id ng-repeat="type in tplStyleList">{{type.name}}</eqx-select-option></eqx-select></div><div class="sel-contain all-change" style=left:196px><eqx-select class=select-great model=pageTpl.interaction change=getPageTpls()><eqx-select-option value=null>风格</eqx-select-option><eqx-select-option value=type.id ng-repeat="type in tplInteractionList">{{type.name}}</eqx-select-option></eqx-select></div><div ng-if=pageTpl.showColorPanel ng-change=getPageTpls() ng-click=$event.stopPropagation() ng-model=pageTpl.color page-tpl-color class="page-color-panel zoomIn-change"></div><div style=left:10px;top:50px;position:absolute><input class=search placeholder=输入名称搜索模板 ng-keypress=enterPress($event) type=text ng-model="pageTpl.name"><span ng-if=showSearch class="eqf-search search-icon" ng-click=getPageTpls()></span> <span ng-if=!showSearch class="eqf-wrong search-icon" ng-click=resetTplFilter()></span></div><div class="page_tpl_container clearfix"><div eqd-scroll style="height: 100%" refresh=refreshTpl()><ul class=tpl-container><li class="page_tpl_item comp-draggable animation-zoom ng-scope" ng-repeat="pageTpl in pageTpls track by $index" ng-click=insertPageTpl(pageTpl.id); ng-style="{\'animation-delay\': $index%42 * 50 + \'ms\'}" tooltip-placement=right tooltip={{pageTpl.name}}><img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src=assets/images/create/pic.svg load-err> <span class=bFlag_longPage ng-if=pageTpl.properties.longPage>长<i>{{pageTpl.properties.longPage}}</i></span></li></ul></div></div></div><div class=tab-panel ng-show="tabid==\'myCollection\'" style=height:100%;padding-top:10px><div class=empty-collection ng-if="!myPageTpls || myPageTpls.length==0"><p class=pb20>暂无模板</p><img ng-src={{CLIENT_CDN}}assets/images/create/collection.svg></div><div eqd-scroll style="height: 100%" ng-if="myPageTpls && myPageTpls.length!=0" refresh=refreshTpl()><ul class="page_tpl_container clearfix" style=position:relative;top:0><li thumb-tpl my-tpl=pageTpl class="nr page_tpl_item comp-draggable my-tpl animation-zoom" ng-repeat="pageTpl in myPageTpls" title=点击使用 id=my-tpl ng-click=insertPageTpl(pageTpl.id); ng-style="{\'animation-delay\': $index * 50 + \'ms\'}"></li></ul></div></div><div class=tab-panel style=height:100%;padding-top:10px ng-show="tabid==\'recentlyUsed\'"><div ng-if=!myRecentlyTpls class=empty-recent></div><div eqd-scroll style="height: 100%" ng-if=myRecentlyTpls><ul class="page_tpl_container clearfix" style=position:relative;top:0><li class="nr page_tpl_item comp-draggable animation-zoom" ng-repeat="pageTpl in myRecentlyTpls track by $index" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}" ng-click=insertPageTpl(pageTpl.id);><img ng-src="{{PREFIX_FILE_HOST + pageTpl.properties.thumbSrc}}" src=assets/images/create/pic.svg load-err> <span class=bFlag_longPage ng-if=pageTpl.properties.longPage>长<i>{{pageTpl.properties.longPage}}</i></span></li></ul></div></div><div class=tab-panel style=height:100%;padding-top:10px ng-show="tabid==\'company\'" ng-if="userProperty.type ==1"><div class=empty-collection><div class="pb20 pl20 pr20"><a class=text-primary target=_blank href=/#/privilege>免费升级</a>企业会员尊享该功能</div><img ng-src={{CLIENT_CDN}}assets/images/create/collection.svg></div></div><div class=tab-panel style=height:100%;padding-top:10px ng-show="tabid==\'company\'" ng-if="userProperty.type ==2 || userProperty.type ==21 || userProperty.type ==5 || userProperty.type ==51"><div class=empty-company ng-if="!myCompanyTpls || myCompanyTpls.length==0"><div>在页面管理中选中页面，点击企业模板，即可生成企业页面模板！</div></div><div eqd-scroll ng-if="myCompanyTpls && myCompanyTpls.length>0" style="height: 100%"><ul class="page_tpl_container clearfix" style=top:0;position:relative><li thumb-tpl my-tpl=pageTpl style="position: relative" id=company-tpl class="nr page_tpl_item comp-draggable my-tpl animation-zoom" ng-repeat="pageTpl in myCompanyTpls" ng-style="{\'animation-delay\': $index * 50 + \'ms\'}" ng-click=insertPageTpl(pageTpl.id);><span class=bFlag_longPage ng-if=pageTpl.properties.longPage>长<i>{{pageTpl.properties.longPage}}</i></span></li></ul></div></div></div><div class=workspace style="overflow: auto" page-scroll page-h={{pageLength}} comp-droppable ng-class="{\'auto-flow\':pageLength!=1}"><div class=scaleTips>100%</div><div style="transform-origin: 0 0" edit-workspace scale={{scale}}><div class=container multi-comp-drag><div edit-common edit-keymap><div class="nr sortable" ng-style="{\'true\': {\'top\':0}, false: {}}[isLong]" id=nr element-anim paste-element></div><div ng-if=showPhone class=phone><h4 class=name>{{scene.name}}</h4></div><div ng-class="{box1:pageLength==1,box2:pageLength==2,box3:pageLength==3,box4:pageLength==4,box5:pageLength==5}" class=box outer-box page-h={{pageLength}}><div class=internal-box></div></div><div class=history ng-class={history2:showPhone}><a data-hint=撤消(ctrl+z) ng-class="{active: canBack}" class="hint--right hint--rounded" ng-click=back() data-event=12027><i class=eqf-bg style=font-size:12px></i></a> <a data-hint=恢复(ctrl+y) ng-class="{active: canForward}" class="hint--right hint--rounded" ng-click=forward() data-event=12028><i class=eqf-back style=font-size:12px></i></a> <a data-hint=刷新预览 class="active hint--right hint--rounded" ng-click="refreshPage(tpl.obj, pageNum, $event)" data-event=12029><i class=eqf-play2></i></a> <a data-hint=复制当前页 style=margin-bottom:1px class="active hint--right hint--rounded" ng-click=duplicatePage() data-event=12030><i class=eqf-scene-copy></i></a> <a data-hint=背景 ng-click="closeOtherPanel(\'showBackgroundPanel\');openBgPanel();" close-panel model=showBackgroundPanel pause={{!controlView.showBgTag}} class="hint--right hint--rounded" ng-class={active:controlView.showBgTag} data-event=12031><i class=eqf-top-background style=font-size:13px></i></a> <a data-hint=音乐 close-panel model=showMusicPanel pause={{!scene.bgAudio}} class="hint--right hint--rounded" ng-click="openAudioPanel();closeOtherPanel(\'showMusicPanel\');" ng-class={active:scene.bgAudio} data-event=12032><i class=eqf-top-music></i></a> <a data-hint=特效 close-panel model=showEffectsPanel pause="{{!(tpl.obj.properties.scratch || tpl.obj.properties.finger || tpl.obj.properties.fallingObject || tpl.obj.properties.effect)}}" class="hint--right hint--rounded" style=margin-bottom:1px ng-click="openEffects();closeOtherPanel(\'showEffectsPanel\');" ng-class="{active:(tpl.obj.properties.scratch || tpl.obj.properties.finger || tpl.obj.properties.fallingObject || tpl.obj.properties.effect)}" data-event=12033><i class=eqf-top-star style=font-size:16px></i></a> <a data-hint=网格设置 class="hint--right hint--rounded grid-guide" ng-click="$event.stopPropagation();closeOtherPanel(\'gridGuideSetting.showFlag\');" ng-class="{active: (gridGuideSetting.showFlag || gridGuideSetting.isGridEnabled)}" data-event=12034><i class=eqf-wangge style=font-size:13px></i></a> <a data-hint=编辑区域缩放 ng-show="user.type==4" ng-click="closeOtherPanel(\'showZoomPanel\');hideHeartTip(\'scaleTip\');" close-panel pause=false model=showZoomPanel class="hint--right hint--rounded active"><em class="imp heart" ng-if=scaleTip></em> <i class=eqf-search style=font-size:15px></i></a> <a data-hint=手机边框 class="hint--right hint--rounded" ng-click=switchPhone(isLong) ng-class="{active: showPhone}" data-event=12035><em class="imp heart" ng-if=showPhoneTip></em> <i class=eqf-phone style=font-size:15px></i></a><div data-hint=psd文件上传 class="hint--right hint--rounded psdUploadButton" ng-if=isPsdUploadAccessable><div psd-upload=psdUpload></div></div><a id=warn data-hint=警告 class="hint--right hint--rounded" style=display:none><i class=eqf-exclamation-sign></i></a><div class=grid-guide-container ng-click=$event.stopPropagation(); ng-class="{\'on\': gridGuideSetting.showFlag}" grid-guide-setting></div><div ng-controller=editBgCtrl ng-include="\'scene/edit/editbg/editbg.tpl.html\'"></div><div class=effects-container ng-class="{\'on\':showEffectsPanel}"><div class=effects-panel><div class=setting-group ng-click=openPageEffectModal(tpl.obj.properties) data-event=12033><div class=setting-btn><span class=eqf-refresh></span></div><span>更换</span></div><div class=setting-group ng-click="removeScratch($event);showEffectsPanel=false;" data-event=12033><div class=setting-btn><span class=eqf-scene-delete></span></div><span>删除</span></div></div></div><div class=music-container ng-class="{\'on\':showMusicPanel}"><div class=music-panel><div class=setting-group ng-click=openAudioModal() data-event=12032><span>更换</span><div class=setting-btn><span class=eqf-refresh ng-click=openPageEffectModal(tpl.obj.properties)></span></div></div><div class=setting-group ng-click="removeAudio($event);showMusicPanel=false;" data-event=12032><span>删除</span><div class=setting-btn><span class=eqf-scene-delete></span></div></div></div></div><div class=zoom-container ng-class="{\'on\':showZoomPanel}"><div class=zoom-panel><a ng-click=zoom(true)><i class=eqf-bigger></i></a> <a ng-click=zoom(false)><i class=eqf-small></i></a> <a ng-click=recovery()>默认</a></div></div></div></div></div></div></div><div id=containment class=create_right ng-init="pagetab=\'page\'" conver-to-image><ul class="nav nav-tabs" ng-show=isCompMange><li ng-class="{active:pagetab==\'page\'}"><a ng-click="pagetab=\'page\'">页面模板</a></li><li ng-class="{active:pagetab==\'comp\'}"><a ng-click="pagetab=\'comp\'">组件管理</a></li></ul><div class=nav_top ng-show="pagetab==\'page\'" ng-style="{true:{\'background-color\':\'#f0f3f4\'},false:{}}[isCompMange]"><div class=nav_top_list><div class=save_template ng-include="\'scene/saveTemplate.tpl.html\'" ng-controller=saveTemplateCtrl></div></div></div><div class=nav_content ng-style="{true: {\'top\':\'78px\'}, false: {}}[isCompMange]" ng-show="pagetab==\'page\'"><div eqd-scroll style="height: 100%" prevent-exception=true disable-mouse=true><ul class=page-uls id=pageList ui-sortable=sortableOptions ng-model=pages><li class=blurClass ng-repeat="page in pages track by $index" ng-click="navTo(page, $index, $event);" ng-init=setEditableStatus($index,false) ng-class="{current: pageNum-1 == $index,createLongPage:page.properties.longPage}" blur-children><span class=number><em>{{$index+1}}</em></span> <span class=page-name ng-click="pageNum-1 == $index?setEditableStatus($index,true,$event):return;" ng-show=!editableStatus[$index]>{{page.name}}</span> <input style="width: 110px;display:inline-block; height: 25px; line-height: 25px; color: #999;margin-top:22px;margin-left:2px;box-shadow:none" type=text ng-model=page.name ng-show=editableStatus[$index] ng-blur="setEditableStatus($index,false);savePageNames(page, $index)" ng-focus=getOriginPageName(page) check-count=30 custom-focus stop-propagation></li></ul></div><div class=page-list-label ng-show="isTplEditor && controlView.pageList == true" panel-draggable><div ng-include="\'scene/page/page-tpl.tpl.html\'" ng-controller=PageTplController></div></div><div class=tpl-option></div></div><div class=nav_content ng-if="pagetab==\'comp\'" ng-include="\'scene/edit/workspace/compsManage.tpl.html\'" ng-controller=CompsManageCtrl></div><div class=nav_bottom><a class=eqf-more close-panel model=showPage pause=false ng-click="showPage=true;hidePageTip();"><em class="imp heart" ng-if=showAddPageTip></em></a> <a ng-click=longAction() class="insert hint--top hint--rounded fade-color" data-hint=添加一页 data-event=12022>+</a><div ng-show=showPage><ul><li ng-click="insertPage();showPage=false;" data-event=12022>新建页面</li><li ng-click=addLongPage() data-event=12023>新建纵向长页面</li></ul></div></div><div ng-show=isTplEditor style="position: absolute;bottom: 20px;right: 268px;width: 100px"><div class=btn-main style="width: 100px" ng-click=chooseThumb()>选择本页缩略图</div><img width=100 ng-src="{{PREFIX_FILE_HOST + tpl.obj.properties.thumbSrc}}"></div></div><div ng-include="\'scene/edit/select/select.tpl.html\'" ng-controller=selectCtrl></div></div></div><div ng-class={showin:showHeadTip} class=showxiu><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="showHeadTip=false;"><span aria-hidden=true>×</span></button><h4 class=modal-title>头像</h4></div><div class=modal-body><p style="line-height: 30px">可轻松显示浏览者或分享者的微信昵称和头像（属性栏中选择）。仅在微信中浏览时有效，非微信环境浏览时，将显示默认文字和图片（双击设置默认内容）</p></div><div class=modal-footer><input type=checkbox style=margin-top:0;margin-right:5px ng-model=hideHeadTip ng-change="switchShowFontTip(hideHeadTip,\'w\')"><span style=margin-right:10px>不再提示</span> <a type=button class="btn btn-primary" ng-click="createComp(\'w\');showHeadTip=false;">确定</a></div></div><div ng-class={showin:showImageTip} class=showxiu><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="showImageTip=false;"><span aria-hidden=true>×</span></button><h4 class=modal-title>照片</h4></div><div class=modal-body><p style="line-height: 30px">在微信中浏览时，轻触图片即可更换图片，更换后再分享，朋友就能看到您的美图。赶快试一试，同一场景，不同人分享，图片内容可以完全不一样哟！！仅在微信中浏览时有效，分享后的图片可在微信中保留三天，三天将会显示您的默认图片；非微信环境浏览时，将显示默认图片（双击设置默认内容）。</p></div><div class=modal-footer><input type=checkbox style=margin-top:0;margin-right:5px ng-model=hideImageTip ng-change="switchShowFontTip(hideImageTip,\'wp\')"><span style=margin-right:10px>不再提示</span> <a type=button class="btn btn-primary" ng-click="createComp(\'wp\');showImageTip=false;">确定</a></div></div><div ng-class={showin:showVoiceTip} class=showxiu><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="showVoiceTip=false;"><span aria-hidden=true>×</span></button><h4 class=modal-title>声音</h4></div><div class=modal-body><p style="line-height: 30px">在微信中浏览时，点击组件可听声音。长按“按住说话”即可录制声音，更换后再分享，朋友就能听到您的声音。赶快试一试，同一场景，不同人分享，声音内容可以完全不一样哟！！仅在微信中浏览时有效，分享后的声音可在微信中保留三天，三天将会播放默认声音；非微信环境浏览时，将播放默认声音。</p></div><div class=modal-footer><input type=checkbox style=margin-top:0;margin-right:5px ng-model=hideVoiceTip ng-change="switchShowFontTip(hideVoiceTip,\'wr\')"><span style=margin-right:10px>不再提示</span> <a type=button class="btn btn-primary" ng-click="createComp(\'wr\');showVoiceTip=false;">确定</a></div></div><div ng-class={showin:addLong} class=showxiu><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="addLong=false;"><span aria-hidden=true>×</span></button><h4 class=modal-title>长页面</h4></div><div class=modal-body><p style="line-height: 30px">新增超长单页，可通过右下角“<span class=eqf-more></span>”按钮创建</p></div><div class=modal-footer><input type=checkbox style=margin-top:0;margin-right:5px ng-model=hideLong ng-change="switchShowFontTip(hideLong,\'long\')"><span style=margin-right:10px>不再提示</span> <a type=button class="btn btn-primary" ng-click="insertPage();addLong=false;">确定</a></div></div><div class=scene-setting ng-if=sceneSetting.showFlag scene-setting-component></div></div><div ng-class={showin:psdUpload.showPsdWarn} class=showxiu><div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click="psdUpload.showPsdWarn=false;"><span aria-hidden=true>×</span></button><h4 class=modal-title>PSD上传</h4></div><div class=modal-body><p style="line-height: 30px">1. 建议上传单页PSD尺寸为640*1008px。<br>2. 为保证上传速度，PSD文件大小不超过30M，图层不能超过30个，且每个图层不能够超过5M。<br>3. 为保证图片质量，建议上传前尽量将效果合并至图层中。</p></div><div class=modal-footer><a type=button class="btn btn-primary" ng-click=psdUpload.openPsdFileChooseBox();>确定</a></div></div>')}]),angular.module("scene/createNew.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/createNew.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>新建场景 <span class=action ng-show=authError>{{authError}}</span></h4></div><div class=dialog-contain><div class=dialog-content style=margin-top:40px><form name=resetForm novalidate class=form-horizontal><div class=form-group><label class="text-right col-sm-2" style=padding-top:10px;margin-left:80px>选择分类：</label><div class=col-sm-6><eqx-select class="select-contain select-great border-width" model=scene.type change=selectBranch(global.branch)><eqx-select-option value=scenetype ng-repeat="scenetype in scene.types">{{scenetype.name}}</eqx-select-option></eqx-select></div></div><div class=form-list ng-show=false><select ng-model=scene.pageMode ng-options="pagemode.name for pagemode in pagemodes"></select></div><p style=font-size:12px;text-align:center;margin-bottom:20px;margin-top:20px></p></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel() ng-disabled=form.$invalid>取消</a> <a class="btn btn-primary" ng-click=create() ng-disabled=form.$invalid>创建</a></div></div>')}]),angular.module("scene/edit/editbg/editbg.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/edit/editbg/editbg.tpl.html",'<div class=background-container ng-class="{\'on\':showBackgroundPanel}"><div class=background-panel><div class=setting-group ng-if=currentBgDef.properties.imgSrc ng-mouseenter=switchBgOption(false);$event.stopPropagation() ng-click=cropBg(currentBgDef);><div class=setting-btn><span class=eqf-cut></span></div><span>裁剪</span></div><div class=setting-group ng-mouseenter=switchBgOption(false);$event.stopPropagation() ng-click=replaceBg(currentBgDef)><div class=setting-btn><span class=eqf-refresh></span></div><span>更换</span></div><div class=setting-group ng-show="currentBgDef.properties.croptype!=2" ng-mouseenter=switchBgOption(true);$event.stopPropagation()><div class=setting-btn><span class=eqf-xiaoguo></span></div><span>效果</span></div><div class=setting-group ng-mouseenter=switchBgOption(false);$event.stopPropagation() ng-click=removeBG($event)><div class=setting-btn><span class=eqf-scene-delete></span></div><span>删除</span></div></div></div><div class=bgoption-container ng-class="{\'on\':(showBgOptionPanel&&showBackgroundPanel)}"><div class=bgoption-panel><div class=setting-group ng-class="{active:(currentBgDef.effect && currentBgDef.effect.type==\'scaleUp\')}" ng-click=scaleUpBg(currentBgDef);><div class=setting-btn><span class=eqf-bigger></span></div><span>放大</span></div><div class=setting-group ng-class="{active:(currentBgDef.effect && currentBgDef.effect.type==\'scaleDown\')}" ng-click=scaleDownBg(currentBgDef)><div class=setting-btn><span class=eqf-small></span></div><span>缩小</span></div><div class=setting-group ng-if=currentBgDef.effect ng-click=removeBgEffect($event)><div class=setting-btn><span class=eqf-wrong></span></div><span>删除</span></div></div></div>')}]),angular.module("scene/edit/select/select.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/edit/select/select.tpl.html",'<div class=select-panel ng-show=showSelectPanel panel-draggable><div class="modal-header ng-scope"><span>多选操作</span></div><div class=select-content><ul><li><a class="hint--bottom hint--rounded" data-hint=左对齐 eqx-align-left><span class=eqf-putleft></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=水平居中对齐 eqx-align-horizontal-center><span class=eqf-putmiddle></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=右对齐 eqx-align-right><span class=eqf-putright></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=上对齐 eqx-align-top><span class=eqf-puttop></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=垂直居中对齐 eqx-align-vertical-center><span class=eqf-putcenter></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=下对齐 eqx-align-bottom><span class=eqf-putunder></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=竖直均分 eqx-vertical-average><span class=eqf-chuizhijunfen></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=水平均分 eqx-horizontal-average><span class=eqf-shuipingjunfen></span></a></li></ul><ul><li><a class="hint--bottom hint--rounded" data-hint=复制 eqx-copy><span class=eqf-scene-copy></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=粘贴 eqx-paste ng-style="{opacity: pasteOpacity}"><span class=eqf-print></span></a></li><li><a class="hint--bottom hint--rounded" data-hint=删除 eqx-delete-more><span class=eqf-scene-delete></span></a></li></ul></div></div>')}]),angular.module("scene/edit/workspace/compsManage.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/edit/workspace/compsManage.tpl.html",'<div eqd-scroll style="height: 100%" prevent-exception=true disable-mouse=true><ul class=page-uls ng-mousedown=$event.stopPropagation() ui-sortable=compSortOption ng-model=setComps><li class="blurClass compli" ng-repeat="comp in setComps track by $index" ng-class="{current: comp.id==curCompId}" blur-children><span class="page-name el-name" ng-click=setCompEditStatus($index,true,comp.id) ng-show=!compEditStatus[$index]>{{comp.setlabel}}</span> <span class="page-name el-name" ng-if="isCompMange && !isEditor" ng-click=setCompEditStatus($index,true,comp.id) ng-show=compEditStatus[$index]>{{comp.setlabel}}</span> <input ng-if=isTplEditor style="width: 110px;display:inline-block; height: 25px; line-height: 25px; color: #999;margin-top:7px;margin-left:15px;box-shadow:none" type=text ng-model=comp.setlabel ng-blur=setCompEditStatus($index,false,comp.id) ng-show=compEditStatus[$index] custom-focus stop-propagation> <i class=eqf-star-line ng-if="isCompMange && comp.setstatus!=4"></i></li></ul></div>')}]),angular.module("scene/effect/falling.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/effect/falling.tpl.html",'<div id=page_panel ng-if="effectType == \'fallingObject\'" class="dropdown-menu1 panel panel-default"><div class=panel-heading>落物设置</div><div class=panel-body><form class=form-horizontal role=form><div class="form-group form-group-sm" style=margin-bottom:10px><label class="col-sm-5 control-label">环境图片</label><div class=col-sm-7><select ng-model=falling.src ng-options="fallingObj.name for fallingObj in fallings"></select></div></div><div class=divider></div><div class=well style="margin-bottom:15px;text-align: center;background-color: #ddd"><img ng-src={{falling.src.path}} style="width:60px;height:60px"></div><div class=divider></div><div class="form-group form-group-sm" style=margin-bottom:10px><label class="col-sm-5 control-label">环境氛围</label><div class=col-sm-7><div style="line-height: 24px;font-size: 12px"><span style=margin-right:39px>弱</span><span style=margin-right:37px>中</span><span>强</span></div><div style="width: 100px" ui-slider min=1 max=3 ng-model=falling.density></div></div></div><div class="form-group form-group-sm" style=margin-bottom:0px><div class=modal-footer style=padding-bottom:0px><a class=btn-main dropdown-toggle type=button ng-click=saveEffect(falling) class="btn btn-success btn-sm btn-main login" style=width:88px>保存</a> <a dropdown-toggle type=button ng-click=cancelEffect() class=btn-grey0 style=width:88px>取消</a></div></div></form></div></div>')}]),angular.module("scene/effect/snowfly.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/effect/snowfly.tpl.html","")}]),angular.module("scene/font/font-shopping.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/font/font-shopping.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>字体商城</h4></div><div class="dialog-contain font-nav-tag"><div class=font-type><ul><li ng-click=getMyFontFamily(); ng-class="{active:modal.fontType == \'my\'}"><a href="">我的字库</a></li><li ng-click=getFontType(1); ng-class="{active:modal.fontType == 1}"><a href="">'+your_webname+'字库</a></li><li ng-click=getFontType(2); ng-class="{active:modal.fontType == 2}"><a href="">方正字库</a></li><li ng-click=getFontType(3); ng-class="{active:modal.fontType == 3}"><a href="">汉仪字库</a></li></ul></div><div class="dialog-content bg_console sound-flex clearfix" style="height: 470px"><div class=cate-title><div style=height:470px><div eqd-scroll style="height: 100%" disable-mouse=true prevent-exception=true><ul class="nav tabs-left" style=padding-top:0><li ng-repeat="font in currentTypeFontLists" ng-click="tabViewFont(font, $index);" class=font-type-detail ng-class="{active: fontIndex == $index}" tab-font><a href="" data-toggle=tab>{{font.name}} <span class=eqf-lock ng-if="font.status === 0 && modal.fontType == \'my\' &&\n                                (font.userId === user.id || font.userId === null || font.userId === undefined)" ng-click=openCloseFontStatus(font)></span> <span class=eqf-lock-open ng-if="font.status === 1 && modal.fontType == \'my\'\n                                && (font.userId === user.id || font.userId === null || font.userId === undefined)" ng-click=openCloseFontStatus(font)></span> <span class="" ng-if="modal.fontType != \'my\' && font.status == 3"></span> <span class=eqf-buy ng-if="modal.fontType != \'my\' && font.status != 3 && !(font.license == 0 && (user.type == 21 || user.type == 51))" ng-click=buyFont(font)></span></a></li></ul></div></div></div><div class="cate-list bg-rig"><div class="tab-pane active tab-head"><span class=buy-font-btn ng-if=" currentTypeFontLists.length !== 0 "><a class="btn btn-primary" ng-if="currentViewObj.status === 1 && modal.fontType == \'my\'\n                        && (currentViewObj.userId === user.id || currentViewObj.userId === null || currentViewObj.userId === undefined)" ng-click=openCloseFontStatus(currentViewObj)>关闭</a> <a class="btn btn-primary" ng-if="modal.fontType !== \'my\' && currentViewObj.status != 3\n                        && !(currentViewObj.license == 0 && (user.type == 21 || user.type == 51))" ng-click=buyFont(currentViewObj)>{{currentViewObj.price != null ? currentViewObj.price : 0}}秀点 <i class=eqf-buy></i></a> <a class="btn btn-primary" ng-if="currentViewObj.status === 0 && modal.fontType == \'my\'\n                        && (currentViewObj.userId === user.id || currentViewObj.userId === null || currentViewObj.userId === undefined)" ng-click=openCloseFontStatus(currentViewObj)>开启 <i class=eqf-lock-open></i></a> <a class="btn btn-primary" ng-if="(currentViewObj.status === 3 || (currentViewObj.license === 0 && (user.type == 21 || user.type == 51))) && modal.fontType != \'my\'">已购买 <i class=""></i></a></span> <span><span class="assign-group drop-area" style=padding:0><em>字体预览</em>&nbsp;&nbsp;&nbsp;</span></span></div><div class=img_list><font-face fontface={{fontFaceStr}}></font-face><div class="img_list_container photo_list font-style"><ul class="img_box clearfix" style=""><div id=view-font ng-style="{\'font-family\' : modal.fontFamily}"><div class=yqx>'+your_webname+"</div><div class=adword><span>免费</span> <em>/</em> <span>简单</span> <em>/</em> <span>好用</span></div></div></ul></div></div></div></div></div>")}]),angular.module("scene/font/fontPurpose.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/font/fontPurpose.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>购买字体</h4></div><div class="dialog-contain font-nav-tag bug-font-modal"><div class=buy-font-info><div ng-if="font.license == undefined "><input type=radio ng-model=usage.type value=personal> <span>购买个人授权版本，仅用于个人非商业传播（{{font.personal.price}}秀点)</span></div><div ng-if="font.license == 0 "><span>已购买个人授权版本,仅用于个人非商业传播</span></div><div ng-show="font.license !=1 && userType != 21 && userType != 51 "><input type=radio ng-model=usage.type value=business ng-checked=true> <span>购买企业授权版本，可用于商业传播（{{font.business.price}}秀点）</span></div></div></div><div class="btn-contain btn-small"><a ng-show="font.license == null || ( font.license == 0 && userType != 21 && userType != 51)" ng-click=confirmBuyFont(); class=btn-main>立即购买</a> <a ng-click=cancel(); class=btn-grey0>取消</a></div>')}]),angular.module("scene/newLongPage.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/newLongPage.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>选择页面长度</h4></div><div class=dialog-contain><div class=dialog-content style=margin-top:40px;margin-bottom:40px><form name=resetForm novalidate class=form-horizontal><div class=form-group><label class="text-right col-sm-2" style=padding-top:10px;margin-left:80px>页面长度：</label><div class=col-sm-6><eqx-select class="select-great select-great border-width" model=newPageLength change=changePageLength(newPageLength)><eqx-select-option value=len.value ng-repeat="len in pageLengths">{{len.name}}</eqx-select-option></eqx-select></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=create()>确定</a></div></div>')}]),angular.module("scene/page/page-tpl.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/page/page-tpl.tpl.html",'<div ng-show="scene.isTpl==2 || isTplEditor"><h4>元素特性设置</h4><div><ul class=tpl-uls ng-repeat="tplElement in textElements"><li hover-element id=tplElement.id><span>文字&nbsp;{{$index+1}}</span> <span>类型</span><select ng-model=tplElement.properties.type><option value=0>无</option><option value=1>收卡人</option><option value=2>发卡人</option><option value=3>祝福语</option></select></li></ul><ul class=tpl-uls ng-repeat="tplElement in tplElements"><li hover-element id=tplElement.id><span>图片&nbsp;{{$index+1}}</span> <span>可替换</span> <input type=checkbox ng-model=tplElement.isEditable ng-true-value=1 ng-false-value=-1 ng-checked="tplElement.isEditable == 1"></li></ul></div><div class=line></div></div><div><label ng-repeat="allchild in pageLabelAll"><input type=checkbox name="" value="" ng-model=allchild.ischecked>{{allchild.name}}</label></div><div class=select-labels><a ng-click=pageChildLabel()>确定</a></div>')}]),angular.module("scene/pageeffect/fall.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/fall.tpl.html",'<div class=effect-img style=background-color:#ccc><img ng-src="{{falling.src.bgpath}}"></div><div class=effect-form><form class=form-contain role=form><div class="form-list clearfix"><lable class=form-label>环境图片：</lable><div class=form-input><eqx-select class="select-sm border-width select-contain" model=falling.src><eqx-select-option value=fallingObj ng-repeat="fallingObj in fallings">{{fallingObj.name}}</eqx-select-option></eqx-select></div></div><div class="form-list clearfix" style="margin-top: 10px"><lable class=form-label>环境氛围：</lable><div class=form-input><div style="line-height: 24px;font-size: 12px"><span style=margin-right:39px>弱</span><span style=margin-right:37px>中</span><span>强</span></div><div style="width: 100px" ui-slider min=1 max=3 ng-model=falling.density></div></div></div></form></div>')}]),angular.module("scene/pageeffect/finger.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/finger.tpl.html",'<div class=effect-img><img ng-src="{{finger.bgImage.path}}"> <img class=finger-zw ng-src="{{finger.zwImage.path}}"> <img class=finger-line ng-src="{{CLIENT_CDN + \'view/images/finger_line.png\'}}" finger-move></div><div class=effect-form><form class=form-contain role=form><div class="form-list clearfix"><label class=form-label>背景图片：</label><div class=form-input><eqx-select class="select-sm border-width select-contain" model=finger.bgImage change=replaceImg(finger)><eqx-select-option value=null>自定义</eqx-select-option><eqx-select-option value=bgImage ng-repeat="bgImage in fingerBackgrounds">{{bgImage.name}}</eqx-select-option></eqx-select></div></div><div class="form-list clearfix"><label class=form-label>指纹图片：</label><div class=form-input><eqx-select class="select-sm border-width select-contain" model=finger.zwImage><eqx-select-option value=zwImage ng-repeat="zwImage in fingerZws">{{zwImage.name}}</eqx-select-option></eqx-select></div></div></form></div>')}]),angular.module("scene/pageeffect/fireworks.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/fireworks.tpl.html","<div class=effect-img><img ng-src=\"{{CLIENT_CDN + 'assets/images/create/firework.gif'}}\"></div>")}]),angular.module("scene/pageeffect/money.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/money.tpl.html",'<div class=effect-img><img ng-src="{{CLIENT_CDN + \'assets/images/create/money_thumb3.png\'}}"></div><div class=effect-form><form class=form-contain role=form><div class="form-list clearfix"><label class=form-label>提示文字：</label><div class=form-input><input type=text ng-model=money.tip placeholder=提示文字 check-count=40 ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation style="width: 290px" ng-blur="checkCharLength()"><p style=color:red ng-show=tipError>{{tipError}}</p></div></div></form></div>')}]),angular.module("scene/pageeffect/none.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/none.tpl.html","<div style=padding-top:100px;font-size:24px>点击确定，即可去除特效。</div>")}]),angular.module("scene/pageeffect/pageeffect.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/pageeffect.tpl.html",'<div class="modal-header no-line"><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>页面特效 <a class=bbs-help-tip-media target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=1939&extra="></a> <span class=action>在设置界面可看到效果</span></h4></div><div class=dialog-contain><div class="form_console dialog-content"><div class=modify_area><div class=effect-list><ul><li ng-class="{\'select-effect\': controlView.effectIndex == $index || controlView.effectType == effect.type}" ng-repeat="effect in effectList" ng-click="selectEffect(effect, $index)">{{effect.name}}</li></ul></div><div class=effect-detail><div class=scratch-effect ng-show="controlView.effectType == \'scratch\'" ng-include="\'scene/pageeffect/scratch.tpl.html\'" ng-controller=scratchEffectCtrl></div><div class=finger-effect ng-show="controlView.effectType == \'finger\'" ng-include="\'scene/pageeffect/finger.tpl.html\'" ng-controller=fingerEffectCtrl></div><div class=fall-effect ng-show="controlView.effectType == \'fallingObject\'" ng-include="\'scene/pageeffect/fall.tpl.html\'" ng-controller=fallEffectCtrl></div><div class=snow-effect ng-show="controlView.effectType == \'snowFly\'" ng-include="\'scene/pageeffect/snow.tpl.html\'" ng-controller=snowEffectCtrl></div><div class=firework-effect ng-show="controlView.effectType == \'fireWorks\'" ng-include="\'scene/pageeffect/fireworks.tpl.html\'" ng-controller=fireWorksCtrl></div><div class=none-effect ng-show="controlView.effectType == \'none\'" ng-include="\'scene/pageeffect/none.tpl.html\'" ng-controller=noneEffectCtrl></div></div></div></div></div><div class="modal-footer no-line"><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>确定</a></div>')}]),angular.module("scene/pageeffect/scratch.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/scratch.tpl.html",'<div class=scratch-pre><div class="effect-img scratch-img" scratch-effect><img ng-src="{{scratch.image.path}}"></div></div><div class="effect-form scratch-form" style="margin-left: 210px"><form class=form-contain role=form><div class="form-list clearfix"><label class=form-label>覆盖效果</label><div class=form-input><eqx-select class="select-sm border-width select-contain" model=scratch.image change=replaceImage(scratch)><eqx-select-option value=null>自定义</eqx-select-option><eqx-select-option value=scracthImage ng-repeat="scracthImage in scratches">{{scracthImage.name}}</eqx-select-option></eqx-select></div></div><div class="form-list clearfix"><label class=form-label>透明度</label><div class=form-input><eqd-input-number ng-model=scratch.opacity min=0 max=100 unit=% ng-mouseenter="currentTipsIndex = 1" ng-mouseleave="currentTipsIndex = 0"></eqd-input-number></div><div class="tooltip right" role=tooltip ng-show="currentTipsIndex == 1"><div class=tooltip-arrow></div><div class=tooltip-inner>双击鼠标可以输入数值，按住鼠标左键左右滑动可快速调整数值</div></div></div><div class="form-list clearfix"><label class=form-label>涂抹比例</label><div class=form-input><eqd-input-number ng-model=scratch.percentage min=0 max=100 unit=% ng-mouseenter="currentTipsIndex = 1" ng-mouseleave="currentTipsIndex = 0"></eqd-input-number></div></div><div class="form-list clearfix"><label class=form-label>提示文字</label><div class=form-input><input type=text ng-model=scratch.tip placeholder=提示文字 check-count=40 ng-keyup="$event.keyCode == 13 ? confirm() : null" autofocus stop-propagation style="width: 290px"></div></div></form></div>')}]),angular.module("scene/pageeffect/snow.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/pageeffect/snow.tpl.html","<div class=effect-img><img ng-src=\"{{CLIENT_CDN + 'assets/images/create/snowmove.gif'}}\"></div>")}]),angular.module("scene/preview.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/preview.tpl.html",'<div id=audio_btn><audio id=media></audio></div><div class=loading><div class=loadbox><div class=loadlogo></div><div class=loadbg></div></div></div><div class=wechat-share><div class=scene-title-box><em class=scene-title>{{sceneName}}</em></div><img class=scene-img ng-src="{{PREFIX_FILE_HOST +  sceneCover}}"> <em class=scene-des>{{sceneDescription}}</em> <em class=scene-talk>我做的，你看一看吧</em> <em class=scene-talk2>做的真好！我也去试一试</em></div><div class=verifyCode><div class=container><div class=scene-cover><img class=cover-img ng-src="{{PREFIX_FILE_HOST +  sceneCover}}"></div><div class=scene-name>{{sceneName}}</div><div class=confirm-password><div class=verify-label>请输入访问密码</div><div class=verify-tips id=verifyTip><ul class=password-indicator><li></li><li></li><li></li><li></li></ul></div><div class=password-numbers><span>1</span> <span>2</span> <span>3</span> <span>4</span> <span>5</span> <span>6</span> <span>7</span> <span>8</span> <span>9</span> <span>0</span></div><div class=password-operation><span class=btn-clear id=btnClear>清空</span> <span class=btn-cancel id=btnCancel>取消</span></div></div></div></div>')}]),angular.module("scene/saveTemplate.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/saveTemplate.tpl.html",'<div class=fr><a class="hint--left hint--rounded delete all-change" data-hint=删除当前页 ng-click=deletePage($event) ng-show="pages.length != 1" data-event=12021><i class=eqf-scene-delete></i></a> <a ng-click=duplicatePage() class="hint--left copy hint--rounded all-change" data-hint=复制当前页 data-event=12020><i class=eqf-scene-copy></i></a></div><div class=my-tpl-title ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]">存为</div><div class=btn-group ng-show="userProperty.type !=22 && userProperty.type !=52"><div class=btn><a ng-click=creatMyTemplate() ng-style="{true:{\'color\':\'#76838f\'},false:{}}[isCompMange]" ng-show="userProperty.type!==22 && userProperty.type!==52" class="hint--left hint--rounded" data-hint=保存到我的模板 data-event=12019>我的模板</a></div></div>')}]),angular.module("scene/scene.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/scene.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=main class=min-contain><div ng-include="\'sysmessage.tpl.html\'"></div><div class=info-show><div class=same-content><div class=info-title style=padding-bottom:80px ng-if=!fillSceneAuth><span ng-class="{active: true}">场景样例</span></div><div class=info-title style=padding-bottom:80px ng-if=fillSceneAuth><span ng-click="switchSample(\'scene\')" ng-class="{active:isActive == \'scene\'}">场景样例</span><span ng-click="switchSample(\'fill\')" ng-class="{active:isActive == \'fill\'}">填空样例</span></div><div class=info ng-if="isActive == \'scene\'"><div class=creat-scene ng-if="isActive == \'scene\'"><a ng-click=createScene() class="clearfix background-color-width-change"><em class=eqf-plus2></em><span class=opacity-width-change>点击创建空白场景</span></a></div><ul class="clearfix tab-line"><li><a ng-class="{active : 0 == childcat}" ng-click=allpage(null,null)>全部</a></li><li ng-repeat="pageTplType in pageTplTypesList"><a ng-click=getPageTplsByType(pageTplType.type) ng-class="{active : pageTplType.type == childcat}">{{pageTplType.name}}</a></li><li ng-show="[2,21,5,51].indexOf(userProperty.type) !== -1"><a ng-click=getCompanyTpl(1,11) ng-class="{active: 1 == childcat}">企业样例</a></li></ul></div><div class=info ng-if="isActive == \'fill\'"><ul class="clearfix tab-line"><li ng-repeat="fill in fillTypeList"><a ng-click=getPageTplsByType(fill.type) ng-class="{active : fill.type == childcat}">{{fill.name}}</a></li></ul></div></div></div><div class=same-content><div class="sample-childcat clearfix mt20" ng-if=newArrayGroupCat><ul class="cat-list tab-box-shadow" ng-repeat="childGroup in newArrayGroupCat"><li ng-repeat="cat in childGroup" ng-click=getPageTpls(type,cat.bizType,cat.id,1,11) ng-class="{active:cat.id == categoryId}"><a>{{cat.name}}</a><span>|</span></li></ul></div><div class="sample-childcat clearfix mt20" ng-if="0 == childcat && childAllList"><ul class="cat-list tab-box-shadow all-tab" ng-repeat="childList in childAllList"><li ng-click=getPageTpls(type,childList.bizType,childList.tagId,1,11)><a data-banner=12201 data-bid={{childList.tagId}}><img ng-src="{{childList.bgImage}}"><div class=bg ng-class="{imgOpa:childList.tagId == categoryId}"></div></a></li></ul></div><div class="scene-type clearfix"><div class=search-tab ng-if="isActive == \'scene\' && childcat != 1"><div class=search ng-class={hover:name} style=right:0><input type=text maxlength=40 placeholder=请输入搜索内容 ng-model=$parent.name ng-change=changeName(name) ng-keypress=EnterPress(event,name) ng-keydown=EnterPress(name)> <span ng-if=searchButton class="search-icon eqf-search" ng-click=submit(name)></span> <span ng-if=!searchButton class="search-icon eqf-wrong" ng-click=clearSearch()></span></div></div><div class=scene-select ng-class={selected:!selete} ng-click="new=true;filterTpl(new,\'default\')"><a><span>默认排序</span></a></div><div class=scene-select ng-class={selected:selete,iconChange:new} ng-init="new=true;" ng-click="new =!new; filterTpl(new,\'new\')"><a><span>最新发布</span><em class="eqf-more all-change"></em></a></div></div><div style=position:relative><ul class="square-scene clearfix"><li class="tab-box-shadow creat-blank all-change" ng-if=blankSample ng-click=createScene() style=cursor:pointer><div class="creat-content background-color-width-change"><i class=eqf-plus2></i><span>创建一个空白场景</span></div></li><li ng-repeat="tpl in tpls" class="tab-box-shadow animation-zoom all-change" ng-show=tpls ng-style="{\'animation-delay\' : $index * 50 + \'ms\'}"><div class="ribbon ribbon-badge" ng-if="tpl.isCompanyTemp == 1 && !tpl.price"><span class="ribbon-inner isCompany">企业专属</span></div><div class="ribbon ribbon-badge" ng-if="tpl.isCompanyTemp == 1 && tpl.price && !tpl.disCountFlag"><span class="ribbon-inner isCompany">{{tpl.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="tpl.isCompanyTemp == 1 && tpl.price && tpl.disCountFlag"><div class=discount-bg><span class=discount-del>&nbsp{{tpl.price}}秀点&nbsp</span> <span class=discount-normal><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><div class="ribbon discount-detail" ng-if="!!tpl.price && tpl.isCompanyTemp !=1 && tpl.disCountFlag"><div class="discount-red discount-bg"><span class=discount-del>&nbsp{{tpl.price}}秀点&nbsp</span> <span class=discount-normal><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><div class="ribbon ribbon-badge" ng-if="!!tpl.price && tpl.isCompanyTemp !=1 && !tpl.disCountFlag"><span class="ribbon-inner check">{{tpl.price}}秀点</span></div><div class=image><div ng-show=!tpl.show class="front face" ng-style=getStyle(tpl.cover) style=background-size:cover></div><div ng-show=tpl.show class=ercode qr-code qr-url="{{canvasUrl + \'/v/\' + tpl.code}}"></div><div class=overlay ng-show=!tpl.show><div class=edit><a class=edit-same ng-click=openPreview(tpl);><em class=eqf-eye style=font-size:20px></em> <span>预览</span></a> <a class=edit-same ng-click=createScene(tpl)><em class=eqf-xiuziti style=font-size:18px></em> <span>就这个</span></a></div></div></div><div class=project-info><p class=ellipsis>{{tpl.name}}</p><p class="ellipsis discount-overdue" ng-if=tpl.disCountFlag>限时打折,距离活动结束还有{{tpl.disCountTime}}天</p><div class="buttons sample clearfix" ng-if=!branchid><div class="set sample-scene"><span class=scene-name>{{tpl.userName}}</span></div><a class="erweima button" ng-hover resource=tpl><em class=eqf-QRcode></em></a></div></div><div class=head-img><img ng-if=tpl.avatar ng-src={{tpl.avatar}}> <span ng-if=!tpl.avatar class=scene-headimg><em class=eqf-top-contact></em></span></div></li></ul><div style="text-align:center;margin:50px 0" ng-if="tpls.length < 1"><h2 class=mb20>该条件下暂无样例，您可以：</h2><p style=font-size:12px;padding-bottom:10px>1.更换关键词重新搜索</p><p style=padding-bottom:10px><a href=/show/visitor target=_blank><ins>2.找秀客定制场景</ins></a></p><p style=padding-bottom:10px><a ng-click=openCustomActive()><ins>3.发起设计活动</ins></a></p><img ng-src={{CLIENT_CDN}}assets/images/notfound.svg></div></div><div class="clearfix page-turn" style=margin-top:10px ng-show="totalItems > 11 \n            && tpls.length"><div class=fl><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=12 total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div><div ng-if="currentTpl.exemplarPreview ===true" preview-exemplar current-tpl=currentTpl create-scene=createScene(tpl); biztype={{childcat}} tagid={{categoryId}}></div>')}]),angular.module("scene/scenePreviewExemplar.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/scenePreviewExemplar.tpl.html",'<section class=exemplarPreview ng-click=cancel();><div class=reviewCancel ng-click=cancel();><em class=eqf-wrong></em></div><div class=review ng-click=$event.stopPropagation();><div class=reviewScene><div class=author><span class=authorPic><img ng-if="avatar!== undefined" ng-src={{avatar}}><em ng-if="avatar === undefined" class=eqf-top-contact></em></span> <span class=authorName>{{currentTpl.tpl.userName}}</span></div><div class=scene><div class=sceneContent><iframe id=reviewFrame frameborder=0 ng-src={{reviewForIframe}}></iframe></div></div></div><div class=exemplar-info><div class=title><span>{{currentTpl.tpl.name}}</span></div><div class=description><span ng-if="currentTpl.tpl.description.length<=70">{{currentTpl.tpl.description}}</span> <span ng-if="currentTpl.tpl.description.length>70 && !openDescription">{{currentTpl.tpl.description.substring(0,67)}}...<a ng-click=showMoreDescription(true);>更多</a></span> <span ng-if=openDescription>{{currentTpl.tpl.description}}<a ng-click=showMoreDescription(false);>收起</a></span></div><div class=tag><span ng-repeat="tag in tags">{{tag.name}}</span></div><div class=price><div ng-if="currentTpl.tpl.price > 0" class=priceShow><span class=activePrice>{{currentTpl.tpl.disCountFlag ? currentTpl.tpl.disCountPrice : currentTpl.tpl.price}}</span> <span class=measureUnit>秀点</span><div ng-if=currentTpl.tpl.disCountFlag class=origin-price><span>原价{{currentTpl.tpl.price}}秀点</span></div></div><div ng-if="currentTpl.tpl.price == 0 || currentTpl.tpl.price ==null" class=priceShow><span class=freePrice>免费使用</span></div><div ng-if=currentTpl.tpl.disCountFlag class=activity><div class=info>距离活动结束</div><div class=leftDay><span>{{currentTpl.tpl.disCountTime}}</span>天</div></div></div><div class=createScene><a class="btn btn-sm green" ng-click=newScene();>使用该样例</a></div><div ng-show=copySuccess class=copySuccessMessage><span>复制成功，快去分享吧！</span></div><div class=link><input type=text class=form-control value={{reviewUrl}} ng-readonly=true ng-mouseover=inputSelected($event,true); ng-mouseleave=inputSelected($event,false);> <a class="btn btn-sm" url="{{canvasUrl + \'/v/\' + currentTpl.tpl.code}}" ng-click=copy($event.target)>复制链接</a></div><div ng-if=qrCodeShow class="ercode qrcodeShow" qr-code-size=120 qr-url={{reviewUrl}}></div><div class=QRCode><a class="btn btn-sm" ng-mouseover="qrCodeShow = true;" ng-mouseleave="qrCodeShow = false;"><em class=eqf-QRcode></em>扫描二维码查看</a></div></div></div><div class=exemplarList ng-click=$event.stopPropagation();><div class=headText>你可能喜欢...</div><div class=exemplar><div class=subExemplar ng-repeat="exemplar in similarExemplars" ng-mouseover=showName($event.target,true) ng-mouseleave="showName($event.target, false)"><img ng-src="{{fileDomain + exemplar.cover}}" ng-click=showAnotherExemplar(exemplar);><div class=subExemplarName><span ng-if="exemplar.name.length <= 11">{{exemplar.name}}</span> <span ng-if="exemplar.name.length > 11">{{exemplar.name.substring(0,9)}}...</span></div></div></div><div class=changeExemplar ng-click=changeAnotherExemplars()><em class=eqf-refresh></em>&nbsp;&nbsp;换一批</div></div></section>')}]),angular.module("scene/support/support.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/support/support.tpl.html",'<div class=support-contain><div class=imgie><img class=mt20 ng-src="{{CLIENT_CDN}}assets/images/support/HTML5.svg"></div><h3 class=h3ie>尊敬的'+your_webname+"用户：</h3><p><span>为了保证您在"+your_webname+'内的使用体验，建议您从下列浏览器中选择一款进行访问。若坚持使用该浏览器，请</span> <a class=text-primary ng-click=continue()><span>继续使用</span></a></p><ul><li><a id=download_Chorme ng-href={{download_Chorme}} target=_blank><img ng-src="{{CLIENT_CDN}}assets/images/support/chrome.svg"> <span>Chrome</span></a></li><li><a id=download_IE ng-href={{download_IE}} target=_blank><img ng-src="{{CLIENT_CDN}}/assets/images/support/IE11.svg"> <span>IE11</span></a></li><li><a id=download_360 ng-href={{download_360fast}} target=_blank><img class=ml20 ng-src="{{CLIENT_CDN}}/assets/images/support/360fast.svg"> <span>360极速浏览器</span></a></li><li><a id=download_360 ng-href={{download_360}} target=_blank><img ng-src="{{CLIENT_CDN}}/assets/images/support/360safe.svg"> <span>360浏览器</span><br><span>极速模式</span></a></li></ul></div>')}]),angular.module("scene/tplOption.tpl.html",[]).run(["$templateCache",function(e){e.put("scene/tplOption.tpl.html",'<div class="popover bottom"><div class=arrow style=left:70%></div><div class=popover-content><ul class=menus><li class=menu-item ng-click=saveMyTemplate()><span class=menu-item-name>存为我的模板</span></li><li class=menu-item ng-click=saveCompanyTemplate() ng-if="userProperty.type==2"><span class=menu-item-name>存为企业模板</span></li></ul></div></div>')}]),angular.module("show/active/active-xq.tpl.html",[]).run(["$templateCache",function(e){e.put("show/active/active-xq.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class=cake><div class=same-content><a href=/#/show>秀场</a> > <a href=/show/active>活动</a> > {{activeMes.title}}</div></div><div class=same-content><div class="active-lunbo mt" slides2 id="{{\'ac_\' + activeId}}" width=1000px height=400px style=width:1000px;height:400px><div class=slides_container></div><div class=hd-icon><a class="eqf-left22 prev"></a> <a class="eqf-right23 next"></a></div></div><div class="show-list tuijian"><h2><em>推荐</em><a href="" ng-click=attend()>我要参加</a><span>RECOMMEND</span></h2><ul class=clearfix><li ng-repeat="recList in recSceneList"><a href="{{PREFIX_SHOW_HOST + \'/v/\' + recList.code}}" target=_blank><img ng-src="{{PREFIX_FILE_HOST + recList.cover}}"><p>{{recList.name}}</p><p><span class=auth><img title={{recList.userLoginName}} ng-src="{{recList.headImg}}"></span> <span><em class=eqf-eye></em>{{recList.showCount}}</span></p></a></li></ul></div><div id=introduction ng-bind-html=activeMes.introduction></div><div class=show-list><h2><em>最新</em><span>NEW</span></h2><ul class=clearfix><li ng-repeat="scene in sceneList"><a href="{{PREFIX_CLIENT_HOST + \'/v/\' + scene.code}}" target=_blank><img ng-src="{{PREFIX_FILE_HOST + scene.cover}}"><p>{{scene.name}}</p><p><span class=auth><img title={{scene.userLoginName}} ng-src="{{scene.headImg}}"></span> <span><em class=eqf-eye2></em>{{scene.showCount}}</span></p></a></li></ul></div><div class="same-content clearfix" ng-show="totalItems > 16"><pagination style=float:left first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=16 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div><div class="same-content hezuo" ng-show="friendLinks.length > 0"><h2><em>合作</em><span>FRIEND</span></h2><ul class=clearfix><li ng-repeat="link in friendLinks"><a href={{link.url}} target=_blank><img ng-src={{link.logo}} title={{link.name}} logo="{{link.name}}"></a></li></ul></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("show/active/active.tpl.html",[]).run(["$templateCache",function(e){e.put("show/active/active.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class=same-content><div class="active-lunbo mt" slides2 id=active width=1000px height=400px style=width:1000px;height:400px><div class=slides_container></div><div class=hd-icon><a class="eqf-left prev"></a> <a class="eqf-right next"></a></div></div><div class="active-list mt"><h2><em>活动</em><span>ACTIVITY</span></h2><ul><li ng-repeat="hdList in activeList"><div class="join hdList"><span><em>作品</em>：{{hdList.joinNum}}</span><span><em>截止日期</em>：{{hdList.endDate | date:\'yyyy-MM-dd\'}}</span> <a ng-show=hdList.join ng-click=attend(hdList.type)>参加</a> <a ng-show=!hdList.join style=background-color:#ccc>结束</a></div><div><a ng-click=join(hdList.id)><img ng-src="{{PREFIX_FILE_HOST + hdList.image}}">{{hdList.title}}</a></div></li></ul></div><div class="same-content clearfix pb20" ng-show="totalItems > 10"><pagination style=float:left first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div><div class="same-content hezuo" ng-show="friendLinks.length > 0"><h2>合作<span>FRIEND</span></h2><ul class=clearfix><li ng-repeat="link in friendLinks"><a href={{link.url}} target=_blank><img ng-src={{link.logo}} title={{link.name}} alt="{{link.name}}"></a></li></ul></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("show/category/category.tpl.html",[]).run(["$templateCache",function(e){e.put("show/category/category.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class="show-con same-content clearfix"><div class=hd-lunbo slides2 id=st_{{bizType}} width=650px height=260px><div class=slides_container></div><div class=hd-icon><a class="eqf-left prev"></a> <a class="eqf-right next"></a></div></div><aside><h2><a class=apply_showker href=/show/active>更多</a><em>活动</em><span>ACTIVITY</span></h2><ul><li ng-repeat="hdList in activeList" title={{hdList.title}}><a ng-click=join(hdList.id)><img ng-src="{{PREFIX_FILE_HOST + hdList.image}}"> {{hdList.title}}</a></li></ul></aside></div><div class="show-list same-content"><h2>{{catName}}</h2><div class=category><ul class="category_two clearfix"><li ng-repeat="child in childCatrgoryList" ng-class="{active:child.id == categoryId}" ng-click=getPageTpls(order,child.id)><a title={{child.name}}>{{child.name}}</a></li></ul></div></div><div class="show-list same-content"><ul class=clearfix ng-show=tpls.length><li ng-repeat="tpl in tpls"><a href="{{PREFIX_SHOW_HOST + \'/v/\' + tpl.code}}" target=_blank><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class=eqf-eye2></em>{{tpl.showCount}}</span> <span class=auth><img title={{tpl.userName}} ng-src="{{tpl.headImg}}"></span></p></a> <a ng-if="tpl.isTemplate == 1" class=screen-use target=_blank ng-click=userTpl(tpl)>使用</a></li></ul><div style=margin:20px ng-hide=tpls.length>此分类下暂无场景</div></div><div class="same-content clearfix" ng-show="totalItems > 16" style=margin-bottom:20px><pagination style=float:left first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=16 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("show/category/nav.tpl.html",[]).run(["$templateCache",function(e){e.put("show/category/nav.tpl.html",'<div class=show-head><div ng-include="\'header.tpl.html\'"></div><div class=banner><div class=big-font><img ng-src="{{CLIENT_CDN}}assets/images/show/faxian.png"></div><div class=input-search><input class=search type=text value="" ng-model=val ng-change=search(val) ng-keypress=EnterPress(event,val) ng-keydown="EnterPress(val)"> <span class="eqf-serach search-icon" ng-click=submit() style=cursor:pointer></span></div></div><nav><ul class=clearfix><li><a href="/#/show/" ng-class="{active: childCat == \'index\'}">秀场</a></li><li ng-repeat="type in sceneType"><a ng-class="{active: childCat == type.value}" ng-click=getCategoryPage(type.value,type.id)>{{type.name}}</a></li></ul></nav></div>')}]),angular.module("show/index.tpl.html",[]).run(["$templateCache",function(e){e.put("show/index.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class="show-con same-content clearfix"><div class=hd-lunbo slides2 id=index width=650px height=260px><div class=slides_container></div><div class=hd-icon><a class="eqf-left prev"></a> <a class="eqf-right next"></a></div></div><aside><h2><a href=/show/active class=apply_showker>更多</a><i>活动</i><span>ACTIVITY</span></h2><ul><li ng-repeat="hdList in activeList"><a ng-click=join(hdList.id) title={{hdList.title}}><img ng-src="{{PREFIX_FILE_HOST + hdList.image}}"> {{hdList.title}}</a></li></ul></aside></div><eqd-common-recommend filter=false category={{category}} change-location=false></eqd-common-recommend><div class="hezuo same-content" ng-show="friendLinks.length>0"><h2><em>合作</em><span>FRIEND</span></h2><ul class=clearfix><li ng-repeat="list in friendLinks"><a href={{list.url}} target=_blank><img ng-src="{{list.logo }}" alt={{list.name}} title="{{list.name}}"></a></li></ul></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("show/recommend/commonRecommend.tpl.html",[]).run(["$templateCache",function(e){e.put("show/recommend/commonRecommend.tpl.html",'<div class="show-list same-content"><h2><i>推荐</i><span>RECOMMEND</span><div class=nav><a href="" ng-class="{active: recommendType == \'h5\'}" class=mr55 ng-click="recommend(\'h5\')">H5场景</a></div></h2><ul class=clearfix><li ng-repeat="tpl in recommendList" class=XC-scene><div class="dis-tips-over all-change" ng-if=tpl.disCountFlag>限时打折,距离活动结束还有{{tpl.disCountTime}}天</div><div class="ribbon ribbon-badge" ng-if="!!tpl.price && tpl.isTemplate == 1 && recommendType == \'h5\' && !tpl.disCountFlag"><span class="ribbon-inner check">{{tpl.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="!!tpl.price && tpl.isTemplate == 1 && recommendType == \'h5\' && tpl.disCountFlag"><div class="discount-red discount-bg"><span class=discount-del>&nbsp{{tpl.price}}秀点&nbsp</span> <span class=discount-normal><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><a href="{{PREFIX_SHOW_HOST + \'/v/\' + tpl.code}}" target=_blank><a href="" ng-click=preview(tpl.code)><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class=eqf-eye2></em>{{recommendType == \'h5\' ? tpl.showCount : tpl.pv}}</span> <span class=auth><img title={{tpl.userName}} ng-src="{{tpl.headImg}}"></span></p></a> <a ng-if="tpl.isTemplate == 1" class=screen-use target=_blank ng-click=userTpl(tpl)>使用</a></a></li></ul><div class=more ng-show=!filter><a href=/#/show/recommend/h5 class=apply_showker1 ng-show="recommendType == \'h5\' && !filter">点击查看更多</a> <a href=/#/show/recommend/print class=apply_showker1 ng-show="recommendType == \'print\' && !filter">点击查看更多</a></div></div><div class="same-content clearfix" style=margin-bottom:20px ng-show="totalItems > 16 && filter"><pagination style=float:left first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div><div id=preview_wrap><span class=eqf-wrong></span><iframe id=pc_preview width=100% height=100% scrolling=no frameborder=0></iframe></div>')}]),angular.module("show/recommend/recommend.tpl.html",[]).run(["$templateCache",function(e){e.put("show/recommend/recommend.tpl.html","<div id=show-contain><div ng-include=\"'show/category/nav.tpl.html'\" ng-controller=NavCtrl></div><eqd-common-recommend filter=true category={{category}} change-location=true></eqd-common-recommend></div><div ng-include=\"'footer.tpl.html'\"></div>")}]),angular.module("show/search/search.tpl.html",[]).run(["$templateCache",function(e){e.put("show/search/search.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class=cake><div class=same-content><a href=/show>首页</a> > <i>搜索</i>-{{name}}</div></div><div class=same-content style=margin-bottom:20px><div class="show-list same-content"><h2><i>搜索</i><span><i>SEARCH</i></span></h2><div class="search clearfix"><input type=text value="" id=search ng-model=val onchange=search(val) ng-keypress=EnterPress(event,val) ng-keydown=EnterPress(val)> <a href="" ng-click=submit(val)><em class=eqf-serach></em><i>搜索</i></a></div><div class=search-con><p><i>您搜索的关键词：</i><span class=key>{{name}}</span> <i>共有</i><span class=key>{{totalItems}}</span><i>条结果</i></p></div><ul class=clearfix><li ng-repeat="tpl in searchList" class=XC-scene><div class="dis-tips-over all-change" ng-if=tpl.disCountFlag>限时打折,距离活动结束还有{{tpl.disCountTime}}天</div><div class="ribbon ribbon-badge" ng-if="!!tpl.price && tpl.isTemplate == 1 && !tpl.disCountFlag"><span class="ribbon-inner check">{{tpl.price}}秀点</span></div><div class="ribbon discount-detail" ng-if="!!tpl.price && tpl.isTemplate == 1 && tpl.disCountFlag"><div class="discount-red discount-bg"><span class=discount-del>&nbsp{{tpl.price}}秀点&nbsp</span> <span class=discount-normal><em>{{tpl.disCountPrice}}</em>秀点</span></div></div><a href="{{PREFIX_SHOW_HOST + \'/v/\' + tpl.code}}" target=_blank><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class=eqf-eye2></em>{{tpl.showCount}}</span> <span class=auth><img title={{tpl.userName}} ng-src="{{tpl.headImg}}"></span></p></a> <a ng-if="tpl.isTemplate == 1" class=screen-use target=_blank ng-click=userTpl(tpl)>使用</a></li></ul></div><div class="same-content clearfix" ng-show="totalItems > 16"><pagination style=float:left first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("show/visitor/visitor-xq.tpl.html",[]).run(["$templateCache",function(e){e.put("show/visitor/visitor-xq.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class=cake><div class=same-content><a href=/#/show>秀场</a> > <a href=/show/visitor>秀客</a> > {{visitorMsg.name}}</div></div><div class="visitor-xq same-content"><div class=clearfix><img ng-show=visitorMsg.headImg ng-src={{visitorMsg.headImg}} width=200px height=200px><div ng-show=!visitorMsg.headImg style=width:200px;height:200px;background-color:#08a1ef;text-align:center;line-height:230px;float:left;margin-right:20px><em class=eqf-top-contact style=color:#fff;font-size:50px></em></div><div class=visitor-dec><h4>{{visitorMsg.name}}</h4><p class=des>{{visitorMsg.introduction}}</p><ul><li><span>擅长领域：</span><span ng-repeat="cate in cateTag">{{cate.name}}</span></li><li><span>服务地域：</span><span ng-repeat="server in serverTag">{{server.name}}</span></li><li><span>支付方式：</span><span ng-repeat="pay in payTag">{{pay.name}}</span></li></ul></div></div><div class=contact><a class="qq hint--top hint--rounded" data-hint={{qqAction}}{{visitorMsg.qq}}><em class=eqf-qq></em>&nbsp;&nbsp;{{visitorMsg.qq}}</a> <a class="hint--top hint--rounded weixin" data-hint=微信号：{{visitorMsg.wechat}}><em class=eqf-wechat></em>&nbsp;&nbsp;{{visitorMsg.wechat}}</a> <a class="phone hint--top hint--rounded" data-hint=手机号：{{visitorMsg.tel}}><em class=eqf-glyphicon-earphone></em>&nbsp;&nbsp;{{visitorMsg.tel}}</a> <a ng-if=visitorMsg.email class="sixin hint--top hint--rounded" data-hint=邮箱：{{visitorMsg.email}} ng-href=mailto:{{visitorMsg.email}}><em class=eqf-envelope></em>&nbsp;&nbsp;{{visitorMsg.email}}</a> <a ng-if=!visitorMsg.email class="hui hint--top hint--rounded" data-hint=该秀客没有留下邮箱><em class=eqf-envelope></em>&nbsp;&nbsp;该秀客没有留下邮箱</a></div></div><div class="show-list same-content"><h2><i>作品</i><span>WORKS</span></h2><ul class=clearfix><li ng-repeat="tpl in visitorWorks"><a href="{{PREFIX_CLIENT_HOST + \'/v/\' + tpl.code}}" target=_blank><img ng-src="{{PREFIX_FILE_HOST + tpl.cover}}"><p>{{tpl.name}}</p><p><span><em class=eqf-eye2></em>{{tpl.showCount}}</span> <span class=auth><img title={{tpl.userName}} ng-src="{{tpl.headImg}}"></span></p></a></li></ul></div><div class="same-content clearfix pb20" ng-show="totalItems > 16"><pagination style=float:left first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; items-per-page=pageSize total-items=totalItems max-size=10 ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("show/visitor/visitor.tpl.html",[]).run(["$templateCache",function(e){e.put("show/visitor/visitor.tpl.html",'<div id=show-contain><div ng-include="\'show/category/nav.tpl.html\'" ng-controller=NavCtrl></div><div class=visitor-contain><div class="visitor same-content clearfix"><section><h2>场景定制找秀客<a class=zhinan href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=15436" target=_blank>指南</a><a class=apply_showker href=/active target=_blank>申请成为秀客</a></h2><div class=select-list><span>服务地域</span>|<a ng-class="{active:serverAll == \'all\'}" ng-click="serverWu(\'province\',\'serverAll\')">不限</a> <a ng-repeat="server in serverLabel | filter: getLimitedServeRegion" ng-click=subServer(server) ng-class="{active:currentServer ==server}">{{server.name}}</a> <a ng-show=moreArea class=more data-toggle=dropdown>更多</a><div class="other-label dropdown-menu"><a ng-repeat="otherServer in serverLabel | filter: getOtherServeRegion" ng-click=subServer(otherServer) ng-class="{active:currentServer == otherServer}">{{otherServer.name}}</a></div></div><div class=select-list style=position:relative><span>擅长领域</span>|<a ng-class="{active:cateAll == \'all\'}" ng-click="serverWu(\'company_industry\',\'cateAll\')">不限</a> <a ng-repeat="tag in cateLabel | filter: getLimitedCateRegion" ng-click=subLabel(tag) ng-class="{active:currentCate ==tag}">{{tag.name}}</a> <a data-toggle=dropdown ng-show=moreLabel class=more>更多</a><div class="other-label dropdown-menu"><a ng-repeat="otherCate in cateLabel | filter: getOtherCateRegion" ng-click=subLabel(otherCate) ng-class="{active:currentCate == otherCate}">{{otherCate.name}}</a></div></div><div class=select-list><span>付款方式</span>|<a ng-class="{active:payAll == \'all\'}" ng-click="serverWu(\'payType\',\'payAll\')">不限</a> <a ng-repeat="pay in payLabel" ng-click=subPay(pay) ng-class="{active: currentPay == pay}">{{pay.name}}</a></div></section><aside class=visitor-list><h2>本周之星<a class=apply_showker href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=13804" target=_blank>申请本周之星</a></h2><div class=visitor-same><div class="visitor-one clearfix"><a ng-click=visitorXq(recommendVisitor.userId)><img ng-show=recommendVisitor.headImg ng-src={{recommendVisitor.headImg}} width=80px height=80px><div ng-show=!recommendVisitor.headImg style=width:80px;height:80px;text-align:center;line-height:80px;background-color:#08a1ef;float:left;margin-right:20px;padding-top:8px><em class=eqf-top-contact style=color:#fff;font-size:30px></em></div></a><h3><a ng-click=visitorXq(recommendVisitor.userId)>{{recommendVisitor.name}}</a></h3><p class=dec style=white-space:normal title={{recommendVisitor.introduction}}>{{recommendVisitor.introduction}}</p></div><div class=visitor-works><ul><li class=ellipsis><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/v/\' + work1Code}}" target=_blank>{{work1Name}}</a></li><li class=ellipsis><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/v/\' + work2Code}}" target=_blank>{{work2Name}}</a></li><li class=ellipsis><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/v/\' + work3Code}}" target=_blank>{{work3Name}}</a></li></ul></div></div></aside></div><div class="same-content visitor-item"><h2><a class=apply_showker style=color:#08a1ef href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=17614&extra=page%3D1" target=_blank>海外场景定制合作</a>秀客列表</h2><div class=visitor-content><p ng-if="visitorList.length == 0" style="padding:20px 0">暂无秀客列表</p><ul class=clearfix ng-if="visitorList.length >0"><li class="visitor-list visitor-same" ng-repeat="visitor in visitorList"><div class="visitor-one clearfix"><a ng-click=visitorXq(visitor.userId)><img ng-show=visitor.headImg ng-src={{visitor.headImg}} width=80px height=80px><div ng-show=!visitor.headImg style=width:80px;height:80px;text-align:center;line-height:80px;background-color:#08a1ef;float:left;margin-right:20px;padding-top:8px><em class=eqf-top-contact style=color:#fff;font-size:30px></em></div></a><div><h3><a ng-click=visitorXq(visitor.userId)>{{visitor.name}}</a></h3><p class=dec style=white-space:normal title={{visitor.introduction}}><span>{{visitor.introduction}}</span></p></div></div><div class=visitor-works><ul><li class=ellipsis><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/v/\' + visitor.represent1Code}}" target=_blank>{{visitor.represent1Name}}</a></li><li class=ellipsis><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/v/\' + visitor.represent2Code}}" target=_blank>{{visitor.represent2Name}}</a></li><li class=ellipsis><span>作品</span>|<a href="{{PREFIX_CLIENT_HOST + \'/v/\' + visitor.represent3Code}}" target=_blank>{{visitor.represent3Name}}</a></li></ul></div></li></ul></div></div><div class="same-content clearfix" ng-show="totalItems > 12" style=margin-bottom:20px><pagination style=float:left first-text=首页 previous-text=&lsaquo; next-text=&rsaquo; last-text=尾页 max-size=10 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("sysmessage.tpl.html",[]).run(["$templateCache",function(e){e.put("sysmessage.tpl.html",'<div class="sys-contain myMove" ng-if="!!sysMsgs.length && openSysMsgDialog"><div class="same-content sys-msg"><div class=sys-msg-container ng-class="{\'is-closed\': !openSysMsg}"><ul class=messages><li class=message ng-repeat-start="sysMsg in sysMsgs"><span>{{($index + 1) + "."}}</span><span ng-bind-html=sysMsg.content data-event=2201></span></li><li class=separator ng-if=!$last ng-repeat-end></li></ul></div><a class="eqf-wrong msg-close" ng-click=closeSysMsgDialog() data-event=2202></a></div></div>')}]),angular.module("upgrade/accountDlg.tpl.html",[]).run(["$templateCache",function(e){e.put("upgrade/accountDlg.tpl.html","<div class=modal-header><a class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></a><h4 class=modal-title>更换账号</h4></div><div class=modal-body><p>您确定退出本账号并更换其他账号吗？</p></div><div class=modal-footer><a class=modal-confirm ng-click=confirm();>确定</a><a class=modal-cancle ng-click=cancel()>取消</a></div>")}]),angular.module("upgrade/buyRefuseDlg.tpl.html",[]).run(["$templateCache",function(e){e.put("upgrade/buyRefuseDlg.tpl.html",'<div class=modal-header><a class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></a><h4 class=modal-title>购买失败</h4></div><div class=modal-body><p>系统检测到，您当前登录的账号已变更<br>当前登录账号:<span class=loginName ng-bind=infoName></span>是否继续购买？</p></div><div class=modal-footer><a class=modal-confirm ng-click=changeAccount()>更换账号</a> <a class="modal-confirm btn-disabled hint--top hint--rounded manage-ground-setting" ng-if=disBuyFlag data-hint={{disBuyTip}}>继续购买</a> <a class=modal-confirm ng-if=!disBuyFlag ng-click=continueBuy()>继续购买</a></div>')}]),angular.module("upgrade/updateDlg.tpl.html",[]).run(["$templateCache",function(e){e.put("upgrade/updateDlg.tpl.html","<div class=modal-header><a class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></a><h4 class=modal-title>升级企业免费版</h4></div><div class=modal-body><p>您当前的账户类型为个人用户，想要购买企业高级账号<br>需先升级为企业免费版才可，是否立即免费升级？</p></div><div class=modal-footer><a class=modal-confirm ng-click=confirm()>前往升级</a><a class=modal-cancle ng-click=cancel()>再看看</a></div>")}]),angular.module("upgrade/upgrade.tpl.html",[]).run(["$templateCache",function(e){e.put("upgrade/upgrade.tpl.html",'<div id=upgrade-container><div class=main><div class=buy><h2 ng-bind=title></h2><form role=form ng-class="upgradeFlag?\'\':\'xd-buy\'"><div ng-show=upgradeFlag><div class=form-item><label for=versionType>购买账号版本</label><div id=versionType><span class=input-val ng-bind=version></span> <span ng-click=changeVersion(); class=operation slide-toggle=#slideVersion id=changVersion ng-class="showChangVersionFlag ? \'eqf-clickmore2\' : \'eqf-clickmore\'">更换版本</span></div></div><div class="form-item version-item" id=slideVersion><ul class=clearfix><li ng-class="$parent.version === versionItem.version?\'eqf-yes2\':\'\'" ng-repeat="versionItem in versionList" slide-toggle=#slideVersion ng-click=selectVersion($event,versionItem);><span>{{versionItem.version}}</span> <span>{{versionItem.money}}</span> <span>元/每年</span></li></ul></div><div class=form-item><label for=serviceTime>购买年限</label><div id=serviceTime><span class=version-name>1年</span></div></div><div class=form-item><label for=payMoney>支付费用</label><div id=payMoney><span class=input-val><em ng-bind=payMoney></em> <i>元</i></span></div></div></div><div class=form-item><label for=account>当前账号</label><div id=account><span class="input-val nickname" ng-bind=nickname ng-class="loginFlag?\'\':\'red-color\'"></span> <span class=input-val ng-bind=username ng-show=loginFlag></span> <span class="operation eqf-refresh" ng-click=changeAccount() ng-show=loginFlag>更换账号</span> <button class=to-login ng-click=toLogin() ng-show=!loginFlag>去登录</button></div></div><div ng-show=!upgradeFlag><div class=form-item><label for=XDCount>购买数量</label><div id=XDCount><span class=input-val><em ng-bind=XDCount></em> <i>秀点</i></span></div></div><div class=form-item><label for=XDPayMoney>支付费用</label><div id=XDPayMoney><span class=input-val><em ng-bind=XDPayMoney></em> <i>元</i></span></div></div><div class=XDDesc><img ng-src="assets/images/svg/xiudian.svg " alt=秀点描述></div></div><div class=form-bottom><button class=btn-disabled ng-if=disBuyFlag ng-bind=buyBtnValue></button> <button ng-click=buy(); ng-if=!disBuyFlag ng-bind=buyBtnValue></button> <a ng-show=disBuyFlag class="hint--right hint--rounded manage-ground-setting" data-hint={{disBuyTip}}>为什么无法购买？</a></div></form><div class=contact><label for=contactMobile>联系电话：</label><span id=contactMobile>010-83035157</span><a target=_blank ng-click=customerService()>在线客服</a></div></div><div class=info ng-show=upgradeFlag><h2 ng-bind="infoList[memberType][\'title\']"></h2><h3><a target=_blank href=/#/privilege>查看版本详解</a></h3><div class="info-item clearfix" ng-repeat="infoDetail in infoList[memberType][\'infoDetail\']"><div class=info-img><img ng-src="assets/images/svg/{{infoDetail[\'image\']}}.svg " alt="{{infoDetail[\'title\']}}"></div><div class=info-message><h4 ng-bind="infoDetail[\'title\']"></h4><p ng-bind-html="infoDetail[\'info\']"></p></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("usercenter/buyXd.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/buyXd.tpl.html","<div class=modal-body><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><div class=confirm-msg><h4 class=text-left>尊敬的"+your_webname+'用户</h4><p class="mt20 text-left ml20 mr20" style="line-height: 1.5em">感谢您对'+your_webname+'的支持，您即将购买500个秀点。购买、发票等相关问题，请<a class=text-primary target=_blank href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324">查看详情</a>。<br>1.暂仅支持一次购买500秀点，费用500元；<br>2.包年购买、优惠购买，请先<a class=text-primary href=/#/privilege target=_blank>升级企业账号</a>；<br>3.购买需要发票的，请联系fapiao@eqxiu.com；</p></div></div><div class="text-right pb20 btn-small"><a class="btn btn-primary mr20" ng-click=confirm()>立即购买</a></div>')}]),angular.module("usercenter/console/branch.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/branch.tpl.html",'<div class=modal-header><a class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></a><h4 class=modal-title>{{diaTitle}}</h4></div><div class=modal-body><form class=form-horizontal role=form><div class="form-group clearfix"><label class="control-label col-sm-3">账号名称</label><div class=col-sm-7><input type=text class=form-control ng-model=branch.loginName placeholder=建议使用邮箱作为账号名称 ng-disabled=originData ng-class="{error: branchNameError}" ng-blur="checkBranchName()"><p class=error ng-show=branchNameError>{{branchNameError}}</p></div></div><div class=form-group><label class="control-label col-sm-3">账号密码</label><div class=col-sm-7 ng-show=!resetDefalt><input type=text class=form-control placeholder=初始密码为eqxiu disabled></div><div class="col-sm-2 tip" ng-show=resetDefalt><a ng-click=openResetModal(branch);><span class=enable>重置</span></a></div></div><div class=form-group><label class="control-label col-sm-3">用户昵称</label><div class=col-sm-7><input type=text class=form-control ng-model=branch.name placeholder=请填写用户名 ng-class="{error: nameFormatErr}" ng-change="checkNameFormat()"><p class=error ng-show=nameFormatErr>{{nameFormatErr}}</p></div></div><div class=form-group><label class="control-label col-sm-3">所在部门</label><div class=col-sm-7><eqx-select class="select-contain border-width select-base" model=branch.dept><eqx-select-option value=null>全部</eqx-select-option><eqx-select-option value=dept ng-repeat="dept in depts">{{dept.name}}</eqx-select-option></eqx-select></div><div class="col-sm-2 tip" ng-show=!showAddSec style="padding-top: 10px"><a ng-click="showAddSec = true;"><span class=enable>添加部门</span></a></div></div><div class=form-group ng-show=showAddSec><div class="col-sm-offset-3 col-sm-7"><input class=form-control type=text ng-model=dept.name placeholder=输入部门名称 ng-class="{error: deptFormatErr}" ng-blur="checkDeptFormat(dept)"><p class=error ng-show=deptFormatError>{{deptFormatError}}</p></div><div class="col-sm-2 tip"><a ng-click=addDept();><span class=enable>添加</span></a> <a ng-click="showAddSec = false;"><span class=fail>取消</span></a></div></div><div class=form-group><div class="col-sm-offset-3 col-sm-7"><p class=error ng-show=serverError>{{serverError}}</p></div></div><div class=form-group><label class="col-sm-2 text-right"></label><div class="col-sm-9 permit" style=padding-left:0><ul class=clearfix><li class=fl><div class=checkbox-square ng-class="{checked: sceneAllPro.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=sceneAllPro.check ng-change="produceAll(sceneAllPro,\'scene\')"></div><label>场景相关</label></li><li class=fl ng-repeat="scene in scenePermi"><div class=checkbox-square ng-class="{checked: scene.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=scene.check ng-change="productSelect(scene,\'scene\')"></div><label>{{scene.name}}</label></li></ul><ul class=clearfix><li class=fl><div class=checkbox-square ng-class="{checked: spreadAllPro.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=spreadAllPro.check ng-change="produceAll(spreadAllPro,\'spread\')"></div><label>推广相关</label></li><li class=fl ng-repeat="spread in spreadPermi"><div class=checkbox-square ng-class="{checked: spread.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=spread.check ng-change="productSelect(spread,\'spread\')"></div><label>{{spread.name}}</label></li></ul><ul class=clearfix><li class=fl><div class=checkbox-square ng-class="{checked: customerAllPro.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=customerAllPro.check ng-change="produceAll(customerAllPro,\'customer\')"></div><label>客户相关</label></li><li class=fl ng-repeat="customer in customerPermi"><div class=checkbox-square ng-class="{checked: customer.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=customer.check ng-change="productSelect(customer,\'customer\')"></div><label>{{customer.name}}</label></li></ul><ul class=clearfix><li class=fl><div class=checkbox-square ng-class="{checked: userAllPro.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=userAllPro.check ng-change="produceAll(userAllPro,\'user\')"></div><label>账号特权</label></li><li class=fl ng-repeat="user in userPermi"><div class=checkbox-square ng-class="{checked: user.check}"><em class=eqf-yes2></em> <input type=checkbox ng-model=user.check ng-change="productSelect(user,\'user\')"></div><label>{{user.name}}</label></li></ul></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=confirm()>保存</a></div>')}]),angular.module("usercenter/console/checkMobile.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/checkMobile.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{title}}</h4></div><div class=modal-body><form class=form-horizontal><div class=form-group><label class="control-label col-sm-3">手机号</label><div class=col-sm-7><input class=form-control type=text ng-model=userinfo.phone ng-blur=checkMobile(); placeholder="请输入手机号"><p class=error ng-show=mobileError>{{mobileError}}</p></div></div><div class=form-group><div class=clearfix><label class="control-label col-sm-3">验证码</label><div class=col-sm-5><input style=text-align:left type=text class=form-control maxlength=12 ng-model=userinfo.code ng-blur=checkCode() placeholder="请输入验证码"></div><div class="col-sm-2 tip" ng-show=!isCodeAccessiable><a ng-click=showImageCode() id=submit-button><span class=enable>获取验证码</span></a></div><div class="col-sm-2 tip" ng-show=isCodeAccessiable><a><span class=disable>{{codeTip}}</span></a></div></div><p style=padding-left:27% class=error ng-show=codeError>{{codeError}}</p></div><div class="textbox-wrap validate clearfix mb20"><div><script load-script ng-src={{validateCodeUrl}}><\/script></div><div id=captcha-box></div></div><div class="pt20 border-dashed"></div><div class=text-center style=padding-bottom:10px;font-size:12px;color:#a3afb7>为保障用户账号安全,您需要填写当前登录账号密码</div><div class=form-group><label for=inputPass class="control-label col-sm-3">密码</label><div class=col-sm-7><input id=inputPass type=password class=form-control maxlength=16 ng-model=userinfo.password placeholder="请输入当前账号密码"><p class=error ng-show=relErr>{{relErr}}</p></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=relAccount() data-event=7216>确定</button></div>')}]),angular.module("usercenter/console/companyinfo.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/companyinfo.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{title}}</h4></div><div class=userinfo-contain><form class=form-horizontal><fieldset><div class="form-group cleafix"><label for=username class="col-sm-3 control-label">{{contactName}}</label><div class=col-sm-7><input type=text ng-model=companyUserInfo.name class=form-control id=username placeholder=填写{{contactName}} maxlength=12></div></div><div ng-if="type == 2 || type == 5"><div class="form-group cleafix"><label class="col-sm-3 control-label">联系人</label><div class=col-sm-7><input type=text ng-model=companyUserInfo.contacts class=form-control id=inputAddress placeholder=请填写联系人></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">联系电话</label><div class=col-sm-7><input type=text ng-model=companyUserInfo.mobile class=form-control id=inputAddress placeholder=请填写联系电话></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">联系邮箱</label><div class=col-sm-7><input type=text ng-blur=checkEmail(companyUserInfo) class=form-control ng-model=companyUserInfo.email id=inputAddress placeholder=请填写联系邮箱></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">联系地址</label><div class=col-sm-7><input type=text class=form-control ng-model=companyUserInfo.address ng-blur=checkAdress(companyUserInfo) id=inputAddress placeholder=请填写公司地址></div></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票信息</label><div class=col-sm-7><a class="btn blue" ng-click=invoice() style=color:#fff>修改发票信息</a></div></div></fieldset></form><p ng-show=authError style=text-align:center;color:#ff5448>{{authError}}</p></div><div class=modal-footer><a class=modal-cancle ng-click=cancel();>取消</a> <a class="btn btn-primary" ng-if="type ==2 || type == 5" ng-click=saveCompanyInfo(companyUserInfo) data-event=7201>保存提交</a> <a class="btn btn-primary" ng-if="type !=2 && type != 5" ng-click=saveUserInfo(companyUserInfo) data-event=7201>保存提交</a></div>')}]),angular.module("usercenter/console/email_fail.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/email_fail.tpl.html",'<!DOCTYPE html><html><head><meta charset=utf-8><style>*{margin:0;padding:0;}\n        body{\n            font-family: "Microsoft YaHei", Tahoma, Helvetica, Arial, sans-serif;\n        }\n        .content{\n            font-size: 18px;\n            height:200px;\n            width:400px;\n            position: absolute;\n            top:50%;\n            left:50%;\n            margin-top: -100px;\n            margin-left: -200px;\n        }\n        p{margin-top:15px;}\n        a{color:#08a1ef;font-size: 14px;}</style></head><body><div class=content><p>无效的请求，原因可能是：</p><p>1.无效的验证信息；</p><p>2.验证信息已经过期，请在获得链接后立即使用；</p><p>3.验证信息已经被使用，请重新申请；</p><p><a href=http://eqxiu.com/home style="background-color:#08a1ef;padding:4px 8px;color:#fff;text-decoration:none">进首页看看</a></p></div></body></html>')}]),angular.module("usercenter/console/email_succeed.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/email_succeed.tpl.html",'<!DOCTYPE html><html><head><meta charset=utf-8><style>*{margin:0;padding:0;}\n        body{\n            font-family: "Microsoft YaHei", Tahoma, Helvetica, Arial, sans-serif;\n        }\n        .content{\n            font-size: 18px;\n            height:80px;\n            width:400px;\n            position: absolute;\n            top:50%;\n            left:50%;\n            margin-top: -40px;\n            margin-left: -200px;\n        }\n        p{margin-top:15px;}\n        a{color:#08a1ef;}</style><script src=http://code.jquery.com/jquery-1.11.0.min.js><\/script><script language=javascript>$(document).ready(function() {\n\t\t\tfunction jump(count) {\n\t\t\t\twindow.setTimeout(function(){\n\t\t\t\t\tcount--;\n\t\t\t\t\tif(count > 0) {\n\t\t\t\t\t\t$(\'#num\').attr(\'innerHTML\', count);\n\t\t\t\t\t\tjump(count);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocation.href="http://eqxiu.com/#/usercenter/userinfo";\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t\tjump(5);\n\t\t});<\/script></head><body><div class=content><p>您的邮箱验证成功！</p><p style=margin-top:15p><a href=#>如果您的浏览器没有自动跳转，请点击此链接</a></p><p style=margin-top:25p><a href=# style="background-color:#08a1ef;font-size:14px;padding:4px 8px;color:#fff;text-decoration:none">进首页看看</a></p></div></body></html>')}]),angular.module("usercenter/console/invitation.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/invitation.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=main class="pt20 mb20"><div class="invitation-contain same-content text-center pt20 pb20"><h3>快快邀请小伙伴们一起来秀吧!</h3><div class="link-content clearfix"><div class="method fl"><div class=circle>1</div><div class=line></div><div class=circle>2</div></div><div class="fl ml20"><div class=url-contaion><div class=title>复制分享链接，通过微信、QQ等方式将链接分享给您的小伙伴，邀请他们加入'+your_webname+'</div><p class="copy-url mb20"><em>我的精美场景都是用'+your_webname+'做的，免费好用，你也来试试吧，官网地址：</em><br>{{showUrl}}</p><a ng-if=isSafari class="text-primary copy-btn text-left" style=display:block ng-click=copyUrl() data-event=2232>复制链接分享</a> <a ng-if=!isSafari class="text-primary copy-btn text-left" style=display:block copy-button url={{showUrl}} data-event=2232>复制链接分享</a></div><div class=share-containt><span class="tip mt20">也可以直接发送邮件给您的小伙伴或者扫一扫下面的二维码邀请他们加入'+your_webname+'</span><div class=tab-div><ul class="nav nav-tabs"><li ng-class="{active: tabid == \'email\'}"><a ng-click="tabid = \'email\'"><i>Email</i></a></li><li ng-class="{active: tabid == \'wechat\'}"><a ng-click="tabid = \'wechat\'"><i>微信</i></a></li><li ng-class="{active: tabid == \'qq\'}"><a ng-click="tabid = \'qq\'"><i>QQ</i></a></li></ul><div><div class=tab-pane ng-if="tabid == \'qq\'"><div class=view><div class=info><h2>QQ分享</h2><span>用QQ扫描右侧二维码</span></div><div class=qrcode qr-code qr-url={{showUrl}}></div><img ng-src="{{CLIENT_CDN}}assets/images/usercenter/qq.png"></div></div><div class=tab-pane ng-if="tabid == \'wechat\'"><div class=view><div class=info><h2>微信分享</h2><span>用微信扫描右侧二维码分享到朋友圈</span></div><div class=qrcode qr-code qr-url={{showUrl}}></div><img ng-src="{{CLIENT_CDN}}assets/images/usercenter/pic.png"></div></div><div class=tab-pane ng-if="tabid == \'email\'"><h2 class="ml20 mt20">发送邮件给你的小伙伴</h2><div class="form-group mt20"><div class=col-sm-9><input type=text ng-blur=checkEmailFormat(email) class="form-control input-lg" placeholder=输入小伙伴的邮箱 ng-model="email"><p class=error ng-show=emailFormatErr>{{emailFormatErr}}</p></div><a class="btn-primary btn colsm-2" ng-disabled=emailFormatErr ng-click=sendEmail(email) data-event=2233>发送邀请</a></div></div></div></div></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("usercenter/console/invoice-list.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/invoice-list.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>我的订单</h4></div><div class=modal-body><table class="table table-bordered table-hover"><thead><tr><th><div class="checkbox-square customer-check fr" ng-class="{checked: selectAll.selected}"><em class=eqf-clickmore></em> <input class=check-box type=checkbox ng-model=selectAll.selected name=iCheck ng-change=switchSelectAll()></div></th><th>订单号</th><th>所购商品</th><th>价格</th><th>购买时间</th><th>支付方式</th></tr></thead><tbody><tr ng-repeat="invoice in invoiceList"><td><div class="checkbox-square customer-check fr" ng-class="{checked: invoice.selected}"><em class=eqf-clickmore></em> <input class=check-box type=checkbox ng-model=invoice.selected name=iCheck ng-change=switchSelect(invoice)></div></td><td>{{invoice.id}}</td><td>{{invoice.name}}</td><td>{{invoice.totalFee}}</td><td>{{invoice.createTime}}</td><td>{{invoice.payType}}</td></tr></tbody></table><div class=clearfix style=margin-top:10px;margin-bottom:0 ng-show="totalItems > 5"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=pageSize total-items=totalItems ng-model=currentPage ng-change=pageChanged(currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><input type=text ng-model=obj.toPage ng-keyup="$event.keyCode == 13 ? pageChanged(obj.toPage) : null"> <a ng-click=pageChanged(obj.toPage) class=go>确认</a></div></div></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a type=button class="btn btn-primary" ng-click=ok()>开发票</a></div>')}]),angular.module("usercenter/console/invoice.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/invoice.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>发票信息</h4></div><div class="modal-body invoice" style="height:415px;overflow: hidden;padding:20px 20px 0 20px"><div eqd-scroll style=height:100%><form class=form-horizontal ng-class={disabled:!editInfo.isEditable}><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">收件人</label><div class=col-sm-7><span class=noEdit ng-model=invoice.receiver>{{invoice.receiver}}</span> <input type=text class=form-control ng-model=invoice.receiver placeholder=请填写收件人 maxlength=24></div></div><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">联系电话</label><div class=col-sm-7><span class=noEdit ng-model=invoice.phone>{{invoice.phone}}</span> <input type=text class=form-control ng-model=invoice.phone placeholder=请填写联系电话 maxlength=24></div></div><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">收货地址</label><div class=col-sm-7><span class=noEdit ng-model=invoice.address>{{invoice.address}}</span> <input type=text class=form-control ng-model=invoice.address placeholder=请填写收货地址 maxlength=40></div></div><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">发票类型</label><div class=col-sm-7><div class=btn-group><a class="btn btn-default background-color-width-change" ng-class="{active:invoiceStatus == 1}" ng-click=changeType(1)>增值税普票</a> <a class="btn btn-default background-color-width-change" ng-class="{active:invoiceStatus == 2}" ng-click=changeType(2)>增值税专票</a> <a class="btn btn-default background-color-width-change" ng-class="{active:invoiceStatus == 3}" ng-click=changeType(3)>个人普票</a></div></div></div><div ng-show="invoiceStatus == 1"><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">发票抬头</label><div class=col-sm-7><span class=noEdit ng-model=invoiceListPu.title>{{invoiceListPu.title}}</span> <input type=text class=form-control ng-model=invoiceListPu.title placeholder=请填写发票抬头 maxlength=24></div><div class="col-sm-2 tips"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target=_blank style=text-decoration:underline>了解详情</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票内容</label><div class=col-sm-7><span class="">技术服务费</span></div></div><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">税务登记号</label><div class=col-sm-7><span class=noEdit ng-model=invoiceListPu.taxId>{{invoiceListPu.taxId}}</span> <input type=text class=form-control ng-model=invoiceListPu.taxId placeholder=请填写税务登记号 maxlength=24></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">税务登记证</label><div class=col-sm-7 style=position:relative><div class="see-image zoomIn-change" ng-model=puPicture.tax ng-show=tax ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + puPicture.tax) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class=eqf-wrong2 ng-click="tax=false;" style=position:absolute;top:-5px;right:-5px;font-size:14px></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'puTax\')">上传</a> <a ng-if=puPicture.tax class="btn blue" ng-init="$parent.tax=false;" ng-click="$parent.tax=!$parent.tax">查看</a></div></div></div><div ng-show="invoiceStatus == 2"><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">发票抬头</label><div class=col-sm-7><span class=noEdit ng-model=invoiceListzhuan.title>{{invoiceListzhuan.title}}</span> <input type=text class=form-control ng-model=invoiceListzhuan.title placeholder=请填写发票抬头 maxlength=24></div><div class="col-sm-2 tips"><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target=_blank style=text-decoration:underline>了解详情</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票内容</label><div class=col-sm-7><span class="">技术服务费</span></div></div><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">税务登记号</label><div class=col-sm-7><span class=noEdit ng-model=invoiceListzhuan.taxId>{{invoiceListzhuan.taxId}}</span> <input type=text class=form-control ng-model=invoiceListzhuan.taxId placeholder=请填写税务登记号 maxlength=24></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">税务登记证</label><div class=col-sm-7 style=position:relative><div class="see-image zoomIn-change" ng-model=picture.tax ng-show=tax ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + picture.tax) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class=eqf-wrong2 ng-click="tax=false;" style=position:absolute;top:-5px;right:-5px;font-size:14px></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'tax\')">上传</a> <a ng-if=picture.tax class="btn blue" ng-init="$parent.tax=false;" ng-click="$parent.tax=!$parent.tax">查看</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">银行许可证</label><div class=col-sm-7 style=position:relative><div class="see-image zoomIn-change" ng-model=picture.bank ng-show=bank ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + picture.bank) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class=eqf-wrong2 ng-click="bank=false;" style=position:absolute;top:-5px;right:-5px;font-size:14px></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'bank\')">上传</a> <a ng-if=picture.bank class="btn blue" ng-init="$parent.bank=false;" ng-click="$parent.bank=!$parent.bank">查看</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">一般纳税人资质证明</label><div class=col-sm-7 style=position:relative><div class="see-image zoomIn-change" ng-show=people ng-model=picture.people ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + picture.people) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class=eqf-wrong2 ng-click="people=false;" style=position:absolute;top:-5px;right:-5px;font-size:14px></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'people\')">上传</a> <a ng-if=picture.people class="btn blue mr20" ng-init="$parent.people=false;" ng-click="$parent.people=!$parent.people">查看</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">开票信息加盖公章</label><div class=col-sm-7 style=position:relative><div class="see-image zoomIn-change" ng-show=mes ng-model=picture.mes ng-style="{\'background-image\':\'url(\' + (PREFIX_FILE_HOST + picture.mes) + \')\',\'background-size\':\'contain\',\'background-repeat\': \'no-repeat\',\'background-position\':\'center\'}"><a class=eqf-wrong2 ng-click="mes=false;" style=position:absolute;top:-5px;right:-5px;font-size:14px></a></div><a class="btn blue mr20 upload" ng-click="addPictures(\'mes\')">上传</a> <a ng-if=picture.mes class="btn blue" ng-init="$parent.mes=false;" ng-click="$parent.mes=!$parent.mes">查看</a></div></div></div><div ng-show="invoiceStatus == 3"><div class="form-group clearfix"><label for=inputPassword3 class="col-sm-3 control-label">发票抬头</label><div class=col-sm-7><span class="">个人</span></div><div class=col-sm-2><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target=_blank style=text-decoration:underline>了解详情</a></div></div><div class="form-group cleafix"><label class="col-sm-3 control-label">发票内容</label><div class=col-sm-7><span>技术服务费</span></div></div></div><p class="red-color text-center" ng-show=authError>{{authError}}</p><div class=invoice-action><p class=text-red>1、自购买之日一个月内必须提交发票申请，过期将不予开具；发票申请提交后，'+your_webname+"将在一个月内开具发票并寄出；外国用户仅能提供发票扫描件。</p><p>2、"+your_webname+"发票项目为：技术服务费。（目前仅开具此项内容，不能开具其他项目）。</p><p>3、如果一个月内多次购买，建议一次性提交发票申请，多个订单可合并。</p><p>4、如发票信息填写错误造成发票无法报销，"+your_webname+'不予退换发票，请认真填写，确保无误。</p></div></form></div></div><div class="modal-footer mt20"><a class=modal-cancle ng-if=editInfo.isEditable ng-click=cancel();>取消</a> <a class="btn btn-primary" ng-if=editInfo.isEditable ng-click=saveUserInvoice(userinfo) data-event=7202>保存提交</a> <a class=modal-cancle ng-if=!editInfo.isEditable ng-click=reset();>修改发票信息</a> <a class="btn btn-primary" ng-if=!editInfo.isEditable ng-click=submit(userinfo) data-event=7202>提交</a></div>')}]),angular.module("usercenter/console/register.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/register.tpl.html",'<div class=modal-header><h4 class=modal-title>设置账号-密码<span class=action ng-show=relErr>{{relErr}}</span></h4></div><div class="modal-body registerForm"><form class=form-contain role=form><div class="form-list clearfix"><label for=inputPassword3 class=form-label>登录账号</label><div class=form-input><input type=text class=third-name autofocus ng-model=thirdUser.loginName ng-blur=checkUsername(); placeholder="设置邮箱账号"> <span ng-show=usernameError class=error_text>{{usernameError}}</span></div></div><div class="form-list clearfix"><label for=inputPassword3 class=form-label>密码</label><div class=form-input><input type=password class=third-pwd style=float:right maxlength=12 ng-model=thirdUser.password ng-blur=checkPassword() placeholder="密码6~16个字符(英文字母或数字 区分大小写)"> <span ng-show=passError class=error_text>{{passError}}</span></div></div><div class="form-list clearfix"><label for=inputPassword3 class=form-label>确认密码</label><div class=form-input><input type=password class=third-pwd style=float:right maxlength=12 ng-model=thirdUser.repeatPassword ng-blur=checkRepeatPassword() placeholder="确认密码"> <span ng-show=rPassError class=error_text>{{rPassError}}</span></div></div><div class="login-form-action clearfix mt20"><div class="checkbox pull-left"><input type=checkbox ng-model="thirdUser.agreement"> <span class=checkbox-text><a href=/agreement target=_blank>同意《用户注册协议》</a></span></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=registerAccount()>确定</a></div>')}]),angular.module("usercenter/console/relAccount.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/relAccount.tpl.html",'<div class=modal-header><h4 class=modal-title>绑定账号 <span class=action ng-show=relErr>{{relErr}}</span> <span class=action ng-show=!relErr>绑定已有账号</span></h4></div><div class=modal-body><form class=form-contain role=form><div class="form-list clearfix"><label for=inputPassword3 class=form-label>登录账号</label><div class=form-input><input type=text class=third-name ng-model=user.email ng-blur=checkUpperCase(); placeholder="输入要绑定的账号"></div></div><div class="pt20 mt20 border-dashed"></div><div class=text-center style=padding-bottom:10px;font-size:12px;color:#a3afb7>&nbsp;为保障用户账号安全，需要填写绑定账号密码</div><div class="form-list clearfix"><label for=inputPassword3 class=form-label>密码</label><div class=form-input><input type=password class=third-pwd style=float:right ng-model=user.password placeholder="输入该账号登录密码"></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=bindAccount()>立即绑定</a> <a class="btn btn-primary" ng-click=cancel();createAccount();>创建账号</a></div>')}]),angular.module("usercenter/console/relEmail.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/relEmail.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{title || \'绑定邮箱\'}}</h4></div><div class=modal-body><form class=form-horizontal><div class=form-group><label for=inputMail class="col-sm-3 control-label">邮箱</label><div class=col-sm-7><input id=inputMail type=text class=form-control ng-model=userinfo.email ng-class="{error: emailFormatErr}" ng-blur=checkUpperCase();checkEmailFormat(userinfo) placeholder=输入邮箱><p class=error ng-show=emailFormatErr>{{emailFormatErr}}</p></div></div><div class="pt20 border-dashed"></div><div class=text-center style=padding-bottom:10px;font-size:12px;color:#a3afb7>为保障用户账号安全,您需要填写当前登录账号密码</div><div class=form-group><label for=inputPass class="col-sm-3 control-label">密码</label><div class=col-sm-7><input id=inputPass type=password class=form-control ng-model=userinfo.password placeholder=请输入当前账号密码 ng-class="{error: passFormatErr}" ng-blur=checkPassFormat(userinfo)><p class=error ng-show=passFormatErr>{{passFormatErr}}</p><p class=error ng-show=relErr>{{relErr}}</p></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a type=button class="btn btn-primary" ng-click=relEmail(userinfo) data-event=7213>立即绑定</a></div>')}]),angular.module("usercenter/console/relForum.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/relForum.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>修改论坛</h4></div><div class=modal-body><form class=form-horizontal><div class=form-group><label for=inputBbsName class="control-label col-sm-3">论坛账号</label><div class=col-sm-7><input id=inputBbsName class=form-control type=text ng-model=userinfo.bbsId ng-blur=checkBbsName(); placeholder="请输入论坛账号"><p class=error ng-show=BbsNameError>{{BbsNameError}}</p></div></div><div class=form-group><label for=inputBbsPwd class="control-label col-sm-3">论坛密码</label><div class=col-sm-7><input style=text-align:left id=inputBbsPwd type=password class="form-control code" ng-model=userinfo.bbsPwd ng-blur=checkBbsPassword() placeholder="请输入论坛密码"><p class=error ng-show=bbsPwdError>{{bbsPwdError}}</p></div></div><div class="pt20 border-dashed"></div><div class=text-center style=padding-bottom:10px;font-size:12px;color:#a3afb7>为保障用户账号安全,您需要填写当前登录账号密码</div><div class=form-group><label for=inputPass class="control-label col-sm-3">密码</label><div class=col-sm-7><input id=inputPass type=password class=form-control ng-model=userinfo.eqxiuPwd ng-blur=checkEqxiuPassword() placeholder="请输入当前账号密码"><p class=error ng-show=eqxiuPwdError>{{eqxiuPwdError}}</p></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <button type=button class="btn btn-primary" ng-click=relForum() data-event=7219>确定</button></div>')}]),angular.module("usercenter/console/resetbranchpass.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/resetbranchpass.tpl.html",'<div class=dialog-contain><div class=dialog-head><h1>重置密码</h1><p ng-show=!authError>在此修改密码，退出再登录后即成功</p><p ng-show=authError>{{authError}}</p></div><div class=dialog-content><form class=form-contain role=form><div class="form-list clearfix"><label for=inputPassword3 class=form-label>子账号：</label><div class=form-input style="top: 6px">{{branch.loginName}}</div></div><div class=tip style="padding-left: 30px;margin: 20px 0"><span>重置密码后，密码将恢复为初始密码:</span> <span style="color: #ff0000">eqxiu</span></div><div class="btn-contain btn-big"><a class="btn-main login" ng-click=reset()>重置为初始密码</a> <a class="btn-grey0 cancel" ng-click=cancel()>取消</a></div></form></div></div>')}]),angular.module("usercenter/console/serverinfo.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/serverinfo.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{title}}<a href=http://eqxiu.com/show/visitor style=font-size:12px;padding-left:5px target=_blank>什么是秀客？</a></h4></div><div class=modal-body><form class="form-horizontal upgrade"><div class=form-group><label class="control-label col-sm-2">用户昵称</label><div class=col-sm-8><input type=text class=form-control ng-model=applyInfo.nick placeholder="30个字符"></div></div><div class=form-group><label class="control-label col-sm-2">简短介绍</label><div class=col-sm-8><input type=text class=form-control ng-model=applyInfo.shortIntroduction placeholder=30个字符 ng-class="{error: introError}" ng-blur="checkIntroFormat(applyInfo)"><p class=error ng-show=introError>{{introError}}</p></div><div class="col-sm-2 tips ng-scope">必填</div></div><div class=form-group><label class="control-label col-sm-2">详细介绍</label><div class=col-sm-8><textarea class=form-control ng-model=applyInfo.introduction placeholder=400个字符 ng-class="{error: introError1}" ng-blur=checkIntroFormat1(applyInfo)></textarea><p class=error ng-show=introError1>{{introError1}}</p></div><div class="col-sm-2 tips ng-scope">必填</div></div><div class=form-group><label class="text-right col-sm-2">代表作品</label><div ng-show=myShowScene class=clearfix><div class=col-sm-7><p ng-show="sceneSelected.length < 1" style=color:#999>请选择3个代表作品，作品默认会加入秀场</p><p ng-show="sceneSelected.length >0" class=select-icon><span ng-repeat="scene in sceneSelected" class=ellipsis title={{scene.name}}>{{scene.name}}</span></p></div><div class=dropdown style=width:50px;float:left><a ng-show="myShowScene.length > 0" class="more dropdown-toggle" style=color:#08a1ef>选择</a><div class="other-label dropdown-menu" style=width:500px;left:-400px><div class=select-contain><div class="square col-sm-6 ellipsis" ng-repeat="scene in myShowScene" forbidden-close><div class=checkbox-square ng-class="{checked: scene.ischecked}"><em class=eqf-yes2></em> <input type=checkbox id="{{scene.name + $index}}" class=area ng-model=scene.ischecked ng-value="other"></div><label for="{{scene.name + $index}}" title={{scene.name}}>{{scene.name}}</label></div></div><div class="col-sm-12 text-right" forbidden-close><a class=modal-cancle ng-click=scene_cancel($event)>取消</a> <a class="btn btn-primary" ng-click="sceneSelect(scene, $event,true)">确认</a><p class=error style=float:left ng-show=sceneError>{{sceneError}}</p></div></div><div class=otherBg forbidden-close></div></div><div class="col-sm-1 tips" style=padding-top:0;padding-bottom:0>必填</div></div><div class=col-sm-8 style=color:#ff0000 ng-show=!myShowScene>您暂无代表作品，请先创建场景</div><p class="col-sm-8 error" style=padding-left:145px ng-show=sceneNull>{{sceneNull}}</p></div><div class=form-group><label class="col-sm-2 text-right">服务地域</label><div class=col-sm-7><p style=color:#999 ng-show="serverSelected.length < 1">请选择1-3个服务的地域</p><p ng-show="serverSelected.length >0" class=select-icon><span ng-repeat="server in serverSelected" class=ellipsis title={{server.name}}>{{server.name}}</span></p><p class=error style=float:left ng-show=serverNull>{{serverNull}}</p></div><div class=dropdown style=float:left;width:50px><a ng-show=moreArea class="more dropdown-toggle" style=color:#08a1ef>选择</a><div class="other-label dropdown-menu" style=width:500px;left:-400px><div class=select-contain><div class="square col-sm-4" ng-repeat="server in serverLabel" forbidden-close><div class=checkbox-square ng-class="{checked: server.ischecked}"><em class=eqf-yes2></em> <input type=checkbox id="{{server.name + $index}}" class=area ng-model=server.ischecked></div><label for="{{server.name + $index}}">{{server.name}}</label></div></div><div class="col-sm-12 text-right" style=line-height:36px forbidden-close><a class=modal-cancle ng-click=server_cancel($event)>取消</a> <a class="btn btn-primary" ng-click=serverSubmit(applyInfo,$event,true)>确认</a><p class=error style=float:left ng-show=serverError>{{serverError}}</p></div></div><div class=otherBg forbidden-close></div></div><div class="col-sm-1 tips" style=padding-top:0;padding-bottom:0>必填</div></div><div class=form-group><label class="col-sm-2 text-right">擅长领域</label><div class=col-sm-7><p style=color:#999 ng-show="cateSelected.length < 1">请选择1-3类擅长的领域</p><p ng-show="cateSelected.length >0" class=select-icon><span ng-repeat="cate in cateSelected" class=ellipsis title={{cate.name}}>{{cate.name}}</span></p><p class=error ng-show=cateNull>{{cateNull}}</p></div><div class=dropdown style=float:left;width:50px><a ng-show=moreLabel class="more dropdown-toggle" style=color:#08a1ef>选择</a><div class="other-label dropdown-menu" style=width:550px;left:-420px><div class=select-contain><div class="square col-sm-3" ng-repeat="otherCate in cateLabel" forbidden-close><div class=checkbox-square ng-class="{checked: otherCate.ischecked}"><em class=eqf-yes2></em> <input type=checkbox id="{{otherCate.name + $index}}" class=area ng-model=otherCate.ischecked ng-value="other"></div><label for="{{otherCate.name + $index}}">{{otherCate.name}}</label></div></div><div class="col-sm-12 text-right" style=line-height:36px forbidden-close><a class=modal-cancle ng-click=cate_cancel($event)>取消</a> <a class="btn btn-primary" ng-click="queren(applyInfo, $event,true)">确认</a><p class=error style=float:left ng-show=cateError>{{cateError}}</p></div></div><div class=otherBg forbidden-close></div></div><div class="col-sm-1 tips" style=padding-top:0;padding-bottom:0>必填</div></div><div class=form-group style=position:relative><label class="col-sm-2 text-right">支付方式</label><div style=float:left;width:380px><div class=square style=width:90px;float:left;margin-left:15px ng-repeat="pay in payLabel"><div class=checkbox-square ng-class="{checked: pay.ischecked}"><em class=eqf-yes2></em> <input type=checkbox id="{{pay.name + $index}}" ng-model=pay.ischecked class="area"></div><label for="{{pay.name + $index}}">{{pay.name}}</label></div></div><div class="col-sm-1 tips" style=margin-left:12px>必填</div><div class="col-sm-offset-2 col-sm-10" ng-show=payError><p class=error>{{payError}}</p></div></div><div class=form-group><label class="control-label col-sm-2">服务QQ</label><div class=col-sm-8><input type=text class=form-control ng-model=applyInfo.qq value="" ng-class="{error: qqError}" placeholder=服务QQ ng-blur=checkQQFormat(applyInfo) maxlength="20"><p class=error ng-show=qqError>{{qqError}}</p></div><div class="col-sm-2 tips">必填</div></div><div class=form-group><label class="control-label col-sm-2">微信号</label><div class=col-sm-8><input type=text class=form-control ng-class="{error: wechatError}" ng-model=applyInfo.wechat value="" placeholder=微信号 maxlength="20"><p class=error ng-show=wechatError>{{wechatError}}</p></div><div class="col-sm-2 tips">必填</div></div><div class=form-group><label class="control-label col-sm-2">联系邮箱</label><div class=col-sm-8><input type=text class=form-control ng-model=applyInfo.email value="" ng-class="{error: emailError}" ng-blur=checkEmailFormat(applyInfo) placeholder=联系邮箱 maxlength="40"><p class=error ng-show=emailError>{{emailError}}</p></div><div class="col-sm-2 tips">必填</div></div><div class=form-group><label class="control-label col-sm-2">手机号</label><div class=col-sm-8><input type=text class=form-control ng-model=applyInfo.phone value="" ng-class="{error: telError}" placeholder=手机号 ng-change=changePhone(applyInfo.phone) maxlength="20"><p class=error ng-show=telError>{{telError}}</p></div><div class="col-sm-2 tips ng-scope">必填</div></div><div class="form-group clearfix" ng-show=showPhone><label for=inputPassword3 class="col-sm-2 control-label">验证码</label><div class=col-sm-6><input type=type class=form-control ng-class={error:codeError} placeholder=验证码 ng-model=applyInfo.code ng-blur=checkCode(applyInfo)><p class=error ng-show=codeError>{{codeError}}</p></div><div class=col-sm-2 style=padding:0 ng-show=showPhone><span ng-show=!isCodeAccessiable><a class=code ng-click=getImageCode(applyInfo,1) id=submit-button>验证码</a></span> <span class="code enble" ng-show=isCodeAccessiable>{{codeTip}}</span></div><div class="col-sm-2 tips">必填</div></div><div><script load-script ng-src={{validateCodeUrl}}><\/script></div><div id=captcha-box></div><div class="form-group cleafix" ng-show=!invoiceStat><label class="col-sm-2 control-label">发票信息</label><div class=col-sm-7><a class="btn blue" ng-click=invoice() style=color:#fff>修改发票信息</a></div></div></form><p ng-show=authError style=text-align:center;color:#ff5448>{{authError}}</p></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a class="btn btn-primary" ng-click=submit(applyInfo) ng-show=applyXiuke data-event=7201>提交申请</a> <a class="btn btn-primary" ng-click=reset(applyInfo) ng-show=!applyXiuke data-event=7201>确定</a></div>')}]),angular.module("usercenter/console/upgrade_company.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/console/upgrade_company.tpl.html",'<div class=login-form-section><div class=login-content><form class=form-horizontal><div class=section-title><a class="bbs-help-tip eqf-wrong fr" ng-click=quXiao()></a><h3>申请企业会员</h3></div><div class=company-user-modal><eqd-reg-company change-location=true></eqd-reg-company></div></form></div></div>')}]),angular.module("usercenter/invoiceNotice.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/invoiceNotice.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>发票须知</h4></div><div class="modal-body invoice-notice"><p class=text-red>1、自购买之日一个月内必须提交发票申请，过期将不予开具；发票申请提交后，'+your_webname+"将在一个月内开具发票并寄出；外国用户仅能提供发票扫描件。</p><p>2、"+your_webname+"发票项目为：技术服务费。（目前仅开具此项内容，不能开具其他项目）。</p><p>3、如果一个月内多次购买，建议一次性提交发票申请，多个订单可合并。</p><p>4、如发票信息填写错误造成发票无法报销，"+your_webname+'不予退换发票，请认真填写，确保无误。</p></div><div class=modal-footer><a ng-click=cancel() class="btn btn-primary">知道了</a></div>')}]),angular.module("usercenter/message.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/message.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=main class="min_contain same-content message-contain"><div class=u-content><div class=m-title><div class="m-icon fl red-bg"><span class=eqf-music></span></div><div class=m-detail><div class="m-type ng-binding">站内消息</div><div class="pt20 clearfix"><span style=float:right class=message><a class=ml20 ng-show="Msgs.length > 0" ng-click=setRead()>全部标记为已读</a> <a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890" target=_blank>审核问题</a></span> <span class=mr20><em>消息总数：{{msgCount}}</em></span> <span><em>未读消息：{{newMsgCount}}</em></span></div></div></div><div class=account-contain><table class="table table-hover" ng-show="Msgs.length > 0"><thead><tr><th class=col-sm-3>类型</th><th class=col-sm-6>内容</th><th class=col-sm-3>日期</th></tr></thead><tr ng-repeat="newMsg in Msgs" ng-click=setRead(newMsg)><td>{{newMsg.type}}<em ng-class="{new_msg: newMsg.status == 1}"></em></td><td ng-bind-html=newMsg.content></td><td>{{newMsg.sendTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</td></tr></table><div class=mt20 ng-show="Msgs.length == 0">您暂时还没有消息！</div><div class="clearfix page-turn" ng-show="msgCount> 10"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=5 items-per-page=pageSize total-items=msgCount ng-model=currentPage.msgCurrentPage boundary-links=true rotate=true num-pages=msgNumPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage, \'msgCurrentPage\') : null"><span class=fl>页</span> <a ng-click="pageChanged(toPage, \'msgCurrentPage\')" class=go>确定</a></div></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("usercenter/payment.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/payment.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>请选择喜欢的支付方式进行支付</h4></div><div><ul class="nav nav-bg"><li ng-class="{active:payWay==\'alipay\'}"><a ng-click="getWeChatUrl(\'alipay\');">支付宝</a></li><li ng-class="{active:payWay==\'wechat\'}"><a ng-click="getWeChatUrl(\'wechat\');" ng-hide="type==3 || money === 6800 || money === 15600 ">微信</a></li><li ng-class="{active:payWay==\'remit\'}"><a ng-click="getWeChatUrl(\'remit\');">汇款支付</a></li><li ng-class="{active:payWay==\'unionpay\'}"><a ng-click="getWeChatUrl(\'unionpay\');">银联支付</a></li></ul><div class=tab-content><div class=tab-pane ng-class="{active:payWay==\'alipay\'}"><h4 class="text-center mt20">扫码支付</h4><h3 class=text-center style=color:red;margin-top:15px>{{money}}元</h3><div class="qrcode text-center" style="width:100%;padding:12px 0" qr-code qr-url={{qrCodeUrl}}></div></div><div class=tab-pane ng-class="{active:payWay==\'wechat\'}"><h4 class="text-center mt20">扫码支付</h4><h3 class=text-center style=color:red;margin-top:15px>{{money}}元</h3><div class="qrcode text-center" style="width:100%;padding:12px 0" qr-code qr-url={{qrCodeUrl}}></div></div><div class=tab-pane ng-class="{active:payWay==\'remit\'}"><h4 class="text-center mt20">需支付</h4><h3 class=text-center style=color:red;margin-top:15px>{{money}}元</h3><div class="remit-contain p20"><p>对公支付请按照下列步骤进行：</p><p style=padding-top:15px>步骤1：打款<br>公司名称：北京中网'+your_webname+"科技有限公司<br>开户行全称：中国工商银行股份有限公司北京海淀支行<br>银行账号：0200049609201083655</p><p style=padding-top:15px><span class=action>重要说明！！！</span><br>步骤2：发邮件到fapiao@eqxiu.com,以便"+your_webname+"更快捷给你提供相关服务。邮件内容如下：<br>购买项目：（秀点，企业体验版，企业基础版，企业标准版，企业高级版等）<br>购买金额，购买数量，"+your_webname+'账号，联系电话。</p></div></div><div class=tab-pane ng-class="{active:payWay==\'unionpay\'}" ng-init="paying = true;"><div ng-show=paying><h4 class="text-center mt20">需支付</h4><h3 class=text-center style=color:red;margin-top:15px;margin-bottom:20px>{{money}}元</h3><div style="text-align:center;margin-bottom:20px;width: 180px;position: relative;margin-left: -90px;left:50%" ng-show="counts.length>0 && payWay==\'unionpay\'"><eqx-select class="select-great select-contain border-width" model=count ng-init="count = counts[0]" change=setCount(count.value,$index)><eqx-select-option value=count ng-repeat="count in counts track by $index">{{count.name}}</eqx-select-option></eqx-select></div><div class=text-center style=padding-bottom:20px><a ng-click="paying = false" ng-href="{{PREFIX_SERVER_HOST + \'m/u/union/pay?goodsId=\' + type + \'&amount=\' + curentCount}}" target=_blank>立即支付</a></div></div><div ng-show=!paying class="p20 text-center"><p>请在新开启的支付页面中完成支付后，点击完成支付按钮关闭对话框。<br>未完成支付，可点击重新支付按钮再次进行支付</p><p style=margin-top:20px><a class="btn btn-primary" ng-href="{{PREFIX_SERVER_HOST + \'m/u/union/pay?goodsId=\' + type + \'&amount=\' + curentCount}}" target=_blank>重新支付</a></p></div></div></div><div style="text-align:center;margin-bottom:20px;width: 180px;position: relative;margin-left: -90px;left:50%" ng-show="counts.length>0 && payWay!=\'unionpay\'"><eqx-select class="select-great select-contain border-width" model=count ng-init="count = counts[0]" change=setCount(count.value,$index)><eqx-select-option value=count ng-repeat="count in counts track by $index">{{count.name}}</eqx-select-option></eqx-select></div><div ng-show="payWay==\'alipay\'" style=padding-bottom:10px class=text-center><a ng-href="{{PREFIX_SERVER_HOST +\'m/u/alipay/direct?goodsId=\' + type + \'&amount=\' + curentCount+ \'&goodsType=\' + goodsType}}" target=_blank>支付宝网页支付</a></div></div><div class="modal-footer pay-invoice"><a class="btn btn-primary fr" ng-click=paymented()>完成支付</a> <a ng-click=invoiceNotice()>发票须知</a></div>')}]),angular.module("usercenter/paymentxd.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/paymentxd.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>请使用微信扫一扫二维码进行</h4></div><div class=modal-body><div class=qrcode style=width:100% qr-code qr-url={{qrCodeUrl}}></div></div><div class=modal-footer><a class="btn btn-primary" ng-click=paymented()>完成支付</a></div>')}]),angular.module("usercenter/request_reg.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/request_reg.tpl.html","<div class=request_reg><div class=close ng-click=cancel()>x</div><div class=erwei qr-code qr-url=\"{{PREFIX_CLIENT_HOST + '/m/#/wxLogin?id=' + currentUser.id}}\"></div></div>")}]),angular.module("usercenter/tab/account.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/account.tpl.html",'<div class=account-contain><div class=tab-box-shadow><div class="account-items clearfix"><div class=item-one><em ng-class="{\'eqf-yes green-color\':userinfo.email && userinfo.checkEmail == 1,\'eqf-exclamation-sign red-color\': userinfo.checkEmail != 1}"></em> <span>保密邮箱</span></div><div class=item-two><span ng-if="userinfo.email &&( userinfo.checkEmail == 0 || userinfo.checkEmail==null)"><em style=font-weight:lighter>您的邮箱：{{ userinfo.email}}尚未验证，请尽快登录邮箱进行验证。</em></span> <span ng-if="userinfo.email && userinfo.checkEmail == 1"><span class=action>您的邮箱：{{ userinfo.email}}已验证，请放心使用</span></span> <span ng-if="userinfo.email==null">未绑定</span></div><div class=item-three><a ng-if="userinfo.email &&( userinfo.checkEmail == 0 || userinfo.checkEmail==null)" ng-click=verifyEmail() class="text-primary pr20" data-event=7212>再次验证</a> <a ng-click="relEmail(\'绑定邮箱\')" ng-if="userinfo.email==null" class=text-primary data-event=7212>绑定邮箱</a> <a ng-click="relEmail(\'修改邮箱\')" ng-if=userinfo.email class="action text-primary">修改邮箱</a></div></div><div class="account-items clearfix"><div class=item-one><em class="eqf-yes green-color"></em><span>登录密码</span></div><div class=item-two><span class=account-action>建议使用6-16个字符，可包括大小写字母和数字</span></div><div class=item-three><a class=text-primary ng-click=goReset()>修改密码</a></div></div></div></div>')}]),angular.module("usercenter/tab/children.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/children.tpl.html",'<div class="children branches" ng-show="userinfo.type==2 || userinfo.type==5 || userinfo.type == 21"><h2 class="subhead mb20" style=margin-top:0><em>子账号管理</em><div class=fr><span ng-if=branchName.name class=mr20>当前子账号：{{branchName.name}}<em class="eqf-wrong2 pl20" title=返回主账号 ng-click=changeCurrent()></em></span> <a class=text-center ng-if="user.type != 21" ng-click=manageBranch();><em class=eqf-plus2></em><i>添加子账号</i></a> <a class=text-center ng-if="user.type != 21" ng-click=buyBranch();><em class=eqf-buy></em><i>购买子帐号</i></a></div></h2><div class="branch-list tab-box-shadow"><table class="table table-hover mb20"><tr><th class=col-sm-3>子账号</th><th class=col-sm-2>用户名</th><th class=col-sm-2>部门</th><th class=col-sm-2>创建时间</th><th class=col-sm-2>账号状态</th><th class=col-sm-2>管理</th></tr><tr ng-repeat="branch in branches track by $index"><td>{{branch.loginName}}</td><td>{{branch.name}}</td><td>{{branch.deptName}}</td><td>{{branch.regTime | date:\'yyyy-MM-dd\'}}</td><td><div class=status ng-show="branch.status == 1"><div ng-show="user.type != 21" class="switch switch-open hint--bottom hint--rounded" data-hint=点击关闭子账号 ng-click="openBranch(branch, false);"><div class=circle-con><i class=circle></i></div></div><span>开放</span></div><div class=status ng-show="branch.status == 2"><div ng-show="user.type != 21" class="switch switch-close hint--bottom hint--rounded" data-hint=点击开放子账号 ng-click="openBranch(branch, true);"><div class=circle-con><i class=circle></i></div></div><span>关闭</span></div><div class=status ng-show="branch.status == 4"><div ng-show="user.type != 21" class="switch switch-close hint--bottom hint--rounded" data-hint=点击开放子账号 ng-click="openBranch(branch, true);"><div class=circle-con><i class=circle></i></div></div><span>冻结</span></div></td><td style=position:relative><a class=eqf-scene-settingII ng-click=showEdit(branch,$index)></a><div class="branch-edit zoomIn-change" style="transform-origin:0 0" ng-show=branch.edit><a class=branch-close ng-click=manageBranch(branch,true) ng-show="user.type !=21">修改</a> <a ng-click=selectBranch(branch) ng-model=branch>查看</a></div></td></tr></table></div><div class="clearfix page-turn" ng-show="branchesCount > 10"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=5 items-per-page=XdpageSize total-items=branchesCount ng-model=page.currentPage ng-change=pageChanged(page.currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div></div>')}]),angular.module("usercenter/tab/domain.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/domain.tpl.html",'<div class="dialog-contain domain-xiudian"><div class=dialog-head><h1>绑定域名</h1><p ng-show=!actionerror>请您输入正确的域名地址</p><p ng-show=actionerror>{{actionerror}}</p></div><div class=dialog-content><form class=form-contain role=form><div class="form-list clearfix"><label class=form-label>绑定域名</label><div class=form-input><input type=text class=dns ng-model=domainMess.url placeholder=请输入要绑定的域名></div></div></form><div class="clearfix xiudian-time" ng-init="someVariable = null"><span class=form-label style=font-size:16px>选择有效期</span> <span ng-repeat="type in domainMess.typeList" style=padding-left:10px><input type=radio ng-model=$parent.someVariable id="\'{{type.value}}\'" ng-value=domainMess.type><label for="\'{{type.value}}\'">{{type.label}}<span>秀点</span>{{type.value}}<span>天</span></label></span></div><div class="btn-contain btn-big"><a class="btn-main login" ng-click=submit(domainMess.url,someVariable.value,someVariable.label)>确认</a> <a class="btn-grey0 cancel" ng-click=quXiao()>取消</a></div></div><div class="xiudian clearfix" ng-show=xiudian><div class=chongzhi><h1>秀点不足</h1><p>我的秀点：{{xdCounts}}，需消耗{{count}}秀点</p><div class=erweima><span>微信扫描二维码，</span><span>关注'+your_webname+"微信账号，马上充值</span></div></div><img ng-src={{CLIENT_CDN}}assets/images/111.jpg><div class=know><a class=btn-main ng-click=know()>知道了</a></div></div></div>")}]),angular.module("usercenter/tab/member.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/member.tpl.html",'<div class=m-title><div class="m-icon fl" ng-switch=currentUser.type ng-class="{normal: currentUser.type==1, vip: currentUser.type==3, server: currentUser.type==4, \'com-free\': (currentUser.type==2 || currentUser.type==5) && !currentUser.memberType, \'com-base\': (currentUser.type==2) && (currentUser.memberType == 1 || currentUser.memberType == 6), \'com-pri\': (currentUser.type==2) && (currentUser.memberType == 2 || currentUser.memberType == 7), \'com-tour\': (currentUser.type==2) && (currentUser.memberType == 3 || currentUser.memberType == 8), \'com-pro\': (currentUser.type==2) && (currentUser.memberType == 4 || currentUser.memberType == 9), \'com-base-child\': (currentUser.type==21 || currentUser.type==51)}"><span class=eqf-nomarluser ng-switch-when=1></span> <span class=eqf-vipuser ng-switch-when=3></span> <span class=eqf-companyuser ng-switch-when=5></span> <span class="eqf-companyuser free-companyuser" ng-show=!currentUser.memberType ng-switch-when=2></span> <span class="eqf-companyuser base-companyuser" ng-show="currentUser.memberType==\'1\' || currentUser.memberType==\'6\' " ng-switch-when=2></span> <span class="eqf-companyuser pri-companyuser" ng-show="currentUser.memberType==\'2\' || currentUser.memberType==\'7\'" ng-switch-when=2></span> <span class="eqf-companyuser pro-companyuser" ng-show="currentUser.memberType==\'3\' || currentUser.memberType==\'8\'" ng-switch-when=2></span> <span class="eqf-companyuser pro-companyuser" ng-show="currentUser.memberType==\'4\' || currentUser.memberType==\'9\'" ng-switch-when=2></span> <span class="eqf-companyuser free-companyuser" ng-switch-when=21></span> <span class="eqf-companyuser free-companyuser" ng-switch-when=51></span> <span class=eqf-serviceuser ng-switch-when=4></span></div><div class=m-detail><div class=m-type> {{userType}}&nbsp;&nbsp;{{userPay}}</div><div class=pt20><span class=mr20>开通时间：{{currentUser.joinTime || currentUser.regTime | date:\'yyyy年MM月dd日 HH:mm\'}}</span> <span ng-show="currentUser.expiryTime && currentUser.memberType">到期时间：{{ currentUser.expiryTime | date:\'yyyy年MM月dd日 HH:mm\'}}</span></div></div></div><div class=m-cont><div class="m-title xd-cont"><div class="m-icon fl xd-icon"><span class=eqf-XD></span></div><div class=m-detail><div class="fr xd-act"><a ng-click=buyXd() ng-if="user.type == 21 && userPermit.indexOf(\',1401,\')>=0 || user.type !=21" data-event=7208><span class=eqf-XD></span> <span>购买秀点</span></a> <a ng-click=transferXd() ng-if="user.type == 21 && userPermit.indexOf(\',1402,\')>=0 || user.type !=21" data-event=7209><span class=eqf-scene-gift></span> <span>转送秀点</span></a> </div><div class=m-type>{{userXd}}</div><div class=pt20><span class="first-col mr20">我的秀点</span> <span>购买秀点，可完全去掉场景上的'+your_webname+'品牌标记</span></div></div><div class=xd-panel><div class="xd-tab p20"><div class=btn-group><a class="btn btn-default button-sm background-color-width-change" ng-class="{active: !xdType }" ng-click="getXdLog(null, 1)">秀点明细</a></div></div><table class="table table-hover"><thead><tr><th class="col-sm-4 text-left">时间</th><th class="col-sm-4 text-left" ng-show=!xdType>支出/收入</th><th class="col-sm-4 text-left" ng-show="xdType==2">支出</th><th class="col-sm-4 text-left" ng-show="xdType==1">收入</th><th class="col-sm-4 text-left">使用详情</th></tr></thead><tbody><tr ng-repeat="xd in xdLogs"><td class=text-left>{{xd.optTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</td><td class=text-left>{{xd.xd}}</td><td class=text-left>{{xd.remark}}</td></tr></tbody></table></div><div ng-show="totalItems>10" class="page-turn clearfix"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=10 total-items=totalItems ng-model=$parent.currentPage ng-change="pageChanged(xdType, currentPage)" boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(xdType, toPage) : null"><span class=fl>页</span> <a ng-click="pageChanged(xdType, toPage)" class=go>确定</a></div></div></div></div>')}]),angular.module("usercenter/tab/message.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/message.tpl.html",'<div class=message-contain><div class="mes-header text-right pb20"><a class=reject-issue href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=890" target=_blank>审核问题</a> <a ng-show="newMsgs.length > 0" ng-click=setRead(newMsgs)>全部设为已读</a></div><div class="message-panel clearfix" ng-repeat="newMsg in newMsgs"><div class="mes-content mes-type col-sm-2" ng-class="{new_msg: newMsg.status == 1,yidu_msg: newMsg.status == 2}"><span ng-class="{\'eqf-voice\': newMsg.bizType==1,\'eqf-fobden2\': newMsg.bizType==2, \'eqf-star\': newMsg.bizType == 3}"></span> {{newMsg.type}}</div><div class="mes-content col-sm-7" ng-bind-html=newMsg.content></div><div class="mes-content col-sm-3 text-right">{{newMsg.sendTime | date:\'yyyy-MM-dd HH:mm:ss\'}}</div></div><div class=mt20 ng-show="newMsgs.length == 0">您暂时还没有消息！</div><div class="clearfix mt20" ng-show="msgCount > 5"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=5 items-per-page=pageSize total-items=msgCount ng-model=currentPage.msgCurrentPage boundary-links=true rotate=true num-pages=msgNumPages></pagination><div class=current_page><input type=text ng-model=toPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage, \'msgCurrentPage\') : null"> <a ng-click="pageChanged(toPage, \'msgCurrentPage\')" class=go>GO</a> <span>当前</span> : {{currentPage.msgCurrentPage}} / {{msgNumPages}} <span>页</span></div></div></div>')}]),angular.module("usercenter/tab/privilege.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/privilege.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div class=privilege-contain><div class=info><div class=versions><div class=my-head></div><div class=content-v><div class=eqf-top-contact></div><div class=des><h2 class=text-left style=padding-bottom:5px>个人会员</h2><h5>提供丰富的素材和模板</h5><h5>助力快速完成创作</h5></div></div><div class=btn-contain><a class="btn btn-primary" ng-if=!user ng-click="openAuth(\'register\')">立即注册</a></div></div><div class="versions ml20"><div class=company-head></div><div class=content-v><div class=eqf-huangguan></div><div class=des><h2 class=text-left style=padding-bottom:5px>企业会员</h2><h5>在丰富的素材和模板的基础上</h5><h5>提供全面便捷的推广渠道</h5><h5>助力企业自我营销和宣传</h5></div></div><div class=btn-contain><a class="btn btn-primary" ng-if=!user ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-primary" ng-if="user && user.type==1" ng-click=upgradeCompany()>免费升级</a></div></div></div><div class=detail-con><table class="table table-bordered detail tab-box-shadow"><tr class=thead><td colspan=2 style="background-color: #08a1ef;border:none"></td><td colspan=2 style="background-color: #76838f;border:none"></td><td colspan=4 style="background-color: #f2a653;border:none"></td></tr><tr><td colspan=2 class=no-lborder style=width:460px;height:70px>服务内容</td><td colspan=2 style=width:240px>免费版</td><td colspan=4 style=width:480px;font-size:12px class=no-rborder>付费版<a class=pl20 href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324" target=_blank><ins>购买前必读</ins></a></td></tr><tr class=user><td colspan=2 style=padding-top:0 class=no-lborder></td><td class=normarl><i class=eqf-nomarluser></i>个人会员</td><td class=free-com><i class=eqf-companyuser></i>免费企业会员</td><td class=exp-com><i class=eqf-companyuser></i>企业体验版</td><td class=sen-com><i class=eqf-companyuser></i>企业基础版</td><td class=imag-com><i class=eqf-companyuser></i>企业标准版</td><td class="no-rborder pro-com"><i class=eqf-companyuser></i>企业高级版</td></tr><tr><td rowspan=2 class=no-lborder>近期活动</td><td class="bg1 ltd">购买会员赠送秀点</td><td class="bg2 eqf-wrong"></td><td class="bg1 eqf-wrong"></td><td class="bg2 title1" style="background-color: #eff2f4">100点</td><td class="bg1 eqf-wrong"></td><td class="bg2 eqf-wrong"></td><td class="bg1 no-rborder eqf-wrong"></td></tr><tr><td class=ltd>赠送免费购买收费样例次数</td><td class="bg1 eqf-wrong"></td><td class=eqf-wrong></td><td class="bg1 eqf-wrong"></td><td class="">送15次</td><td class=bg1>送25次</td><td class=no-rborder>送60次</td></tr><tr><td rowspan=4 class=no-lborder>平台标识</td><td class="bg1 ltd">使用技术支持底标(15秀点/个)</td><td class=bg2>全价</td><td class=bg1>免费</td><td class=bg2>免费</td><td class=bg1>免费</td><td class=bg2>免费</td><td class="bg1 no-rborder">免费</td></tr><tr><td class=ltd>使用联合底标（30秀点/个）</td><td class=bg1>全价</td><td class="">免费</td><td class=bg1>免费</td><td class="">免费</td><td class=bg1>免费</td><td class=no-rborder>免费</td></tr><tr><td class="ltd bg1">去除平台标识(100秀点/个)</td><td class=bg2>全价</td><td class=bg1>全价</td><td class=bg2>9.5折</td><td class=bg1>送10次<span style="font-size: 10px">(之后8折)</span></td><td class=bg2>送50次<span style="font-size: 10px">(之后8折)</span></td><td class="bg1 no-rborder">送200次<span style="font-size: 10px">(之后8折)</span></td></tr><tr><td class=ltd>自定义载入图(100秀点/个)</td><td class="bg1 eqf-wrong"></td><td class="">全价</td><td class=bg1>9.5折</td><td class="">送5次<span style="font-size: 10px">(之后8折)</span></td><td class=bg1>送25次<span style="font-size: 10px">(之后8折)</span></td><td class=no-rborder>送100次<span style="font-size: 10px">(之后8折)</span></td></tr><tr><td class=no-lborder rowspan=6>产品功能</td><td class="ltd bg1">子账号(增加子账号500秀点/10个)</td><td class="bg2 eqf-wrong"></td><td class=bg1>3</td><td class=bg2>5</td><td class=bg1>10</td><td class=bg2>50</td><td class="bg1 no-rborder">100</td></tr><tr><td class=ltd>创建展示个数</td><td class=bg1>不限制</td><td class="">不限制</td><td class=bg1></td><td class="">不限制</td><td class=bg1>不限制</td><td class=no-rborder>不限制</td></tr><tr><td class="ltd bg1">企业样例和模板</td><td class="eqf-wrong bg2"></td><td class="eqf-yes2 bg1"></td><td class="eqf-yes2 bg2"></td><td class="eqf-yes2 bg1"></td><td class="eqf-yes2 bg2"></td><td class="eqf-yes2 no-rborder bg1"></td></tr><tr><td class=ltd>编辑功能</td><td class=bg1>基础</td><td class="">高级</td><td class=bg1>高级</td><td class="">高级</td><td class=bg1>高级</td><td class=no-rborder>高级</td></tr><tr><td class="ltd bg1">流量统计</td><td class=bg2>基础</td><td class=bg1>基础</td><td class=bg2>高级</td><td class=bg1>高级</td><td class=bg2>高级</td><td class="bg1 no-rborder">高级</td></tr><tr><td class=ltd>数据管理</td><td class=bg1>基础</td><td class="">基础</td><td class=bg1>高级</td><td class="">高级</td><td class=bg1>高级</td><td class=no-rborder>高级</td></tr><tr><td class=no-lborder rowspan=10>高级服务</td><td class="ltd bg1">场景访问域名绑定(100秀点/月)</td><td class="bg2 eqf-wrong"></td><td class="eqf-wrong bg1"></td><td class=bg2>100秀点/月</td><td class=bg1>免费</td><td class=bg2>免费</td><td class="bg1 no-rborder">免费</td></tr><tr><td class=ltd>VIP专属人工客服</td><td class="bg1 eqf-wrong"></td><td class=eqf-wrong></td><td class="bg1 eqf-wrong"></td><td class=eqf-yes2></td><td class="bg1 eqf-yes2"></td><td class="eqf-yes2 no-rborder"></td></tr><tr><td class="ltd bg1">场景回收站功能</td><td class="bg2 eqf-wrong"></td><td class=bg1>3天</td><td class=bg2>7天</td><td class=bg1>7天</td><td class=bg2>15天</td><td class="bg1 no-rborder">15天</td></tr><tr><td class=ltd>场景前置审核</td><td class="bg1 eqf-wrong"></td><td class=eqf-wrong></td><td class="bg1 eqf-wrong"></td><td class=eqf-yes2></td><td class="bg1 eqf-yes2"></td><td class="eqf-yes2 no-rborder"></td></tr><tr><td class="ltd bg1">驳回加急审核</td><td class="eqf-wrong bg2"></td><td class="eqf-wrong bg1"></td><td class="eqf-wrong bg2"></td><td class="eqf-yes2 bg1"></td><td class="eqf-yes2 bg2"></td><td class="eqf-yes2 no-rborder bg1"></td></tr><tr><td class=ltd>审核关闭提醒</td><td class=bg1>10秀点/月</td><td class="">10秀点/月</td><td class=bg1>10秀点/月</td><td class="">免费</td><td class=bg1>免费</td><td class=no-rborder>免费</td></tr><tr><td class="ltd bg1">场景保障服务</td><td class=bg2>100秀点/30次</td><td class=bg1>100秀点/30次</td><td class=bg2>100秀点/30次</td><td class=bg1>赠送100次</td><td class=bg2>赠送200次</td><td class="bg1 no-rborder">赠送300次</td></tr><tr><td class=ltd>访问CDN加速</td><td class="bg1 eqf-wrong"></td><td class=eqf-yes2></td><td class=bg1>专属CDN加速</td><td class="">专属CDN加速</td><td class=bg1>专属CDN加速</td><td class=no-rborder>专属CDN加速</td></tr><tr><td class="bg1 ltd">第三方统计</td><td class="eqf-wrong bg2"></td><td class="eqf-wrong bg1"></td><td class="eqf-wrong bg2"></td><td class=bg1>基础</td><td class=bg2>高级</td><td class="bg1 no-rborder">高级</td></tr><tr><td class=ltd>企业可以申请举办活动</td><td class="bg1 eqf-wrong"></td><td class=eqf-wrong></td><td class="bg1 eqf-yes2"></td><td class=eqf-yes2></td><td class="bg1 eqf-yes2"></td><td class="eqf-yes2 no-rborder"></td></tr><tr><td class=no-lborder>付费模式</td><td class="bg1 ltd">服务付费方式</td><td class=bg2>免费注册使用</td><td class=bg1>免费注册升级</td><td class=bg2>99元/月</td><td class=bg1>3000元/年</td><td class=bg2>6800元/年</td><td class="bg1 no-rborder">15600元/年</td></tr><tr ng-show=oldVersonUser><td class="no-lborder no-bborder">升级模式</td><td class=no-bborder></td><td class="bg1 no-bborder"></td><td class=no-bborder></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-disabled=true>暂停升级</a></td><td class=no-bborder><a class="btn btn-sm btn-primary" ng-disabled=true>升级</a></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-disabled=true>升级</a></td><td class="no-rborder no-bborder"><a class="btn btn-sm btn-primary" ng-disabled=true>升级</a></td></tr><tr ng-show=!oldVersonUser><td class="no-lborder no-bborder">升级模式</td><td class=no-bborder></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-if=!user ng-click="openAuth(\'register\')">立即注册</a></td><td class=no-bborder><a class="btn btn-sm btn-primary" ng-if=!user ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type == 1" ng-click=upgradeCompany()>免费升级</a></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-if=!user ng-disabled=true>立即注册</a> <a class="btn btn-sm btn-primary" ng-if="user && !(user.type==2 || user.type==1 || user.type==21)" ng-disabled=true>暂停升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-disabled=true>暂停升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && !user.memberType" ng-disabled=true>暂停升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType && user.memberType!=6" ng-disabled=true>暂停升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==6" ng-disabled=true>暂停续费</a></td><td class=no-bborder><a class="btn btn-sm btn-primary" ng-if=!user ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-sm btn-primary" ng-disabled=true ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click=upgradeCompany()>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && (!user.memberType || user.memberType==6)" ng-click=upgradeAccount(7)>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && (user.memberType==8 || user.memberType==9)" ng-disabled=true>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==7" ng-click=upgradeAccount(7)>继续购买</a></td><td class="bg1 no-bborder"><a class="btn btn-sm btn-primary" ng-if=!user ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-sm btn-primary" ng-disabled=true ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click=upgradeCompany()>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType != 8 && user.memberType != 9" ng-click=upgradeAccount(8)>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==9" ng-disabled=true>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==8" ng-click=upgradeAccount(8)>继续购买</a></td><td class="no-rborder no-bborder"><a class="btn btn-sm btn-primary" ng-if=!user ng-click="openAuth(\'registerEnterprise\')">立即注册</a> <a class="btn btn-sm btn-primary" ng-disabled=true ng-if="user && !(user.type==2 || user.type==1 || user.type==21)">升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==1" ng-click=upgradeCompany()>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType!=9" ng-click=upgradeAccount(9)>升级</a> <a class="btn btn-sm btn-primary" ng-if="user && user.type==2 && user.memberType==9" ng-click=upgradeAccount(9)>继续购买</a></td></tr></table><div class="more-info flash" ng-click="showMoreInfo=true;" ng-hide=showMoreInfo><div class=icon><i class=eqf-right></i></div><span class=word>合作<br>会员</span></div><table class="detail1 table-bordered table" ng-show=showMoreInfo><tr><td colspan=2 style=height:5px;background-color:#ff5448;padding:0;border:none></td></tr><tr><td colspan=2 style=height:70px>需申请</td></tr><tr class=user><td class="no-rborder service"><i class=eqf-serviceuser></i>服务商</td><td class=love-com><i class=eqf-loveheart></i>公共账号</td></tr><tr><td class="bg2 eqf-wrong"></td><td class="bg1 eqf-wrong"></td></tr><tr><td class="bg1 eqf-wrong"></td><td class=eqf-wrong></td></tr><tr><td class=bg2>免费</td><td class="bg1 eqf-wrong"></td></tr><tr><td class=bg1>免费</td><td class="">免费</td></tr><tr><td class=bg2 style=height:67px>全价<br></td><td class="bg1 eqf-wrong"></td></tr><tr><td class="bg1 eqf-wrong" style=height:67px></td><td class="">专属免费</td></tr><tr><td class="bg2 eqf-wrong"></td><td class=bg1>100</td></tr><tr><td class=bg1>不限制</td><td class="">不限制</td></tr><tr><td class="bg2 eqf-wrong"></td><td class="bg1 eqf-yes2"></td></tr><tr><td class=bg1>高级</td><td class="">高级</td></tr><tr><td class=bg2>高级</td><td class=bg1>高级</td></tr><tr><td class=bg1>高级</td><td class="">高级</td></tr><tr><td class=bg2>100秀点/月</td><td class=bg1>免费</td></tr><tr><td class="bg1 eqf-wrong"></td><td class=eqf-yes2></td></tr><tr><td class=bg2>3天</td><td class=bg1>15天</td></tr><tr><td class="bg1 eqf-wrong"></td><td class=eqf-yes2></td></tr><tr><td class="bg2 eqf-wrong"></td><td class="bg1 eqf-yes2"></td></tr><tr><td class="bg1 eqf-wrong"></td><td class="">免费</td></tr><tr><td class=bg2>100秀点/30次</td><td class=bg1>100秀点/30次</td></tr><tr><td class="bg1 eqf-yes2"></td><td class="">专属CDN加速</td></tr><tr><td class="bg2 eqf-wrong"></td><td class=bg1>高级</td></tr><tr><td class="eqf-wrong bg1"></td><td class=eqf-yes2></td></tr><tr><td class=bg2>免费申请合作</td><td class=bg1>免费申请合作</td></tr><tr><td class=bg1><a class="btn btn-sm btn-primary" target=_blank ng-href=active>了解详情</a></td><td class=""><a class="btn btn-sm btn-primary" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=16855&extra=" target=_blank>了解详情</a></td></tr></table><div ng-show=showMoreInfo class=right-div>&nbsp;</div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("usercenter/tab/reset.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/reset.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=quXiao()><span aria-hidden=true>×</span></button><h4 class=modal-title>{{title || \'修改密码\'}}</h4></div><div class=modal-body><form class=form-horizontal><div class=form-group><label for=inputMail class="col-sm-3 text-right">用户名</label><div class=col-sm-7><span>{{userinfo.loginName}}</span></div></div><div class=form-group><label for=inputPassword3 class="col-sm-3 control-label">原始密码</label><div class=col-sm-7><input type=password class=form-control ng-model=password.old placeholder=原始密码 ng-keyup="$event.keyCode == 13 ? reset() : null" ng-class="{error: oldPassError}" ng-blur=checkOldPassword() class=form-control><p class=error ng-show=oldPassError>{{oldPassError}}</p></div></div><div class=form-group><label for=inputNewPass class="col-sm-3 control-label">新密码</label><div class=col-sm-7><input id=inputNewPass type=password class=form-control ng-model=password.newPw placeholder="密码6~16个字符(英文字母或数字 区分大小写)" ng-keyup="$event.keyCode == 13 ? reset() : null" ng-class="{error: passError}" ng-blur=checkPassword() required><p class=error ng-show=passError>{{passError}}</p></div></div><div class=form-group><label for=inputRepeatPassword class="control-label col-sm-3">确认密码</label><div class=col-sm-7><input id=inputRepeatPassword type=password class=form-control ng-model=password.confirm placeholder=确认密码 ng-keyup="$event.keyCode == 13 ? reset() : null" ng-blur=checkRepeatPassword()><p class=error ng-show=rPassError>{{rPassError}}</p></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=quXiao()>取消</a> <a class="btn btn-primary" ng-click=reset() data-event=7215>保存</a></div>')}]),angular.module("usercenter/tab/trash.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/tab/trash.tpl.html",'<div class=m-title><div class="m-icon fl red-bg"><span class=eqf-recele></span></div><div class=m-detail><div class=m-type>{{historyTab.pages.totalItems}}</div><div class="pt20 clearfix"><span style=float:right><em ng-if="sceneHistory == \'scene\'">企业会员保存3天</em><em ng-if="sceneHistory == \'image\'">个人会员、企业会员保存3天</em><a href=/#/privilege class=green data-event=7221>立即升级</a></span> <span class=mr20><em ng-if="sceneHistory == \'scene\'">已删除场景</em><em ng-if="sceneHistory == \'image\'">已删除素材</em></span></div></div></div><ul class="nav nav-tabs clearfix history-nav"><li role=presentation ng-class="{active:sceneHistory == \'scene\'}"><a ng-click="getMyScenes(1,\'scene\')">场景回收站</a></li><li role=presentation ng-class="{active:sceneHistory == \'image\'}"><a ng-click="getImages(1,\'image\')">素材回收站</a></li></ul><div class=history-scene ng-show="sceneHistory == \'scene\'"><ul class=clearfix ng-show="myScenes && myScenes.length >0"><li ng-repeat="scene in myScenes track by $index"><div class=scene-cover><img ng-src="{{PREFIX_FILE_HOST + scene.cover}}" width=235px height="235px"><div class="scene-operate mask"><div class=operate><span class="hint--top hint--rounded" ng-click="deleteScene(scene.id,\'false\')" data-hint=彻底删除><em class=eqf-scene-delete></em></span> <span class="hint--top hint--rounded" ng-click=revoke(scene.id) data-hint=还原><em class=eqf-bg></em></span></div><div class=scene-time>{{scene.history}}天</div></div></div><div class="scene-name ellipsis">{{scene.name}}</div></li></ul><div style=text-align:center class="mt20 mb20" ng-show="myScenes.length <= 0"><h2 class="mb20 mt20">您的回收站目前为空</h2><img ng-src="{{CLIENT_CDN}}assets/images/kong.svg"></div></div><div class=history-image style=min-height:300px ng-show="sceneHistory == \'image\'"><ul class=clearfix ng-show="images && images.length > 0"><li ng-repeat="img in images track by $index"><img ng-src="{{PREFIX_FILE_HOST + img.tmbPath}}" responsive-image><div class="image-operate mask"><div class=operate><span class="hint--top hint--rounded" ng-click="deleteImg(img.id,\'false\')" data-hint=彻底删除><em class=eqf-scene-delete></em></span> <span class="hint--top hint--rounded" ng-click=imageRevoke(img.id) data-hint=还原><em class=eqf-bg></em></span></div><div class=scene-time>{{img.history}}天</div></div></li></ul><div style=text-align:center class="mt20 mb20" ng-show="images.length <= 0"><h2 class="mb20 mt20">您的回收站目前为空</h2><img ng-src="{{CLIENT_CDN}}assets/images/kong.svg"></div></div><div class="clearfix page-turn" ng-show="historyTab.pages.totalItems > historyTab.pages.pageSize"><pagination style="float: left" first-text=首页 last-text=尾页 previous-text=&lsaquo; next-text=&rsaquo; max-size=10 items-per-page=historyTab.pages.pageSize total-items=historyTab.pages.totalItems ng-model=historyTab.pages.currentPage ng-change=pageChanged(historyTab.pages.currentPage) boundary-links=true rotate=true num-pages=numPages></pagination><div class=current_page><span class=fl>到</span> <input type=text ng-model=historyTab.pages.currentPage ng-keyup="$event.keyCode == 13 ? pageChanged(toPage) : null"><span class=fl>页</span> <a ng-click=pageChanged(toPage) class=go>确定</a></div></div>')}]),angular.module("usercenter/transfer.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/transfer.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>转送秀点</h4></div><div class=modal-body><form class=form-horizontal><div class=form-group><label class="col-sm-3 text-right">我的秀点</label><div class=col-sm-7><span>{{xdCount}}</span><span>个</span></div></div><div class=form-group><label for=inputMail class="col-sm-3 control-label">转送账号</label><div class=col-sm-7><input id=inputMail type=text class=form-control ng-model=userXd.toUser placeholder=请填写要转送的账号 ng-class="{error: mailFormatErr}" ng-blur=checkEmailFormat(userXd)><p class=error ng-show=mailFormatErr>{{mailFormatErr}}</p></div></div><div class=form-group><label for=inputPass class="col-sm-3 control-label">转送数目</label><div class=col-sm-7><input id=inputPass type=text class=form-control maxlength=12 ng-model=userXd.xdCount placeholder=请填写转送秀点数目 ng-class="{error: xdFormatErr}" ng-blur=checkXdFormat(userXd)><p class=error ng-show=xdFormatErr>{{xdFormatErr}}</p><p class=error ng-show=relErr>{{relErr}}</p></div></div></form></div><div class=modal-footer><a class=modal-cancle ng-click=cancel()>取消</a> <a type=button class="btn btn-primary" ng-click=confirm()>确认</a></div>')}]),angular.module("usercenter/upgrade.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/upgrade.tpl.html",'<div class=modal-header><button type=button class=close data-dismiss=modal aria-label=Close ng-click=cancel()><span aria-hidden=true>×</span></button><h4 class=modal-title>购买方式选择</h4></div><div class=modal-body><div style="font-size: 16px" class="text-center pb20">请选择购买方式</div><div class="pt20 pb20">选择线上购买，简单快捷</div><div style="padding-bottom: 50px"><a style="width: 110px" type=button class="btn btn-primary" ng-click=confirm()>在线购买</a></div><div style="padding-bottom: 30px"><div style="width:200px;border-bottom: 1px solid #ccd5db;margin-top: 8px" class=fl></div><div style="position: absolute;margin-left: 250px">线下支付</div><div style="width:200px;border-bottom: 1px solid #ccd5db;margin-top: 8px" class="fr mt10"></div></div><div class="pt20 pb20">选择所在地服务商，获得更多本地支持／服务</div><ul style="height: 100px;width: 520px"><li class=fl style="width:130px; margin-bottom: 20px" ng-repeat="agent in agents"><a style=width:110px type=button class="btn btn-border" ng-click=openAgentModal(agent);>{{agent.area}}</a></li></ul></div><div class=modal-footer><div class=fl>更多服务商正在招募中，<a style="color: #08a1ef" href=/region target=_blank><ins>了解详情</ins></a></div></div>')}]),angular.module("usercenter/upgradeTip.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/upgradeTip.tpl.html",'<div class=modal-header><span class="glyphicon glyphicon-exclamation-sign"></span> <span>{{msgObj.title || \'提示\'}}</span></div><div class=modal-body><div class=msg>由于涉及到的会员权益较多、金额较大，为保障会员利益请联系我们进行线下支付并升级!联系电话：010-58813666</div></div><div class="btn-contain btn-small"><a class="btn btn-primary" href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=12324&extra=page%3D1" target=_blank>了解详情</a> <a ng-click=cancel(); class="btn btn-primary">我知道了</a></div>')}]),angular.module("usercenter/userCenterGuid.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/userCenterGuid.tpl.html",'<div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0;z-index:10000" ng-click=showGuide() ng-show=isFirstLogin ng-controller=userCenterGuideCtrl id=companyVip><div class=bind-email-guide ng-if=isCompanyVip><h1><em>亲爱的'+your_webname+"会员：</em><span ng-click=showNextGuide()>&times;</span></h1><p>恭喜您成为"+your_webname+"企业成员，现在您将尊享以下特权：</p><ul class=guide-describe><li><ul><li style=list-style:disc;padding-bottom:15px>创建子账号、管理子账号，做好企业场景安全</li><li style=list-style:disc;padding-bottom:15px>创建企业独享的场景模板、页面模板</li><li style=list-style:disc;padding-bottom:15px>15秀点“"+your_webname+'技术支持”底标免费用</li><li style=list-style:disc;padding-bottom:15px>30秀点品牌联合底标免费用</li><li style=list-style:disc;padding-bottom:15px>场景加载LOGO自定义（100秀点付费）</li><li><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=77" target=_blank>了解详情</a></li></ul></li></ul><div class=user-select><p><input type=checkbox style="margin: 4px; font-size:14px" checked ng-click="isShow()"><em>不再提示</em></p><button class="btn btn-primary" style="line-height: 20px" ng-click=showNextGuide()>知道了</button></div></div><div class=bind-email-guide ng-if=!isCompanyVip><h1><em>亲爱的'+your_webname+"会员：</em><span ng-click=showNextGuide()>&times;</span></h1><p>感谢您成为"+your_webname+"会员，现在您可以免费升级为企业会员，升级后您将尊享以下特权：</p><ul class=guide-describe><li><ul><li style=list-style:disc;padding-bottom:15px>创建子账号、管理子账号，做好企业场景安全</li><li style=list-style:disc;padding-bottom:15px>创建企业独享的场景模板、页面模板</li><li style=list-style:disc;padding-bottom:15px>15秀点“"+your_webname+'技术支持”底标免费用</li><li style=list-style:disc;padding-bottom:15px>30秀点品牌联合底标免费用</li><li style=list-style:disc;padding-bottom:15px>场景加载LOGO自定义（100秀点付费）</li><li class=pb20><a href="http://bbs.eqxiu.com/forum.php?mod=viewthread&tid=77" target=_blank>了解详情</a></li></ul></li></ul><div class=user-select><p><input type=checkbox style="margin: 4px; font-size:14px" ng-click="isShow()"><em>不再提示</em></p><button class="btn btn-primary" style="line-height: 20px" ng-click=showNextGuide()>知道了</button></div></div></div>')}]),angular.module("usercenter/usercenter.tpl.html",[]).run(["$templateCache",function(e){e.put("usercenter/usercenter.tpl.html",'<div ng-include="\'header.tpl.html\'"></div><div id=main class=min_contain><div ng-include="\'sysmessage.tpl.html\'"></div><div class=info-show><div class=same-content><div class=info-area><div class=opera-userinfo><div ng-if="false && applyInfo != 4 && ((user.type == 21 && userPermit.indexOf(\',1406,\')>=0) || user.type !=21)" class="scene-oper fr" ng-click=editMessage()><a class="btn btn-border opa-btn background-color-width-change"><span class=eqf-xiuziti></span> &nbsp;编辑信息</a></div><div ng-if="userinfo.type == 4 && (applyInfo == 4 || applyInfo == 2)" class="scene-oper fr" style="font-size:12px;color:rgba(255, 255, 255, 0.6)">服务商账号审核中</div></div><div class="u-photo fl" ng-mouseenter="showMask=true" ng-mouseleave="showMask=false"><div class=p-mask ng-show="showMask && ((user.type == 21 && userPermit.indexOf(\',1406,\')>=0) || user.type !=21)"><a ng-click=customerUpload()><em class="eqf-top-pic background-color-width-change" style=font-size:18px></em> <span>更换</span></a></div><div ng-class="{\'p-svg\': !userinfo.headImg}"><span class=eqf-top-contact ng-show=!userinfo.headImg></span></div><img ng-src="{{thirdHead ? userinfo.headImg : PREFIX_FILE_HOST + userinfo.headImg}}" ng-show=userinfo.headImg></div><div class=u-detail><div class=u-name><span><em class=pr20>{{userinfo.nick}}</em><em style="font-size:12px;color:rgba(255, 255, 255, 0.6)">{{userinfo.loginName}}</em></span></div><div class="u-col pt20"><div class=first-col style=display:inline-block>账号类型： <span ng-show="userinfo.type == 1">个人用户</span> <span ng-show="userinfo.type == 2">企业用户</span> <span ng-show="userinfo.type == 21">企业子用户</span> <span ng-show="userinfo.type == 5">公共账号</span> <span ng-show="userinfo.type == 51">公共子用户</span> <span ng-show="userinfo.type == 3">高级用户</span> <span ng-show="userinfo.type == 4">服务商用户</span> <span ng-show="userinfo.type == 99">运营用户</span></div></div><div class=u-col><div class="first-col fl">我的秀点：{{userXd}}</div><div ng-if="user.type == 21 && userPermit.indexOf(\',1401,\')>=0 || user.type !=21"><a ng-click=buyXd() data-event=7205><ins>购买秀点</ins></a></div></div><div class=u-col><div class="first-col fl">未读消息：<a href=/#/message target=_blank>{{newMsgCount}}&nbsp;&nbsp;</a>条</div></div></div></div><div class=spread-tab><ul class="clearfix tab-line"><li><a ng-class="{active: viewControl.tab == \'member\'}" ng-click="showTab(\'member\');" data-event=7206>会员服务</a></li><li><a ng-class="{active: viewControl.tab == \'account\'}" ng-click="showTab(\'account\');" data-event=7211>账号安全</a></li><li ng-show="userinfo.type == 2 || userinfo.type == 5 || (userinfo.type == 21 && userPermit.indexOf(\',1405,\')>=0)"></ul></div></div></div><div class="same-content u-content min_contain"><div ng-if="viewControl.tab == \'member\'" ng-controller=MemberCtrl><div ng-include="\'usercenter/tab/member.tpl.html\'"></div></div><div ng-if="viewControl.tab == \'account\'" ng-controller=UsercenterAccountCtrl><div ng-include="\'usercenter/tab/account.tpl.html\'"></div></div><div ng-if="viewControl.tab == \'children\'" ng-controller=ChildrenCtrl><div ng-include="\'usercenter/tab/children.tpl.html\'"></div></div><div ng-if="viewControl.tab == \'trash\'" ng-controller=TrashCtrl><div ng-include="\'usercenter/tab/trash.tpl.html\'"></div></div></div></div><div ng-include="\'footer.tpl.html\'"></div>')}]),angular.module("templates-common",["directives/inputColor.tpl.html","directives/lineChart.tpl.html","directives/mapeditor.tpl.html","directives/page-tpl-types.tpl.html","directives/pieChart.tpl.html","directives/select.tpl.html","directives/toolbar.tpl.html","security/login/reset.tpl.html","security/login/toolbar.tpl.html","security/register/companyReg.tpl.html"]),angular.module("directives/inputColor.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/inputColor.tpl.html",'<div class=eqc-input-color ng-style="{backgroundColor: selectColor}"><div x={{x}} y={{y}} ng-model=selectColor colorpicker={{colorMode}} colorpicker-position=right></div><a class=eqf-bg ng-click="selectColor = defaultColor"></a></div>')}]),angular.module("directives/lineChart.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/lineChart.tpl.html",'<canvas id=chart-area width=300 height="300">')}]),angular.module("directives/mapeditor.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/mapeditor.tpl.html",'<div class=col-lg-6><div class=input-group><input type=text class=form-control ng-model=address placeholder=请输入地名> <span class=input-group-btn><button ng-click=searchAddress() class="btn btn-default" type=button><span>搜索</span></button></span></div></div><div id=r-result></div>')}]),angular.module("directives/page-tpl-types.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/page-tpl-types.tpl.html",'<div class=btn-group style="padding: 0"><div class=dropdown><a class="btn dropdown-toggle first-child" data-toggle=dropdown title=页面模板 style="color: #fff">页面模板 &nbsp; <b class=caret></b></a><ul class="dropdown-menu size-menu"><li ng-repeat="type in pageTplTypes"><a ng-href="/#/scene/create/{{type.value}}?pageId=1">{{type.name}}</a></li></ul></div></div>')}]),angular.module("directives/pieChart.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/pieChart.tpl.html",'<canvas id=chart-area width=300 height="300">')}]),angular.module("directives/select.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/select.tpl.html",'<div class=clearfix><div class=eqc-mask ng-click=showList($event)><div class=eqc-name>{{current.name}}</div><span class="more eqf-clickmore"></span></div><div class="eqc-drop-down-list transform-change"><div class=list><div class=eqc-scroll prevent-exception=true disable-mouse=true eqd-scroll={{scrollType}}><ul class=clearfix ng-click=selectItem($event)><li ng-repeat="item in list" ng-class="{active: item == current}" ng-style="{fontFamily: item.fontFamily}" class=eqc-target>{{item.name}}</li></ul></div></div></div></div>')}]),angular.module("directives/toolbar.tpl.html",[]).run(["$templateCache",function(e){e.put("directives/toolbar.tpl.html",'<div class=btn-toolbar id=btn-toolbar data-role=editor-toolbar><div id=fontFamily class=btn-group><div class="dropdown font-dropdown"><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle=dropdown data-hint=秀字体 style=width:90px;font-size:12px><span style="display: inline-block;width: 70px;height: 25px;overflow: hidden" class=setting-fontname>{{defaultFamily}}</span> <b class=caret></b></a><ul class="dropdown-menu fontname-menu font-size-menu family-size-setting" style="max-height: 350px;overflow-y:auto"><li class="moreFont ng-hide"><a class="btn context-gengduo">更多字体</a></li></ul></div></div><div class=btn-group><div class=dropdown><a class="dropdown-toggle first-child hint--bottom hint--rounded text-btn-border" data-toggle=dropdown data-hint=字号 style="width: 60px" ng-init="defaultSize = \'24px\'">{{defaultSize}} <b class=caret></b></a><ul class="dropdown-menu size-menu font-size-menu"><li><a dropdown-toggle data-edit="fontSize 96px">96px</a></li><li><a dropdown-toggle data-edit="fontSize 64px">64px</a></li><li><a dropdown-toggle data-edit="fontSize 48px">48px</a></li><li><a dropdown-toggle data-edit="fontSize 32px">32px</a></li><li><a dropdown-toggle data-edit="fontSize 24px">24px</a></li><li><a dropdown-toggle data-edit="fontSize 20px">20px</a></li><li><a dropdown-toggle data-edit="fontSize 18px">18px</a></li><li><a dropdown-toggle data-edit="fontSize 16px">16px</a></li><li><a dropdown-toggle data-edit="fontSize 14px">14px</a></li><li><a dropdown-toggle data-edit="fontSize 13px">13px</a></li><li><a dropdown-toggle data-edit="fontSize 12px">12px</a></li></ul></div></div><div class=btn-group><div class=dropdown><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle=dropdown data-hint=颜色 style="width: 28px"><span class=text-btn-border-color>A <i class=change-font-btn></i></span></a><ul class="dropdown-menu color-menu"></ul></div></div><div class=btn-group><div class=dropdown><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle=dropdown data-hint=背景颜色 style=width:28px><span class=text-btn-border-bg style=""></span></a><ul class="dropdown-menu bgcolor-menu"></ul></div></div><div class=btn-group><div class="hint--bottom hint--rounded text-btn-border text-style" style="width: 100px"><a class="hint--bottom hint--rounded bolded" dropdown-toggle data-edit=bold data-hint=加粗><i class=eqf-b></i></a> <a class="hint--bottom hint--rounded italic" dropdown-toggle data-edit=italic data-hint=倾斜><i class=eqf-I></i></a> <a class="hint--bottom hint--rounded underline" dropdown-toggle data-edit=underline data-hint=下划线><i class=eqf-U></i></a> <a class="hint--bottom hint--rounded strikeThrough" dropdown-toggle data-edit=strikeThrough data-hint=删除线><i class="eqf-del2 deleteline"></i></a></div></div><div class=btn-group><div class=dropdown><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border testalign" data-toggle=dropdown data-hint=对齐方式 style="width: 60px"><i ng-switch=classTextAlign ng-class="{\'eqf-minddleword\': classTextAlign ==\'eqf-minddleword\',\'eqf-leftword\': (classTextAlign==\'eqf-leftword\' || classTextAlign === undefined), \'eqf-rightword\': classTextAlign==\'eqf-rightword\'}"></i> <b class=caret></b></a><ul class="dropdown-menu size-menu font-size-menu"><li><a dropdown-toggle data-edit=justifyleft data-hint=居左 class="btn hint--bottom hint--rounded"><i class=eqf-leftword></i></a></li><li><a dropdown-toggle data-edit=justifycenter data-hint=居中 class="btn hint--bottom hint--rounded"><i class=eqf-minddleword></i></a></li><li><a dropdown-toggle data-edit=justifyright data-hint=居右 class="btn hint--bottom hint--rounded"><i class=eqf-rightword></i></a></li></ul></div></div><div class=btn-group><div class=dropdown><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border add-icon-font" data-toggle=dropdown data-hint=行高 style="width: 60px" ng-click=editLineHeight()><i class=eqf-linebig></i> <b class=caret></b></a><ul class="dropdown-menu size-menu font-size-menu"><li ng-repeat="lineHeightList in lineHeightLists" class={{lineHeightList.value}}><a dropdown-toggle class="btn hint--bottom hint--rounded" ng-click=adjustLineHeight(lineHeightList.scale)>{{lineHeightList.name}}</a></li></ul></div></div><div class=btn-group><div class=dropdown><a class="dropdown-toggle hint--bottom hint--rounded text-btn-border" data-toggle=dropdown data-hint=调整字间距 style="width: 60px" ng-click=editLetter();><i class="eqf-letter add-icon-font" style="line-height: 28px"></i> <b class=caret></b></a><ul class="dropdown-menu size-menu font-size-menu"><li ng-repeat="wordLineList in wordLineLists" class={{wordLineList.value}}><a dropdown-toggle class="btn hint--bottom hint--rounded" ng-click=increaseWordLine(wordLineList.scale)>{{wordLineList.name}}</a></li></ul></div></div><div class=btn-group ng-show=showLinkOption><div class=dropdown><a class="dropdown-toggle createLink hint--bottom hint--rounded text-btn-border" data-toggle=dropdown data-hint=添加超链接：先选中要加链接的文字 style=width:60px><i class=eqf-link></i> <b class=caret></b></a><ul class="dropdown-menu size-menu font-size-menu"><li><a class="btn hint--bottom hint--rounded" data-hint=添加超链接：先选中要加链接的文字 ng-click=addLinkInputFn();><i class=eqf-link dropdown-toggle></i></a></li><li><a class="btn hint--bottom hint--rounded" data-edit=unlink data-hint=清除超链接><i class=eqf-linkout dropdown-toggle></i></a></li></ul><div class=dropdown id=toolbar-add-linkA><a id=addLinkInputToggle class=dropdown-toggle sceneid={{sceneId}} style="width: 0;height: 0"></a><div class="dropdown-menu input-append" style="min-width: 335px;padding:4px 4px 14px 19px"><div class=span4 style=margin-top:10px><div class=radio-square ng-class="{checked:link==\'external\'}" style=margin-top:8px><em></em> <input name=external ng-model=link class=span2 type=radio value=external></div><span>网站地址：</span> <input class=span2 placeholder=URL sceneid={{sceneId}} type=text data-edit=createLink value="http://" style="border-radius:0px;width:200px;height:35px"></div><div class=span4 style="margin-top: 10px;text-align: right"><a href="http://dwz.cn/" style="text-decoration: underline;color: #08A1EF;margin-right: 30px" target=_blank><span>生成短链接</span></a></div><div class=span4 style="margin-top: 10px"><div class=radio-square ng-class="{checked:link==\'internal\'}" style=margin-top:8px><em></em> <input name=internal ng-model=link class=span2 type=radio value=internal></div><span>场景页面：</span><select class=span2 style="width: 200px;height:35px" ng-options="page.name for page in internalLinks" sceneid={{sceneId}} data-edit=createLink pageid={{internalLink.id}} ng-model=internalLink></select></div><div style=text-align:center><a class="btn btn-primary link-btn-priv" style="color:#FFF; margin-top:20px" dropdown-toggle ng-click=startMoveSelect()>确定</a></div></div></div></div></div><div class=btn-group style="margin-right: 0"><a class="last-child hint--bottom hint--rounded text-btn-border" data-edit=RemoveFormat data-hint=清除样式 style="width: 28px" ng-click=clearStyle()><i class=eqf-clear></i></a></div></div>')}]),angular.module("security/login/reset.tpl.html",[]).run(["$templateCache",function(e){e.put("security/login/reset.tpl.html",'<div class=login-form-section><div class=login-content><form class=loginForm novalidate><div class=section-title><h3>重设密码</h3></div><div class=register-login-content><div class=textbox-wrap><label>新密码：</label><input class=form-control name=pass placeholder=新密码 type=password ng-model=password.newPw placeholder="密码6~16个字符(英文字母或数字 区分大小写)" ng-keyup="$event.keyCode == 13 ? reset() : null" ng-blur=checkPassword() required add-class><div class=error_text><span ng-show=passError>{{passError}}</span></div></div><div class=textbox-wrap><label>确认密码：</label><input class=form-control name=confirmPassword placeholder=确认密码 type=password ng-model=password.confirm ng-keyup="$event.keyCode == 13 ? reset() : null" ng-blur=checkRepeatPassword() required add-class><div class=error_text><span ng-show=rPassError>{{rPassError}}</span></div></div><div class="login-form-action clearfix reset-btn"><a class="btn btn-main blue-btn" ng-click=reset()>确认</a> <a class="btn btn-gray0 reset-btn" ng-click=cancel()>取消</a></div></div></form><div class=login-form-tip><h6>为了获得更好的使用，建议使用谷歌浏览器（chrome）、360浏览器、IE11浏览器。</h6></div></div></div>')}]),angular.module("security/login/toolbar.tpl.html",[]).run(["$templateCache",function(e){e.put("security/login/toolbar.tpl.html",'<ul class="nav pull-right clearfix" style=margin-right:0px;position:relative><li class="" style=width:150px;margin-top:-2px;cursor:pointer ng-show=sendXd.state><img ng-click=openReg() ng-src="{{CLIENT_CDN}}assets/images/xiudianyaoqing.png"></li><li class="mes_con dropdown" style=position:static><div style=position:relative;padding-top:5px class="hint--right hint--rounded" data-hint=消息><a class="mes_content eqf-music dropdown-toggle background-color-width-change" style="position: relative" ng-click=openMsgPanel() data-event=2229></a> <span class=mes_count ng-if=newMsgCount>{{newMsgCount}}</span></div><div class="dropdown-menu msg_pannel box-shadow zoomIn-change" role=menu forbidden-close style="transform-origin: 100% 0"><div class="msg-title clearfix"><div class="panel_title pull-left"><em>您有</em><span class=mes_new>{{newMsgCount}}</span><em>条新消息</em></div><div class="panel_title text-right" style=margin-left:0px><a ng-click=setRead() ng-if=false>设为已读消息</a></div></div><div ng-if="newMsgs.length>0" class="panel_content head_list_newMsg ellipsis" ng-repeat="newMsg in newMsgs"><em ng-class="{new_msg: newMsg.status == 1}"></em><a href=/#/message ng-bind-html=newMsg.content></a></div><div class="panel_more text-center"><a href=/#/message data-event=2230>查看全部消息 >></a></div></div></li><li ng-show=isAuthenticated() ng-class="{\'border-img\': (user.type == 2 || user.type == 5) && showBranchSelect}" class="custom_img background-color-width-change" ng-mouseover="showCode = true" ng-mouseleave="showCode = false"><div class=head_hover><div class=vip_c><a ng-href=/#/usercenter/account><em ng-if=!currentUser.headImg class=eqf-top-contact></em> <img ng-if=currentUser.headImg ng-src="{{currentUser.headImg.indexOf(\'http\') < 0 ? (PREFIX_FILE_HOST + currentUser.headImg):headImg }}"></a></div><div class="head_click box-shadow" ng-show="showCode == true"><div class=itemList><a href=/#/usercenter/member>用户中心</a></div><div class=itemList ng-if="user.type == 2 || user.type == 5"><a href=/#/usercenter/children>账户管理</a></div><div class=itemList ng-if=branchid><a ng-click=changeCurrent()>返回主账号</a></div><div class=itemList><a ng-click=logout()>退出</a></div></div></div></li><li class="head-creat transform-change" ng-if="myScene && !branchid"><a href=/#/scene class=""><em class=eqf-plus2></em></a></li></ul>')}]),angular.module("security/register/companyReg.tpl.html",[]).run(["$templateCache",function(e){e.put("security/register/companyReg.tpl.html",'<div class=companyReg><div class=login-form-section><div class=login-content><form class=form-horizontal style=overflow:hidden><div class=section-title><h3>免费申请企业帐号获得更多功能&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h3></div><div><script load-script ng-src={{validateCodeUrl}}><\/script></div><div id=captcha-box></div><div class=company-user-modal><div class=textbox-wrap><input type=type class=form-control ng-model=companyInfo.mobile placeholder=手机号 ng-class={error:telError} maxlength=20> <span class=tips>必填</span> <span class=error_text><em ng-show=telError>{{telError}}</em></span></div><div class=textbox-wrap><input style=width:350px type=type class=form-control ng-class={error:codeError} placeholder=验证码 ng-model=companyInfo.code ng-blur=checkCode(companyInfo)> <span class=text-center ng-show=!isCodeAccessiable><span class=code ng-click=getImageCode() id=submit-button>获取验证码</span></span> <span class="code enble text-center" ng-show=isCodeAccessiable>{{codeTip}}</span> <span class=tips>必填</span> <span class=error_text><em ng-show=codeError>{{codeError}}</em></span></div><div class=textbox-wrap><input type=type class=form-control ng-class={error:pwdError} placeholder=密码 ng-model=companyInfo.password ng-blur=checkPassword(companyInfo)> <span class=tips>必填</span> <span class=error_text><em ng-show=pwdError>{{pwdError}}</em></span></div><div class=textbox-wrap><input class=form-control type=text ng-model=companyInfo.name placeholder=企业名称 ng-blur=checkName(companyInfo) ng-class="{error:nameError}"> <span class=tips>必填</span> <span class="error_text clearfix"><em ng-show=nameError>{{nameError}}</em></span></div><div class=textbox-wrap><input type=text class=form-control ng-model=companyInfo.email placeholder=企业邮箱 ng-blur=checkEmail(companyInfo) ng-class={error:emailError} maxlength=40> <span class=tips>必填</span> <span class=error_text><em ng-show=emailError>{{emailError}}</em></span></div><div class=textbox-wrap><input type=text class=form-control ng-model=companyInfo.contacts placeholder=联系人 ng-class={error:contactsError} ng-blur=checkcontacts(companyInfo)> <span class=tips>必填</span> <span class=error_text><em ng-show=contactsError>{{contactsError}}</em></span></div><div class=textbox-wrap><input type=text class=form-control ng-model=companyInfo.address placeholder=联系地址 ng-class={error:addressError} ng-blur=checkAddress(companyInfo)> <span class=tips>必填</span> <span class=error_text><em ng-show=addressError>{{addressError}}</em></span></div><span class=error_text><em ng-show=regErr>{{regErr}}</em></span><div class="login-form-action clearfix pb40"><a style=width:500px;height:45px;line-height:33px;font-size:14px class="btn btn-success btn-main" ng-click=register(companyInfo)>注册</a><div class=clearfix style=font-size:12px;padding-top:15px;padding-right:50px><a target=_blank href=/#/privilege style=color:#08a1ef;float:right>了解企业账号详情>></a> <span>已注册过'+your_webname+'帐号，请至<a target=_blank href=/#/privilege style=color:#08a1ef>会员页升级</a></span></div></div></div><div class=stars-active><div class=stars id=stars3></div><div class=stars id=stars4></div></div></form></div><div style=height:200px;text-align:center><img ng-src={{CLIENT_CDN}}assets/images/star3.svg></div></div><footer><div class="same-content clearfix pt20 pb20"><div class=fr style=width:280px><div class=fr style=background-color:#fff><img ng-src={{CLIENT_CDN}}assets/images/home/QRcode.svg width=80px height="80px;"></div><p>微信：扫描二维码咨询在线客服</p><p>邮箱：vip@eqxiu.com</p><p>电话：010-83035157</p><p>工作日：9:00-20:00</p></div><div class=fl><p>?? 2015 eqxiu.com. All rights reserved 北京中网'+your_webname+'科技有限公司</p><p>电信与信息服务业务经营许可证：京ICP证160037号 | 京ICP备15056244号-5 | 京公网安备11010802018300</p><div class=renzheng style=padding-top:10px><a href="https://ss.knet.cn/verifyseal.dll?sn=e14082111011652865izip000000&amp;ct=df&amp;a=1&amp;pa=0.5974755212664604" target=_blank><img ng-src={{CLIENT_CDN}}assets/images/kexin.svg width=80px height=30px></a> <a href=http://bbs.eqxiu.com/portal.php class="btn btn-main" target=_blank>官方论坛</a> <a><em class="eqf-wechat btn btn-primary"></em><div class=weixin style=background-color:#fff><img ng-src={{CLIENT_CDN}}assets/images/home/QRcode.svg width=120px height=120px></div></a> <a href=http://weibo.com/eqxiu target=_blank><em class="eqf-weibo btn out-red"></em></a> <a href="http://bbs.eqxiu.com/plugin.php?id=ljqqqun:qq&amp;type=4" target=_blank style=padding:0 class="qq-group btn-main background-color-width-change clearfix"><em class="eqf-qq btn"></em> <span>QQ群交流</span></a></div></div></div></footer></div>')}])}(window,window.angular)}});